"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([[909077],{15680:(e,a,n)=>{n.d(a,{xA:()=>g,yg:()=>m});var l=n(296540);function t(e,a,n){return a in e?Object.defineProperty(e,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[a]=n,e}function r(e,a){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);a&&(l=l.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),n.push.apply(n,l)}return n}function i(e){for(var a=1;a<arguments.length;a++){var n=null!=arguments[a]?arguments[a]:{};a%2?r(Object(n),!0).forEach((function(a){t(e,a,n[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))}))}return e}function p(e,a){if(null==e)return{};var n,l,t=function(e,a){if(null==e)return{};var n,l,t={},r=Object.keys(e);for(l=0;l<r.length;l++)n=r[l],a.indexOf(n)>=0||(t[n]=e[n]);return t}(e,a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(l=0;l<r.length;l++)n=r[l],a.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(t[n]=e[n])}return t}var s=l.createContext({}),o=function(e){var a=l.useContext(s),n=a;return e&&(n="function"==typeof e?e(a):i(i({},a),e)),n},g=function(e){var a=o(e.components);return l.createElement(s.Provider,{value:a},e.children)},N="mdxType",y={inlineCode:"code",wrapper:function(e){var a=e.children;return l.createElement(l.Fragment,{},a)}},u=l.forwardRef((function(e,a){var n=e.components,t=e.mdxType,r=e.originalType,s=e.parentName,g=p(e,["components","mdxType","originalType","parentName"]),N=o(n),u=t,m=N["".concat(s,".").concat(u)]||N[u]||y[u]||r;return n?l.createElement(m,i(i({ref:a},g),{},{components:n})):l.createElement(m,i({ref:a},g))}));function m(e,a){var n=arguments,t=a&&a.mdxType;if("string"==typeof e||t){var r=n.length,i=new Array(r);i[0]=u;var p={};for(var s in a)hasOwnProperty.call(a,s)&&(p[s]=a[s]);p.originalType=e,p[N]="string"==typeof e?e:t,i[1]=p;for(var o=2;o<r;o++)i[o]=n[o];return l.createElement.apply(null,i)}return l.createElement.apply(null,n)}u.displayName="MDXCreateElement"},527504:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>s,contentTitle:()=>i,default:()=>y,frontMatter:()=>r,metadata:()=>p,toc:()=>o});var l=n(58168),t=(n(296540),n(15680));const r={title:"Insert Into",language:"zh-CN"},i=void 0,p={unversionedId:"data-operate/import/insert-into-manual",id:"version-2.0/data-operate/import/insert-into-manual",title:"Insert Into",description:"\x3c!--",source:"@site/i18n/zh-CN/docusaurus-plugin-content-docs/version-2.0/data-operate/import/insert-into-manual.md",sourceDirName:"data-operate/import",slug:"/data-operate/import/insert-into-manual",permalink:"/zh-CN/docs/2.0/data-operate/import/insert-into-manual",draft:!1,tags:[],version:"2.0",frontMatter:{title:"Insert Into",language:"zh-CN"},sidebar:"docs",previous:{title:"Routine Load",permalink:"/zh-CN/docs/2.0/data-operate/import/routine-load-manual"},next:{title:"MySQL Load",permalink:"/zh-CN/docs/2.0/data-operate/import/mysql-load-manual"}},s={},o=[{value:"\u4f7f\u7528\u573a\u666f",id:"\u4f7f\u7528\u573a\u666f",level:2},{value:"\u57fa\u672c\u539f\u7406",id:"\u57fa\u672c\u539f\u7406",level:2},{value:"\u5feb\u901f\u4e0a\u624b",id:"\u5feb\u901f\u4e0a\u624b",level:2},{value:"\u524d\u7f6e\u68c0\u67e5",id:"\u524d\u7f6e\u68c0\u67e5",level:3},{value:"\u521b\u5efa\u5bfc\u5165\u4f5c\u4e1a",id:"\u521b\u5efa\u5bfc\u5165\u4f5c\u4e1a",level:3},{value:"\u67e5\u770b\u5bfc\u5165\u4f5c\u4e1a",id:"\u67e5\u770b\u5bfc\u5165\u4f5c\u4e1a",level:3},{value:"\u53d6\u6d88\u5bfc\u5165\u4f5c\u4e1a",id:"\u53d6\u6d88\u5bfc\u5165\u4f5c\u4e1a",level:3},{value:"\u53c2\u8003\u624b\u518c",id:"\u53c2\u8003\u624b\u518c",level:2},{value:"\u5bfc\u5165\u547d\u4ee4",id:"\u5bfc\u5165\u547d\u4ee4",level:3},{value:"\u5bfc\u5165\u914d\u7f6e\u53c2\u6570",id:"\u5bfc\u5165\u914d\u7f6e\u53c2\u6570",level:3},{value:"\u5bfc\u5165\u8fd4\u56de\u503c",id:"\u5bfc\u5165\u8fd4\u56de\u503c",level:3},{value:"\u5bfc\u5165\u6700\u4f73\u5b9e\u8df5",id:"\u5bfc\u5165\u6700\u4f73\u5b9e\u8df5",level:2},{value:"\u6570\u636e\u91cf",id:"\u6570\u636e\u91cf",level:3},{value:"\u67e5\u770b\u9519\u8bef\u884c",id:"\u67e5\u770b\u9519\u8bef\u884c",level:3},{value:"\u901a\u8fc7\u5916\u90e8\u8868 Multi-Catalog \u5bfc\u5165\u6570\u636e",id:"\u901a\u8fc7\u5916\u90e8\u8868-multi-catalog-\u5bfc\u5165\u6570\u636e",level:2},{value:"\u521b\u5efa Hive Catalog",id:"\u521b\u5efa-hive-catalog",level:3},{value:"\u5bfc\u5165\u6570\u636e",id:"\u5bfc\u5165\u6570\u636e",level:3},{value:"\u6ce8\u610f\u4e8b\u9879",id:"\u6ce8\u610f\u4e8b\u9879",level:3},{value:"\u901a\u8fc7 TVF \u5bfc\u5165\u6570\u636e",id:"\u901a\u8fc7-tvf-\u5bfc\u5165\u6570\u636e",level:2},{value:"\u81ea\u52a8\u63a8\u65ad\u6587\u4ef6\u5217\u7c7b\u578b",id:"\u81ea\u52a8\u63a8\u65ad\u6587\u4ef6\u5217\u7c7b\u578b",level:3},{value:"\u6ce8\u610f\u4e8b\u9879",id:"\u6ce8\u610f\u4e8b\u9879-1",level:3},{value:"\u66f4\u591a\u5e2e\u52a9",id:"\u66f4\u591a\u5e2e\u52a9",level:2}],g={toc:o},N="wrapper";function y(e){let{components:a,...n}=e;return(0,t.yg)(N,(0,l.A)({},g,n,{components:a,mdxType:"MDXLayout"}),(0,t.yg)("p",null,"INSERT INTO \u652f\u6301\u5c06 Doris \u67e5\u8be2\u7684\u7ed3\u679c\u5bfc\u5165\u5230\u53e6\u4e00\u4e2a\u8868\u4e2d\u3002INSERT INTO \u662f\u4e00\u4e2a\u540c\u6b65\u5bfc\u5165\u65b9\u5f0f\uff0c\u6267\u884c\u5bfc\u5165\u540e\u8fd4\u56de\u5bfc\u5165\u7ed3\u679c\u3002\u53ef\u4ee5\u901a\u8fc7\u8bf7\u6c42\u7684\u8fd4\u56de\u5224\u65ad\u5bfc\u5165\u662f\u5426\u6210\u529f\u3002INSERT INTO \u53ef\u4ee5\u4fdd\u8bc1\u5bfc\u5165\u4efb\u52a1\u7684\u539f\u5b50\u6027\uff0c\u8981\u4e48\u5168\u90e8\u5bfc\u5165\u6210\u529f\uff0c\u8981\u4e48\u5168\u90e8\u5bfc\u5165\u5931\u8d25\u3002"),(0,t.yg)("p",null,"\u4e3b\u8981\u7684 Insert Into \u547d\u4ee4\u5305\u542b\u4ee5\u4e0b\u4e24\u79cd\uff1a"),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"INSERT INTO tbl SELECT ...")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"INSERT INTO tbl (col1, col2, ...) VALUES (1, 2, ...), (1,3, ...)"))),(0,t.yg)("h2",{id:"\u4f7f\u7528\u573a\u666f"},"\u4f7f\u7528\u573a\u666f"),(0,t.yg)("ol",null,(0,t.yg)("li",{parentName:"ol"},(0,t.yg)("p",{parentName:"li"},"\u7528\u6237\u5e0c\u671b\u4ec5\u5bfc\u5165\u51e0\u6761\u5047\u6570\u636e\uff0c\u9a8c\u8bc1\u4e00\u4e0b Doris \u7cfb\u7edf\u7684\u529f\u80fd\u3002\u6b64\u65f6\u9002\u5408\u4f7f\u7528 INSERT INTO VALUES \u7684\u8bed\u6cd5\uff0c\u8bed\u6cd5\u548c MySQL \u4e00\u6837\u3002\u4e0d\u5efa\u8bae\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u4f7f\u7528 INSERT INTO VALUES\u3002")),(0,t.yg)("li",{parentName:"ol"},(0,t.yg)("p",{parentName:"li"},"\u7528\u6237\u5e0c\u671b\u5c06\u5df2\u7ecf\u5728 Doris \u8868\u4e2d\u7684\u6570\u636e\u8fdb\u884c ETL \u8f6c\u6362\u5e76\u5bfc\u5165\u5230\u4e00\u4e2a\u65b0\u7684 Doris \u8868\u4e2d\uff0c\u6b64\u65f6\u9002\u5408\u4f7f\u7528 INSERT INTO SELECT \u8bed\u6cd5\u3002")),(0,t.yg)("li",{parentName:"ol"},(0,t.yg)("p",{parentName:"li"},"\u4e0e Multi-Catalog \u5916\u90e8\u8868\u673a\u5236\u8fdb\u884c\u914d\u5408\uff0c\u5982\u901a\u8fc7 Multi-Catalog \u6620\u5c04 MySQL \u6216\u8005 Hive \u7cfb\u7edf\u4e2d\u7684\u8868\uff0c\u7136\u540e\u901a\u8fc7 INSERT INTO SELECT \u8bed\u6cd5\u5c06\u5916\u90e8\u8868\u4e2d\u7684\u6570\u636e\u5bfc\u5165\u5230 Doris \u8868\u4e2d\u5b58\u50a8\u3002")),(0,t.yg)("li",{parentName:"ol"},(0,t.yg)("p",{parentName:"li"},"\u901a\u8fc7 Table Value Function\uff08TVF\uff09\u529f\u80fd\uff0c\u53ef\u4ee5\u76f4\u63a5\u5c06\u5bf9\u8c61\u5b58\u50a8\u6216 HDFS \u4e0a\u7684\u6587\u4ef6\u4f5c\u4e3a Table \u8fdb\u884c\u67e5\u8be2\uff0c\u5e76\u4e14\u652f\u6301\u81ea\u52a8\u7684\u5217\u7c7b\u578b\u63a8\u65ad\u3002\u7136\u540e\uff0c\u901a\u8fc7 INSERT INTO SELECT \u8bed\u6cd5\u5c06\u5916\u90e8\u8868\u4e2d\u7684\u6570\u636e\u5bfc\u5165\u5230 Doris \u8868\u4e2d\u5b58\u50a8\u3002"))),(0,t.yg)("h2",{id:"\u57fa\u672c\u539f\u7406"},"\u57fa\u672c\u539f\u7406"),(0,t.yg)("p",null,"\u5728\u4f7f\u7528 INSERT INTO \u65f6\uff0c\u9700\u8981\u901a\u8fc7 MySQL \u534f\u8bae\u53d1\u8d77\u5bfc\u5165\u4f5c\u4e1a\u7ed9 FE \u8282\u70b9\uff0cFE \u4f1a\u751f\u6210\u6267\u884c\u8ba1\u5212\uff0c\u6267\u884c\u8ba1\u5212\u4e2d\u524d\u90e8\u662f\u67e5\u8be2\u76f8\u5173\u7684\u7b97\u5b50\uff0c\u6700\u540e\u4e00\u4e2a\u662f OlapTableSink \u7b97\u5b50\uff0c\u7528\u4e8e\u5c06\u67e5\u8be2\u7ed3\u679c\u5199\u5230\u76ee\u6807\u8868\u4e2d\u3002\u6267\u884c\u8ba1\u5212\u4f1a\u88ab\u53d1\u9001\u7ed9 BE \u8282\u70b9\u6267\u884c\uff0cDoris \u4f1a\u9009\u5b9a\u4e00\u4e2a\u8282\u70b9\u505a\u4e3a Coordinator \u8282\u70b9\uff0cCoordinator \u8282\u70b9\u8d1f\u8d23\u63a5\u53d7\u6570\u636e\u5e76\u5206\u53d1\u6570\u636e\u5230\u5176\u4ed6\u8282\u70b9\u4e0a\u3002"),(0,t.yg)("h2",{id:"\u5feb\u901f\u4e0a\u624b"},"\u5feb\u901f\u4e0a\u624b"),(0,t.yg)("p",null,"INSERT INTO \u901a\u8fc7 MySQL \u534f\u8bae\u63d0\u4ea4\u548c\u4f20\u8f93\u3002\u4e0b\u4f8b\u4ee5 MySQL \u547d\u4ee4\u884c\u4e3a\u4f8b\uff0c\u6f14\u793a\u901a\u8fc7 INSERT INTO \u63d0\u4ea4\u5bfc\u5165\u4f5c\u4e1a\u3002"),(0,t.yg)("p",null,"\u8be6\u7ec6\u8bed\u6cd5\u53ef\u4ee5\u53c2\u89c1 ",(0,t.yg)("a",{parentName:"p",href:"/zh-CN/docs/2.0/sql-manual/sql-reference/Data-Manipulation-Statements/Manipulation/INSERT"},"INSERT INTO"),"\u3002"),(0,t.yg)("h3",{id:"\u524d\u7f6e\u68c0\u67e5"},"\u524d\u7f6e\u68c0\u67e5"),(0,t.yg)("p",null,"INSERT INTO \u9700\u8981\u5bf9\u76ee\u6807\u8868\u7684 INSERT \u6743\u9650\u3002\u5982\u679c\u6ca1\u6709 INSERT \u6743\u9650\uff0c\u53ef\u4ee5\u901a\u8fc7 ",(0,t.yg)("a",{parentName:"p",href:"../../sql-manual/sql-reference/Account-Management-Statements/GRANT"},"GRANT")," \u547d\u4ee4\u7ed9\u7528\u6237\u6388\u6743\u3002"),(0,t.yg)("h3",{id:"\u521b\u5efa\u5bfc\u5165\u4f5c\u4e1a"},"\u521b\u5efa\u5bfc\u5165\u4f5c\u4e1a"),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"INSERT INTO VALUES")),(0,t.yg)("ol",null,(0,t.yg)("li",{parentName:"ol"},"\u521b\u5efa\u6e90\u8868")),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-sql"},'CREATE TABLE testdb.test_table(\n    user_id            BIGINT       NOT NULL COMMENT "\u7528\u6237 ID",\n    name               VARCHAR(20)           COMMENT "\u7528\u6237\u59d3\u540d",\n    age                INT                   COMMENT "\u7528\u6237\u5e74\u9f84"\n)\nDUPLICATE KEY(user_id)\nDISTRIBUTED BY HASH(user_id) BUCKETS 10;\n')),(0,t.yg)("ol",{start:2},(0,t.yg)("li",{parentName:"ol"},"\u4f7f\u7528 INSERT INTO VALUES \u5411\u6e90\u8868\u5bfc\u5165\u6570\u636e\uff08\u4e0d\u63a8\u8350\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u4f7f\u7528\uff09")),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-sql"},'INSERT INTO testdb.test_table (user_id, name, age)\nVALUES (1, "Emily", 25),\n       (2, "Benjamin", 35),\n       (3, "Olivia", 28),\n       (4, "Alexander", 60),\n       (5, "Ava", 17);\n')),(0,t.yg)("p",null,"INSERT INTO \u662f\u4e00\u79cd\u540c\u6b65\u5bfc\u5165\u65b9\u5f0f\uff0c\u5bfc\u5165\u7ed3\u679c\u4f1a\u76f4\u63a5\u8fd4\u56de\u7ed9\u7528\u6237\u3002"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-JSON"},"Query OK, 5 rows affected (0.308 sec)\n{'label':'label_3e52da787aab4222_9126d2fce8f6d1e5', 'status':'VISIBLE', 'txnId':'9081'}\n")),(0,t.yg)("ol",{start:3},(0,t.yg)("li",{parentName:"ol"},"\u67e5\u770b\u5bfc\u5165\u6570\u636e")),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-sql"},"MySQL> SELECT COUNT(*) FROM testdb.test_table;\n+----------+\n| count(*) |\n+----------+\n|        5 |\n+----------+\n1 row in set (0.179 sec)\n")),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"INSERT INTO SELECT")),(0,t.yg)("ol",null,(0,t.yg)("li",{parentName:"ol"},"\u5728\u4e0a\u8ff0\u64cd\u4f5c\u7684\u57fa\u7840\u4e0a\uff0c\u521b\u5efa\u4e00\u4e2a\u65b0\u8868\u4f5c\u4e3a\u76ee\u6807\u8868\uff08\u5176 schema \u4e0e\u6e90\u8868\u76f8\u540c\uff09")),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-sql"},"CREATE TABLE testdb.test_table2 LIKE testdb.test_table;\n")),(0,t.yg)("ol",{start:2},(0,t.yg)("li",{parentName:"ol"},"\u4f7f\u7528 INSERT INTO SELECT \u5bfc\u5165\u5230\u65b0\u8868")),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-sql"},"INSERT INTO testdb.test_table2\nSELECT * FROM testdb.test_table WHERE age < 30;\nQuery OK, 3 rows affected (0.544 sec)\n{'label':'label_9c2bae970023407d_b2c5b78b368e78a7', 'status':'VISIBLE', 'txnId':'9084'}\n")),(0,t.yg)("ol",{start:3},(0,t.yg)("li",{parentName:"ol"},"\u67e5\u770b\u5bfc\u5165\u6570\u636e")),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-sql"},"MySQL> SELECT COUNT(*) FROM testdb.test_table2;\n+----------+\n| count(*) |\n+----------+\n|        3 |\n+----------+\n1 row in set (0.071 sec)\n")),(0,t.yg)("h3",{id:"\u67e5\u770b\u5bfc\u5165\u4f5c\u4e1a"},"\u67e5\u770b\u5bfc\u5165\u4f5c\u4e1a"),(0,t.yg)("p",null,"\u53ef\u4ee5\u901a\u8fc7 show  load \u547d\u4ee4\u67e5\u770b\u5df2\u5b8c\u6210\u7684 INSERT INTO \u4efb\u52a1\u3002"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-sql"},'MySQL> SHOW LOAD FROM testdb;\n+--------+-----------------------------------------+----------+--------------------+--------+---------+----------------------------------------------------------------------+----------+---------------------+---------------------+---------------------+---------------------+---------------------+------+-----------------------------------------------------------------------------------------------------------------------+---------------+--------------+------+---------+\n| JobId  | Label                                   | State    | Progress           | Type   | EtlInfo | TaskInfo                                                             | ErrorMsg | CreateTime          | EtlStartTime        | EtlFinishTime       | LoadStartTime       | LoadFinishTime      | URL  | JobDetails                                                                                                            | TransactionId | ErrorTablets | User | Comment |\n+--------+-----------------------------------------+----------+--------------------+--------+---------+----------------------------------------------------------------------+----------+---------------------+---------------------+---------------------+---------------------+---------------------+------+-----------------------------------------------------------------------------------------------------------------------+---------------+--------------+------+---------+\n| 376416 | label_3e52da787aab4222_9126d2fce8f6d1e5 | FINISHED | Unknown id: 376416 | INSERT | NULL    | cluster:N/A; timeout(s):26200; max_filter_ratio:0.0; priority:NORMAL | NULL     | 2024-02-27 01:22:17 | 2024-02-27 01:22:17 | 2024-02-27 01:22:17 | 2024-02-27 01:22:17 | 2024-02-27 01:22:18 |      | {"Unfinished backends":{},"ScannedRows":0,"TaskNumber":0,"LoadBytes":0,"All backends":{},"FileNumber":0,"FileSize":0} | 9081          | {}           | root |         |\n| 376664 | label_9c2bae970023407d_b2c5b78b368e78a7 | FINISHED | Unknown id: 376664 | INSERT | NULL    | cluster:N/A; timeout(s):26200; max_filter_ratio:0.0; priority:NORMAL | NULL     | 2024-02-27 01:39:37 | 2024-02-27 01:39:37 | 2024-02-27 01:39:37 | 2024-02-27 01:39:37 | 2024-02-27 01:39:38 |      | {"Unfinished backends":{},"ScannedRows":0,"TaskNumber":0,"LoadBytes":0,"All backends":{},"FileNumber":0,"FileSize":0} | 9084          | {}           | root |         |\n+--------+-----------------------------------------+----------+--------------------+--------+---------+----------------------------------------------------------------------+----------+---------------------+---------------------+---------------------+---------------------+---------------------+------+-----------------------------------------------------------------------------------------------------------------------+---------------+--------------+------+---------+\n')),(0,t.yg)("h3",{id:"\u53d6\u6d88\u5bfc\u5165\u4f5c\u4e1a"},"\u53d6\u6d88\u5bfc\u5165\u4f5c\u4e1a"),(0,t.yg)("p",null,"\u7528\u6237\u53ef\u4ee5\u901a\u8fc7 Ctrl-C \u53d6\u6d88\u5f53\u524d\u6b63\u5728\u6267\u884c\u7684 INSERT INTO \u4f5c\u4e1a\u3002"),(0,t.yg)("h2",{id:"\u53c2\u8003\u624b\u518c"},"\u53c2\u8003\u624b\u518c"),(0,t.yg)("h3",{id:"\u5bfc\u5165\u547d\u4ee4"},"\u5bfc\u5165\u547d\u4ee4"),(0,t.yg)("p",null,"INSERT INTO \u5bfc\u5165\u8bed\u6cd5\u5982\u4e0b\uff1a"),(0,t.yg)("ol",null,(0,t.yg)("li",{parentName:"ol"},"INSERT INTO SELECT")),(0,t.yg)("p",null,"INSERT INTO SELECT \u4e00\u822c\u7528\u4e8e\u5c06\u67e5\u8be2\u7ed3\u679c\u4fdd\u5b58\u5230\u76ee\u6807\u8868\u4e2d\u3002"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-sql"},"INSERT INTO target_table SELECT ... FROM source_table;\n")),(0,t.yg)("p",null,"\u5176\u4e2d SELECT \u8bed\u53e5\u540c\u4e00\u822c\u7684 SELECT \u67e5\u8be2\u8bed\u53e5\uff0c\u53ef\u4ee5\u5305\u542b WHERE JOIN \u7b49\u64cd\u4f5c\u3002"),(0,t.yg)("ol",{start:2},(0,t.yg)("li",{parentName:"ol"},"INSERT INTO VALUES")),(0,t.yg)("p",null,"INSERT INTO VALUES \u4e00\u822c\u4ec5\u7528\u4e8e Demo\uff0c\u4e0d\u5efa\u8bae\u5728\u751f\u4ea7\u73af\u5883\u4f7f\u7528\u3002"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-sql"},"INSERT INTO target_table (col1, col2, ...)\nVALUES (val1, val2, ...), (val3, val4, ...), ...;\n")),(0,t.yg)("h3",{id:"\u5bfc\u5165\u914d\u7f6e\u53c2\u6570"},"\u5bfc\u5165\u914d\u7f6e\u53c2\u6570"),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"01 FE \u914d\u7f6e")),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"insert_load_default_timeout_second")),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"\u9ed8\u8ba4\u503c\uff1a14400\uff084 \u5c0f\u65f6\uff09")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"\u53c2\u6570\u63cf\u8ff0\uff1a\u5bfc\u5165\u4efb\u52a1\u7684\u8d85\u65f6\u65f6\u95f4\uff0c\u5355\u4f4d\uff1a\u79d2\u3002\u5bfc\u5165\u4efb\u52a1\u5728\u8be5\u8d85\u65f6\u65f6\u95f4\u5185\u672a\u5b8c\u6210\u5219\u4f1a\u88ab\u7cfb\u7edf\u53d6\u6d88\uff0c\u53d8\u6210 CANCELLED\u3002"))),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"02 \u73af\u5883\u53d8\u91cf")),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"insert_timeout")),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"\u9ed8\u8ba4\u503c\uff1a14400\uff084 \u5c0f\u65f6\uff09")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"\u53c2\u6570\u63cf\u8ff0\uff1aINSERT INTO \u4f5c\u4e3a SQL \u8bed\u53e5\u7684\u7684\u8d85\u65f6\u65f6\u95f4\uff0c\u5355\u4f4d\uff1a\u79d2\u3002"))),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"enable_insert_strict")),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"\u9ed8\u8ba4\u503c\uff1atrue")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"\u53c2\u6570\u63cf\u8ff0\uff1a\u5982\u679c\u8bbe\u7f6e\u4e3a true\uff0c\u5f53 INSERT INTO \u9047\u5230\u4e0d\u5408\u683c\u6570\u636e\u65f6\u5bfc\u5165\u4f1a\u5931\u8d25\u3002\u5982\u679c\u8bbe\u7f6e\u4e3a false\uff0cINSERT INTO \u4f1a\u5ffd\u7565\u4e0d\u5408\u683c\u7684\u884c\uff0c\u53ea\u8981\u6709\u4e00\u6761\u6570\u636e\u88ab\u6b63\u786e\u5bfc\u5165\uff0c\u5bfc\u5165\u5c31\u4f1a\u6210\u529f\u3002")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"\u89e3\u91ca\uff1aINSERT INTO \u65e0\u6cd5\u63a7\u5236\u9519\u8bef\u7387\uff0c\u53ea\u80fd\u901a\u8fc7\u8be5\u53c2\u6570\u8bbe\u7f6e\u4e3a\u4e25\u683c\u68c0\u67e5\u6570\u636e\u8d28\u91cf\u6216\u5b8c\u5168\u5ffd\u7565\u9519\u8bef\u6570\u636e\u3002\u5e38\u89c1\u7684\u6570\u636e\u4e0d\u5408\u683c\u7684\u539f\u56e0\u6709\uff1a\u6e90\u6570\u636e\u5217\u957f\u5ea6\u8d85\u8fc7\u76ee\u7684\u6570\u636e\u5217\u957f\u5ea6\u3001\u5217\u7c7b\u578b\u4e0d\u5339\u914d\u3001\u5206\u533a\u4e0d\u5339\u914d\u3001\u5217\u987a\u5e8f\u4e0d\u5339\u914d\u7b49\u3002"))),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"enable_nereids_dml_with_pipeline")),(0,t.yg)("p",null,"  \u8bbe\u7f6e\u4e3a ",(0,t.yg)("inlineCode",{parentName:"p"},"true")," \u540e\uff0c",(0,t.yg)("inlineCode",{parentName:"p"},"insert into")," \u8bed\u53e5\u5c06\u5c1d\u8bd5\u901a\u8fc7 Pipeline \u5f15\u64ce\u6267\u884c\u3002\u8be6\u89c1",(0,t.yg)("a",{parentName:"p",href:"./load-manual"},"\u5bfc\u5165"),"\u6587\u6863\u3002"),(0,t.yg)("h3",{id:"\u5bfc\u5165\u8fd4\u56de\u503c"},"\u5bfc\u5165\u8fd4\u56de\u503c"),(0,t.yg)("p",null,"INSERT INTO \u662f\u4e00\u4e2a SQL \u8bed\u53e5\uff0c\u5176\u8fd4\u56de\u7ed3\u679c\u4f1a\u6839\u636e\u67e5\u8be2\u7ed3\u679c\u7684\u4e0d\u540c\uff0c\u5206\u4e3a\u4ee5\u4e0b\u51e0\u79cd\uff1a"),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"\u7ed3\u679c\u96c6\u4e3a\u7a7a")),(0,t.yg)("p",null,"\u5982\u679c INSERT INTO \u4e2d\u7684 SELECT \u8bed\u53e5\u7684\u67e5\u8be2\u7ed3\u679c\u96c6\u4e3a\u7a7a\uff0c\u5219\u8fd4\u56de\u5982\u4e0b\uff1a"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-sql"},"mysql> INSERT INTO tbl1 SELECT * FROM empty_tbl;\nQuery OK, 0 rows affected (0.02 sec)\n")),(0,t.yg)("p",null,(0,t.yg)("inlineCode",{parentName:"p"},"Query OK")," \u8868\u793a\u6267\u884c\u6210\u529f\u3002",(0,t.yg)("inlineCode",{parentName:"p"},"0 rows affected")," \u8868\u793a\u6ca1\u6709\u6570\u636e\u88ab\u5bfc\u5165\u3002"),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"\u7ed3\u679c\u96c6\u4e0d\u4e3a\u7a7a\u4e14 INSERT \u6267\u884c\u6210\u529f")),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-sql"},"mysql> INSERT INTO tbl1 SELECT * FROM tbl2;\nQuery OK, 4 rows affected (0.38 sec)\n{'label':'INSERT_8510c568-9eda-4173-9e36-6adc7d35291c', 'status':'visible', 'txnId':'4005'}\n\nmysql> INSERT INTO tbl1 WITH LABEL my_label1 SELECT * FROM tbl2;\nQuery OK, 4 rows affected (0.38 sec)\n{'label':'my_label1', 'status':'visible', 'txnId':'4005'}\n\nmysql> INSERT INTO tbl1 SELECT * FROM tbl2;\nQuery OK, 2 rows affected, 2 warnings (0.31 sec)\n{'label':'INSERT_f0747f0e-7a35-46e2-affa-13a235f4020d', 'status':'visible', 'txnId':'4005'}\n\nmysql> INSERT INTO tbl1 SELECT * FROM tbl2;\nQuery OK, 2 rows affected, 2 warnings (0.31 sec)\n{'label':'INSERT_f0747f0e-7a35-46e2-affa-13a235f4020d', 'status':'committed', 'txnId':'4005'}\n")),(0,t.yg)("p",null,(0,t.yg)("inlineCode",{parentName:"p"},"Query OK")," \u8868\u793a\u6267\u884c\u6210\u529f\u3002",(0,t.yg)("inlineCode",{parentName:"p"},"4 rows affected")," \u8868\u793a\u603b\u5171\u6709 4 \u884c\u6570\u636e\u88ab\u5bfc\u5165\u3002",(0,t.yg)("inlineCode",{parentName:"p"},"2 warnings")," \u8868\u793a\u88ab\u8fc7\u6ee4\u7684\u884c\u6570\u3002"),(0,t.yg)("p",null,"\u540c\u65f6\u4f1a\u8fd4\u56de\u4e00\u4e2a JSON \u4e32\uff1a"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-Plain"},"{'label':'my_label1', 'status':'visible', 'txnId':'4005'}\n{'label':'INSERT_f0747f0e-7a35-46e2-affa-13a235f4020d', 'status':'committed', 'txnId':'4005'}\n{'label':'my_label1', 'status':'visible', 'txnId':'4005', 'err':'some other error'}\n")),(0,t.yg)("p",null,"\u5176\u4e2d\uff0c\u8fd4\u56de\u7ed3\u679c\u53c2\u6570\u5982\u4e0b\u8868\u8bf4\u660e\uff1a"),(0,t.yg)("table",null,(0,t.yg)("thead",{parentName:"table"},(0,t.yg)("tr",{parentName:"thead"},(0,t.yg)("th",{parentName:"tr",align:null},"\u53c2\u6570\u540d\u79f0"),(0,t.yg)("th",{parentName:"tr",align:null},"\u8bf4\u660e"))),(0,t.yg)("tbody",{parentName:"table"},(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:null},"TxnId"),(0,t.yg)("td",{parentName:"tr",align:null},"\u5bfc\u5165\u4e8b\u52a1\u7684 ID")),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:null},"Label"),(0,t.yg)("td",{parentName:"tr",align:null},"\u5bfc\u5165\u4f5c\u4e1a\u7684 label\uff0c\u901a\u8fc7 INSERT INTO tbl WITH LABEL label ... \u6307\u5b9a")),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:null},"Status"),(0,t.yg)("td",{parentName:"tr",align:null},"\u8868\u793a\u5bfc\u5165\u6570\u636e\u662f\u5426\u53ef\u89c1\u3002\u5982\u679c\u53ef\u89c1\uff0c\u663e\u793a ",(0,t.yg)("inlineCode",{parentName:"td"},"visible"),"\uff0c\u5982\u679c\u4e0d\u53ef\u89c1\uff0c\u663e\u793a ",(0,t.yg)("inlineCode",{parentName:"td"},"committed"),(0,t.yg)("p",null,"- ",(0,t.yg)("inlineCode",{parentName:"td"},"visible"),"\uff1a\u8868\u793a\u5bfc\u5165\u6210\u529f\uff0c\u6570\u636e\u53ef\u89c1")," ",(0,t.yg)("p",null,"- ",(0,t.yg)("inlineCode",{parentName:"td"},"committed"),"\uff1a\u8be5\u72b6\u6001\u4e5f\u8868\u793a\u5bfc\u5165\u5df2\u7ecf\u5b8c\u6210\uff0c\u53ea\u662f\u6570\u636e\u53ef\u80fd\u4f1a\u5ef6\u8fdf\u53ef\u89c1\uff0c\u65e0\u9700\u91cd\u8bd5")," ",(0,t.yg)("p",null,"- Label Already Exists\uff1aLabel \u91cd\u590d\uff0c\u9700\u8981\u66f4\u6362 label")," ",(0,t.yg)("p",null,"- Fail\uff1a\u5bfc\u5165\u5931\u8d25"))),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:null},"Err"),(0,t.yg)("td",{parentName:"tr",align:null},"\u5bfc\u5165\u9519\u8bef\u4fe1\u606f")))),(0,t.yg)("p",null,"\u5f53\u9700\u8981\u67e5\u770b\u88ab\u8fc7\u6ee4\u7684\u884c\u65f6\uff0c\u7528\u6237\u53ef\u4ee5\u901a\u8fc7",(0,t.yg)("a",{parentName:"p",href:"../../sql-manual/sql-reference/Show-Statements/SHOW-LOAD"}," SHOW LOAD "),"\u8bed\u53e5"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-sql"},'SHOW LOAD WHERE label="xxx";\n')),(0,t.yg)("p",null,"\u8fd4\u56de\u7ed3\u679c\u4e2d\u7684 URL \u53ef\u4ee5\u7528\u4e8e\u67e5\u8be2\u9519\u8bef\u7684\u6570\u636e\uff0c\u5177\u4f53\u89c1\u540e\u9762 \u67e5\u770b\u9519\u8bef\u884c \u5c0f\u7ed3\u3002"),(0,t.yg)("p",null,"\u6570\u636e\u4e0d\u53ef\u89c1\u662f\u4e00\u4e2a\u4e34\u65f6\u72b6\u6001\uff0c\u8fd9\u6279\u6570\u636e\u6700\u7ec8\u662f\u4e00\u5b9a\u53ef\u89c1\u7684"),(0,t.yg)("p",null,"\u53ef\u4ee5\u901a\u8fc7",(0,t.yg)("a",{parentName:"p",href:"../../sql-manual/sql-reference/Show-Statements/SHOW-TRANSACTION"}," SHOW TRANSACTION "),"\u8bed\u53e5\u67e5\u770b\u8fd9\u6279\u6570\u636e\u7684\u53ef\u89c1\u72b6\u6001\uff1a"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-sql"},"SHOW TRANSACTION WHERE id=4005;\n")),(0,t.yg)("p",null,"\u8fd4\u56de\u7ed3\u679c\u4e2d\u7684 ",(0,t.yg)("inlineCode",{parentName:"p"},"TransactionStatus")," \u5217\u5982\u679c\u4e3a ",(0,t.yg)("inlineCode",{parentName:"p"},"visible"),"\uff0c\u5219\u8868\u8ff0\u6570\u636e\u53ef\u89c1\u3002"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-sql"},"{'label':'my_label1', 'status':'visible', 'txnId':'4005'}\n{'label':'INSERT_f0747f0e-7a35-46e2-affa-13a235f4020d', 'status':'committed', 'txnId':'4005'}\n{'label':'my_label1', 'status':'visible', 'txnId':'4005', 'err':'some other error'}\n")),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"\u7ed3\u679c\u96c6\u4e0d\u4e3a\u7a7a\u4f46 INSERT \u6267\u884c\u5931\u8d25")),(0,t.yg)("p",null,"\u6267\u884c\u5931\u8d25\u8868\u793a\u6ca1\u6709\u4efb\u4f55\u6570\u636e\u88ab\u6210\u529f\u5bfc\u5165\uff0c\u5e76\u8fd4\u56de\u5982\u4e0b\uff1a"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-sql"},'mysql> INSERT INTO tbl1 SELECT * FROM tbl2 WHERE k1 = "a";\nERROR 1064 (HY000): all partitions have no load data. url: http://10.74.167.16:8042/api/_load_error_log?file=_shard_2/error_loginsert_stmt_ba8bb9e158e4879-ae8de8507c0bf8a2_ba8bb9e158e4879_ae8de8507c0bf8a2\n')),(0,t.yg)("p",null,"\u5176\u4e2d ",(0,t.yg)("inlineCode",{parentName:"p"},"ERROR 1064 (HY000): all partitions have no load data")," \u663e\u793a\u5931\u8d25\u539f\u56e0\u3002\u540e\u9762\u7684 url \u53ef\u4ee5\u7528\u4e8e\u67e5\u8be2\u9519\u8bef\u7684\u6570\u636e\uff0c\u5177\u4f53\u89c1\u540e\u9762 \u67e5\u770b\u9519\u8bef\u884c \u5c0f\u7ed3\u3002"),(0,t.yg)("h2",{id:"\u5bfc\u5165\u6700\u4f73\u5b9e\u8df5"},"\u5bfc\u5165\u6700\u4f73\u5b9e\u8df5"),(0,t.yg)("h3",{id:"\u6570\u636e\u91cf"},"\u6570\u636e\u91cf"),(0,t.yg)("p",null,"INSERT INTO \u5bf9\u6570\u636e\u91cf\u6ca1\u6709\u9650\u5236\uff0c\u5927\u6570\u636e\u91cf\u5bfc\u5165\u4e5f\u53ef\u4ee5\u652f\u6301\u3002\u4f46\u5982\u679c\u5bfc\u5165\u6570\u636e\u91cf\u8fc7\u5927\uff0c\u5c31\u9700\u8981\u901a\u8fc7\u4ee5\u4e0b\u914d\u7f6e\u4fee\u6539\u7cfb\u7edf\u7684 INSERT INTO \u5bfc\u5165\u8d85\u65f6\u65f6\u95f4\uff0c\u786e\u4fdd",(0,t.yg)("inlineCode",{parentName:"p"},"\u5bfc\u5165\u8d85\u65f6 >= \u6570\u636e\u91cf ``/`` \u9884\u4f30\u5bfc\u5165\u901f\u5ea6"),"\u3002"),(0,t.yg)("ol",null,(0,t.yg)("li",{parentName:"ol"},(0,t.yg)("p",{parentName:"li"},"FE \u914d\u7f6e\u53c2\u6570",(0,t.yg)("inlineCode",{parentName:"p"},"insert_load_default_timeout_second"),"\u3002")),(0,t.yg)("li",{parentName:"ol"},(0,t.yg)("p",{parentName:"li"},"\u73af\u5883\u53d8\u91cf ",(0,t.yg)("inlineCode",{parentName:"p"},"insert_timeout"),"\u3002"))),(0,t.yg)("h3",{id:"\u67e5\u770b\u9519\u8bef\u884c"},"\u67e5\u770b\u9519\u8bef\u884c"),(0,t.yg)("p",null,"\u5f53 INSERT INTO \u8fd4\u56de\u7ed3\u679c\u4e2d\u63d0\u4f9b\u4e86 url \u5b57\u6bb5\u65f6\uff0c\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u547d\u4ee4\u67e5\u770b\u9519\u8bef\u884c\uff1a"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-sql"},'SHOW LOAD WARNINGS ON "url";\n')),(0,t.yg)("p",null,"\u793a\u4f8b\uff1a"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-sql"},'SHOW LOAD WARNINGS ON "http://ip:port/api/_load_error_log?file=_shard_13/error_loginsert_stmt_d2cac0a0a16d482d-9041c949a4b71605_d2cac0a0a16d482d_9041c949a4b71605";\n')),(0,t.yg)("p",null,"\u5e38\u89c1\u7684\u9519\u8bef\u7684\u539f\u56e0\u6709\uff1a\u6e90\u6570\u636e\u5217\u957f\u5ea6\u8d85\u8fc7\u76ee\u7684\u6570\u636e\u5217\u957f\u5ea6\u3001\u5217\u7c7b\u578b\u4e0d\u5339\u914d\u3001\u5206\u533a\u4e0d\u5339\u914d\u3001\u5217\u987a\u5e8f\u4e0d\u5339\u914d\u7b49\u3002"),(0,t.yg)("p",null,"\u53ef\u4ee5\u901a\u8fc7\u73af\u5883\u53d8\u91cf ",(0,t.yg)("inlineCode",{parentName:"p"},"enable_insert_strict"),"\u6765\u63a7\u5236 INSERT INTO \u662f\u5426\u5ffd\u7565\u9519\u8bef\u884c\u3002"),(0,t.yg)("h2",{id:"\u901a\u8fc7\u5916\u90e8\u8868-multi-catalog-\u5bfc\u5165\u6570\u636e"},"\u901a\u8fc7\u5916\u90e8\u8868 Multi-Catalog \u5bfc\u5165\u6570\u636e"),(0,t.yg)("p",null,"Doris \u53ef\u4ee5\u521b\u5efa\u5916\u90e8\u8868\u3002\u521b\u5efa\u5b8c\u6210\u540e\uff0c\u53ef\u4ee5\u901a\u8fc7 ",(0,t.yg)("inlineCode",{parentName:"p"},"INSERT INTO SELECT")," \u7684\u65b9\u5f0f\u5bfc\u5165\u5916\u90e8\u8868\u7684\u6570\u636e\uff0c\u5f53\u7136\u4e5f\u53ef\u4ee5\u901a\u8fc7 SELECT \u8bed\u53e5\u76f4\u63a5\u67e5\u8be2\u5916\u90e8\u8868\u7684\u6570\u636e\uff0c"),(0,t.yg)("p",null,"Doris \u901a\u8fc7\u591a\u6e90\u6570\u636e\u76ee\u5f55\uff08Multi-Catalog\uff09\u529f\u80fd\uff0c\u652f\u6301\u4e86\u5305\u62ec Apache Hive\u3001Apache Iceberg\u3001Apache Hudi\u3001Apache Paimon(Incubating)\u3001Elasticsearch\u3001MySQL\u3001Oracle\u3001SQL Server \u7b49\u4e3b\u6d41\u6570\u636e\u6e56\u3001\u6570\u636e\u5e93\u7684\u8fde\u63a5\u8bbf\u95ee\u3002"),(0,t.yg)("p",null,"Multi-Catalog \u76f8\u5173\u529f\u80fd\uff0c\u8bf7\u67e5\u770b\u6e56\u4ed3\u4e00\u4f53\u6587\u6863\u3002"),(0,t.yg)("p",null,"\u8fd9\u91cc\u4ee5\u901a\u8fc7\u6784\u5efa Hive \u5916\u90e8\u8868\uff0c\u5bfc\u5165\u5176\u6570\u636e\u5230 Doris \u5185\u90e8\u8868\u6765\u4e3e\u4f8b\u8bf4\u660e\u3002"),(0,t.yg)("h3",{id:"\u521b\u5efa-hive-catalog"},"\u521b\u5efa Hive Catalog"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-sql"},"CREATE CATALOG hive PROPERTIES (\n    'type'='hms',\n    'hive.metastore.uris' = 'thrift://172.0.0.1:9083',\n    'hadoop.username' = 'hive',\n    'dfs.nameservices'='your-nameservice',\n    'dfs.ha.namenodes.your-nameservice'='nn1,nn2',\n    'dfs.namenode.rpc-address.your-nameservice.nn1'='172.21.0.2:8088',\n    'dfs.namenode.rpc-address.your-nameservice.nn2'='172.21.0.3:8088',\n    'dfs.client.failover.proxy.provider.your-nameservice'='org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider'\n);\n")),(0,t.yg)("h3",{id:"\u5bfc\u5165\u6570\u636e"},"\u5bfc\u5165\u6570\u636e"),(0,t.yg)("ol",null,(0,t.yg)("li",{parentName:"ol"},"\u521b\u5efa\u4e00\u5f20 Doris \u7684\u5bfc\u5165\u76ee\u6807\u8868")),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-sql"},'CREATE TABLE `target_tbl` (\n  `k1` decimal(9, 3) NOT NULL COMMENT "",\n  `k2` char(10) NOT NULL COMMENT "",\n  `k3` datetime NOT NULL COMMENT "",\n  `k5` varchar(20) NOT NULL COMMENT "",\n  `k6` double NOT NULL COMMENT ""\n)\nCOMMENT "Doris Table"\nDISTRIBUTED BY HASH(k1) BUCKETS 2\nPROPERTIES (\n    "replication_num" = "1"\n);\n')),(0,t.yg)("ol",{start:2},(0,t.yg)("li",{parentName:"ol"},(0,t.yg)("p",{parentName:"li"},"\u5173\u4e8e\u521b\u5efa Doris \u8868\u7684\u8be6\u7ec6\u8bf4\u660e\uff0c\u8bf7\u53c2\u9605 ",(0,t.yg)("a",{parentName:"p",href:"../../sql-manual/sql-reference/Data-Definition-Statements/Create/CREATE-TABLE"},"CREATE-TABLE")," \u8bed\u6cd5\u5e2e\u52a9\u3002")),(0,t.yg)("li",{parentName:"ol"},(0,t.yg)("p",{parentName:"li"},"\u5bfc\u5165\u6570\u636e (\u4ece hive.db1.source_tbl \u8868\u5bfc\u5165\u5230 target_tbl \u8868)"))),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-sql"},"INSERT INTO target_tbl SELECT k1,k2,k3 FROM  hive.db1.source_tbl limit 100;\n")),(0,t.yg)("p",null,"INSERT \u547d\u4ee4\u662f\u540c\u6b65\u547d\u4ee4\uff0c\u8fd4\u56de\u6210\u529f\uff0c\u5373\u8868\u793a\u5bfc\u5165\u6210\u529f\u3002"),(0,t.yg)("h3",{id:"\u6ce8\u610f\u4e8b\u9879"},"\u6ce8\u610f\u4e8b\u9879"),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},"\u5fc5\u987b\u4fdd\u8bc1\u5916\u90e8\u6570\u636e\u6e90\u4e0e Doris \u96c6\u7fa4\u662f\u53ef\u4ee5\u4e92\u901a\uff0c\u5305\u62ec BE \u8282\u70b9\u548c\u5916\u90e8\u6570\u636e\u6e90\u7684\u7f51\u7edc\u662f\u4e92\u901a\u7684\u3002")),(0,t.yg)("h2",{id:"\u901a\u8fc7-tvf-\u5bfc\u5165\u6570\u636e"},"\u901a\u8fc7 TVF \u5bfc\u5165\u6570\u636e"),(0,t.yg)("p",null,"\u901a\u8fc7 Table Value Function \u529f\u80fd\uff0cDoris \u53ef\u4ee5\u76f4\u63a5\u5c06\u5bf9\u8c61\u5b58\u50a8\u6216 HDFS \u4e0a\u7684\u6587\u4ef6\u4f5c\u4e3a Table \u8fdb\u884c\u67e5\u8be2\u5206\u6790\u3001\u5e76\u4e14\u652f\u6301\u81ea\u52a8\u7684\u5217\u7c7b\u578b\u63a8\u65ad\u3002\u8be6\u7ec6\u4ecb\u7ecd\uff0c\u8bf7\u53c2\u8003 \u6e56\u4ed3\u4e00\u4f53/TVF \u6587\u6863\u3002"),(0,t.yg)("h3",{id:"\u81ea\u52a8\u63a8\u65ad\u6587\u4ef6\u5217\u7c7b\u578b"},"\u81ea\u52a8\u63a8\u65ad\u6587\u4ef6\u5217\u7c7b\u578b"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-Plain"},'DESC FUNCTION s3 (\n    "URI" = "http://127.0.0.1:9312/test2/test.snappy.parquet",\n    "s3.access_key"= "ak",\n    "s3.secret_key" = "sk",\n    "format" = "parquet",\n    "use_path_style"="true"\n);\n+---------------+--------------+------+-------+---------+-------+\n| Field         | Type         | Null | Key   | Default | Extra |\n+---------------+--------------+------+-------+---------+-------+\n| p_partkey     | INT          | Yes  | false | NULL    | NONE  |\n| p_name        | TEXT         | Yes  | false | NULL    | NONE  |\n| p_mfgr        | TEXT         | Yes  | false | NULL    | NONE  |\n| p_brand       | TEXT         | Yes  | false | NULL    | NONE  |\n| p_type        | TEXT         | Yes  | false | NULL    | NONE  |\n| p_size        | INT          | Yes  | false | NULL    | NONE  |\n| p_container   | TEXT         | Yes  | false | NULL    | NONE  |\n| p_retailprice | DECIMAL(9,0) | Yes  | false | NULL    | NONE  |\n| p_comment     | TEXT         | Yes  | false | NULL    | NONE  |\n+---------------+--------------+------+-------+---------+-------+\n')),(0,t.yg)("p",null,"\u8fd9\u91cc\u7ed9\u51fa\u4e86\u4e86\u4e00\u4e2a s3 TVF \u7684\u4f8b\u5b50\u3002\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\u6307\u5b9a\u4e86\u6587\u4ef6\u7684\u8def\u5f84\u3001\u8fde\u63a5\u4fe1\u606f\u3001\u8ba4\u8bc1\u4fe1\u606f\u7b49\u3002"),(0,t.yg)("p",null,"\u4e4b\u540e\uff0c\u901a\u8fc7 ",(0,t.yg)("inlineCode",{parentName:"p"},"DESC FUNCTION")," \u8bed\u6cd5\u53ef\u4ee5\u67e5\u770b\u8fd9\u4e2a\u6587\u4ef6\u7684 Schema\u3002"),(0,t.yg)("p",null,"\u53ef\u4ee5\u770b\u5230\uff0c\u5bf9\u4e8e Parquet \u6587\u4ef6\uff0cDoris \u4f1a\u6839\u636e\u6587\u4ef6\u5185\u7684\u5143\u4fe1\u606f\u81ea\u52a8\u63a8\u65ad\u5217\u7c7b\u578b\u3002"),(0,t.yg)("p",null,"\u76ee\u524d\u652f\u6301\u5bf9 Parquet\u3001ORC\u3001CSV\u3001Json \u683c\u5f0f\u8fdb\u884c\u5206\u6790\u548c\u5217\u7c7b\u578b\u63a8\u65ad\u3002"),(0,t.yg)("p",null,"\u914d\u5408 ",(0,t.yg)("inlineCode",{parentName:"p"},"INSERT INTO SELECT")," \u8bed\u6cd5\uff0c\u53ef\u4ee5\u65b9\u4fbf\u5c06\u6587\u4ef6\u5bfc\u5165\u5230 Doris \u8868\u4e2d\u8fdb\u884c\u66f4\u5feb\u901f\u7684\u5206\u6790\uff1a"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-Plain"},'// 1. \u521b\u5efadoris\u5185\u90e8\u8868\nCREATE TABLE IF NOT EXISTS test_table\n(\n    id int,\n    name varchar(50),\n    age int\n)\nDISTRIBUTED BY HASH(id) BUCKETS 4\nPROPERTIES("replication_num" = "1");\n\n// 2. \u4f7f\u7528 S3 Table Value Function \u63d2\u5165\u6570\u636e\nINSERT INTO test_table (id,name,age)\nSELECT cast(id as INT) as id, name, cast (age as INT) as age\nFROM s3(\n    "uri" = "http://127.0.0.1:9312/test2/test.snappy.parquet",\n    "s3.access_key"= "ak",\n    "s3.secret_key" = "sk",\n    "format" = "parquet",\n    "use_path_style" = "true");\n')),(0,t.yg)("h3",{id:"\u6ce8\u610f\u4e8b\u9879-1"},"\u6ce8\u610f\u4e8b\u9879"),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"\u5982\u679c ",(0,t.yg)("inlineCode",{parentName:"p"},"S3 / hdfs")," TVF \u6307\u5b9a\u7684 uri \u5339\u914d\u4e0d\u5230\u6587\u4ef6\uff0c\u6216\u8005\u5339\u914d\u5230\u7684\u6240\u6709\u6587\u4ef6\u90fd\u662f\u7a7a\u6587\u4ef6\uff0c\u90a3\u4e48 ",(0,t.yg)("inlineCode",{parentName:"p"},"S3 / hdfs")," TVF \u5c06\u4f1a\u8fd4\u56de\u7a7a\u7ed3\u679c\u96c6\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\u4f7f\u7528",(0,t.yg)("inlineCode",{parentName:"p"},"DESC FUNCTION"),"\u67e5\u770b\u8fd9\u4e2a\u6587\u4ef6\u7684 Schema\uff0c\u4f1a\u5f97\u5230\u4e00\u5217\u865a\u5047\u7684\u5217",(0,t.yg)("inlineCode",{parentName:"p"},"__dummy_col"),"\uff0c\u53ef\u5ffd\u7565\u8fd9\u4e00\u5217\u3002")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"\u5982\u679c\u6307\u5b9a TVF \u7684 format \u4e3a CSV ",(0,t.yg)("inlineCode",{parentName:"p"},"The first line is empty, can not parse column numbers"),", \u8fd9\u56e0\u4e3a\u65e0\u6cd5\u901a\u8fc7\u8be5\u6587\u4ef6\u7684\u7b2c\u4e00\u884c\u89e3\u6790\u51fa Schema\u3002"))),(0,t.yg)("h2",{id:"\u66f4\u591a\u5e2e\u52a9"},"\u66f4\u591a\u5e2e\u52a9"),(0,t.yg)("p",null,"\u5173\u4e8e Insert Into \u4f7f\u7528\u7684\u66f4\u591a\u8be6\u7ec6\u8bed\u6cd5\uff0c\u8bf7\u53c2\u9605 ",(0,t.yg)("a",{parentName:"p",href:"../../sql-manual/sql-reference/Data-Manipulation-Statements/Manipulation/INSERT"},"INSERT INTO")," \u547d\u4ee4\u624b\u518c\uff0c\u4e5f\u53ef\u4ee5\u5728 MySQL \u5ba2\u6237\u7aef\u547d\u4ee4\u884c\u4e0b\u8f93\u5165 ",(0,t.yg)("inlineCode",{parentName:"p"},"HELP INSERT")," \u83b7\u53d6\u66f4\u591a\u5e2e\u52a9\u4fe1\u606f\u3002"))}y.isMDXComponent=!0}}]);