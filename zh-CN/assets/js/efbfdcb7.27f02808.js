"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([[618100],{15680:(e,a,t)=>{t.d(a,{xA:()=>m,yg:()=>y});var r=t(296540);function n(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function o(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,r)}return t}function i(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?o(Object(t),!0).forEach((function(a){n(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function l(e,a){if(null==e)return{};var t,r,n=function(e,a){if(null==e)return{};var t,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],a.indexOf(t)>=0||(n[t]=e[t]);return n}(e,a);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(n[t]=e[t])}return n}var s=r.createContext({}),p=function(e){var a=r.useContext(s),t=a;return e&&(t="function"==typeof e?e(a):i(i({},a),e)),t},m=function(e){var a=p(e.components);return r.createElement(s.Provider,{value:a},e.children)},d="mdxType",c={inlineCode:"code",wrapper:function(e){var a=e.children;return r.createElement(r.Fragment,{},a)}},u=r.forwardRef((function(e,a){var t=e.components,n=e.mdxType,o=e.originalType,s=e.parentName,m=l(e,["components","mdxType","originalType","parentName"]),d=p(t),u=n,y=d["".concat(s,".").concat(u)]||d[u]||c[u]||o;return t?r.createElement(y,i(i({ref:a},m),{},{components:t})):r.createElement(y,i({ref:a},m))}));function y(e,a){var t=arguments,n=a&&a.mdxType;if("string"==typeof e||n){var o=t.length,i=new Array(o);i[0]=u;var l={};for(var s in a)hasOwnProperty.call(a,s)&&(l[s]=a[s]);l.originalType=e,l[d]="string"==typeof e?e:n,i[1]=l;for(var p=2;p<o;p++)i[p]=t[p];return r.createElement.apply(null,i)}return r.createElement.apply(null,t)}u.displayName="MDXCreateElement"},862023:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>s,contentTitle:()=>i,default:()=>c,frontMatter:()=>o,metadata:()=>l,toc:()=>p});var r=t(58168),n=(t(296540),t(15680));const o={title:"DataX Doriswriter",language:"zh-CN"},i=void 0,l={unversionedId:"ecosystem/datax",id:"version-1.2/ecosystem/datax",title:"DataX Doriswriter",description:"\x3c!--",source:"@site/i18n/zh-CN/docusaurus-plugin-content-docs/version-1.2/ecosystem/datax.md",sourceDirName:"ecosystem",slug:"/ecosystem/datax",permalink:"/zh-CN/docs/1.2/ecosystem/datax",draft:!1,tags:[],version:"1.2",frontMatter:{title:"DataX Doriswriter",language:"zh-CN"},sidebar:"ecosystem",previous:{title:"Doris Kafka Connector",permalink:"/zh-CN/docs/1.2/ecosystem/doris-kafka-connector"},next:{title:"DBT Doris Adapter",permalink:"/zh-CN/docs/1.2/ecosystem/dbt-doris-adapter"}},s={},p=[{value:"\u4f7f\u7528",id:"\u4f7f\u7528",level:2},{value:"\u76f4\u63a5\u4e0b\u8f7dDataX\u5b89\u88c5\u5305",id:"\u76f4\u63a5\u4e0b\u8f7ddatax\u5b89\u88c5\u5305",level:3},{value:"\u81ea\u884c\u7f16\u8bd1DorisWriter\u63d2\u4ef6",id:"\u81ea\u884c\u7f16\u8bd1doriswriter\u63d2\u4ef6",level:3},{value:"Datax DorisWriter \u53c2\u6570\u4ecb\u7ecd\uff1a",id:"datax-doriswriter-\u53c2\u6570\u4ecb\u7ecd",level:3},{value:"\u793a\u4f8b",id:"\u793a\u4f8b",level:3},{value:"1.Stream \u8bfb\u53d6\u6570\u636e\u540e\u5bfc\u5165\u81f3 Doris",id:"1stream-\u8bfb\u53d6\u6570\u636e\u540e\u5bfc\u5165\u81f3-doris",level:4},{value:"2.Mysql \u8bfb\u53d6\u6570\u636e\u540e\u5bfc\u5165\u81f3 Doris",id:"2mysql-\u8bfb\u53d6\u6570\u636e\u540e\u5bfc\u5165\u81f3-doris",level:4}],m={toc:p},d="wrapper";function c(e){let{components:a,...t}=e;return(0,n.yg)(d,(0,r.A)({},m,t,{components:a,mdxType:"MDXLayout"}),(0,n.yg)("h1",{id:"datax-doriswriter"},"DataX doriswriter"),(0,n.yg)("p",null,(0,n.yg)("a",{parentName:"p",href:"https://github.com/alibaba/DataX"},"DataX")," Doriswriter \u63d2\u4ef6\uff0c\u652f\u6301\u5c06 MySQL\u3001Oracle\u3001SqlServer \u7b49\u591a\u79cd\u6570\u636e\u6e90\u4e2d\u7684\u6570\u636e\u901a\u8fc7 Stream Load\u7684\u65b9\u5f0f\u540c\u6b65\u5230 Doris \u4e2d\u3002"),(0,n.yg)("admonition",{title:"\u6ce8\u610f",type:"info"},(0,n.yg)("ol",{parentName:"admonition"},(0,n.yg)("li",{parentName:"ol"},"\u9700\u8981\u914d\u5408 DataX \u670d\u52a1\u4e00\u8d77\u4f7f\u7528\u3002"),(0,n.yg)("li",{parentName:"ol"},"DataX\u652f\u6301\u591a\u79cd\u6570\u636e\u6e90\uff0c\u53ef\u53c2\u8003",(0,n.yg)("a",{parentName:"li",href:"https://github.com/alibaba/DataX#support-data-channels"},"\u8fd9\u91cc"),"\u3002"))),(0,n.yg)("h2",{id:"\u4f7f\u7528"},"\u4f7f\u7528"),(0,n.yg)("h3",{id:"\u76f4\u63a5\u4e0b\u8f7ddatax\u5b89\u88c5\u5305"},"\u76f4\u63a5\u4e0b\u8f7dDataX\u5b89\u88c5\u5305"),(0,n.yg)("p",null,"DataX\u5b98\u65b9\u63d0\u4f9b\u4e86\u5b89\u88c5\u5305\uff0c\u5df2\u7ecf\u5305\u542b\u4e86DataX\u53ef\u76f4\u63a5\u4e0b\u8f7d\u4f7f\u7528\uff0c\u53ef\u53c2\u8003",(0,n.yg)("a",{parentName:"p",href:"https://github.com/alibaba/DataX?tab=readme-ov-file#download-datax%E4%B8%8B%E8%BD%BD%E5%9C%B0%E5%9D%80"},"\u8fd9\u91cc")),(0,n.yg)("h3",{id:"\u81ea\u884c\u7f16\u8bd1doriswriter\u63d2\u4ef6"},"\u81ea\u884c\u7f16\u8bd1DorisWriter\u63d2\u4ef6"),(0,n.yg)("p",null,"\u4e0b\u8f7dDorisWriter \u7684\u63d2\u4ef6",(0,n.yg)("a",{parentName:"p",href:"https://github.com/apache/doris/tree/master/extension/DataX"},"\u6e90\u7801")),(0,n.yg)("ol",null,(0,n.yg)("li",{parentName:"ol"},(0,n.yg)("p",{parentName:"li"},"\u8fd0\u884c ",(0,n.yg)("inlineCode",{parentName:"p"},"init-env.sh"))),(0,n.yg)("li",{parentName:"ol"},(0,n.yg)("p",{parentName:"li"},"\u7f16\u8bd1 doriswriter\uff1a"),(0,n.yg)("blockquote",{parentName:"li"},(0,n.yg)("p",{parentName:"blockquote"},"\u5355\u72ec\u7f16\u8bd1 doriswriter \u63d2\u4ef6\uff1a")),(0,n.yg)("p",{parentName:"li"},"   ",(0,n.yg)("inlineCode",{parentName:"p"},"mvn clean install -pl plugin-rdbms-util,doriswriter -DskipTests")),(0,n.yg)("blockquote",{parentName:"li"},(0,n.yg)("p",{parentName:"blockquote"},"\u5982\u9700\u7f16\u8bd1\u6574\u4e2a DataX \u9879\u76ee\u53ef\u53c2\u8003",(0,n.yg)("a",{parentName:"p",href:"https://github.com/alibaba/DataX/blob/master/userGuid.md#quick-start"},"\u8fd9\u91cc"))),(0,n.yg)("blockquote",{parentName:"li"},(0,n.yg)("p",{parentName:"blockquote"},"\u7f16\u8bd1\u9519\u8bef")),(0,n.yg)("p",{parentName:"li"},"   \u5982\u9047\u5230\u5982\u4e0b\u7f16\u8bd1\u9519\u8bef\uff1a"),(0,n.yg)("pre",{parentName:"li"},(0,n.yg)("code",{parentName:"pre"},"Could not find artifact com.alibaba.datax:datax-all:pom:0.0.1-SNAPSHOT ...\n")),(0,n.yg)("p",{parentName:"li"},"   \u53ef\u5c1d\u8bd5\u4ee5\u4e0b\u65b9\u5f0f\u89e3\u51b3\uff1a"),(0,n.yg)("pre",{parentName:"li"},(0,n.yg)("code",{parentName:"pre"},"1. \u4e0b\u8f7d [alibaba-datax-maven-m2-20210928.tar.gz](https://doris-thirdparty-repo.bj.bcebos.com/thirdparty/alibaba-datax-maven-m2-20210928.tar.gz)\n2. \u89e3\u538b\u540e\uff0c\u5c06\u5f97\u5230\u7684 `alibaba/datax/` \u76ee\u5f55\uff0c\u62f7\u8d1d\u5230\u6240\u4f7f\u7528\u7684 maven \u5bf9\u5e94\u7684 `.m2/repository/com/alibaba/` \u4e0b, \u518d\u6b21\u5c1d\u8bd5\u7f16\u8bd1\u3002\n")))),(0,n.yg)("h3",{id:"datax-doriswriter-\u53c2\u6570\u4ecb\u7ecd"},"Datax DorisWriter \u53c2\u6570\u4ecb\u7ecd\uff1a"),(0,n.yg)("ul",null,(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("p",{parentName:"li"},(0,n.yg)("strong",{parentName:"p"},"jdbcUrl")),(0,n.yg)("ul",{parentName:"li"},(0,n.yg)("li",{parentName:"ul"},"\u63cf\u8ff0\uff1aDoris \u7684 JDBC \u8fde\u63a5\u4e32\uff0c\u7528\u6237\u6267\u884c preSql \u6216 postSQL\u3002"),(0,n.yg)("li",{parentName:"ul"},"\u5fc5\u9009\uff1a\u662f"),(0,n.yg)("li",{parentName:"ul"},"\u9ed8\u8ba4\u503c\uff1a\u65e0"))),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("p",{parentName:"li"},(0,n.yg)("strong",{parentName:"p"},"loadUrl")),(0,n.yg)("ul",{parentName:"li"},(0,n.yg)("li",{parentName:"ul"},'\u63cf\u8ff0\uff1a\u4f5c\u4e3a Stream Load \u7684\u8fde\u63a5\u76ee\u6807\u3002\u683c\u5f0f\u4e3a "ip:port"\u3002\u5176\u4e2d IP \u662f FE \u8282\u70b9 IP\uff0cport \u662f FE \u8282\u70b9\u7684 http_port\u3002\u53ef\u4ee5\u586b\u5199\u591a\u4e2a\uff0c\u591a\u4e2a\u4e4b\u95f4\u4f7f\u7528\u82f1\u6587\u72b6\u6001\u7684\u9017\u53f7\u9694\u5f00\uff1a',(0,n.yg)("inlineCode",{parentName:"li"},","),"\uff0cdoriswriter \u5c06\u4ee5\u8f6e\u8be2\u7684\u65b9\u5f0f\u8bbf\u95ee\u3002"),(0,n.yg)("li",{parentName:"ul"},"\u5fc5\u9009\uff1a\u662f"),(0,n.yg)("li",{parentName:"ul"},"\u9ed8\u8ba4\u503c\uff1a\u65e0"))),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("p",{parentName:"li"},(0,n.yg)("strong",{parentName:"p"},"username")),(0,n.yg)("ul",{parentName:"li"},(0,n.yg)("li",{parentName:"ul"},"\u63cf\u8ff0\uff1a\u8bbf\u95ee Doris \u6570\u636e\u5e93\u7684\u7528\u6237\u540d"),(0,n.yg)("li",{parentName:"ul"},"\u5fc5\u9009\uff1a\u662f"),(0,n.yg)("li",{parentName:"ul"},"\u9ed8\u8ba4\u503c\uff1a\u65e0"))),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("p",{parentName:"li"},(0,n.yg)("strong",{parentName:"p"},"password")),(0,n.yg)("ul",{parentName:"li"},(0,n.yg)("li",{parentName:"ul"},"\u63cf\u8ff0\uff1a\u8bbf\u95ee Doris \u6570\u636e\u5e93\u7684\u5bc6\u7801"),(0,n.yg)("li",{parentName:"ul"},"\u5fc5\u9009\uff1a\u5426"),(0,n.yg)("li",{parentName:"ul"},"\u9ed8\u8ba4\u503c\uff1a\u7a7a"))),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("p",{parentName:"li"},(0,n.yg)("strong",{parentName:"p"},"connection.selectedDatabase")),(0,n.yg)("ul",{parentName:"li"},(0,n.yg)("li",{parentName:"ul"},"\u63cf\u8ff0\uff1a\u9700\u8981\u5199\u5165\u7684 Doris \u6570\u636e\u5e93\u540d\u79f0\u3002"),(0,n.yg)("li",{parentName:"ul"},"\u5fc5\u9009\uff1a\u662f"),(0,n.yg)("li",{parentName:"ul"},"\u9ed8\u8ba4\u503c\uff1a\u65e0"))),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("p",{parentName:"li"},(0,n.yg)("strong",{parentName:"p"},"connection.table")),(0,n.yg)("ul",{parentName:"li"},(0,n.yg)("li",{parentName:"ul"},"\u63cf\u8ff0\uff1a\u9700\u8981\u5199\u5165\u7684 Doris \u8868\u540d\u79f0\u3002",(0,n.yg)("ul",{parentName:"li"},(0,n.yg)("li",{parentName:"ul"},"\u5fc5\u9009\uff1a\u662f"),(0,n.yg)("li",{parentName:"ul"},"\u9ed8\u8ba4\u503c\uff1a\u65e0"))))),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("p",{parentName:"li"},(0,n.yg)("strong",{parentName:"p"},"flushInterval")),(0,n.yg)("ul",{parentName:"li"},(0,n.yg)("li",{parentName:"ul"},"\u63cf\u8ff0\uff1a\u6570\u636e\u5199\u5165\u6279\u6b21\u7684\u65f6\u95f4\u95f4\u9694\u3002\u5982\u679c\u8fd9\u4e2a\u65f6\u95f4\u95f4\u9694\u8bbe\u7f6e\u7684\u592a\u5c0f\u4f1a\u9020\u6210 Doris \u5199\u963b\u585e\u95ee\u9898\uff0c\u9519\u8bef\u4ee3\u7801 -235\uff0c\u540c\u65f6\u5982\u679c\u4f60\u8fd9\u4e2a\u65f6\u95f4\u8bbe\u7f6e\u592a\u5c0f\uff0c",(0,n.yg)("inlineCode",{parentName:"li"},"maxBatchRows")," \u548c ",(0,n.yg)("inlineCode",{parentName:"li"},"batchSize")," \u53c2\u6570\u8bbe\u7f6e\u7684\u6709\u5f88\u5927\uff0c\u90a3\u4e48\u5f88\u53ef\u80fd\u8fbe\u4e0d\u5230\u4f60\u8fd9\u8bbe\u7f6e\u7684\u6570\u636e\u91cf\u5927\u5c0f\uff0c\u4e5f\u4f1a\u6267\u884c\u5bfc\u5165\u3002"),(0,n.yg)("li",{parentName:"ul"},"\u5fc5\u9009\uff1a\u5426"),(0,n.yg)("li",{parentName:"ul"},"\u9ed8\u8ba4\u503c\uff1a30000\uff08ms\uff09"))),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("p",{parentName:"li"},(0,n.yg)("strong",{parentName:"p"},"column")),(0,n.yg)("ul",{parentName:"li"},(0,n.yg)("li",{parentName:"ul"},'\u63cf\u8ff0\uff1a\u76ee\u7684\u8868\u9700\u8981\u5199\u5165\u6570\u636e\u7684\u5b57\u6bb5\uff0c\u8fd9\u4e9b\u5b57\u6bb5\u5c06\u4f5c\u4e3a\u751f\u6210\u7684 Json \u6570\u636e\u7684\u5b57\u6bb5\u540d\u3002\u5b57\u6bb5\u4e4b\u95f4\u7528\u82f1\u6587\u9017\u53f7\u5206\u9694\u3002\u4f8b\u5982\uff1a"column": ','["id","name","age"]',"\u3002"),(0,n.yg)("li",{parentName:"ul"},"\u5fc5\u9009\uff1a\u662f"),(0,n.yg)("li",{parentName:"ul"},"\u9ed8\u8ba4\u503c\uff1a\u5426"))),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("p",{parentName:"li"},(0,n.yg)("strong",{parentName:"p"},"preSql")),(0,n.yg)("ul",{parentName:"li"},(0,n.yg)("li",{parentName:"ul"},"\u63cf\u8ff0\uff1a\u5199\u5165\u6570\u636e\u5230\u76ee\u7684\u8868\u524d\uff0c\u4f1a\u5148\u6267\u884c\u8fd9\u91cc\u7684\u6807\u51c6\u8bed\u53e5\u3002"),(0,n.yg)("li",{parentName:"ul"},"\u5fc5\u9009\uff1a\u5426"),(0,n.yg)("li",{parentName:"ul"},"\u9ed8\u8ba4\u503c\uff1a\u65e0"))),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("p",{parentName:"li"},(0,n.yg)("strong",{parentName:"p"},"postSql")),(0,n.yg)("ul",{parentName:"li"},(0,n.yg)("li",{parentName:"ul"},"\u63cf\u8ff0\uff1a\u5199\u5165\u6570\u636e\u5230\u76ee\u7684\u8868\u540e\uff0c\u4f1a\u6267\u884c\u8fd9\u91cc\u7684\u6807\u51c6\u8bed\u53e5\u3002"),(0,n.yg)("li",{parentName:"ul"},"\u5fc5\u9009\uff1a\u5426"),(0,n.yg)("li",{parentName:"ul"},"\u9ed8\u8ba4\u503c\uff1a\u65e0")))),(0,n.yg)("ul",null,(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("p",{parentName:"li"},(0,n.yg)("strong",{parentName:"p"},"maxBatchRows")),(0,n.yg)("ul",{parentName:"li"},(0,n.yg)("li",{parentName:"ul"},"\u63cf\u8ff0\uff1a\u6bcf\u6279\u6b21\u5bfc\u5165\u6570\u636e\u7684\u6700\u5927\u884c\u6570\u3002\u548c ",(0,n.yg)("strong",{parentName:"li"},"batchSize")," \u5171\u540c\u63a7\u5236\u6bcf\u6279\u6b21\u7684\u5bfc\u5165\u8bb0\u5f55\u884c\u6570\u3002\u6bcf\u6279\u6b21\u6570\u636e\u8fbe\u5230\u4e24\u4e2a\u9608\u503c\u4e4b\u4e00\uff0c\u5373\u5f00\u59cb\u5bfc\u5165\u8fd9\u4e00\u6279\u6b21\u7684\u6570\u636e\u3002"),(0,n.yg)("li",{parentName:"ul"},"\u5fc5\u9009\uff1a\u5426"),(0,n.yg)("li",{parentName:"ul"},"\u9ed8\u8ba4\u503c\uff1a500000"))),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("p",{parentName:"li"},(0,n.yg)("strong",{parentName:"p"},"batchSize")),(0,n.yg)("ul",{parentName:"li"},(0,n.yg)("li",{parentName:"ul"},"\u63cf\u8ff0\uff1a\u6bcf\u6279\u6b21\u5bfc\u5165\u6570\u636e\u7684\u6700\u5927\u6570\u636e\u91cf\u3002\u548c ",(0,n.yg)("strong",{parentName:"li"},"maxBatchRows")," \u5171\u540c\u63a7\u5236\u6bcf\u6279\u6b21\u7684\u5bfc\u5165\u6570\u91cf\u3002\u6bcf\u6279\u6b21\u6570\u636e\u8fbe\u5230\u4e24\u4e2a\u9608\u503c\u4e4b\u4e00\uff0c\u5373\u5f00\u59cb\u5bfc\u5165\u8fd9\u4e00\u6279\u6b21\u7684\u6570\u636e\u3002"),(0,n.yg)("li",{parentName:"ul"},"\u5fc5\u9009\uff1a\u5426"),(0,n.yg)("li",{parentName:"ul"},"\u9ed8\u8ba4\u503c\uff1a94371840"))),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("p",{parentName:"li"},(0,n.yg)("strong",{parentName:"p"},"maxRetries")),(0,n.yg)("ul",{parentName:"li"},(0,n.yg)("li",{parentName:"ul"},"\u63cf\u8ff0\uff1a\u6bcf\u6279\u6b21\u5bfc\u5165\u6570\u636e\u5931\u8d25\u540e\u7684\u91cd\u8bd5\u6b21\u6570\u3002"),(0,n.yg)("li",{parentName:"ul"},"\u5fc5\u9009\uff1a\u5426"),(0,n.yg)("li",{parentName:"ul"},"\u9ed8\u8ba4\u503c\uff1a3")))),(0,n.yg)("ul",null,(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("p",{parentName:"li"},(0,n.yg)("strong",{parentName:"p"},"labelPrefix")),(0,n.yg)("ul",{parentName:"li"},(0,n.yg)("li",{parentName:"ul"},"\u63cf\u8ff0\uff1a\u6bcf\u6279\u6b21\u5bfc\u5165\u4efb\u52a1\u7684 label \u524d\u7f00\u3002\u6700\u7ec8\u7684 label \u5c06\u6709 ",(0,n.yg)("inlineCode",{parentName:"li"},"labelPrefix + UUID")," \u7ec4\u6210\u5168\u5c40\u552f\u4e00\u7684 label\uff0c\u786e\u4fdd\u6570\u636e\u4e0d\u4f1a\u91cd\u590d\u5bfc\u5165"),(0,n.yg)("li",{parentName:"ul"},"\u5fc5\u9009\uff1a\u5426"),(0,n.yg)("li",{parentName:"ul"},"\u9ed8\u8ba4\u503c\uff1a",(0,n.yg)("inlineCode",{parentName:"li"},"datax_doris_writer_")))),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("p",{parentName:"li"},(0,n.yg)("strong",{parentName:"p"},"loadProps")),(0,n.yg)("ul",{parentName:"li"},(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("p",{parentName:"li"},"\u63cf\u8ff0\uff1aStreamLoad \u7684\u8bf7\u6c42\u53c2\u6570\uff0c\u8be6\u60c5\u53c2\u7167 StreamLoad \u4ecb\u7ecd\u9875\u9762\u3002",(0,n.yg)("a",{parentName:"p",href:"https://doris.apache.org/zh-CN/docs/data-operate/import/stream-load-manual"},"Stream load - Apache Doris")),(0,n.yg)("p",{parentName:"li"},"\u8fd9\u91cc\u5305\u62ec\u5bfc\u5165\u7684\u6570\u636e\u683c\u5f0f\uff1aformat \u7b49\uff0c\u5bfc\u5165\u6570\u636e\u683c\u5f0f\u9ed8\u8ba4\u6211\u4eec\u4f7f\u7528 csv\uff0c\u652f\u6301 JSON\uff0c\u5177\u4f53\u53ef\u4ee5\u53c2\u7167\u4e0b\u9762\u7c7b\u578b\u8f6c\u6362\u90e8\u5206\uff0c\u4e5f\u53ef\u4ee5\u53c2\u7167\u4e0a\u9762 Stream load \u5b98\u65b9\u4fe1\u606f")),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("p",{parentName:"li"},"\u5fc5\u9009\uff1a\u5426")),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("p",{parentName:"li"},"\u9ed8\u8ba4\u503c\uff1a\u65e0"))))),(0,n.yg)("h3",{id:"\u793a\u4f8b"},"\u793a\u4f8b"),(0,n.yg)("h4",{id:"1stream-\u8bfb\u53d6\u6570\u636e\u540e\u5bfc\u5165\u81f3-doris"},"1.Stream \u8bfb\u53d6\u6570\u636e\u540e\u5bfc\u5165\u81f3 Doris"),(0,n.yg)("p",null,"\u8be5\u793a\u4f8b\u63d2\u4ef6\u7684\u4f7f\u7528\u8bf4\u660e\u8bf7\u53c2\u9605 ",(0,n.yg)("a",{parentName:"p",href:"https://github.com/apache/incubator-doris/blob/master/extension/DataX/doriswriter/doc/doriswriter.md"},"\u8fd9\u91cc")),(0,n.yg)("h4",{id:"2mysql-\u8bfb\u53d6\u6570\u636e\u540e\u5bfc\u5165\u81f3-doris"},"2.Mysql \u8bfb\u53d6\u6570\u636e\u540e\u5bfc\u5165\u81f3 Doris"),(0,n.yg)("p",null,"1.Mysql \u8868\u7ed3\u6784"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-sql"},"CREATE TABLE `t_test`(\n `id`bigint(30) NOT NULL,\n `order_code` varchar(30) DEFAULT NULL COMMENT '',\n `line_code` varchar(30) DEFAULT NULL COMMENT '',\n `remark` varchar(30) DEFAULT NULL COMMENT '',\n `unit_no` varchar(30) DEFAULT NULL COMMENT '',\n `unit_name` varchar(30) DEFAULT NULL COMMENT '',\n `price` decimal(12,2) DEFAULT NULL COMMENT '',\n PRIMARY KEY(`id`) USING BTREE\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 ROW_FORMAT=DYNAMIC COMMENT='';\n")),(0,n.yg)("p",null,"2.Doris \u8868\u7ed3\u6784"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-sql"},"CREATE TABLE `ods_t_test` (\n `id` bigint(30) NOT NULL,\n `order_code` varchar(30) DEFAULT NULL COMMENT '',\n `line_code` varchar(30) DEFAULT NULL COMMENT '',\n `remark` varchar(30) DEFAULT NULL COMMENT '',\n `unit_no` varchar(30) DEFAULT NULL COMMENT '',\n `unit_name` varchar(30) DEFAULT NULL COMMENT '',\n `price` decimal(12,2) DEFAULT NULL COMMENT ''\n) ENGINE=OLAP\nUNIQUE KEY(`id`, `order_code`)\nDISTRIBUTED BY HASH(`order_code`) BUCKETS 1\nPROPERTIES (\n\"replication_allocation\" = \"tag.location.default: 3\",\n\"in_memory\" = \"false\",\n\"storage_format\" = \"V2\"\n);\n")),(0,n.yg)("p",null,"3.\u521b\u5efa datax \u811a\u672c "),(0,n.yg)("p",null,"my_import.json"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-json"},'{\n    "job": {\n        "content": [\n            {\n                "reader": {\n                    "name": "mysqlreader",\n                    "parameter": {\n                        "column": ["id","order_code","line_code","remark","unit_no","unit_name","price"],\n                        "connection": [\n                            {\n                                "jdbcUrl": ["jdbc:mysql://localhost:3306/demo"],\n                                "table": ["employees_1"]\n                            }\n                        ],\n                        "username": "root",\n                        "password": "xxxxx",\n                        "where": ""\n                    }\n                },\n                "writer": {\n                    "name": "doriswriter",\n                    "parameter": {\n                        "loadUrl": ["127.0.0.1:8030"],\n                        "column": ["id","order_code","line_code","remark","unit_no","unit_name","price"],\n                        "username": "root",\n                        "password": "xxxxxx",\n                        "postSql": ["select count(1) from all_employees_info"],\n                        "preSql": [],\n                        "flushInterval":30000,\n                        "connection": [\n                          {\n                            "jdbcUrl": "jdbc:mysql://127.0.0.1:9030/demo",\n                            "selectedDatabase": "demo",\n                            "table": ["all_employees_info"]\n                          }\n                        ],\n                        "loadProps": {\n                            "format": "json",\n                            "strip_outer_array":"true",\n                            "line_delimiter": "\\\\x02"\n                        }\n                    }\n                }\n            }\n        ],\n        "setting": {\n            "speed": {\n                "channel": "1"\n            }\n        }\n    }\n}\n')),(0,n.yg)("blockquote",null,(0,n.yg)("p",{parentName:"blockquote"},"\u5907\u6ce8\uff1a"),(0,n.yg)("pre",{parentName:"blockquote"},(0,n.yg)("code",{parentName:"pre",className:"language-json"},'"loadProps": {\n  "format": "json",\n  "strip_outer_array":"true",\n  "line_delimiter": "\\\\x02"\n}\n')),(0,n.yg)("ol",{parentName:"blockquote"},(0,n.yg)("li",{parentName:"ol"},"\u8fd9\u91cc\u6211\u4eec\u4f7f\u7528\u4e86 JSON \u683c\u5f0f\u5bfc\u5165\u6570\u636e"),(0,n.yg)("li",{parentName:"ol"},(0,n.yg)("inlineCode",{parentName:"li"},"line_delimiter")," \u9ed8\u8ba4\u662f\u6362\u884c\u7b26\uff0c\u53ef\u80fd\u4f1a\u548c\u6570\u636e\u4e2d\u7684\u503c\u51b2\u7a81\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u4e00\u4e9b\u7279\u6b8a\u5b57\u7b26\u6216\u8005\u4e0d\u53ef\u89c1\u5b57\u7b26\uff0c\u907f\u514d\u5bfc\u5165\u9519\u8bef"),(0,n.yg)("li",{parentName:"ol"},"strip_outer_array\uff1a\u5728\u4e00\u6279\u5bfc\u5165\u6570\u636e\u4e2d\u8868\u793a\u591a\u884c\u6570\u636e\uff0cDoris \u5728\u89e3\u6790\u65f6\u4f1a\u5c06\u6570\u7ec4\u5c55\u5f00\uff0c\u7136\u540e\u4f9d\u6b21\u89e3\u6790\u5176\u4e2d\u7684\u6bcf\u4e00\u4e2a Object \u4f5c\u4e3a\u4e00\u884c\u6570\u636e"),(0,n.yg)("li",{parentName:"ol"},"\u66f4\u591a Stream load \u53c2\u6570\u8bf7\u53c2\u7167 ","[Stream load \u6587\u6863]","(",(0,n.yg)("a",{parentName:"li",href:"https://doris.apache.org/zh-CN/docs/data-operate/import/stream-load-manual"},"Stream load - Apache Doris"),")"),(0,n.yg)("li",{parentName:"ol"},"\u5982\u679c\u662f CSV \u683c\u5f0f\u6211\u4eec\u53ef\u4ee5\u8fd9\u6837\u4f7f\u7528")),(0,n.yg)("pre",{parentName:"blockquote"},(0,n.yg)("code",{parentName:"pre",className:"language-json"},'"loadProps": {\n   "format": "csv",\n   "column_separator": "\\\\x01",\n   "line_delimiter": "\\\\x02"\n}\n')),(0,n.yg)("p",{parentName:"blockquote"},(0,n.yg)("strong",{parentName:"p"},"CSV \u683c\u5f0f\u8981\u7279\u522b\u6ce8\u610f\u884c\u5217\u5206\u9694\u7b26\uff0c\u907f\u514d\u548c\u6570\u636e\u4e2d\u7684\u7279\u6b8a\u5b57\u7b26\u51b2\u7a81\uff0c\u8fd9\u91cc\u5efa\u8bae\u4f7f\u7528\u9690\u85cf\u5b57\u7b26\uff0c\u9ed8\u8ba4\u5217\u5206\u9694\u7b26\u662f\uff1a",(0,n.yg)("inlineCode",{parentName:"strong"},"\\t"),"\uff0c\u884c\u5206\u9694\u7b26\uff1a",(0,n.yg)("inlineCode",{parentName:"strong"},"\\n")))),(0,n.yg)("p",null,"4.\u6267\u884c DataX \u4efb\u52a1\uff0c\u5177\u4f53\u53c2\u8003 ",(0,n.yg)("a",{parentName:"p",href:"https://github.com/alibaba/DataX/blob/master/userGuid.md"},"DataX \u5b98\u7f51")),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-sql"},"python bin/datax.py my_import.json\n")),(0,n.yg)("p",null,"\u6267\u884c\u4e4b\u540e\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u4e0b\u9762\u7684\u4fe1\u606f"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-sql"},'2022-11-16 14:28:54.012 [job-0] INFO  JobContainer - jobContainer starts to do prepare ...\n2022-11-16 14:28:54.012 [job-0] INFO  JobContainer - DataX Reader.Job [mysqlreader] do prepare work .\n2022-11-16 14:28:54.013 [job-0] INFO  JobContainer - DataX Writer.Job [doriswriter] do prepare work .\n2022-11-16 14:28:54.020 [job-0] INFO  JobContainer - jobContainer starts to do split ...\n2022-11-16 14:28:54.020 [job-0] INFO  JobContainer - Job set Channel-Number to 1 channels.\n2022-11-16 14:28:54.023 [job-0] INFO  JobContainer - DataX Reader.Job [mysqlreader] splits to [1] tasks.\n2022-11-16 14:28:54.023 [job-0] INFO  JobContainer - DataX Writer.Job [doriswriter] splits to [1] tasks.\n2022-11-16 14:28:54.033 [job-0] INFO  JobContainer - jobContainer starts to do schedule ...\n2022-11-16 14:28:54.036 [job-0] INFO  JobContainer - Scheduler starts [1] taskGroups.\n2022-11-16 14:28:54.037 [job-0] INFO  JobContainer - Running by standalone Mode.\n2022-11-16 14:28:54.041 [taskGroup-0] INFO  TaskGroupContainer - taskGroupId=[0] start [1] channels for [1] tasks.\n2022-11-16 14:28:54.043 [taskGroup-0] INFO  Channel - Channel set byte_speed_limit to -1, No bps activated.\n2022-11-16 14:28:54.043 [taskGroup-0] INFO  Channel - Channel set record_speed_limit to -1, No tps activated.\n2022-11-16 14:28:54.049 [taskGroup-0] INFO  TaskGroupContainer - taskGroup[0] taskId[0] attemptCount[1] is started\n2022-11-16 14:28:54.052 [0-0-0-reader] INFO  CommonRdbmsReader$Task - Begin to read record by Sql: [select taskid,projectid,taskflowid,templateid,template_name,status_task from dwd_universal_tb_task \n] jdbcUrl:[jdbc:mysql://localhost:3306/demo?yearIsDateType=false&zeroDateTimeBehavior=convertToNull&tinyInt1isBit=false&rewriteBatchedStatements=true].\nWed Nov 16 14:28:54 GMT+08:00 2022 WARN: Establishing SSL connection without server\'s identity verification is not recommended. According to MySQL 5.5.45+, 5.6.26+ and 5.7.6+ requirements SSL connection must be established by default if explicit option isn\'t set. For compliance with existing applications not using SSL the verifyServerCertificate property is set to \'false\'. You need either to explicitly disable SSL by setting useSSL=false, or set useSSL=true and provide truststore for server certificate verification.\n2022-11-16 14:28:54.071 [0-0-0-reader] INFO  CommonRdbmsReader$Task - Finished read record by Sql: [select taskid,projectid,taskflowid,templateid,template_name,status_task from dwd_universal_tb_task \n] jdbcUrl:[jdbc:mysql://localhost:3306/demo?yearIsDateType=false&zeroDateTimeBehavior=convertToNull&tinyInt1isBit=false&rewriteBatchedStatements=true].\n2022-11-16 14:28:54.104 [Thread-1] INFO  DorisStreamLoadObserver - Start to join batch data: rows[2] bytes[438] label[datax_doris_writer_c4e08cb9-c157-4689-932f-db34acc45b6f].\n2022-11-16 14:28:54.104 [Thread-1] INFO  DorisStreamLoadObserver - Executing stream load to: \'http://127.0.0.1:8030/api/demo/dwd_universal_tb_task/_stream_load\', size: \'441\'\n2022-11-16 14:28:54.224 [Thread-1] INFO  DorisStreamLoadObserver - StreamLoad response :{"Status":"Success","BeginTxnTimeMs":0,"Message":"OK","NumberUnselectedRows":0,"CommitAndPublishTimeMs":17,"Label":"datax_doris_writer_c4e08cb9-c157-4689-932f-db34acc45b6f","LoadBytes":441,"StreamLoadPutTimeMs":1,"NumberTotalRows":2,"WriteDataTimeMs":11,"TxnId":217056,"LoadTimeMs":31,"TwoPhaseCommit":"false","ReadDataTimeMs":0,"NumberLoadedRows":2,"NumberFilteredRows":0}\n2022-11-16 14:28:54.225 [Thread-1] INFO  DorisWriterManager - Async stream load finished: label[datax_doris_writer_c4e08cb9-c157-4689-932f-db34acc45b6f].\n2022-11-16 14:28:54.249 [taskGroup-0] INFO  TaskGroupContainer - taskGroup[0] taskId[0] is successed, used[201]ms\n2022-11-16 14:28:54.250 [taskGroup-0] INFO  TaskGroupContainer - taskGroup[0] completed it\'s tasks.\n2022-11-16 14:29:04.048 [job-0] INFO  StandAloneJobContainerCommunicator - Total 2 records, 214 bytes | Speed 21B/s, 0 records/s | Error 0 records, 0 bytes |  All Task WaitWriterTime 0.000s |  All Task WaitReaderTime 0.000s | Percentage 100.00%\n2022-11-16 14:29:04.049 [job-0] INFO  AbstractScheduler - Scheduler accomplished all tasks.\n2022-11-16 14:29:04.049 [job-0] INFO  JobContainer - DataX Writer.Job [doriswriter] do post work.\nWed Nov 16 14:29:04 GMT+08:00 2022 WARN: Establishing SSL connection without server\'s identity verification is not recommended. According to MySQL 5.5.45+, 5.6.26+ and 5.7.6+ requirements SSL connection must be established by default if explicit option isn\'t set. For compliance with existing applications not using SSL the verifyServerCertificate property is set to \'false\'. You need either to explicitly disable SSL by setting useSSL=false, or set useSSL=true and provide truststore for server certificate verification.\n2022-11-16 14:29:04.187 [job-0] INFO  DorisWriter$Job - Start to execute preSqls:[select count(1) from dwd_universal_tb_task]. context info:jdbc:mysql://172.16.0.13:9030/demo.\n2022-11-16 14:29:04.204 [job-0] INFO  JobContainer - DataX Reader.Job [mysqlreader] do post work.\n2022-11-16 14:29:04.204 [job-0] INFO  JobContainer - DataX jobId [0] completed successfully.\n2022-11-16 14:29:04.204 [job-0] INFO  HookInvoker - No hook invoked, because base dir not exists or is a file: /data/datax/hook\n2022-11-16 14:29:04.205 [job-0] INFO  JobContainer - \n         [total cpu info] => \n                averageCpu                     | maxDeltaCpu                    | minDeltaCpu                    \n                -1.00%                         | -1.00%                         | -1.00%\n                        \n\n         [total gc info] => \n                 NAME                 | totalGCCount       | maxDeltaGCCount    | minDeltaGCCount    | totalGCTime        | maxDeltaGCTime     | minDeltaGCTime     \n                 PS MarkSweep         | 1                  | 1                  | 1                  | 0.017s             | 0.017s             | 0.017s             \n                 PS Scavenge          | 1                  | 1                  | 1                  | 0.007s             | 0.007s             | 0.007s             \n\n2022-11-16 14:29:04.205 [job-0] INFO  JobContainer - PerfTrace not enable!\n2022-11-16 14:29:04.206 [job-0] INFO  StandAloneJobContainerCommunicator - Total 2 records, 214 bytes | Speed 21B/s, 0 records/s | Error 0 records, 0 bytes |  All Task WaitWriterTime 0.000s |  All Task WaitReaderTime 0.000s | Percentage 100.00%\n2022-11-16 14:29:04.206 [job-0] INFO  JobContainer - \n\u4efb\u52a1\u542f\u52a8\u65f6\u523b                    : 2022-11-16 14:28:53\n\u4efb\u52a1\u7ed3\u675f\u65f6\u523b                    : 2022-11-16 14:29:04\n\u4efb\u52a1\u603b\u8ba1\u8017\u65f6                    :                 10s\n\u4efb\u52a1\u5e73\u5747\u6d41\u91cf                    :               21B/s\n\u8bb0\u5f55\u5199\u5165\u901f\u5ea6                    :              0rec/s\n\u8bfb\u51fa\u8bb0\u5f55\u603b\u6570                    :                   2\n\u8bfb\u5199\u5931\u8d25\u603b\u6570                    :                   0\n\n')))}c.isMDXComponent=!0}}]);