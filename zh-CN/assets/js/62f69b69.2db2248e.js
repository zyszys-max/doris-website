"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([[975633],{15680:(e,n,a)=>{a.d(n,{xA:()=>g,yg:()=>s});var t=a(296540);function i(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function r(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,t)}return a}function l(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?r(Object(a),!0).forEach((function(n){i(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}function p(e,n){if(null==e)return{};var a,t,i=function(e,n){if(null==e)return{};var a,t,i={},r=Object.keys(e);for(t=0;t<r.length;t++)a=r[t],n.indexOf(a)>=0||(i[a]=e[a]);return i}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(t=0;t<r.length;t++)a=r[t],n.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var m=t.createContext({}),o=function(e){var n=t.useContext(m),a=n;return e&&(a="function"==typeof e?e(n):l(l({},n),e)),a},g=function(e){var n=o(e.components);return t.createElement(m.Provider,{value:n},e.children)},N="mdxType",y={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},E=t.forwardRef((function(e,n){var a=e.components,i=e.mdxType,r=e.originalType,m=e.parentName,g=p(e,["components","mdxType","originalType","parentName"]),N=o(a),E=i,s=N["".concat(m,".").concat(E)]||N[E]||y[E]||r;return a?t.createElement(s,l(l({ref:n},g),{},{components:a})):t.createElement(s,l({ref:n},g))}));function s(e,n){var a=arguments,i=n&&n.mdxType;if("string"==typeof e||i){var r=a.length,l=new Array(r);l[0]=E;var p={};for(var m in n)hasOwnProperty.call(n,m)&&(p[m]=n[m]);p.originalType=e,p[N]="string"==typeof e?e:i,l[1]=p;for(var o=2;o<r;o++)l[o]=a[o];return t.createElement.apply(null,l)}return t.createElement.apply(null,a)}E.displayName="MDXCreateElement"},665669:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>m,contentTitle:()=>l,default:()=>y,frontMatter:()=>r,metadata:()=>p,toc:()=>o});var t=a(58168),i=(a(296540),a(15680));const r={title:"\u6570\u636e\u5e93\u5efa\u8868\u6700\u4f73\u5b9e\u8df5",language:"zh-CN"},l=void 0,p={unversionedId:"table-design/best-practice",id:"table-design/best-practice",title:"\u6570\u636e\u5e93\u5efa\u8868\u6700\u4f73\u5b9e\u8df5",description:"\x3c!--",source:"@site/i18n/zh-CN/docusaurus-plugin-content-docs/current/table-design/best-practice.md",sourceDirName:"table-design",slug:"/table-design/best-practice",permalink:"/zh-CN/docs/dev/table-design/best-practice",draft:!1,tags:[],version:"current",frontMatter:{title:"\u6570\u636e\u5e93\u5efa\u8868\u6700\u4f73\u5b9e\u8df5",language:"zh-CN"},sidebar:"docs",previous:{title:"\u81ea\u589e\u5217",permalink:"/zh-CN/docs/dev/table-design/auto-increment"},next:{title:"\u5bfc\u5165\u6982\u89c8",permalink:"/zh-CN/docs/dev/data-operate/import/load-manual"}},m={},o=[{value:"1 \u6570\u636e\u8868\u6a21\u578b",id:"1-\u6570\u636e\u8868\u6a21\u578b",level:2},{value:"01 DUPLICATE KEY \u8868\u6a21\u578b",id:"01-duplicate-key-\u8868\u6a21\u578b",level:3},{value:"02 AGGREGATE KEY \u8868\u6a21\u578b",id:"02-aggregate-key-\u8868\u6a21\u578b",level:3},{value:"03 UNIQUE KEY \u8868\u6a21\u578b",id:"03-unique-key-\u8868\u6a21\u578b",level:3},{value:"2 \u7d22\u5f15",id:"2-\u7d22\u5f15",level:2},{value:"01 \u524d\u7f00\u7d22\u5f15",id:"01-\u524d\u7f00\u7d22\u5f15",level:3},{value:"02 ZoneMap \u7d22\u5f15",id:"02-zonemap-\u7d22\u5f15",level:3},{value:"03 \u5012\u6392\u7d22\u5f15",id:"03-\u5012\u6392\u7d22\u5f15",level:3},{value:"04 BloomFilter \u7d22\u5f15",id:"04-bloomfilter-\u7d22\u5f15",level:3},{value:"05 NGram BloomFilter \u7d22\u5f15",id:"05-ngram-bloomfilter-\u7d22\u5f15",level:3},{value:"2.6 Bitmap \u7d22\u5f15",id:"26-bitmap-\u7d22\u5f15",level:3},{value:"3 \u5b57\u6bb5\u7c7b\u578b",id:"3-\u5b57\u6bb5\u7c7b\u578b",level:2},{value:"4 \u6570\u636e\u8868\u521b\u5efa",id:"4-\u6570\u636e\u8868\u521b\u5efa",level:2}],g={toc:o},N="wrapper";function y(e){let{components:n,...r}=e;return(0,i.yg)(N,(0,t.A)({},g,r,{components:n,mdxType:"MDXLayout"}),(0,i.yg)("h2",{id:"1-\u6570\u636e\u8868\u6a21\u578b"},"1 \u6570\u636e\u8868\u6a21\u578b"),(0,i.yg)("admonition",{type:"note"},(0,i.yg)("p",{parentName:"admonition"},"Doris \u6570\u636e\u8868\u6a21\u578b\u4e0a\u76ee\u524d\u5206\u4e3a\u4e09\u7c7b\uff1aDUPLICATE KEY, UNIQUE KEY, AGGREGATE KEY\u3002")),(0,i.yg)("admonition",{type:"tip"},(0,i.yg)("p",{parentName:"admonition"},(0,i.yg)("strong",{parentName:"p"},"\u63a8\u8350\u89c4\u7ea6")),(0,i.yg)("p",{parentName:"admonition"},"\u56e0\u4e3a\u6570\u636e\u6a21\u578b\u5728\u5efa\u8868\u65f6\u5c31\u5df2\u7ecf\u786e\u5b9a\uff0c\u4e14",(0,i.yg)("strong",{parentName:"p"},"\u65e0\u6cd5\u4fee\u6539"),"\u3002\u6240\u4ee5\uff0c\u9009\u62e9\u4e00\u4e2a\u5408\u9002\u7684\u6570\u636e\u6a21\u578b",(0,i.yg)("strong",{parentName:"p"},"\u975e\u5e38\u91cd\u8981"),"\u3002"),(0,i.yg)("ol",{parentName:"admonition"},(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"Duplicate \u9002\u5408\u4efb\u610f\u7ef4\u5ea6\u7684 Ad-hoc \u67e5\u8be2\u3002\u867d\u7136\u540c\u6837\u65e0\u6cd5\u5229\u7528\u9884\u805a\u5408\u7684\u7279\u6027\uff0c\u4f46\u662f\u4e0d\u53d7\u805a\u5408\u6a21\u578b\u7684\u7ea6\u675f\uff0c\u53ef\u4ee5\u53d1\u6325\u5217\u5b58\u6a21\u578b\u7684\u4f18\u52bf\uff08\u53ea\u8bfb\u53d6\u76f8\u5173\u5217\uff0c\u800c\u4e0d\u9700\u8981\u8bfb\u53d6\u6240\u6709 Key \u5217\uff09\u3002")),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"Aggregate \u6a21\u578b\u53ef\u4ee5\u901a\u8fc7\u9884\u805a\u5408\uff0c\u6781\u5927\u5730\u964d\u4f4e\u805a\u5408\u67e5\u8be2\u65f6\u6240\u9700\u626b\u63cf\u7684\u6570\u636e\u91cf\u548c\u67e5\u8be2\u7684\u8ba1\u7b97\u91cf\uff0c\u975e\u5e38\u9002\u5408\u6709\u56fa\u5b9a\u6a21\u5f0f\u7684\u62a5\u8868\u7c7b\u67e5\u8be2\u573a\u666f\u3002\u4f46\u662f\u8be5\u6a21\u578b\u5bf9 count(*) \u67e5\u8be2\u5f88\u4e0d\u53cb\u597d\u3002\u540c\u65f6\u56e0\u4e3a\u56fa\u5b9a\u4e86 Value \u5217\u4e0a\u7684\u805a\u5408\u65b9\u5f0f\uff0c\u5728\u8fdb\u884c\u5176\u4ed6\u7c7b\u578b\u7684\u805a\u5408\u67e5\u8be2\u65f6\uff0c\u9700\u8981\u8003\u8651\u8bed\u610f\u6b63\u786e\u6027\u3002")),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"Unique \u6a21\u578b\u9488\u5bf9\u9700\u8981\u552f\u4e00\u4e3b\u952e\u7ea6\u675f\u7684\u573a\u666f\uff0c\u53ef\u4ee5\u4fdd\u8bc1\u4e3b\u952e\u552f\u4e00\u6027\u7ea6\u675f\u3002\u4f46\u662f\u65e0\u6cd5\u5229\u7528\u7269\u5316\u7b49\u9884\u805a\u5408\u5e26\u6765\u7684\u67e5\u8be2\u4f18\u52bf\u3002\u5bf9\u4e8e\u805a\u5408\u67e5\u8be2\u6709\u8f83\u9ad8\u6027\u80fd\u9700\u6c42\u7684\u7528\u6237\uff0c\u63a8\u8350\u4f7f\u7528\u81ea 1.2 \u7248\u672c\u52a0\u5165\u7684\u5199\u65f6\u5408\u5e76\u5b9e\u73b0\u3002")),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"\u5982\u679c\u6709\u90e8\u5206\u5217\u66f4\u65b0\u7684\u9700\u6c42\uff0c\u53ef\u4ee5\u9009\u62e9\uff1a"),(0,i.yg)("p",{parentName:"li"},"a. Unique \u6a21\u578b\u7684 Merge-on-Write \u6a21\u5f0f"),(0,i.yg)("p",{parentName:"li"},"b. Aggregate \u6a21\u578b\u7684 REPLACE_IF_NOT_NULL \u805a\u5408\u65b9\u5f0f")))),(0,i.yg)("h3",{id:"01-duplicate-key-\u8868\u6a21\u578b"},"01 DUPLICATE KEY \u8868\u6a21\u578b"),(0,i.yg)("p",null,(0,i.yg)("img",{alt:"DUPLICATE KEY \u8868\u6a21\u578b",src:a(164614).A,width:"2560",height:"1656"})),(0,i.yg)("p",null,"\u53ea\u6307\u5b9a\u6392\u5e8f\u5217\uff0c\u76f8\u540c\u7684 KEY \u884c\u4e0d\u4f1a\u5408\u5e76\u3002"),(0,i.yg)("p",null,"\u9002\u7528\u4e8e\u6570\u636e\u65e0\u9700\u63d0\u524d\u805a\u5408\u7684\u5206\u6790\u4e1a\u52a1\uff1a"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("p",{parentName:"li"},"\u539f\u59cb\u6570\u636e\u5206\u6790")),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("p",{parentName:"li"},"\u4ec5\u8ffd\u52a0\u65b0\u6570\u636e\u7684\u65e5\u5fd7\u6216\u65f6\u5e8f\u6570\u636e\u5206\u6790"))),(0,i.yg)("p",null,(0,i.yg)("strong",{parentName:"p"},"\u6700\u4f73\u5b9e\u8df5")),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-sql"},"-- \u4f8b\u5982 \u5141\u8bb8 KEY \u91cd\u590d\u4ec5\u8ffd\u52a0\u65b0\u6570\u636e\u7684\u65e5\u5fd7\u6570\u636e\u5206\u6790\nCREATE TABLE session_data\n(\n    visitorid   SMALLINT,\n    sessionid   BIGINT,\n    visittime   DATETIME,\n    city        CHAR(20),\n    province    CHAR(20),\n    ip          varchar(32),\n    brower      CHAR(20),\n    url         VARCHAR(1024)\n)\nDUPLICATE KEY(visitorid, sessionid) -- \u53ea\u7528\u4e8e\u6307\u5b9a\u6392\u5e8f\u5217\uff0c\u76f8\u540c\u7684 KEY \u884c\u4e0d\u4f1a\u5408\u5e76\nDISTRIBUTED BY HASH(sessionid, visitorid) BUCKETS 10;\n")),(0,i.yg)("h3",{id:"02-aggregate-key-\u8868\u6a21\u578b"},"02 AGGREGATE KEY \u8868\u6a21\u578b"),(0,i.yg)("p",null,(0,i.yg)("img",{alt:"AGGREGATE KEY \u8868\u6a21\u578b",src:a(448448).A,width:"2560",height:"1528"})),(0,i.yg)("p",null,"AGGREGATE KEY \u76f8\u540c\u65f6\uff0c\u65b0\u65e7\u8bb0\u5f55\u8fdb\u884c\u805a\u5408\uff0c\u76ee\u524d\u652f\u6301\u7684\u805a\u5408\u65b9\u5f0f\uff1a"),(0,i.yg)("ol",null,(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"SUM\uff1a\u6c42\u548c\uff0c\u591a\u884c\u7684 Value \u8fdb\u884c\u7d2f\u52a0\u3002")),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"REPLACE\uff1a\u66ff\u4ee3\uff0c\u4e0b\u4e00\u6279\u6570\u636e\u4e2d\u7684 Value \u4f1a\u66ff\u6362\u4e4b\u524d\u5bfc\u5165\u8fc7\u7684\u884c\u4e2d\u7684 Value\u3002")),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"MAX\uff1a\u4fdd\u7559\u6700\u5927\u503c\u3002")),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"MIN\uff1a\u4fdd\u7559\u6700\u5c0f\u503c\u3002")),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"REPLACE_IF_NOT_NULL\uff1a\u975e\u7a7a\u503c\u66ff\u6362\u3002\u548c REPLACE \u7684\u533a\u522b\u5728\u4e8e\u5bf9\u4e8e null \u503c\uff0c\u4e0d\u505a\u66ff\u6362\u3002")),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"HLL_UNION\uff1aHLL \u7c7b\u578b\u7684\u5217\u7684\u805a\u5408\u65b9\u5f0f\uff0c\u901a\u8fc7 HyperLogLog \u7b97\u6cd5\u805a\u5408\u3002")),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"BITMAP_UNION\uff1aBIMTAP \u7c7b\u578b\u7684\u5217\u7684\u805a\u5408\u65b9\u5f0f\uff0c\u8fdb\u884c\u4f4d\u56fe\u7684\u5e76\u96c6\u805a\u5408\u3002"))),(0,i.yg)("p",null,"\u9002\u5408\u62a5\u8868\u548c\u591a\u7ef4\u5206\u6790\u4e1a\u52a1\uff1a"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("p",{parentName:"li"},"\u7f51\u7ad9\u6d41\u91cf\u5206\u6790")),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("p",{parentName:"li"},"\u6570\u636e\u62a5\u8868\u591a\u7ef4\u5206\u6790"))),(0,i.yg)("p",null,(0,i.yg)("strong",{parentName:"p"},"\u6700\u4f73\u5b9e\u8df5")),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-sql"},"-- \u4f8b\u5982 \u7f51\u7ad9\u6d41\u91cf\u5206\u6790\nCREATE TABLE site_visit\n(\n    siteid      INT,\n    city        SMALLINT,\n    username    VARCHAR(32),\n    pv BIGINT   SUM DEFAULT '0' -- PV \u6d4f\u89c8\u91cf\u8ba1\u7b97\n)\nAGGREGATE KEY(siteid, city, username) -- \u76f8\u540c\u7684 KEY \u884c\u4f1a\u5408\u5e76\uff0c\u975e KEY \u5217\u4f1a\u6839\u636e\u6307\u5b9a\u7684\u805a\u5408\u51fd\u6570\u8fdb\u884c\u805a\u5408\nDISTRIBUTED BY HASH(siteid) BUCKETS 10;\n")),(0,i.yg)("h3",{id:"03-unique-key-\u8868\u6a21\u578b"},"03 UNIQUE KEY \u8868\u6a21\u578b"),(0,i.yg)("p",null,"UNIQUE KEY \u76f8\u540c\u65f6\uff0c\u65b0\u8bb0\u5f55\u8986\u76d6\u65e7\u8bb0\u5f55\u3002\u5728 1.2 \u7248\u672c\u4e4b\u524d\uff0cUNIQUE KEY \u5b9e\u73b0\u4e0a\u548c AGGREGATE KEY \u7684 REPLACE \u805a\u5408\u65b9\u6cd5\u4e00\u6837\uff0c\u4e8c\u8005\u672c\u8d28\u4e0a\u76f8\u540c\uff0c\u81ea 1.2 \u7248\u672c\u6211\u4eec\u7ed9 UNIQUE KEY \u5f15\u5165\u4e86 merge on write \u5b9e\u73b0\uff0c\u8be5\u5b9e\u73b0\u6709\u66f4\u597d\u7684\u805a\u5408\u67e5\u8be2\u6027\u80fd\u3002"),(0,i.yg)("p",null,"\u9002\u7528\u4e8e\u6709\u66f4\u65b0\u9700\u6c42\u7684\u5206\u6790\u4e1a\u52a1\uff1a"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("p",{parentName:"li"},"\u8ba2\u5355\u53bb\u91cd\u5206\u6790")),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("p",{parentName:"li"},"\u5b9e\u65f6\u589e\u5220\u6539\u540c\u6b65"))),(0,i.yg)("p",null,(0,i.yg)("strong",{parentName:"p"},"\u6700\u4f73\u5b9e\u8df5")),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-sql"},"-- \u4f8b\u5982 \u8ba2\u5355\u53bb\u91cd\u5206\u6790\nCREATE TABLE sales_order\n(\n    orderid     BIGINT,\n    status      TINYINT,\n    username    VARCHAR(32),\n    amount      BIGINT DEFAULT '0'\n)\nUNIQUE KEY(orderid) -- \u76f8\u540c\u7684 KEY \u884c\u4f1a\u5408\u5e76\nDISTRIBUTED BY HASH(orderid) BUCKETS 10;\n")),(0,i.yg)("h2",{id:"2-\u7d22\u5f15"},"2 \u7d22\u5f15"),(0,i.yg)("admonition",{type:"note"},(0,i.yg)("p",{parentName:"admonition"},"\u7d22\u5f15\u7528\u4e8e\u5e2e\u52a9\u5feb\u901f\u8fc7\u6ee4\u6216\u67e5\u627e\u6570\u636e\u3002\u76ee\u524d\u4e3b\u8981\u652f\u6301\u4e24\u7c7b\u7d22\u5f15\uff1a"),(0,i.yg)("ol",{parentName:"admonition"},(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"\u5185\u5efa",(0,i.yg)("strong",{parentName:"p"},"\u81ea\u52a8"),"\u521b\u5efa\u7684\u667a\u80fd\u7d22\u5f15\uff0c\u5305\u62ec\u524d\u7f00\u7d22\u5f15\u548c ZoneMap \u7d22\u5f15\u3002")),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"\u7528\u6237",(0,i.yg)("strong",{parentName:"p"},"\u624b\u52a8"),"\u521b\u5efa\u7684\u4e8c\u7ea7\u7d22\u5f15\uff0c\u5305\u62ec\u5012\u6392\u7d22\u5f15\u3001bloomfilter \u7d22\u5f15\u3001ngram bloomfilter \u7d22\u5f15 \u548c bitmap \u7d22\u5f15\u3002")))),(0,i.yg)("h3",{id:"01-\u524d\u7f00\u7d22\u5f15"},"01 \u524d\u7f00\u7d22\u5f15"),(0,i.yg)("p",null,"\u5728 Aggregate\u3001Unique \u548c Duplicate \u4e09\u79cd\u6570\u636e\u6a21\u578b\u4e2d\u3002\u5e95\u5c42\u7684\u6570\u636e\u5b58\u50a8\uff0c\u662f\u6309\u7167\u5404\u81ea\u5efa\u8868\u8bed\u53e5\u4e2d\uff0cAGGREGATE KEY\u3001UNIQUE KEY \u548c DUPLICATE KEY \u4e2d\u6307\u5b9a\u7684\u5217\u8fdb\u884c\u6392\u5e8f\u5b58\u50a8\u7684\u3002\u800c\u524d\u7f00\u7d22\u5f15\uff0c\u5373\u5728\u6392\u5e8f\u7684\u57fa\u7840\u4e0a\uff0c\u5b9e\u73b0\u7684\u4e00\u79cd\u6839\u636e\u7ed9\u5b9a\u524d\u7f00\u5217\uff0c\u5feb\u901f\u67e5\u8be2\u6570\u636e\u7684\u7d22\u5f15\u65b9\u5f0f\u3002"),(0,i.yg)("p",null,"\u524d\u7f00\u7d22\u5f15\u662f\u7a00\u758f\u7d22\u5f15\uff0c\u4e0d\u80fd\u7cbe\u786e\u5b9a\u4f4d\u5230 Key \u6240\u5728\u7684\u884c\uff0c\u53ea\u80fd\u7c97\u7c92\u5ea6\u5730\u5b9a\u4f4d\u51fa Key \u53ef\u80fd\u5b58\u5728\u7684\u8303\u56f4\uff0c\u7136\u540e\u4f7f\u7528\u4e8c\u5206\u67e5\u627e\u7b97\u6cd5\u7cbe\u786e\u5730\u5b9a\u4f4d Key \u7684\u4f4d\u7f6e\u3002"),(0,i.yg)("admonition",{type:"tip"},(0,i.yg)("p",{parentName:"admonition"},(0,i.yg)("strong",{parentName:"p"},"\u63a8\u8350\u89c4\u7ea6")),(0,i.yg)("ol",{parentName:"admonition"},(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"\u5efa\u8868\u65f6\uff0c",(0,i.yg)("strong",{parentName:"p"},"\u6b63\u786e\u7684\u9009\u62e9\u5217\u987a\u5e8f\uff0c\u80fd\u591f\u6781\u5927\u5730\u63d0\u9ad8\u67e5\u8be2\u6548\u7387"),"\u3002"),(0,i.yg)("p",{parentName:"li"},"\u56e0\u4e3a\u5efa\u8868\u65f6\u5df2\u7ecf\u6307\u5b9a\u4e86\u5217\u987a\u5e8f\uff0c\u6240\u4ee5\u4e00\u4e2a\u8868\u53ea\u6709\u4e00\u79cd\u524d\u7f00\u7d22\u5f15\u3002\u8fd9\u5bf9\u4e8e\u4f7f\u7528\u5176\u4ed6\u4e0d\u80fd\u547d\u4e2d\u524d\u7f00\u7d22\u5f15\u7684\u5217\u4f5c\u4e3a\u6761\u4ef6\u8fdb\u884c\u7684\u67e5\u8be2\u6765\u8bf4\uff0c\u6548\u7387\u4e0a\u53ef\u80fd\u65e0\u6cd5\u6ee1\u8db3\u9700\u6c42\uff0c\u8fd9\u79cd\u60c5\u51b5\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u521b\u5efa \u7269\u5316\u89c6\u56fe \u6765\u4eba\u4e3a\u7684\u8c03\u6574\u5217\u987a\u5e8f\u3002")),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"\u524d\u7f00\u7d22\u5f15\u7684\u7b2c\u4e00\u4e2a\u5b57\u6bb5\u4e00\u5b9a\u662f\u6700\u5e38\u67e5\u8be2\u7684\u5b57\u6bb5\uff0c\u5e76\u4e14\u9700\u8981\u662f\u9ad8\u57fa\u6570\u5b57\u6bb5\uff1a"),(0,i.yg)("p",{parentName:"li"},"a. \u5206\u6876\u5b57\u6bb5\u6ce8\u610f\u4e8b\u9879\uff1a\u8fd9\u4e2a\u4e00\u822c\u662f\u6570\u636e\u5206\u5e03\u6bd4\u8f83\u5747\u8861\u7684\uff0c\u4e5f\u662f\u7ecf\u5e38\u4f7f\u7528\u7684\u5b57\u6bb5\uff0c\u6700\u597d\u662f\u9ad8\u57fa\u6570\u5b57\u6bb5"),(0,i.yg)("p",{parentName:"li"},"b. Int\uff084\uff09+ Int\uff084\uff09 + varchar(50)\uff0c\u524d\u7f00\u7d22\u5f15\u957f\u5ea6\u53ea\u6709 28"),(0,i.yg)("p",{parentName:"li"},"c. Int\uff084\uff09 + varchar(50) + Int\uff084\uff09\uff0c\u524d\u7f00\u7d22\u5f15\u957f\u5ea6\u53ea\u6709 24"),(0,i.yg)("p",{parentName:"li"},"d. varchar(10) + varchar(50) \uff0c\u524d\u7f00\u7d22\u5f15\u957f\u5ea6\u53ea\u6709 30"),(0,i.yg)("p",{parentName:"li"},"e. \u524d\u7f00\u7d22\u5f15\uff0836 \u4f4d\uff09\uff1a\u7b2c\u4e00\u4e2a\u5b57\u6bb5\u67e5\u8be2\u6027\u80fd\u6700\u597d\uff0c\u524d\u7f00\u7d22\u5f15\u78b0\u89c1 varchar \u7c7b\u578b\u7684\u5b57\u6bb5\uff0c\u4f1a\u81ea\u52a8\u622a\u65ad\u524d 20 \u4e2a\u5b57\u7b26"),(0,i.yg)("p",{parentName:"li"},"f. \u6700\u5e38\u7528\u7684\u67e5\u8be2\u5b57\u6bb5\u5982\u679c\u80fd\u653e\u5230\u524d\u7f00\u7d22\u5f15\u91cc\u5c3d\u53ef\u80fd\u653e\u5230\u524d\u524d\u7f00\u7d22\u5f15\u91cc\uff0c\u5982\u679c\u4e0d\u80fd\uff0c\u53ef\u4ee5\u653e\u5230\u5206\u6876\u5b57\u6bb5\u91cc")),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"\u524d\u7f00\u7d22\u5f15\u4e2d\u7684\u5b57\u6bb5\u957f\u5ea6\u5c3d\u53ef\u80fd\u660e\u786e\uff0c\u56e0\u4e3a Doris \u53ea\u6709\u524d 36 \u4e2a\u5b57\u8282\u80fd\u8d70\u524d\u7f00\u7d22\u5f15\u3002")),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"\u5982\u679c\u67d0\u4e2a\u8303\u56f4\u6570\u636e\u5728\u5206\u533a\u5206\u6876\u548c\u524d\u7f00\u7d22\u5f15\u4e2d\u90fd\u4e0d\u597d\u8bbe\u8ba1\uff0c\u53ef\u4ee5\u8003\u8651\u5f15\u5165\u5012\u6392\u7d22\u5f15\u52a0\u901f\u3002")))),(0,i.yg)("h3",{id:"02-zonemap-\u7d22\u5f15"},"02 ZoneMap \u7d22\u5f15"),(0,i.yg)("p",null,"ZoneMap \u7d22\u5f15\u662f\u5728\u5217\u5b58\u683c\u5f0f\u4e0a\uff0c\u5bf9\u6bcf\u4e00\u5217\u81ea\u52a8\u7ef4\u62a4\u7684\u7d22\u5f15\u4fe1\u606f\uff0c\u5305\u62ec Min/Max\uff0cnull \u503c\u4e2a\u6570\u7b49\u7b49\u3002\u5728\u6570\u636e\u67e5\u8be2\u65f6\uff0c\u4f1a\u6839\u636e\u8303\u56f4\u6761\u4ef6\u8fc7\u6ee4\u7684\u5b57\u6bb5\u6309\u7167 ZoneMap \u7edf\u8ba1\u4fe1\u606f\u9009\u53d6\u626b\u63cf\u7684\u6570\u636e\u8303\u56f4\u3002"),(0,i.yg)("p",null,"\u4f8b\u5982\u5bf9 age \u5b57\u6bb5\u8fdb\u884c\u8fc7\u6ee4\uff0c\u67e5\u8be2\u8bed\u53e5\u5982\u4e0b\uff1a"),(0,i.yg)("p",null,(0,i.yg)("inlineCode",{parentName:"p"},"SELECT * FROM table WHERE age > 0 and age < 51; ")),(0,i.yg)("p",null,"\u5728\u6ca1\u6709\u547d\u4e2d Short Key Index \u7684\u60c5\u51b5\u4e0b\uff0c\u4f1a\u6839\u636e\u6761\u4ef6\u8bed\u53e5\u4e2d age \u7684\u67e5\u8be2\u6761\u4ef6\uff0c\u5229\u7528 ZoneMap \u7d22\u5f15\u627e\u5230\u5e94\u8be5\u626b\u63cf\u7684\u6570\u636e ordinary \u8303\u56f4\uff0c\u51cf\u5c11\u8981\u626b\u63cf\u7684 page \u6570\u91cf\u3002"),(0,i.yg)("h3",{id:"03-\u5012\u6392\u7d22\u5f15"},"03 \u5012\u6392\u7d22\u5f15"),(0,i.yg)("p",null,"\u4ece 2.0.0 \u7248\u672c\u5f00\u59cb\uff0cDoris \u652f\u6301\u5012\u6392\u7d22\u5f15\uff0c\u53ef\u4ee5\u7528\u6765\u8fdb\u884c\u6587\u672c\u7c7b\u578b\u7684\u5168\u6587\u68c0\u7d22\u3001\u666e\u901a\u6570\u503c\u65e5\u671f\u7c7b\u578b\u7684\u7b49\u503c\u8303\u56f4\u67e5\u8be2\uff0c\u5feb\u901f\u4ece\u6d77\u91cf\u6570\u636e\u4e2d\u8fc7\u6ee4\u51fa\u6ee1\u8db3\u6761\u4ef6\u7684\u884c\u3002"),(0,i.yg)("p",null,(0,i.yg)("strong",{parentName:"p"},"\u6700\u4f73\u5b9e\u8df5")),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-sql"},'-- \u521b\u5efa\u793a\u4f8b\uff1a\u53ef\u4ee5\u8868\u521b\u5efa\u65f6\u6307\u5b9a\u6216\u8005\u521b\u5efa\u540e\u65b0\u589e\uff0c\u5982\u4e0b\u521b\u5efa\u8868\u65f6\u6307\u5b9a\nCREATE TABLE table_name\n(\n  columns_difinition,\n  INDEX idx_name1(column_name1) USING INVERTED [PROPERTIES("parser" = "english|unicode|chinese")] [COMMENT \'your comment\']\n  INDEX idx_name2(column_name2) USING INVERTED [PROPERTIES("parser" = "english|unicode|chinese")] [COMMENT \'your comment\']\n  INDEX idx_name3(column_name3) USING INVERTED [PROPERTIES("parser" = "chinese", "parser_mode" = "fine_grained|coarse_grained")] [COMMENT \'your comment\']\n  INDEX idx_name4(column_name4) USING INVERTED [PROPERTIES("parser" = "english|unicode|chinese", "support_phrase" = "true|false")] [COMMENT \'your comment\']\n  INDEX idx_name5(column_name4) USING INVERTED [PROPERTIES("char_filter_type" = "char_replace", "char_filter_pattern" = "._"), "char_filter_replacement" = " "] [COMMENT \'your comment\']\n  INDEX idx_name5(column_name4) USING INVERTED [PROPERTIES("char_filter_type" = "char_replace", "char_filter_pattern" = "._")] [COMMENT \'your comment\']\n)\ntable_properties;\n\n-- \u4f7f\u7528\u793a\u4f8b\uff1a\u5168\u6587\u68c0\u7d22\u5173\u952e\u8bcd\u5339\u914d\uff0c\u901a\u8fc7 MATCH_ANY MATCH_ALL \u5b8c\u6210\nSELECT * FROM table_name WHERE column_name MATCH_ANY | MATCH_ALL \'keyword1 ...\';\n')),(0,i.yg)("admonition",{type:"tip"},(0,i.yg)("p",{parentName:"admonition"},(0,i.yg)("strong",{parentName:"p"},"\u63a8\u8350\u89c4\u7ea6")),(0,i.yg)("ol",{parentName:"admonition"},(0,i.yg)("li",{parentName:"ol"},"\u5982\u679c\u67d0\u4e2a\u8303\u56f4\u6570\u636e\u5728\u5206\u533a\u5206\u6876\u548c\u524d\u7f00\u7d22\u5f15\u4e2d\u90fd\u4e0d\u597d\u8bbe\u8ba1\uff0c\u53ef\u4ee5\u8003\u8651\u5f15\u5165\u5012\u6392\u7d22\u5f15\u52a0\u901f\u3002"))),(0,i.yg)("admonition",{type:"caution"},(0,i.yg)("p",{parentName:"admonition"},(0,i.yg)("strong",{parentName:"p"},"\u5f3a\u5236\u89c4\u7ea6")),(0,i.yg)("ol",{parentName:"admonition"},(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"\u5012\u6392\u7d22\u5f15\u5728\u4e0d\u540c\u6570\u636e\u6a21\u578b\u4e2d\u6709\u4e0d\u540c\u7684\u4f7f\u7528\u9650\u5236\uff1a"),(0,i.yg)("p",{parentName:"li"},"a. Aggregate KEY \u8868\u6a21\u578b\uff1a\u53ea\u80fd\u4e3a Key \u5217\u5efa\u7acb\u5012\u6392\u7d22\u5f15\u3002"),(0,i.yg)("p",{parentName:"li"},"b. Unique KEY \u8868\u6a21\u578b\uff1a\u9700\u8981\u5f00\u542f merge on write \u7279\u6027\uff0c\u5f00\u542f\u540e\uff0c\u53ef\u4ee5\u4e3a\u4efb\u610f\u5217\u5efa\u7acb\u5012\u6392\u7d22\u5f15\u3002"),(0,i.yg)("p",{parentName:"li"},"c. Duplicate KEY \u8868\u6a21\u578b\uff1a\u53ef\u4ee5\u4e3a\u4efb\u610f\u5217\u5efa\u7acb\u5012\u6392\u7d22\u5f15\u3002")))),(0,i.yg)("h3",{id:"04-bloomfilter-\u7d22\u5f15"},"04 BloomFilter \u7d22\u5f15"),(0,i.yg)("p",null,"Doris \u652f\u6301\u7528\u6237\u5bf9\u53d6\u503c\u533a\u5206\u5ea6\u6bd4\u8f83\u5927\u7684\u5b57\u6bb5\u6dfb\u52a0 BloomFilter \u7d22\u5f15\uff0c\u9002\u5408\u5728\u57fa\u6570\u8f83\u9ad8\u7684\u5217\u4e0a\u8fdb\u884c\u7b49\u503c\u67e5\u8be2\u7684\u573a\u666f\u3002"),(0,i.yg)("p",null,(0,i.yg)("strong",{parentName:"p"},"\u6700\u4f73\u5b9e\u8df5")),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-sql"},'-- \u521b\u5efa\u793a\u4f8b\uff1a\u901a\u8fc7\u5728\u5efa\u8868\u8bed\u53e5\u7684 PROPERTIES \u91cc\u52a0\u4e0a"bloom_filter_columns"="k1,k2,k3"\n-- \u4f8b\u5982\u4e0b\u9762\u6211\u4eec\u5bf9\u8868\u91cc\u7684 saler_id,category_id \u521b\u5efa\u4e86 BloomFilter \u7d22\u5f15\u3002\nCREATE TABLE IF NOT EXISTS sale_detail_bloom  (\n    sale_date date NOT NULL COMMENT "\u9500\u552e\u65f6\u95f4",\n    customer_id int NOT NULL COMMENT "\u5ba2\u6237\u7f16\u53f7",\n    saler_id int NOT NULL COMMENT "\u9500\u552e\u5458",\n    sku_id int NOT NULL COMMENT "\u5546\u54c1\u7f16\u53f7",\n    category_id int NOT NULL COMMENT "\u5546\u54c1\u5206\u7c7b",\n    sale_count int NOT NULL COMMENT "\u9500\u552e\u6570\u91cf",\n    sale_price DECIMAL(12,2) NOT NULL COMMENT "\u5355\u4ef7",\n    sale_amt DECIMAL(20,2)  COMMENT "\u9500\u552e\u603b\u91d1\u989d"\n)\nDuplicate  KEY(sale_date, customer_id,saler_id,sku_id,category_id)\nDISTRIBUTED BY HASH(saler_id) BUCKETS 10\nPROPERTIES (\n"bloom_filter_columns"="saler_id,category_id"\n);\n')),(0,i.yg)("admonition",{type:"caution"},(0,i.yg)("p",{parentName:"admonition"},(0,i.yg)("strong",{parentName:"p"},"\u5f3a\u5236\u89c4\u7ea6")),(0,i.yg)("ol",{parentName:"admonition"},(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"\u4e0d\u652f\u6301\u5bf9 Tinyint\u3001Float\u3001Double \u7c7b\u578b\u7684\u5217\u5efa BloomFilter \u7d22\u5f15\u3002")),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"BloomFilter \u7d22\u5f15\u53ea\u5bf9 in \u548c = \u8fc7\u6ee4\u67e5\u8be2\u6709\u52a0\u901f\u6548\u679c\u3002")),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"BloomFilter \u7d22\u5f15\u5fc5\u987b\u5728\u67e5\u8be2\u6761\u4ef6\u662f in \u6216\u8005 =\uff0c\u5e76\u4e14\u662f\u9ad8\u57fa\u6570\uff085000 \u4ee5\u4e0a\uff09\u5217\u4e0a\u6784\u5efa\u3002"),(0,i.yg)("p",{parentName:"li"},"a. \u9996\u5148 BloomFilter \u9002\u7528\u4e8e\u975e\u524d\u7f00\u8fc7\u6ee4"),(0,i.yg)("p",{parentName:"li"},"b. \u67e5\u8be2\u4f1a\u6839\u636e\u8be5\u5217\u9ad8\u9891\u8fc7\u6ee4\uff0c\u800c\u4e14\u67e5\u8be2\u6761\u4ef6\u5927\u591a\u662f in \u548c = \u8fc7\u6ee4"),(0,i.yg)("p",{parentName:"li"},"c. \u4e0d\u540c\u4e8e Bitmap, BloomFilter \u9002\u7528\u4e8e\u9ad8\u57fa\u6570\u5217\u3002\u6bd4\u5982 UserID\u3002\u56e0\u4e3a\u5982\u679c\u521b\u5efa\u5728\u4f4e\u57fa\u6570\u7684\u5217\u4e0a\uff0c\u6bd4\u5982\u201c\u6027\u522b\u201d\u5217\uff0c\u5219\u6bcf\u4e2a Block \u51e0\u4e4e\u90fd\u4f1a\u5305\u542b\u6240\u6709\u53d6\u503c\uff0c\u5bfc\u81f4 BloomFilter \u7d22\u5f15\u5931\u53bb\u610f\u4e49"),(0,i.yg)("p",{parentName:"li"},"d. \u6570\u636e\u57fa\u6570\u5728\u4e00\u534a\u5de6\u53f3"),(0,i.yg)("p",{parentName:"li"},"e. \u7c7b\u4f3c\u8eab\u4efd\u8bc1\u53f7\u8fd9\u79cd\u57fa\u6570\u7279\u522b\u9ad8\u5e76\u4e14\u67e5\u8be2\u662f\u7b49\u503c\uff08=\uff09\u67e5\u8be2\uff0c\u4f7f\u7528 BloomFilter \u7d22\u5f15\u80fd\u6781\u5927\u52a0\u901f")))),(0,i.yg)("h3",{id:"05-ngram-bloomfilter-\u7d22\u5f15"},"05 NGram BloomFilter \u7d22\u5f15"),(0,i.yg)("p",null,"\u4ece 2.0.0 \u7248\u672c\u5f00\u59cb\uff0cDoris \u4e3a\u4e86\u63d0\u5347",(0,i.yg)("strong",{parentName:"p"},"LIKE"),"\u7684\u67e5\u8be2\u6027\u80fd\uff0c\u589e\u52a0\u4e86 NGram BloomFilter \u7d22\u5f15\u3002"),(0,i.yg)("p",null,(0,i.yg)("strong",{parentName:"p"},"\u6700\u4f73\u5b9e\u8df5")),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-sql"},'-- \u521b\u5efa\u793a\u4f8b\uff1a\u8868\u521b\u5efa\u65f6\u6307\u5b9a\nCREATE TABLE `nb_table` (\n  `siteid` int(11) NULL DEFAULT "10" COMMENT "",\n  `citycode` smallint(6) NULL COMMENT "",\n  `username` varchar(32) NULL DEFAULT "" COMMENT "",\n  INDEX idx_ngrambf (`username`) USING NGRAM_BF PROPERTIES("gram_size"="3", "bf_size"="256") COMMENT \'username ngram_bf index\'\n) ENGINE=OLAP\nAGGREGATE KEY(`siteid`, `citycode`, `username`) COMMENT "OLAP"\nDISTRIBUTED BY HASH(`siteid`) BUCKETS 10;\n\n-- PROPERTIES("gram_size"="3", "bf_size"="256")\uff0c\u5206\u522b\u8868\u793a gram \u7684\u4e2a\u6570\u548c bloom filter \u7684\u5b57\u8282\u6570\u3002\n-- gram \u7684\u4e2a\u6570\u8ddf\u5b9e\u9645\u67e5\u8be2\u573a\u666f\u76f8\u5173\uff0c\u901a\u5e38\u8bbe\u7f6e\u4e3a\u5927\u90e8\u5206\u67e5\u8be2\u5b57\u7b26\u4e32\u7684\u957f\u5ea6\uff0cbloom filter \u5b57\u8282\u6570\uff0c\u53ef\u4ee5\u901a\u8fc7\u6d4b\u8bd5\u5f97\u51fa\uff0c\u901a\u5e38\u8d8a\u5927\u8fc7\u6ee4\u6548\u679c\u8d8a\u597d\uff0c\u53ef\u4ee5\u4ece 256 \u5f00\u59cb\u8fdb\u884c\u9a8c\u8bc1\u6d4b\u8bd5\u770b\u770b\u6548\u679c\u3002\u5f53\u7136\u5b57\u8282\u6570\u8d8a\u5927\u4e5f\u4f1a\u5e26\u6765\u7d22\u5f15\u5b58\u50a8\u3001\u5185\u5b58 cost \u4e0a\u5347\u3002\n-- \u5982\u679c\u6570\u636e\u57fa\u6570\u6bd4\u8f83\u9ad8\uff0c\u5b57\u8282\u6570\u53ef\u4ee5\u4e0d\u7528\u8bbe\u7f6e\u8fc7\u5927\uff0c\u5982\u679c\u57fa\u6570\u4e0d\u662f\u5f88\u9ad8\uff0c\u53ef\u4ee5\u901a\u8fc7\u589e\u52a0\u5b57\u8282\u6570\u6765\u63d0\u5347\u8fc7\u6ee4\u6548\u679c\u3002\n')),(0,i.yg)("admonition",{type:"caution"},(0,i.yg)("p",{parentName:"admonition"},(0,i.yg)("strong",{parentName:"p"},"\u5f3a\u5236\u89c4\u7ea6")),(0,i.yg)("ol",{parentName:"admonition"},(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"NGram BloomFilter \u53ea\u652f\u6301\u5b57\u7b26\u4e32\u5217")),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"NGram BloomFilter \u7d22\u5f15\u548c BloomFilter \u7d22\u5f15\u4e3a\u4e92\u65a5\u5173\u7cfb\uff0c\u5373\u540c\u4e00\u4e2a\u5217\u53ea\u80fd\u8bbe\u7f6e\u4e24\u8005\u4e2d\u7684\u4e00\u4e2a")),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"NGram \u5927\u5c0f\u548c BloomFilter \u7684\u5b57\u8282\u6570\uff0c\u53ef\u4ee5\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u8c03\u4f18\uff0c\u5982\u679c NGram \u6bd4\u8f83\u5c0f\uff0c\u53ef\u4ee5\u9002\u5f53\u589e\u52a0 BloomFilter \u5927\u5c0f")),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"\u4ebf\u7ea7\u522b\u4ee5\u4e0a\u6570\u636e\uff0c\u5982\u679c\u6709\u6a21\u7cca\u5339\u914d\uff0c\u4f7f\u7528\u5012\u6392\u7d22\u5f15\u6216\u8005\u662f NGram Bloomfilter")))),(0,i.yg)("h3",{id:"26-bitmap-\u7d22\u5f15"},"2.6 Bitmap \u7d22\u5f15"),(0,i.yg)("p",null,"\u4e3a\u4e86\u52a0\u901f\u6570\u636e\u67e5\u8be2\uff0cDoris \u652f\u6301\u7528\u6237\u4e3a\u67d0\u4e9b\u5b57\u6bb5\u6dfb\u52a0 Bitmap \u7d22\u5f15\uff0c\u9002\u5408\u5728\u57fa\u6570\u8f83\u4f4e\u7684\u5217\u4e0a\u8fdb\u884c\u7b49\u503c\u67e5\u8be2\u6216\u8303\u56f4\u67e5\u8be2\u7684\u573a\u666f\u3002"),(0,i.yg)("p",null,(0,i.yg)("strong",{parentName:"p"},"\u6700\u4f73\u5b9e\u8df5")),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-sql"},"-- \u521b\u5efa\u793a\u4f8b\uff1a\u5728 bitmap_table \u4e0a\u4e3a siteid \u521b\u5efa Bitmap \u7d22\u5f15\nCREATE INDEX [IF NOT EXISTS] bitmap_index_name ON\nbitmap_table (siteid)\nUSING BITMAP COMMENT 'bitmap_siteid';\n")),(0,i.yg)("admonition",{type:"caution"},(0,i.yg)("p",{parentName:"admonition"},(0,i.yg)("strong",{parentName:"p"},"\u5f3a\u5236\u89c4\u7ea6")),(0,i.yg)("ol",{parentName:"admonition"},(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"Bitmap \u7d22\u5f15\u4ec5\u5728\u5355\u5217\u4e0a\u521b\u5efa\u3002")),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"Bitmap \u7d22\u5f15\u80fd\u591f\u5e94\u7528\u5728 ",(0,i.yg)("inlineCode",{parentName:"p"},"Duplicate"),"\u3001",(0,i.yg)("inlineCode",{parentName:"p"},"Uniq")," \u6570\u636e\u6a21\u578b\u7684\u6240\u6709\u5217\u548c ",(0,i.yg)("inlineCode",{parentName:"p"},"Aggregate"),"\u6a21\u578b\u7684 key \u5217\u4e0a\u3002")),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"Bitmap \u7d22\u5f15\u652f\u6301\u7684\u6570\u636e\u7c7b\u578b\u5982\u4e0b\uff1a"))),(0,i.yg)("ul",{parentName:"admonition"},(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("inlineCode",{parentName:"li"},"TINYINT")),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("inlineCode",{parentName:"li"},"SMALLINT")),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("inlineCode",{parentName:"li"},"INT")),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("inlineCode",{parentName:"li"},"BIGINT")),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("inlineCode",{parentName:"li"},"CHAR")),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("inlineCode",{parentName:"li"},"VARCHAR")),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("inlineCode",{parentName:"li"},"DATE")),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("inlineCode",{parentName:"li"},"DATETIME")),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("inlineCode",{parentName:"li"},"LARGEINT")),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("inlineCode",{parentName:"li"},"DECIMAL")),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("inlineCode",{parentName:"li"},"BOOL"))),(0,i.yg)("ol",{parentName:"admonition",start:4},(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"Bitmap \u7d22\u5f15\u4ec5\u5728 Segment V2 \u4e0b\u751f\u6548\u3002\u5f53\u521b\u5efa Index \u65f6\uff0c\u8868\u7684\u5b58\u50a8\u683c\u5f0f\u5c06\u9ed8\u8ba4\u8f6c\u6362\u4e3a V2 \u683c\u5f0f\u3002")),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"Bitmap \u7d22\u5f15\u5fc5\u987b\u5728\u4e00\u5b9a\u57fa\u6570\u8303\u56f4\u5185\u6784\u5efa\uff0c\u592a\u9ad8\u6216\u8005\u592a\u4f4e\u7684\u57fa\u6570\u90fd\u4e0d\u5408\u9002"),(0,i.yg)("p",{parentName:"li"},"a. \u9002\u7528\u4e8e\u4f4e\u57fa\u6570\u7684\u5217\u4e0a\uff0c\u5efa\u8bae\u5728 100 \u5230 100,000 \u4e4b\u95f4\uff0c\u5982\uff1a\u804c\u4e1a\u3001\u5730\u5e02\u7b49\u3002\u91cd\u590d\u5ea6\u8fc7\u9ad8\u5219\u5bf9\u6bd4\u5176\u4ed6\u7c7b\u578b\u7d22\u5f15\u6ca1\u6709\u660e\u663e\u4f18\u52bf\uff1b\u91cd\u590d\u5ea6\u8fc7\u4f4e\uff0c\u5219\u7a7a\u95f4\u6548\u7387\u548c\u6027\u80fd\u4f1a\u5927\u5927\u964d\u4f4e\u3002\u7279\u5b9a\u7c7b\u578b\u7684\u67e5\u8be2\u4f8b\u5982 COUNT, OR, AND \u7b49\u903b\u8f91\u64cd\u4f5c\u56e0\u4e3a\u53ea\u9700\u8981\u8fdb\u884c\u4f4d\u8fd0\u7b97"),(0,i.yg)("p",{parentName:"li"},"b. \u8be5\u7d22\u5f15\u66f4\u591a\u7684\u9002\u5408\u6b63\u4ea4\u67e5\u8be2")))),(0,i.yg)("h2",{id:"3-\u5b57\u6bb5\u7c7b\u578b"},"3 \u5b57\u6bb5\u7c7b\u578b"),(0,i.yg)("p",null,"Doris \u652f\u6301\u591a\u79cd\u5b57\u6bb5\u7c7b\u578b\uff0c\u4f8b\u5982\u7cbe\u786e\u53bb\u91cd BITMAP\u3001\u6a21\u7cca\u53bb\u91cd HLL\u3001\u534a\u7ed3\u6784\u5316 ARRAY/MAP/JSON \u548c\u5e38\u89c1\u7684\u6570\u5b57\u3001\u5b57\u7b26\u4e32\u548c\u65f6\u95f4\u7c7b\u578b\u7b49\u3002"),(0,i.yg)("admonition",{type:"tip"},(0,i.yg)("p",{parentName:"admonition"},(0,i.yg)("strong",{parentName:"p"},"\u63a8\u8350\u89c4\u7ea6")),(0,i.yg)("ol",{parentName:"admonition"},(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"VARCHAR "),(0,i.yg)("p",{parentName:"li"},"a. \u53d8\u957f\u5b57\u7b26\u4e32\uff0c\u957f\u5ea6\u8303\u56f4\u4e3a\uff1a1-65533 \u5b57\u8282\u957f\u5ea6\uff0c\u4ee5 UTF-8 \u7f16\u7801\u5b58\u50a8\u7684\uff0c\u56e0\u6b64\u901a\u5e38\u82f1\u6587\u5b57\u7b26\u5360 1 \u4e2a\u5b57\u8282\uff0c\u4e2d\u6587\u5b57\u7b26\u5360 3 \u4e2a\u5b57\u8282\u3002"),(0,i.yg)("p",{parentName:"li"},"b. \u8fd9\u91cc\u5b58\u5728\u4e00\u4e2a\u8bef\u533a\uff0c\u5373 varchar(255) \u548c varchar(65533) \u7684\u6027\u80fd\u95ee\u9898\uff0c\u8fd9\u4e8c\u8005\u5982\u679c\u5b58\u7684\u6570\u636e\u662f\u4e00\u6837\u7684\uff0c\u6027\u80fd\u4e5f\u662f\u4e00\u6837\u7684\uff0c\u5efa\u8868\u65f6\u5982\u679c\u4e0d\u786e\u5b9a\u8fd9\u4e2a\u5b57\u6bb5\u6700\u5927\u6709\u591a\u957f\uff0c\u5efa\u8bae\u76f4\u63a5\u4f7f\u7528 65533 \u5373\u53ef\uff0c\u9632\u6b62\u7531\u4e8e\u5b57\u7b26\u4e32\u8fc7\u957f\u5bfc\u81f4\u7684\u5bfc\u5165\u95ee\u9898\u3002")),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"STRING "),(0,i.yg)("p",{parentName:"li"},"a. \u53d8\u957f\u5b57\u7b26\u4e32\uff0c\u9ed8\u8ba4\u652f\u6301 1048576 \u5b57\u8282\uff081MB\uff09\uff0c\u53ef\u8c03\u5927\u5230 2147483643 \u5b57\u8282\uff082G\uff09\uff0c\u4ee5 UTF-8 \u7f16\u7801\u5b58\u50a8\u7684\uff0c\u56e0\u6b64\u901a\u5e38\u82f1\u6587\u5b57\u7b26\u5360 1 \u4e2a\u5b57\u8282\uff0c\u4e2d\u6587\u5b57\u7b26\u5360 3 \u4e2a\u5b57\u8282\u3002"),(0,i.yg)("p",{parentName:"li"},"b. \u53ea\u80fd\u7528\u5728 Value \u5217\uff0c\u4e0d\u80fd\u7528\u5728 Key \u5217\u548c\u5206\u533a\u5206\u6876\u5217\u3002"),(0,i.yg)("p",{parentName:"li"},"c. \u9002\u7528\u4e8e\u4e00\u4e9b\u6bd4\u8f83\u5927\u7684\u6587\u672c\u5b58\u50a8\uff0c\u4e00\u822c\u5982\u679c\u6ca1\u6709\u8fd9\u79cd\u9700\u6c42\u7684\u8bdd\uff0c\u5efa\u8bae\u4f7f\u7528 VARCHAR\uff0cSTRING \u5217\u65e0\u6cd5\u7528\u5728 Key \u5217\u548c\u5206\u6876\u5217\uff0c\u5c40\u9650\u6027\u6bd4\u8f83\u5927\u3002")),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"\u6570\u503c\u578b\u5b57\u6bb5\uff1a\u6309\u7167\u7cbe\u5ea6\u9009\u62e9\u5bf9\u5e94\u7684\u6570\u636e\u7c7b\u578b\u5373\u53ef\uff0c\u6ca1\u6709\u8fc7\u4e8e\u7279\u6b8a\u7684\u6ce8\u610f\u3002")),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"\u65f6\u95f4\u5b57\u6bb5\uff1a\u8fd9\u91cc\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5982\u679c\u6709\u9ad8\u7cbe\u5ea6\uff08\u6beb\u79d2\u503c\u65f6\u95f4\u6233\uff09\u9700\u6c42\uff0c\u9700\u8981\u6307\u660e\u4f7f\u7528 datetime(6)\uff0c\u5426\u5219\u9ed8\u8ba4\u662f\u4e0d\u652f\u6301\u6beb\u79d2\u503c\u65f6\u95f4\u6233\u7684\u3002")),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"\u5efa\u8bae\u4f7f\u7528 JSON \u6570\u636e\u7c7b\u578b\u4ee3\u66ff\u5b57\u7b26\u4e32\u7c7b\u578b\u5b58\u653e JSON \u6570\u636e\u7684\u4f7f\u7528\u65b9\u5f0f\u3002")))),(0,i.yg)("h2",{id:"4-\u6570\u636e\u8868\u521b\u5efa"},"4 \u6570\u636e\u8868\u521b\u5efa"),(0,i.yg)("p",null,(0,i.yg)("img",{alt:"\u6570\u636e\u8868\u521b\u5efa",src:a(210126).A,width:"2560",height:"1384"})),(0,i.yg)("p",null,"\u5efa\u8868\u65f6\u9664\u4e86\u8981\u6ce8\u610f\u6570\u636e\u8868\u6a21\u578b\u3001\u7d22\u5f15\u548c\u5b57\u6bb5\u7c7b\u578b\u7684\u9009\u62e9\u8fd8\u9700\u8981\u6ce8\u610f\u5206\u533a\u5206\u6876\u7684\u8bbe\u7f6e\u3002"),(0,i.yg)("p",null,(0,i.yg)("strong",{parentName:"p"},"\u6700\u4f73\u5b9e\u8df5")),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-sql"},'-- \u4ee5 Unique \u6a21\u578b\u7684 Merge-on-Write \u8868\u4e3a\u4f8b\n-- Unique \u6a21\u578b\u7684\u5199\u65f6\u5408\u5e76\u5b9e\u73b0\uff0c\u4e0e\u805a\u5408\u6a21\u578b\u5c31\u662f\u5b8c\u5168\u4e0d\u540c\u7684\u4e24\u79cd\u6a21\u578b\u4e86\uff0c\u67e5\u8be2\u6027\u80fd\u66f4\u63a5\u8fd1\u4e8e duplicate \u6a21\u578b\uff0c\n-- \u5728\u6709\u4e3b\u952e\u7ea6\u675f\u9700\u6c42\u7684\u573a\u666f\u4e0a\u76f8\u6bd4\u805a\u5408\u6a21\u578b\u6709\u8f83\u5927\u7684\u67e5\u8be2\u6027\u80fd\u4f18\u52bf\uff0c\u5c24\u5176\u662f\u5728\u805a\u5408\u67e5\u8be2\u4ee5\u53ca\u9700\u8981\u7528\u7d22\u5f15\u8fc7\u6ee4\u5927\u91cf\u6570\u636e\u7684\u67e5\u8be2\u4e2d\u3002\n\n-- \u975e\u5206\u533a\u8868\nCREATE TABLE IF NOT EXISTS tbl_unique_merge_on_write\n(\n    `user_id` LARGEINT NOT NULL COMMENT "\u7528\u6237id",\n    `username` VARCHAR(50) NOT NULL COMMENT "\u7528\u6237\u6635\u79f0",\n    `register_time` DATE COMMENT "\u7528\u6237\u6ce8\u518c\u65f6\u95f4",\n    `city` VARCHAR(20) COMMENT "\u7528\u6237\u6240\u5728\u57ce\u5e02",\n    `age` SMALLINT COMMENT "\u7528\u6237\u5e74\u9f84",\n    `sex` TINYINT COMMENT "\u7528\u6237\u6027\u522b",\n    `phone` LARGEINT COMMENT "\u7528\u6237\u7535\u8bdd",\n    `address` VARCHAR(500) COMMENT "\u7528\u6237\u5730\u5740"\n)\nUNIQUE KEY(`user_id`, `username`)\n-- 3-5G \u7684\u6570\u636e\u91cf\nDISTRIBUTED BY HASH(`user_id`) BUCKETS 10 \nPROPERTIES (\n-- \u5728 1.2.0 \u7248\u672c\u4e2d\uff0c\u4f5c\u4e3a\u4e00\u4e2a\u65b0\u7684 feature\uff0c\u5199\u65f6\u5408\u5e76\u9ed8\u8ba4\u5173\u95ed\uff0c\u7528\u6237\u53ef\u4ee5\u901a\u8fc7\u6dfb\u52a0\u4e0b\u9762\u7684 property \u6765\u5f00\u542f\n"enable_unique_key_merge_on_write" = "true" \n);\n\n-- \u5206\u533a\u8868\nCREATE TABLE IF NOT EXISTS tbl_unique_merge_on_write_p\n(\n    `user_id` LARGEINT NOT NULL COMMENT "\u7528\u6237id",\n    `username` VARCHAR(50) NOT NULL COMMENT "\u7528\u6237\u6635\u79f0",\n    `register_time` DATE COMMENT "\u7528\u6237\u6ce8\u518c\u65f6\u95f4",\n    `city` VARCHAR(20) COMMENT "\u7528\u6237\u6240\u5728\u57ce\u5e02",\n    `age` SMALLINT COMMENT "\u7528\u6237\u5e74\u9f84",\n    `sex` TINYINT COMMENT "\u7528\u6237\u6027\u522b",\n    `phone` LARGEINT COMMENT "\u7528\u6237\u7535\u8bdd",\n    `address` VARCHAR(500) COMMENT "\u7528\u6237\u5730\u5740"\n)\nUNIQUE KEY(`user_id`, `username`, `register_time`)\nPARTITION BY RANGE(`register_time`) (\n    PARTITION p00010101_1899 VALUES [(\'0001-01-01\'), (\'1900-01-01\')), \n    PARTITION p19000101 VALUES [(\'1900-01-01\'), (\'1900-01-02\')), \n    PARTITION p19000102 VALUES [(\'1900-01-02\'), (\'1900-01-03\')),\n    PARTITION p19000103 VALUES [(\'1900-01-03\'), (\'1900-01-04\')),\n    PARTITION p19000104_1999 VALUES [(\'1900-01-04\'), (\'2000-01-01\')),\n    FROM ("2000-01-01") TO ("2022-01-01") INTERVAL 1 YEAR, \n    PARTITION p30001231 VALUES [(\'3000-12-31\'), (\'3001-01-01\')), \n    PARTITION p99991231 VALUES [(\'9999-12-31\'), (MAXVALUE)) \n) \n-- \u9ed8\u8ba4 3-5G \u7684\u6570\u636e\u91cf\nDISTRIBUTED BY HASH(`user_id`) BUCKETS 10 \nPROPERTIES ( \n-- \u5728 1.2.0 \u7248\u672c\u4e2d\uff0c\u4f5c\u4e3a\u4e00\u4e2a\u65b0\u7684 feature\uff0c\u5199\u65f6\u5408\u5e76\u9ed8\u8ba4\u5173\u95ed\uff0c\u7528\u6237\u53ef\u4ee5\u901a\u8fc7\u6dfb\u52a0\u4e0b\u9762\u7684 property \u6765\u5f00\u542f\n"enable_unique_key_merge_on_write" = "true", \n-- \u52a8\u6001\u5206\u533a\u8c03\u5ea6\u7684\u5355\u4f4d\u3002\u53ef\u6307\u5b9a\u4e3a HOUR\u3001DAY\u3001WEEK\u3001MONTH\u3001YEAR\u3002\u5206\u522b\u8868\u793a\u6309\u5c0f\u65f6\u3001\u6309\u5929\u3001\u6309\u661f\u671f\u3001\u6309\u6708\u3001\u6309\u5e74\u8fdb\u884c\u5206\u533a\u521b\u5efa\u6216\u5220\u9664\u3002\n"dynamic_partition.time_unit" = "MONTH",\n-- \u52a8\u6001\u5206\u533a\u7684\u8d77\u59cb\u504f\u79fb\uff0c\u4e3a\u8d1f\u6570\u3002\u6839\u636e time_unit \u5c5e\u6027\u7684\u4e0d\u540c\uff0c\u4ee5\u5f53\u5929\uff08\u661f\u671f/\u6708\uff09\u4e3a\u57fa\u51c6\uff0c\u5206\u533a\u8303\u56f4\u5728\u6b64\u504f\u79fb\u4e4b\u524d\u7684\u5206\u533a\u5c06\u4f1a\u88ab\u5220\u9664\uff08TTL\uff09\u3002\u5982\u679c\u4e0d\u586b\u5199\uff0c\u5219\u9ed8\u8ba4\u4e3a -2147483648\uff0c\u5373\u4e0d\u5220\u9664\u5386\u53f2\u5206\u533a\u3002\n"dynamic_partition.start" = "-3000",\n-- \u52a8\u6001\u5206\u533a\u7684\u7ed3\u675f\u504f\u79fb\uff0c\u4e3a\u6b63\u6570\u3002\u6839\u636e time_unit \u5c5e\u6027\u7684\u4e0d\u540c\uff0c\u4ee5\u5f53\u5929\uff08\u661f\u671f/\u6708\uff09\u4e3a\u57fa\u51c6\uff0c\u63d0\u524d\u521b\u5efa\u5bf9\u5e94\u8303\u56f4\u7684\u5206\u533a\u3002\n"dynamic_partition.end" = "10",\n-- \u52a8\u6001\u521b\u5efa\u7684\u5206\u533a\u540d\u524d\u7f00\uff08\u5fc5\u9009\uff09\u3002\n"dynamic_partition.prefix" = "p",\n-- \u52a8\u6001\u521b\u5efa\u7684\u5206\u533a\u6240\u5bf9\u5e94\u7684\u5206\u6876\u6570\u91cf\u3002\n"dynamic_partition.buckets" = "10", \n"dynamic_partition.enable" = "true", \n-- \u52a8\u6001\u521b\u5efa\u7684\u5206\u533a\u6240\u5bf9\u5e94\u7684\u526f\u672c\u6570\u91cf\uff0c\u5982\u679c\u4e0d\u586b\u5199\uff0c\u5219\u9ed8\u8ba4\u4e3a\u8be5\u8868\u521b\u5efa\u65f6\u6307\u5b9a\u7684\u526f\u672c\u6570\u91cf 3\u3002\n"dynamic_partition.replication_num" = "3",\n"replication_num" = "3"\n);  \n\n-- \u5206\u533a\u521b\u5efa\u67e5\u770b\n-- \u5b9e\u9645\u521b\u5efa\u7684\u5206\u533a\u6570\u9700\u8981\u7ed3\u5408 dynamic_partition.start\u3001end \u4ee5\u53ca PARTITION BY RANGE \u7684\u8bbe\u7f6e\u5171\u540c\u51b3\u5b9a\nshow partitions from tbl_unique_merge_on_write_p;\n')),(0,i.yg)("admonition",{type:"caution"},(0,i.yg)("p",{parentName:"admonition"},(0,i.yg)("strong",{parentName:"p"},"\u5f3a\u5236\u89c4\u7ea6")),(0,i.yg)("ol",{parentName:"admonition"},(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"\u6570\u636e\u5e93\u5b57\u7b26\u96c6\u6307\u5b9a UTF-8\uff0c\u5e76\u4e14\u53ea\u652f\u6301 UTF-8\u3002")),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"\u8868\u7684\u526f\u672c\u6570\u5fc5\u987b\u4e3a 3\uff08\u672a\u6307\u5b9a\u526f\u672c\u6570\u65f6\uff0c\u9ed8\u8ba4\u4e3a 3\uff09\u3002")),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"\u5355\u4e2a Tablet\uff08",(0,i.yg)("strong",{parentName:"p"},"Tablet \u6570 = \u5206\u533a\u6570 ","*"," \u6876\u6570 ","*"," \u526f\u672c\u6570"),"\uff09\u7684\u6570\u636e\u91cf\u7406\u8bba\u4e0a\u6ca1\u6709\u4e0a\u4e0b\u754c\uff0c\u9664\u5c0f\u8868\uff08\u767e\u5146\u7ef4\u8868\uff09\u5916\u9700\u786e\u4fdd\u5728 ",(0,i.yg)("strong",{parentName:"p"},"1G - 10G")," \u7684\u8303\u56f4\u5185\uff1a"),(0,i.yg)("p",{parentName:"li"},"a. \u5982\u679c\u5355\u4e2a Tablet \u6570\u636e\u91cf\u8fc7\u5c0f\uff0c\u5219\u6570\u636e\u7684\u805a\u5408\u6548\u679c\u4e0d\u4f73\uff0c\u4e14\u5143\u6570\u636e\u7ba1\u7406\u538b\u529b\u5927\u3002"),(0,i.yg)("p",{parentName:"li"},"b. \u5982\u679c\u6570\u636e\u91cf\u8fc7\u5927\uff0c\u5219\u4e0d\u5229\u4e8e\u526f\u672c\u7684\u8fc1\u79fb\u3001\u8865\u9f50\uff0c\u4e14\u4f1a\u589e\u52a0 Schema Change \u6216\u8005 \u7269\u5316 \u64cd\u4f5c\u5931\u8d25\u91cd\u8bd5\u7684\u4ee3\u4ef7\uff08\u8fd9\u4e9b\u64cd\u4f5c\u5931\u8d25\u91cd\u8bd5\u7684\u7c92\u5ea6\u662f Tablet\uff09\u3002")),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"5 \u4ebf\u4ee5\u4e0a\u7684\u6570\u636e\u5fc5\u987b\u8bbe\u7f6e",(0,i.yg)("strong",{parentName:"p"},"\u5206\u533a\u5206\u6876\u7b56\u7565"),"\uff1a"),(0,i.yg)("p",{parentName:"li"},"a. ",(0,i.yg)("strong",{parentName:"p"},"bucket \u8bbe\u7f6e\u5efa\u8bae"),"\uff1a"),(0,i.yg)("pre",{parentName:"li"},(0,i.yg)("code",{parentName:"pre"},"i. \u5927\u8868\u7684\u5355\u4e2a Tablet \u5b58\u50a8\u6570\u636e\u5927\u5c0f\u5728 1G-10G \u533a\u95f4\uff0c\u53ef\u9632\u6b62\u8fc7\u591a\u7684\u5c0f\u6587\u4ef6\u4ea7\u751f\u3002\n\nii. \u767e\u5146\u5de6\u53f3\u7684\u7ef4\u8868 Tablet \u6570\u91cf\u63a7\u5236\u5728 3-5 \u4e2a\uff0c\u4fdd\u8bc1\u4e00\u5b9a\u7684\u5e76\u53d1\u6570\u4e5f\u4e0d\u4f1a\u4ea7\u751f\u8fc7\u591a\u7684\u5c0f\u6587\u4ef6\u3002\n")),(0,i.yg)("p",{parentName:"li"},"b. \u6ca1\u6709\u529e\u6cd5\u5206\u533a\u7684\uff0c\u6570\u636e\u53c8\u8f83\u5feb\u589e\u957f\u7684\uff0c\u6ca1\u529e\u6cd5\u6309\u7167\u65f6\u95f4\u52a8\u6001\u5206\u533a\uff0c\u53ef\u4ee5\u9002\u5f53\u653e\u5927\u4e00\u4e0b\u4f60\u7684 Bucket \u6570\u91cf\uff0c\u6309\u7167\u4f60\u7684\u6570\u636e\u4fdd\u5b58\u5468\u671f\uff08180 \u5929\uff09\u6570\u636e\u603b\u91cf\uff0c\u6765\u4f30\u7b97\u4f60\u7684 Bucket \u6570\u91cf\u5e94\u8be5\u662f\u591a\u5c11\uff0c\u5efa\u8bae\u8fd8\u662f\u5355\u4e2a Bucket \u5927\u5c0f\u5728 1-10G\u3002"),(0,i.yg)("p",{parentName:"li"},"c. \u5bf9\u5206\u6876\u5b57\u6bb5\u8fdb\u884c\u52a0\u76d0\u5904\u7406\uff0c\u4e1a\u52a1\u4e0a\u67e5\u8be2\u7684\u65f6\u5019\u4e5f\u662f\u8981\u540c\u6837\u7684\u52a0\u76d0\u7b56\u7565\uff0c\u8fd9\u6837\u80fd\u5229\u7528\u5230\u5206\u6876\u6570\u636e\u526a\u88c1\u80fd\u529b\u3002"),(0,i.yg)("p",{parentName:"li"},"d. \u6570\u636e\u968f\u673a\u5206\u6876\uff1a"),(0,i.yg)("pre",{parentName:"li"},(0,i.yg)("code",{parentName:"pre"},"i. \u5982\u679c OLAP \u8868\u6ca1\u6709\u66f4\u65b0\u7c7b\u578b\u7684\u5b57\u6bb5\uff0c\u5c06\u8868\u7684\u6570\u636e\u5206\u6876\u6a21\u5f0f\u8bbe\u7f6e\u4e3a RANDOM\uff0c\u5219\u53ef\u4ee5\u907f\u514d\u4e25\u91cd\u7684\u6570\u636e\u503e\u659c (\u6570\u636e\u5728\u5bfc\u5165\u8868\u5bf9\u5e94\u7684\u5206\u533a\u7684\u65f6\u5019\uff0c\u5355\u6b21\u5bfc\u5165\u4f5c\u4e1a\u6bcf\u4e2a Batch \u7684\u6570\u636e\u5c06\u968f\u673a\u9009\u62e9\u4e00\u4e2a Tablet \u8fdb\u884c\u5199\u5165)\u3002\n\nii. \u5f53\u8868\u7684\u5206\u6876\u6a21\u5f0f\u88ab\u8bbe\u7f6e\u4e3a RANDOM \u65f6\uff0c\u56e0\u4e3a\u6ca1\u6709\u5206\u6876\u5217\uff0c\u65e0\u6cd5\u6839\u636e\u5206\u6876\u5217\u7684\u503c\u4ec5\u5bf9\u51e0\u4e2a\u5206\u6876\u67e5\u8be2\uff0c\u5bf9\u8868\u8fdb\u884c\u67e5\u8be2\u7684\u65f6\u5019\u5c06\u5bf9\u547d\u4e2d\u5206\u533a\u7684\u5168\u90e8\u5206\u6876\u540c\u65f6\u626b\u63cf\uff0c\u8be5\u8bbe\u7f6e\u9002\u5408\u5bf9\u8868\u6570\u636e\u6574\u4f53\u7684\u805a\u5408\u67e5\u8be2\u5206\u6790\u800c\u4e0d\u9002\u5408\u9ad8\u5e76\u53d1\u7684\u70b9\u67e5\u8be2\u3002\n\niii. \u5982\u679c OLAP \u8868\u7684\u662f Random Distribution \u7684\u6570\u636e\u5206\u5e03\uff0c\u90a3\u4e48\u5728\u6570\u636e\u5bfc\u5165\u7684\u65f6\u5019\u53ef\u4ee5\u8bbe\u7f6e\u5355\u5206\u7247\u5bfc\u5165\u6a21\u5f0f\uff08\u5c06 `load_to_single_tablet` \u8bbe\u7f6e\u4e3a true\uff09\uff0c\u90a3\u4e48\u5728\u5927\u6570\u636e\u91cf\u7684\u5bfc\u5165\u7684\u65f6\u5019\uff0c\u4e00\u4e2a\u4efb\u52a1\u5728\u5c06\u6570\u636e\u5199\u5165\u5bf9\u5e94\u7684\u5206\u533a\u65f6\u5c06\u53ea\u5199\u5165\u4e00\u4e2a\u5206\u7247\uff0c\u8fd9\u6837\u5c06\u80fd\u63d0\u9ad8\u6570\u636e\u5bfc\u5165\u7684\u5e76\u53d1\u5ea6\u548c\u541e\u5410\u91cf\uff0c\u51cf\u5c11\u6570\u636e\u5bfc\u5165\u548c Compaction \u5bfc\u81f4\u7684\u5199\u653e\u5927\u95ee\u9898\uff0c\u4fdd\u969c\u96c6\u7fa4\u7684\u7a33\u5b9a\u6027\u3002\n")),(0,i.yg)("p",{parentName:"li"},"e. \u7ef4\u5ea6\u8868\uff1a\u7f13\u6162\u589e\u957f\u7684\uff0c\u53ef\u4ee5\u4f7f\u7528\u5355\u5206\u533a\uff0c\u5728\u5206\u6876\u7b56\u7565\u4e0a\u4f7f\u7528\u5e38\u7528\u67e5\u8be2\u6761\u4ef6\uff08\u8fd9\u4e2a\u5b57\u6bb5\u6570\u636e\u5206\u5e03\u76f8\u5bf9\u5747\u8861\uff09\u5206\u6876\u3002"),(0,i.yg)("p",{parentName:"li"},"f. \u4e8b\u5b9e\u8868")),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"\u5bf9\u4e8e\u6709\u5927\u91cf\u5386\u53f2\u5206\u533a\u6570\u636e\uff0c\u4f46\u662f\u5386\u53f2\u6570\u636e\u6bd4\u8f83\u5c11\uff0c\u6216\u8005\u4e0d\u5747\u8861\uff0c\u6216\u8005\u67e5\u8be2\u6982\u7387\u7684\u60c5\u51b5\uff0c\u4f7f\u7528\u5982\u4e0b\u65b9\u5f0f\u5c06\u6570\u636e\u653e\u5728\u7279\u6b8a\u5206\u533a\u3002"),(0,i.yg)("p",{parentName:"li"},"\u5bf9\u4e8e\u5386\u53f2\u6570\u636e\uff0c\u5982\u679c\u6570\u636e\u91cf\u6bd4\u8f83\u5c0f\u6211\u4eec\u53ef\u4ee5\u521b\u5efa\u5386\u53f2\u5206\u533a\uff08\u6bd4\u5982\u5e74\u5206\u533a\uff0c\u6708\u5206\u533a\uff09\uff0c\u5c06\u6240\u6709\u5386\u53f2\u6570\u636e\u653e\u5230\u5bf9\u5e94\u5206\u533a\u91cc\u521b\u5efa\u5386\u53f2\u5206\u533a\u65b9\u5f0f\u4f8b\u5982\uff1a",(0,i.yg)("inlineCode",{parentName:"p"},'FROM ("2000-01-01") TO ("2022-01-01") INTERVAL 1 YEAR'),"\uff0c\u5177\u4f53\u53c2\u8003\uff1a"),(0,i.yg)("pre",{parentName:"li"},(0,i.yg)("code",{parentName:"pre",className:"language-sql"},"( \n    PARTITION p00010101_1899 VALUES [('0001-01-01'), ('1900-01-01')), \n    \n    PARTITION p19000101 VALUES [('1900-01-01'), ('1900-01-02')), \n    \n    ... \n    \n    PARTITION p19000104_1999 VALUES [('1900-01-04'), ('2000-01-01')),\n    \n    FROM (\"2000-01-01\") TO (\"2022-01-01\") INTERVAL 1 YEAR, \n    \n    PARTITION p30001231 VALUES [('3000-12-31'), ('3001-01-01')), \n    \n    PARTITION p99991231 VALUES [('9999-12-31'), (MAXVALUE)) \n    \n )\n"))),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"\u5355\u8868\u7269\u5316\u89c6\u56fe\u4e0d\u80fd\u8d85\u8fc7 6 \u4e2a"),(0,i.yg)("p",{parentName:"li"},"a. \u5355\u8868\u7269\u5316\u89c6\u56fe\u662f\u5b9e\u65f6\u6784\u5efa"),(0,i.yg)("p",{parentName:"li"},"b. \u5728 Unqiue \u6a21\u578b\u4e0a\u7269\u5316\u89c6\u56fe\u53ea\u80fd\u8d77\u5230 Key \u91cd\u65b0\u6392\u5e8f\u7684\u4f5c\u7528\uff0c\u4e0d\u80fd\u505a\u6570\u636e\u7684\u805a\u5408\uff0c\u56e0\u4e3a Unqiue \u6a21\u578b\u7684\u805a\u5408\u6a21\u578b\u662f Replace")))))}y.isMDXComponent=!0},448448:(e,n,a)=>{a.d(n,{A:()=>t});const t=a.p+"assets/images/aggregate-key-model-example-56f5457b8684e8da1222fb19c7756ec1.png"},210126:(e,n,a)=>{a.d(n,{A:()=>t});const t=a.p+"assets/images/create-table-example-eeb2537949e854e2dbb17326a2c2a228.png"},164614:(e,n,a)=>{a.d(n,{A:()=>t});const t=a.p+"assets/images/duplicate-key-model-example-f0d28a2328a37f044e15cb967ea995ca.png"}}]);