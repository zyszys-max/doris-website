"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([[11367],{15680:(e,a,n)=>{n.d(a,{xA:()=>g,yg:()=>E});var t=n(296540);function i(e,a,n){return a in e?Object.defineProperty(e,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[a]=n,e}function r(e,a){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),n.push.apply(n,t)}return n}function l(e){for(var a=1;a<arguments.length;a++){var n=null!=arguments[a]?arguments[a]:{};a%2?r(Object(n),!0).forEach((function(a){i(e,a,n[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))}))}return e}function p(e,a){if(null==e)return{};var n,t,i=function(e,a){if(null==e)return{};var n,t,i={},r=Object.keys(e);for(t=0;t<r.length;t++)n=r[t],a.indexOf(n)>=0||(i[n]=e[n]);return i}(e,a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(t=0;t<r.length;t++)n=r[t],a.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var m=t.createContext({}),o=function(e){var a=t.useContext(m),n=a;return e&&(n="function"==typeof e?e(a):l(l({},a),e)),n},g=function(e){var a=o(e.components);return t.createElement(m.Provider,{value:a},e.children)},y="mdxType",N={inlineCode:"code",wrapper:function(e){var a=e.children;return t.createElement(t.Fragment,{},a)}},d=t.forwardRef((function(e,a){var n=e.components,i=e.mdxType,r=e.originalType,m=e.parentName,g=p(e,["components","mdxType","originalType","parentName"]),y=o(n),d=i,E=y["".concat(m,".").concat(d)]||y[d]||N[d]||r;return n?t.createElement(E,l(l({ref:a},g),{},{components:n})):t.createElement(E,l({ref:a},g))}));function E(e,a){var n=arguments,i=a&&a.mdxType;if("string"==typeof e||i){var r=n.length,l=new Array(r);l[0]=d;var p={};for(var m in a)hasOwnProperty.call(a,m)&&(p[m]=a[m]);p.originalType=e,p[y]="string"==typeof e?e:i,l[1]=p;for(var o=2;o<r;o++)l[o]=n[o];return t.createElement.apply(null,l)}return t.createElement.apply(null,n)}d.displayName="MDXCreateElement"},921017:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>m,contentTitle:()=>l,default:()=>N,frontMatter:()=>r,metadata:()=>p,toc:()=>o});var t=n(58168),i=(n(296540),n(15680));const r={title:"\u5143\u6570\u636e\u8fd0\u7ef4",language:"zh-CN"},l=void 0,p={unversionedId:"admin-manual/maint-monitor/metadata-operation",id:"version-2.1/admin-manual/maint-monitor/metadata-operation",title:"\u5143\u6570\u636e\u8fd0\u7ef4",description:"\x3c!--",source:"@site/i18n/zh-CN/docusaurus-plugin-content-docs/version-2.1/admin-manual/maint-monitor/metadata-operation.md",sourceDirName:"admin-manual/maint-monitor",slug:"/admin-manual/maint-monitor/metadata-operation",permalink:"/zh-CN/docs/admin-manual/maint-monitor/metadata-operation",draft:!1,tags:[],version:"2.1",frontMatter:{title:"\u5143\u6570\u636e\u8fd0\u7ef4",language:"zh-CN"},sidebar:"docs",previous:{title:"Tablet \u672c\u5730\u8c03\u8bd5",permalink:"/zh-CN/docs/admin-manual/maint-monitor/tablet-local-debug"},next:{title:"\u670d\u52a1\u81ea\u52a8\u62c9\u8d77",permalink:"/zh-CN/docs/admin-manual/maint-monitor/automatic-service-start"}},m={},o=[{value:"\u91cd\u8981\u63d0\u793a",id:"\u91cd\u8981\u63d0\u793a",level:2},{value:"\u5143\u6570\u636e\u76ee\u5f55\u7ed3\u6784",id:"\u5143\u6570\u636e\u76ee\u5f55\u7ed3\u6784",level:2},{value:"\u57fa\u672c\u64cd\u4f5c",id:"\u57fa\u672c\u64cd\u4f5c",level:2},{value:"\u542f\u52a8\u5355\u8282\u70b9 FE",id:"\u542f\u52a8\u5355\u8282\u70b9-fe",level:3},{value:"\u6dfb\u52a0 FE",id:"\u6dfb\u52a0-fe",level:3},{value:"\u5220\u9664 FE",id:"\u5220\u9664-fe",level:3},{value:"\u9ad8\u7ea7\u64cd\u4f5c",id:"\u9ad8\u7ea7\u64cd\u4f5c",level:2},{value:"\u6545\u969c\u6062\u590d",id:"\u6545\u969c\u6062\u590d",level:3},{value:"FE \u7c7b\u578b\u53d8\u66f4",id:"fe-\u7c7b\u578b\u53d8\u66f4",level:3},{value:"FE \u8fc1\u79fb",id:"fe-\u8fc1\u79fb",level:3},{value:"\u66f4\u6362 FE \u7aef\u53e3",id:"\u66f4\u6362-fe-\u7aef\u53e3",level:3},{value:"\u4ece FE \u5185\u5b58\u4e2d\u6062\u590d\u5143\u6570\u636e",id:"\u4ece-fe-\u5185\u5b58\u4e2d\u6062\u590d\u5143\u6570\u636e",level:3},{value:"\u67e5\u770b BDBJE \u4e2d\u7684\u6570\u636e",id:"\u67e5\u770b-bdbje-\u4e2d\u7684\u6570\u636e",level:3},{value:"\u6700\u4f73\u5b9e\u8df5",id:"\u6700\u4f73\u5b9e\u8df5",level:2},{value:"\u5176\u4ed6\u5e38\u89c1\u95ee\u9898",id:"\u5176\u4ed6\u5e38\u89c1\u95ee\u9898",level:2}],g={toc:o},y="wrapper";function N(e){let{components:a,...n}=e;return(0,i.yg)(y,(0,t.A)({},g,n,{components:a,mdxType:"MDXLayout"}),(0,i.yg)("admonition",{title:"\u6ce8\u610f",type:"warning"},(0,i.yg)("p",{parentName:"admonition"},"\u9664\u975e\u7edd\u5bf9\u5fc5\u8981\uff0c\u5426\u5219\u8bf7\u907f\u514d\u4f7f\u7528 ",(0,i.yg)("inlineCode",{parentName:"p"},"metadata_failure_recovery"),"\uff0c\u4f7f\u7528\u53ef\u80fd\u4f1a\u5bfc\u81f4\u5143\u6570\u636e\u622a\u65ad\u3001\u5143\u6570\u636e\u4e22\u5931\u4ee5\u53ca\u5143\u6570\u636e Split-brains \u7684\u53d1\u751f\u3002\u5f3a\u70c8\u5efa\u8bae\u8c28\u614e\u4f7f\u7528\u6b64\u529f\u80fd\uff0c\u4ee5\u9632\u6b62\u7531\u4e8e\u4e0d\u89c4\u8303\u7684\u64cd\u4f5c\u7a0b\u5e8f\u5bfc\u81f4\u6570\u636e\u4e0d\u53ef\u6062\u590d\u7684\u635f\u574f\u3002")),(0,i.yg)("p",null,"\u672c\u6587\u6863\u4e3b\u8981\u4ecb\u7ecd\u5728\u5b9e\u9645\u751f\u4ea7\u73af\u5883\u4e2d\uff0c\u5982\u4f55\u5bf9 Doris \u7684\u5143\u6570\u636e\u8fdb\u884c\u7ba1\u7406\u3002\u5305\u62ec FE \u8282\u70b9\u5efa\u8bae\u7684\u90e8\u7f72\u65b9\u5f0f\u3001\u4e00\u4e9b\u5e38\u7528\u7684\u64cd\u4f5c\u65b9\u6cd5\u3001\u4ee5\u53ca\u5e38\u89c1\u9519\u8bef\u7684\u89e3\u51b3\u65b9\u6cd5\u3002"),(0,i.yg)("p",null,"\u5728\u9605\u8bfb\u672c\u6587\u5f53\u524d\uff0c\u8bf7\u5148\u9605\u8bfb ",(0,i.yg)("a",{parentName:"p",href:"/community/design/metadata-design"},"Doris \u5143\u6570\u636e\u8bbe\u8ba1\u6587\u6863")," \u4e86\u89e3 Doris \u5143\u6570\u636e\u7684\u5de5\u4f5c\u539f\u7406\u3002"),(0,i.yg)("h2",{id:"\u91cd\u8981\u63d0\u793a"},"\u91cd\u8981\u63d0\u793a"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"\u5f53\u524d\u5143\u6570\u636e\u7684\u8bbe\u8ba1\u662f\u65e0\u6cd5\u5411\u540e\u517c\u5bb9\u7684\u3002\u5373\u5982\u679c\u65b0\u7248\u672c\u6709\u65b0\u589e\u7684\u5143\u6570\u636e\u7ed3\u6784\u53d8\u52a8\uff08\u53ef\u4ee5\u67e5\u770b FE \u4ee3\u7801\u4e2d\u7684 ",(0,i.yg)("inlineCode",{parentName:"li"},"FeMetaVersion.java")," \u6587\u4ef6\u4e2d\u662f\u5426\u6709\u65b0\u589e\u7684 VERSION\uff09\uff0c\u90a3\u4e48\u5728\u5347\u7ea7\u5230\u65b0\u7248\u672c\u540e\uff0c\u901a\u5e38\u662f\u65e0\u6cd5\u518d\u56de\u6eda\u5230\u65e7\u7248\u672c\u7684\u3002\u6240\u4ee5\uff0c\u5728\u5347\u7ea7 FE \u4e4b\u524d\uff0c\u8bf7\u52a1\u5fc5\u6309\u7167 ",(0,i.yg)("a",{parentName:"li",href:"/zh-CN/docs/admin-manual/cluster-management/upgrade"},"\u5347\u7ea7\u6587\u6863")," \u4e2d\u7684\u64cd\u4f5c\uff0c\u6d4b\u8bd5\u5143\u6570\u636e\u517c\u5bb9\u6027\u3002")),(0,i.yg)("h2",{id:"\u5143\u6570\u636e\u76ee\u5f55\u7ed3\u6784"},"\u5143\u6570\u636e\u76ee\u5f55\u7ed3\u6784"),(0,i.yg)("p",null,"\u6211\u4eec\u5047\u8bbe\u5728 fe.conf \u4e2d\u6307\u5b9a\u7684 ",(0,i.yg)("inlineCode",{parentName:"p"},"meta_dir")," \u7684\u8def\u5f84\u4e3a ",(0,i.yg)("inlineCode",{parentName:"p"},"/path/to/doris-meta"),"\u3002\u90a3\u4e48\u4e00\u4e2a\u6b63\u5e38\u8fd0\u884c\u4e2d\u7684 Doris \u96c6\u7fa4\uff0c\u5143\u6570\u636e\u7684\u76ee\u5f55\u7ed3\u6784\u5e94\u8be5\u5982\u4e0b\uff1a"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre"},"/path/to/doris-meta/\n            |-- bdb/\n            |   |-- 00000000.jdb\n            |   |-- je.config.csv\n            |   |-- je.info.0\n            |   |-- je.info.0.lck\n            |   |-- je.lck\n            |   `-- je.stat.csv\n            `-- image/\n                |-- ROLE\n                |-- VERSION\n                `-- image.xxxx\n")),(0,i.yg)("ol",null,(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"bdb \u76ee\u5f55"),(0,i.yg)("p",{parentName:"li"},"\u6211\u4eec\u5c06 ",(0,i.yg)("a",{parentName:"p",href:"https://www.oracle.com/technetwork/database/berkeleydb/overview/index-093405.html"},"bdbje")," \u4f5c\u4e3a\u4e00\u4e2a\u5206\u5e03\u5f0f\u7684 kv \u7cfb\u7edf\uff0c\u5b58\u653e\u5143\u6570\u636e\u7684 journal\u3002\u8fd9\u4e2a bdb \u76ee\u5f55\u76f8\u5f53\u4e8e bdbje \u7684\u201c\u6570\u636e\u76ee\u5f55\u201d\u3002"),(0,i.yg)("p",{parentName:"li"},"\u5176\u4e2d ",(0,i.yg)("inlineCode",{parentName:"p"},".jdb")," \u540e\u7f00\u7684\u662f bdbje \u7684\u6570\u636e\u6587\u4ef6\u3002\u8fd9\u4e9b\u6570\u636e\u6587\u4ef6\u4f1a\u968f\u7740\u5143\u6570\u636e journal \u7684\u4e0d\u65ad\u589e\u591a\u800c\u8d8a\u6765\u8d8a\u591a\u3002\u5f53 Doris \u5b9a\u671f\u505a\u5b8c image \u540e\uff0c\u65e7\u7684\u65e5\u5fd7\u5c31\u4f1a\u88ab\u5220\u9664\u3002\u6240\u4ee5\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u8fd9\u4e9b\u6570\u636e\u6587\u4ef6\u7684\u603b\u5927\u5c0f\u4ece\u51e0 MB \u5230\u51e0 GB \u4e0d\u7b49\uff08\u53d6\u51b3\u4e8e\u4f7f\u7528 Doris \u7684\u65b9\u5f0f\uff0c\u5982\u5bfc\u5165\u9891\u7387\u7b49\uff09\u3002\u5f53\u6570\u636e\u6587\u4ef6\u7684\u603b\u5927\u5c0f\u5927\u4e8e 10GB\uff0c\u5219\u53ef\u80fd\u9700\u8981\u6000\u7591\u662f\u5426\u662f\u56e0\u4e3a image \u6ca1\u6709\u6210\u529f\uff0c\u6216\u8005\u5206\u53d1 image \u5931\u8d25\u5bfc\u81f4\u7684\u5386\u53f2 journal \u4e00\u76f4\u65e0\u6cd5\u5220\u9664\u3002"),(0,i.yg)("p",{parentName:"li"},(0,i.yg)("inlineCode",{parentName:"p"},"je.info.0")," \u662f bdbje \u7684\u8fd0\u884c\u65e5\u5fd7\u3002\u8fd9\u4e2a\u65e5\u5fd7\u4e2d\u7684\u65f6\u95f4\u662f UTC+0 \u65f6\u533a\u7684\u3002\u6211\u4eec\u53ef\u80fd\u5728\u540e\u9762\u7684\u67d0\u4e2a\u7248\u672c\u4e2d\u4fee\u590d\u8fd9\u4e2a\u95ee\u9898\u3002\u901a\u8fc7\u8fd9\u4e2a\u65e5\u5fd7\uff0c\u4e5f\u53ef\u4ee5\u67e5\u770b\u4e00\u4e9b bdbje \u7684\u8fd0\u884c\u60c5\u51b5\u3002")),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"image \u76ee\u5f55"),(0,i.yg)("p",{parentName:"li"},"image \u76ee\u5f55\u7528\u4e8e\u5b58\u653e Doris \u5b9a\u671f\u751f\u6210\u7684\u5143\u6570\u636e\u955c\u50cf\u6587\u4ef6\u3002\u901a\u5e38\u60c5\u51b5\u4e0b\uff0c\u4f60\u4f1a\u770b\u5230\u6709\u4e00\u4e2a ",(0,i.yg)("inlineCode",{parentName:"p"},"image.xxxxx")," \u7684\u955c\u50cf\u6587\u4ef6\u3002\u5176\u4e2d ",(0,i.yg)("inlineCode",{parentName:"p"},"xxxxx")," \u662f\u4e00\u4e2a\u6570\u5b57\u3002\u8fd9\u4e2a\u6570\u5b57\u8868\u793a\u8be5\u955c\u50cf\u5305\u542b ",(0,i.yg)("inlineCode",{parentName:"p"},"xxxxx")," \u53f7\u4e4b\u524d\u7684\u6240\u6709\u5143\u6570\u636e journal\u3002\u800c\u8fd9\u4e2a\u6587\u4ef6\u7684\u751f\u6210\u65f6\u95f4\uff08\u901a\u8fc7 ",(0,i.yg)("inlineCode",{parentName:"p"},"ls -al")," \u67e5\u770b\u5373\u53ef\uff09\u901a\u5e38\u5c31\u662f\u955c\u50cf\u7684\u751f\u6210\u65f6\u95f4\u3002"),(0,i.yg)("p",{parentName:"li"},"\u4f60\u4e5f\u53ef\u80fd\u4f1a\u770b\u5230\u4e00\u4e2a ",(0,i.yg)("inlineCode",{parentName:"p"},"image.ckpt")," \u6587\u4ef6\u3002\u8fd9\u662f\u4e00\u4e2a\u6b63\u5728\u751f\u6210\u7684\u5143\u6570\u636e\u955c\u50cf\u3002\u901a\u8fc7 ",(0,i.yg)("inlineCode",{parentName:"p"},"du -sh")," \u547d\u4ee4\u5e94\u8be5\u53ef\u4ee5\u770b\u5230\u8fd9\u4e2a\u6587\u4ef6\u5927\u5c0f\u5728\u4e0d\u65ad\u53d8\u5927\uff0c\u8bf4\u660e\u955c\u50cf\u5185\u5bb9\u6b63\u5728\u5199\u5165\u8fd9\u4e2a\u6587\u4ef6\u3002\u5f53\u955c\u50cf\u5199\u5b8c\u540e\uff0c\u4f1a\u81ea\u52a8\u91cd\u540d\u4e3a\u4e00\u4e2a\u65b0\u7684 ",(0,i.yg)("inlineCode",{parentName:"p"},"image.xxxxx")," \u5e76\u66ff\u6362\u65e7\u7684 image \u6587\u4ef6\u3002"),(0,i.yg)("p",{parentName:"li"},"\u53ea\u6709\u89d2\u8272\u4e3a Master \u7684 FE \u624d\u4f1a\u4e3b\u52a8\u5b9a\u671f\u751f\u6210 image \u6587\u4ef6\u3002\u6bcf\u6b21\u751f\u6210\u5b8c\u540e\uff0c\u90fd\u4f1a\u63a8\u9001\u7ed9\u5176\u4ed6\u975e Master \u89d2\u8272\u7684 FE\u3002\u5f53\u786e\u8ba4\u5176\u4ed6\u6240\u6709 FE \u90fd\u6536\u5230\u8fd9\u4e2a image \u540e\uff0cMaster FE \u4f1a\u5220\u9664 bdbje \u4e2d\u65e7\u7684\u5143\u6570\u636e journal\u3002\u6240\u4ee5\uff0c\u5982\u679c image \u751f\u6210\u5931\u8d25\uff0c\u6216\u8005 image \u63a8\u9001\u7ed9\u5176\u4ed6 FE \u5931\u8d25\u65f6\uff0c\u90fd\u4f1a\u5bfc\u81f4 bdbje \u4e2d\u7684\u6570\u636e\u4e0d\u65ad\u7d2f\u79ef\u3002"),(0,i.yg)("p",{parentName:"li"},(0,i.yg)("inlineCode",{parentName:"p"},"ROLE")," \u6587\u4ef6\u8bb0\u5f55\u4e86 FE \u7684\u7c7b\u578b\uff08FOLLOWER \u6216 OBSERVER\uff09\uff0c\u662f\u4e00\u4e2a\u6587\u672c\u6587\u4ef6\u3002"),(0,i.yg)("p",{parentName:"li"},(0,i.yg)("inlineCode",{parentName:"p"},"VERSION")," \u6587\u4ef6\u8bb0\u5f55\u4e86\u8fd9\u4e2a Doris \u96c6\u7fa4\u7684 cluster id\uff0c\u4ee5\u53ca\u7528\u4e8e\u5404\u4e2a\u8282\u70b9\u4e4b\u95f4\u8bbf\u95ee\u8ba4\u8bc1\u7684 token\uff0c\u4e5f\u662f\u4e00\u4e2a\u6587\u672c\u6587\u4ef6\u3002"),(0,i.yg)("p",{parentName:"li"},(0,i.yg)("inlineCode",{parentName:"p"},"ROLE")," \u6587\u4ef6\u548c ",(0,i.yg)("inlineCode",{parentName:"p"},"VERSION")," \u6587\u4ef6\u53ea\u53ef\u80fd\u540c\u65f6\u5b58\u5728\uff0c\u6216\u540c\u65f6\u4e0d\u5b58\u5728\uff08\u5982\u7b2c\u4e00\u6b21\u542f\u52a8\u65f6\uff09\u3002"))),(0,i.yg)("h2",{id:"\u57fa\u672c\u64cd\u4f5c"},"\u57fa\u672c\u64cd\u4f5c"),(0,i.yg)("h3",{id:"\u542f\u52a8\u5355\u8282\u70b9-fe"},"\u542f\u52a8\u5355\u8282\u70b9 FE"),(0,i.yg)("p",null,"\u5355\u8282\u70b9 FE \u662f\u6700\u57fa\u672c\u7684\u4e00\u79cd\u90e8\u7f72\u65b9\u5f0f\u3002\u4e00\u4e2a\u5b8c\u6574\u7684 Doris \u96c6\u7fa4\uff0c\u81f3\u5c11\u9700\u8981\u4e00\u4e2a FE \u8282\u70b9\u3002\u5f53\u53ea\u6709\u4e00\u4e2a FE \u8282\u70b9\u65f6\uff0c\u8fd9\u4e2a\u8282\u70b9\u7684\u7c7b\u578b\u4e3a Follower\uff0c\u89d2\u8272\u4e3a Master\u3002"),(0,i.yg)("ol",null,(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"\u7b2c\u4e00\u6b21\u542f\u52a8"),(0,i.yg)("ol",{parentName:"li"},(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"\u5047\u8bbe\u5728 fe.conf \u4e2d\u6307\u5b9a\u7684 ",(0,i.yg)("inlineCode",{parentName:"p"},"meta_dir")," \u7684\u8def\u5f84\u4e3a ",(0,i.yg)("inlineCode",{parentName:"p"},"/path/to/doris-meta"),"\u3002")),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"\u786e\u4fdd ",(0,i.yg)("inlineCode",{parentName:"p"},"/path/to/doris-meta")," \u5df2\u5b58\u5728\uff0c\u6743\u9650\u6b63\u786e\uff0c\u4e14\u76ee\u5f55\u4e3a\u7a7a\u3002")),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"\u76f4\u63a5\u901a\u8fc7 ",(0,i.yg)("inlineCode",{parentName:"p"},"sh bin/start_fe.sh")," \u5373\u53ef\u542f\u52a8\u3002")),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"\u542f\u52a8\u540e\uff0c\u4f60\u5e94\u8be5\u53ef\u4ee5\u5728 fe.log \u4e2d\u770b\u5230\u5982\u4e0b\u65e5\u5fd7\uff1a"),(0,i.yg)("ul",{parentName:"li"},(0,i.yg)("li",{parentName:"ul"},"Palo FE starting..."),(0,i.yg)("li",{parentName:"ul"},"image does not exist: /path/to/doris-meta/image/image.0"),(0,i.yg)("li",{parentName:"ul"},"transfer from INIT to UNKNOWN"),(0,i.yg)("li",{parentName:"ul"},"transfer from UNKNOWN to MASTER"),(0,i.yg)("li",{parentName:"ul"},"the very first time to open bdb, dbname is 1"),(0,i.yg)("li",{parentName:"ul"},"start fencing, epoch number is 1"),(0,i.yg)("li",{parentName:"ul"},"finish replay in xxx msec"),(0,i.yg)("li",{parentName:"ul"},"QE service start"),(0,i.yg)("li",{parentName:"ul"},"thrift server started")),(0,i.yg)("p",{parentName:"li"},"\u4ee5\u4e0a\u65e5\u5fd7\u4e0d\u4e00\u5b9a\u4e25\u683c\u6309\u7167\u8fd9\u4e2a\u987a\u5e8f\uff0c\u4f46\u57fa\u672c\u7c7b\u4f3c\u3002")),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"\u5355\u8282\u70b9 FE \u7684\u7b2c\u4e00\u6b21\u542f\u52a8\u901a\u5e38\u4e0d\u4f1a\u9047\u5230\u95ee\u9898\u3002\u5982\u679c\u4f60\u6ca1\u6709\u770b\u5230\u4ee5\u4e0a\u65e5\u5fd7\uff0c\u4e00\u822c\u6765\u8bf4\u662f\u6ca1\u6709\u4ed4\u7ec6\u6309\u7167\u6587\u6863\u6b65\u9aa4\u64cd\u4f5c\uff0c\u8bf7\u4ed4\u7ec6\u9605\u8bfb\u76f8\u5173 wiki\u3002")))),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"\u91cd\u542f"),(0,i.yg)("ol",{parentName:"li"},(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"\u76f4\u63a5\u4f7f\u7528 ",(0,i.yg)("inlineCode",{parentName:"p"},"sh bin/start_fe.sh")," \u53ef\u4ee5\u91cd\u65b0\u542f\u52a8\u5df2\u7ecf\u505c\u6b62\u7684 FE \u8282\u70b9\u3002")),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"\u91cd\u542f\u540e\uff0c\u4f60\u5e94\u8be5\u53ef\u4ee5\u5728 fe.log \u4e2d\u770b\u5230\u5982\u4e0b\u65e5\u5fd7\uff1a"),(0,i.yg)("ul",{parentName:"li"},(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("p",{parentName:"li"},"Palo FE starting...")),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("p",{parentName:"li"},"finished to get cluster id: xxxx, role: FOLLOWER and node name: xxxx")),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("p",{parentName:"li"},"\u5982\u679c\u91cd\u542f\u524d\u8fd8\u6ca1\u6709 image \u4ea7\u751f\uff0c\u5219\u4f1a\u770b\u5230\uff1a"),(0,i.yg)("ul",{parentName:"li"},(0,i.yg)("li",{parentName:"ul"},"image does not exist: /path/to/doris-meta/image/image.0"))),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("p",{parentName:"li"},"\u5982\u679c\u91cd\u542f\u524d\u6709 image \u4ea7\u751f\uff0c\u5219\u4f1a\u770b\u5230\uff1a"),(0,i.yg)("ul",{parentName:"li"},(0,i.yg)("li",{parentName:"ul"},"start load image from /path/to/doris-meta/image/image.xxx. is ckpt: false"),(0,i.yg)("li",{parentName:"ul"},"finished load image in xxx ms"))),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("p",{parentName:"li"},"transfer from INIT to UNKNOWN")),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("p",{parentName:"li"},"replayed journal id is xxxx, replay to journal id is yyyy")),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("p",{parentName:"li"},"transfer from UNKNOWN to MASTER")),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("p",{parentName:"li"},"finish replay in xxx msec")),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("p",{parentName:"li"},"master finish replay journal, can write now.")),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("p",{parentName:"li"},"begin to generate new image: image.xxxx")),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("p",{parentName:"li"},"start save image to /path/to/doris-meta/image/image.ckpt. is ckpt: true")),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("p",{parentName:"li"},"finished save image /path/to/doris-meta/image/image.ckpt in xxx ms. checksum is xxxx")),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("p",{parentName:"li"},"push image.xxx to other nodes. totally xx nodes, push succeeded xx nodes")),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("p",{parentName:"li"},"QE service start")),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("p",{parentName:"li"},"thrift server started"))),(0,i.yg)("p",{parentName:"li"},"\u4ee5\u4e0a\u65e5\u5fd7\u4e0d\u4e00\u5b9a\u4e25\u683c\u6309\u7167\u8fd9\u4e2a\u987a\u5e8f\uff0c\u4f46\u57fa\u672c\u7c7b\u4f3c\u3002")))),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"\u5e38\u89c1\u95ee\u9898"),(0,i.yg)("p",{parentName:"li"},"\u5bf9\u4e8e\u5355\u8282\u70b9 FE \u7684\u90e8\u7f72\uff0c\u542f\u505c\u901a\u5e38\u4e0d\u4f1a\u9047\u5230\u4ec0\u4e48\u95ee\u9898\u3002\u5982\u679c\u6709\u95ee\u9898\uff0c\u8bf7\u5148\u53c2\u7167\u76f8\u5173 wiki\uff0c\u4ed4\u7ec6\u6838\u5bf9\u4f60\u7684\u64cd\u4f5c\u6b65\u9aa4\u3002"))),(0,i.yg)("h3",{id:"\u6dfb\u52a0-fe"},"\u6dfb\u52a0 FE"),(0,i.yg)("p",null,"\u6dfb\u52a0 FE \u6d41\u7a0b\u5728 ",(0,i.yg)("a",{parentName:"p",href:"/zh-CN/docs/admin-manual/cluster-management/elastic-expansion"},"\u5f39\u6027\u6269\u7f29\u5bb9")," \u6709\u8be6\u7ec6\u4ecb\u7ecd\uff0c\u4e0d\u518d\u8d58\u8ff0\u3002\u8fd9\u91cc\u4e3b\u8981\u8bf4\u660e\u4e00\u4e9b\u6ce8\u610f\u4e8b\u9879\uff0c\u4ee5\u53ca\u5e38\u89c1\u95ee\u9898\u3002"),(0,i.yg)("ol",null,(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"\u6ce8\u610f\u4e8b\u9879"),(0,i.yg)("ul",{parentName:"li"},(0,i.yg)("li",{parentName:"ul"},"\u5728\u6dfb\u52a0\u65b0\u7684 FE \u4e4b\u524d\uff0c\u4e00\u5b9a\u5148\u786e\u4fdd\u5f53\u524d\u7684 Master FE \u8fd0\u884c\u6b63\u5e38\uff08\u8fde\u63a5\u662f\u5426\u6b63\u5e38\uff0cJVM \u662f\u5426\u6b63\u5e38\uff0cimage \u751f\u6210\u662f\u5426\u6b63\u5e38\uff0cbdbje \u6570\u636e\u76ee\u5f55\u662f\u5426\u8fc7\u5927\u7b49\u7b49\uff09"),(0,i.yg)("li",{parentName:"ul"},"\u7b2c\u4e00\u6b21\u542f\u52a8\u65b0\u7684 FE\uff0c\u4e00\u5b9a\u786e\u4fdd\u6dfb\u52a0\u4e86 ",(0,i.yg)("inlineCode",{parentName:"li"},"--helper")," \u53c2\u6570\u6307\u5411 Master FE\u3002\u518d\u6b21\u542f\u52a8\u65f6\u53ef\u4e0d\u7528\u6dfb\u52a0 ",(0,i.yg)("inlineCode",{parentName:"li"},"--helper"),"\u3002\uff08\u5982\u679c\u6307\u5b9a\u4e86 ",(0,i.yg)("inlineCode",{parentName:"li"},"--helper"),"\uff0cFE \u4f1a\u76f4\u63a5\u8be2\u95ee helper \u8282\u70b9\u81ea\u5df1\u7684\u89d2\u8272\uff0c\u5982\u679c\u6ca1\u6709\u6307\u5b9a\uff0cFE \u4f1a\u5c1d\u8bd5\u4ece ",(0,i.yg)("inlineCode",{parentName:"li"},"doris-meta/image/")," \u76ee\u5f55\u4e0b\u7684 ",(0,i.yg)("inlineCode",{parentName:"li"},"ROLE")," \u548c ",(0,i.yg)("inlineCode",{parentName:"li"},"VERSION")," \u6587\u4ef6\u4e2d\u83b7\u53d6\u4fe1\u606f\uff09\u3002"),(0,i.yg)("li",{parentName:"ul"},"\u7b2c\u4e00\u6b21\u542f\u52a8\u65b0\u7684 FE\uff0c\u4e00\u5b9a\u786e\u4fdd\u8fd9\u4e2a FE \u7684 ",(0,i.yg)("inlineCode",{parentName:"li"},"meta_dir")," \u5df2\u7ecf\u521b\u5efa\u3001\u6743\u9650\u6b63\u786e\u4e14\u4e3a\u7a7a\u3002"),(0,i.yg)("li",{parentName:"ul"},"\u542f\u52a8\u65b0\u7684 FE\uff0c\u548c\u6267\u884c ",(0,i.yg)("inlineCode",{parentName:"li"},"ALTER SYSTEM ADD FOLLOWER/OBSERVER")," \u8bed\u53e5\u5728\u5143\u6570\u636e\u6dfb\u52a0 FE\uff0c\u8fd9\u4e24\u4e2a\u64cd\u4f5c\u7684\u987a\u5e8f\u6ca1\u6709\u5148\u540e\u8981\u6c42\u3002\u5982\u679c\u5148\u542f\u52a8\u4e86\u65b0\u7684 FE\uff0c\u800c\u6ca1\u6709\u6267\u884c\u8bed\u53e5\uff0c\u5219\u65b0\u7684 FE \u65e5\u5fd7\u4e2d\u4f1a\u4e00\u76f4\u6eda\u52a8 ",(0,i.yg)("inlineCode",{parentName:"li"},"current node is not added to the group. please add it first.")," \u5b57\u6837\u3002\u5f53\u6267\u884c\u8bed\u53e5\u540e\uff0c\u5219\u4f1a\u8fdb\u5165\u6b63\u5e38\u6d41\u7a0b\u3002"),(0,i.yg)("li",{parentName:"ul"},"\u8bf7\u786e\u4fdd\u524d\u4e00\u4e2a FE \u6dfb\u52a0\u6210\u529f\u540e\uff0c\u518d\u6dfb\u52a0\u4e0b\u4e00\u4e2a FE\u3002"),(0,i.yg)("li",{parentName:"ul"},"\u5efa\u8bae\u76f4\u63a5\u8fde\u63a5\u5230 MASTER FE \u6267\u884c ",(0,i.yg)("inlineCode",{parentName:"li"},"ALTER SYSTEM ADD FOLLOWER/OBSERVER")," \u8bed\u53e5\u3002"))),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"\u5e38\u89c1\u95ee\u9898"),(0,i.yg)("ol",{parentName:"li"},(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"this node is DETACHED"),(0,i.yg)("p",{parentName:"li"},"\u5f53\u7b2c\u4e00\u6b21\u542f\u52a8\u4e00\u4e2a\u5f85\u6dfb\u52a0\u7684 FE \u65f6\uff0c\u5982\u679c Master FE \u4e0a\u7684 doris-meta/bdb \u4e2d\u7684\u6570\u636e\u5f88\u5927\uff0c\u5219\u53ef\u80fd\u5728\u5f85\u6dfb\u52a0\u7684 FE \u65e5\u5fd7\u4e2d\u770b\u5230 ",(0,i.yg)("inlineCode",{parentName:"p"},"this node is DETACHED.")," \u5b57\u6837\u3002\u8fd9\u65f6\uff0cbdbje \u6b63\u5728\u590d\u5236\u6570\u636e\uff0c\u4f60\u53ef\u4ee5\u770b\u5230\u5f85\u6dfb\u52a0\u7684 FE \u7684 ",(0,i.yg)("inlineCode",{parentName:"p"},"bdb/")," \u76ee\u5f55\u6b63\u5728\u53d8\u5927\u3002\u8fd9\u4e2a\u8fc7\u7a0b\u901a\u5e38\u4f1a\u5728\u6570\u5206\u949f\u4e0d\u7b49\uff08\u53d6\u51b3\u4e8e bdbje \u4e2d\u7684\u6570\u636e\u91cf\uff09\u3002\u4e4b\u540e\uff0cfe.log \u4e2d\u53ef\u80fd\u4f1a\u6709\u4e00\u4e9b bdbje \u76f8\u5173\u7684\u9519\u8bef\u5806\u6808\u4fe1\u606f\u3002\u5982\u679c\u6700\u7ec8\u65e5\u5fd7\u4e2d\u663e\u793a ",(0,i.yg)("inlineCode",{parentName:"p"},"QE service start")," \u548c ",(0,i.yg)("inlineCode",{parentName:"p"},"thrift server started"),"\uff0c\u5219\u901a\u5e38\u8868\u793a\u542f\u52a8\u6210\u529f\u3002\u53ef\u4ee5\u901a\u8fc7 mysql-client \u8fde\u63a5\u8fd9\u4e2a FE \u5c1d\u8bd5\u64cd\u4f5c\u3002\u5982\u679c\u6ca1\u6709\u51fa\u73b0\u8fd9\u4e9b\u5b57\u6837\uff0c\u5219\u53ef\u80fd\u662f bdbje \u590d\u5236\u65e5\u5fd7\u8d85\u65f6\u7b49\u95ee\u9898\u3002\u8fd9\u65f6\uff0c\u76f4\u63a5\u518d\u6b21\u91cd\u542f\u8fd9\u4e2a FE\uff0c\u901a\u5e38\u5373\u53ef\u89e3\u51b3\u95ee\u9898\u3002")),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"\u5404\u79cd\u539f\u56e0\u5bfc\u81f4\u6dfb\u52a0\u5931\u8d25"),(0,i.yg)("ul",{parentName:"li"},(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("p",{parentName:"li"},"\u5982\u679c\u6dfb\u52a0\u7684\u662f OBSERVER\uff0c\u56e0\u4e3a OBSERVER \u7c7b\u578b\u7684 FE \u4e0d\u53c2\u4e0e\u5143\u6570\u636e\u7684\u591a\u6570\u5199\uff0c\u7406\u8bba\u4e0a\u53ef\u4ee5\u968f\u610f\u542f\u505c\u3002\u56e0\u6b64\uff0c\u5bf9\u4e8e\u6dfb\u52a0 OBSERVER \u5931\u8d25\u7684\u60c5\u51b5\u3002\u53ef\u4ee5\u76f4\u63a5\u6740\u6b7b OBSERVER FE \u7684\u8fdb\u7a0b\uff0c\u6e05\u7a7a OBSERVER \u7684\u5143\u6570\u636e\u76ee\u5f55\u540e\uff0c\u91cd\u65b0\u8fdb\u884c\u4e00\u904d\u6dfb\u52a0\u6d41\u7a0b\u3002")),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("p",{parentName:"li"},"\u5982\u679c\u6dfb\u52a0\u7684\u662f FOLLOWER\uff0c\u56e0\u4e3a FOLLOWER \u662f\u53c2\u4e0e\u5143\u6570\u636e\u591a\u6570\u5199\u7684\u3002\u6240\u4ee5\u6709\u53ef\u80fd FOLLOWER \u5df2\u7ecf\u52a0\u5165 bdbje \u9009\u4e3e\u7ec4\u5185\u3002\u5982\u679c\u8fd9\u65f6\u53ea\u6709\u4e24\u4e2a FOLLOWER \u8282\u70b9\uff08\u5305\u62ec MASTER\uff09\uff0c\u90a3\u4e48\u505c\u6389\u4e00\u4e2a FE\uff0c\u53ef\u80fd\u5bfc\u81f4\u53e6\u4e00\u4e2a FE \u4e5f\u56e0\u65e0\u6cd5\u8fdb\u884c\u591a\u6570\u5199\u800c\u9000\u51fa\u3002\u6b64\u65f6\uff0c\u6211\u4eec\u5e94\u8be5\u5148\u901a\u8fc7 ",(0,i.yg)("inlineCode",{parentName:"p"},"ALTER SYSTEM DROP FOLLOWER")," \u547d\u4ee4\uff0c\u4ece\u5143\u6570\u636e\u4e2d\u5220\u9664\u65b0\u6dfb\u52a0\u7684 FOLLOWER \u8282\u70b9\uff0c\u7136\u540e\u518d\u6740\u6b7b FOLLOWER \u8fdb\u7a0b\uff0c\u6e05\u7a7a\u5143\u6570\u636e\uff0c\u91cd\u65b0\u8fdb\u884c\u4e00\u904d\u6dfb\u52a0\u6d41\u7a0b\u3002"))))))),(0,i.yg)("h3",{id:"\u5220\u9664-fe"},"\u5220\u9664 FE"),(0,i.yg)("p",null,"\u901a\u8fc7 ",(0,i.yg)("inlineCode",{parentName:"p"},"ALTER SYSTEM DROP FOLLOWER/OBSERVER")," \u547d\u4ee4\u5373\u53ef\u5220\u9664\u5bf9\u5e94\u7c7b\u578b\u7684 FE\u3002\u4ee5\u4e0b\u6709\u51e0\u70b9\u6ce8\u610f\u4e8b\u9879\uff1a"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("p",{parentName:"li"},"\u5bf9\u4e8e OBSERVER \u7c7b\u578b\u7684 FE\uff0c\u76f4\u63a5 DROP \u5373\u53ef\uff0c\u65e0\u98ce\u9669\u3002")),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("p",{parentName:"li"},"\u5bf9\u4e8e FOLLOWER \u7c7b\u578b\u7684 FE\u3002\u9996\u5148\uff0c\u5e94\u4fdd\u8bc1\u5728\u6709\u5947\u6570\u4e2a FOLLOWER \u7684\u60c5\u51b5\u4e0b\uff083 \u4e2a\u6216\u4ee5\u4e0a\uff09\uff0c\u5f00\u59cb\u5220\u9664\u64cd\u4f5c\u3002"),(0,i.yg)("ol",{parentName:"li"},(0,i.yg)("li",{parentName:"ol"},"\u5982\u679c\u5220\u9664\u975e MASTER \u89d2\u8272\u7684 FE\uff0c\u5efa\u8bae\u8fde\u63a5\u5230 MASTER FE\uff0c\u6267\u884c DROP \u547d\u4ee4\uff0c\u518d\u6740\u6b7b\u8fdb\u7a0b\u5373\u53ef\u3002"),(0,i.yg)("li",{parentName:"ol"},"\u5982\u679c\u8981\u5220\u9664 MASTER FE\uff0c\u5148\u786e\u8ba4\u6709\u5947\u6570\u4e2a FOLLOWER FE \u5e76\u4e14\u8fd0\u884c\u6b63\u5e38\u3002\u7136\u540e\u5148\u6740\u6b7b MASTER FE \u7684\u8fdb\u7a0b\u3002\u8fd9\u65f6\u4f1a\u6709\u67d0\u4e00\u4e2a FE \u88ab\u9009\u4e3e\u4e3a MASTER\u3002\u5728\u786e\u8ba4\u5269\u4e0b\u7684 FE \u8fd0\u884c\u6b63\u5e38\u540e\uff0c\u8fde\u63a5\u5230\u65b0\u7684 MASTER FE\uff0c\u6267\u884c DROP \u547d\u4ee4\u5220\u9664\u4e4b\u524d\u8001\u7684 MASTER FE \u5373\u53ef\u3002")))),(0,i.yg)("h2",{id:"\u9ad8\u7ea7\u64cd\u4f5c"},"\u9ad8\u7ea7\u64cd\u4f5c"),(0,i.yg)("h3",{id:"\u6545\u969c\u6062\u590d"},"\u6545\u969c\u6062\u590d"),(0,i.yg)("p",null,"FE \u6709\u53ef\u80fd\u56e0\u4e3a\u67d0\u4e9b\u539f\u56e0\u51fa\u73b0\u65e0\u6cd5\u542f\u52a8 bdbje\u3001FE \u4e4b\u95f4\u65e0\u6cd5\u540c\u6b65\u7b49\u95ee\u9898\u3002\u73b0\u8c61\u5305\u62ec\u65e0\u6cd5\u8fdb\u884c\u5143\u6570\u636e\u5199\u64cd\u4f5c\u3001\u6ca1\u6709 MASTER \u7b49\u7b49\u3002\u8fd9\u65f6\uff0c\u6211\u4eec\u9700\u8981\u624b\u52a8\u64cd\u4f5c\u6765\u6062\u590d FE\u3002\u624b\u52a8\u6062\u590d FE \u7684\u5927\u81f4\u539f\u7406\uff0c\u662f\u5148\u901a\u8fc7\u5f53\u524d ",(0,i.yg)("inlineCode",{parentName:"p"},"meta_dir")," \u4e2d\u7684\u5143\u6570\u636e\uff0c\u542f\u52a8\u4e00\u4e2a\u65b0\u7684 MASTER\uff0c\u7136\u540e\u518d\u9010\u53f0\u6dfb\u52a0\u5176\u4ed6 FE\u3002\u8bf7\u4e25\u683c\u6309\u7167\u5982\u4e0b\u6b65\u9aa4\u64cd\u4f5c\uff1a"),(0,i.yg)("ol",null,(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"\u9996\u5148\uff0c",(0,i.yg)("strong",{parentName:"p"},"\u505c\u6b62\u6240\u6709 FE \u8fdb\u7a0b\uff0c\u540c\u65f6\u505c\u6b62\u4e00\u5207\u4e1a\u52a1\u8bbf\u95ee"),"\u3002\u4fdd\u8bc1\u5728\u5143\u6570\u636e\u6062\u590d\u671f\u95f4\uff0c\u4e0d\u4f1a\u56e0\u4e3a\u5916\u90e8\u8bbf\u95ee\u5bfc\u81f4\u5176\u4ed6\u4e0d\u53ef\u9884\u671f\u7684\u95ee\u9898\u3002(\u5982\u679c\u6ca1\u6709\u505c\u6b62\u6240\u6709 FE \u8fdb\u7a0b\uff0c\u540e\u7eed\u6d41\u7a0b\u53ef\u80fd\u51fa\u73b0\u8111\u88c2\u73b0\u8c61)")),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"\u786e\u8ba4\u54ea\u4e2a FE \u8282\u70b9\u7684\u5143\u6570\u636e\u662f\u6700\u65b0\uff1a"),(0,i.yg)("ul",{parentName:"li"},(0,i.yg)("li",{parentName:"ul"},"\u9996\u5148\uff0c",(0,i.yg)("strong",{parentName:"li"},"\u52a1\u5fc5\u5148\u5907\u4efd\u6240\u6709 FE \u7684 ",(0,i.yg)("inlineCode",{parentName:"strong"},"meta_dir")," \u76ee\u5f55\u3002")),(0,i.yg)("li",{parentName:"ul"},"\u901a\u5e38\u60c5\u51b5\u4e0b\uff0cMaster FE \u7684\u5143\u6570\u636e\u662f\u6700\u65b0\u7684\u3002\u53ef\u4ee5\u67e5\u770b ",(0,i.yg)("inlineCode",{parentName:"li"},"meta_dir/image")," \u76ee\u5f55\u4e0b\uff0cimage.xxxx \u6587\u4ef6\u7684\u540e\u7f00\uff0c\u6570\u5b57\u8d8a\u5927\uff0c\u5219\u8868\u793a\u5143\u6570\u636e\u8d8a\u65b0\u3002"),(0,i.yg)("li",{parentName:"ul"},"\u901a\u5e38\uff0c\u901a\u8fc7\u6bd4\u8f83\u6240\u6709 FOLLOWER FE \u7684 image \u6587\u4ef6\uff0c\u627e\u51fa\u6700\u65b0\u7684\u5143\u6570\u636e\u5373\u53ef\u3002"),(0,i.yg)("li",{parentName:"ul"},"\u4e4b\u540e\uff0c\u6211\u4eec\u8981\u4f7f\u7528\u8fd9\u4e2a\u62e5\u6709\u6700\u65b0\u5143\u6570\u636e\u7684 FE \u8282\u70b9\uff0c\u8fdb\u884c\u6062\u590d\u3002"),(0,i.yg)("li",{parentName:"ul"},"\u5982\u679c\u4f7f\u7528 OBSERVER \u8282\u70b9\u7684\u5143\u6570\u636e\u8fdb\u884c\u6062\u590d\u4f1a\u6bd4\u8f83\u9ebb\u70e6\uff0c\u5efa\u8bae\u5c3d\u91cf\u9009\u62e9 FOLLOWER \u8282\u70b9\u3002"))),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"\u4ee5\u4e0b\u64cd\u4f5c\u90fd\u5728\u7531\u7b2c 2 \u6b65\u4e2d\u9009\u62e9\u51fa\u6765\u7684 FE \u8282\u70b9\u4e0a\u8fdb\u884c\u3002"),(0,i.yg)("ol",{parentName:"li"},(0,i.yg)("li",{parentName:"ol"},"\u4fee\u6539 ",(0,i.yg)("inlineCode",{parentName:"li"},"fe.conf")," ")),(0,i.yg)("ul",{parentName:"li"},(0,i.yg)("li",{parentName:"ul"},"\u5982\u679c\u8be5\u8282\u70b9\u662f\u4e00\u4e2a OBSERVER\uff0c\u5148\u5c06 ",(0,i.yg)("inlineCode",{parentName:"li"},"meta_dir/image/ROLE")," \u6587\u4ef6\u4e2d\u7684 ",(0,i.yg)("inlineCode",{parentName:"li"},"role=OBSERVER")," \u6539\u4e3a ",(0,i.yg)("inlineCode",{parentName:"li"},"role=FOLLOWER"),"\u3002"),(0,i.yg)("li",{parentName:"ul"},"\u5982\u679c FE \u7248\u672c< 2.0.2, \u5219\u8fd8\u9700\u8981\u5728 fe.conf \u4e2d\u6dfb\u52a0\u914d\u7f6e\uff1a",(0,i.yg)("inlineCode",{parentName:"li"},"metadata_failure_recovery=true"),"\u3002")),(0,i.yg)("ol",{parentName:"li",start:2},(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"\u6267\u884c ",(0,i.yg)("inlineCode",{parentName:"p"},"sh bin/start_fe.sh --metadata_failure_recovery --daemon")," \u542f\u52a8\u8fd9\u4e2a FE\u3002\uff08\u5982\u679c\u662f\u4ece OBSERVER \u8282\u70b9\u6062\u590d\uff0c\u6267\u884c\u5b8c\u8fd9\u4e00\u6b65\u540e\u8df3\u8f6c\u5230\u540e\u7eed\u7684 OBSERVER \u6587\u6863\uff09")),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"\u5982\u679c\u6b63\u5e38\uff0c\u8fd9\u4e2a FE \u4f1a\u4ee5 MASTER \u7684\u89d2\u8272\u542f\u52a8\uff0c\u7c7b\u4f3c\u4e8e\u524d\u9762 ",(0,i.yg)("inlineCode",{parentName:"p"},"\u542f\u52a8\u5355\u8282\u70b9 FE")," \u4e00\u8282\u4e2d\u7684\u63cf\u8ff0\u3002\u5728 fe.log \u5e94\u8be5\u4f1a\u770b\u5230 ",(0,i.yg)("inlineCode",{parentName:"p"},"transfer from XXXX to MASTER")," \u7b49\u5b57\u6837\u3002")),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"\u542f\u52a8\u5b8c\u6210\u540e\uff0c\u5148\u8fde\u63a5\u5230\u8fd9\u4e2a FE\uff0c\u6267\u884c\u4e00\u4e9b\u67e5\u8be2\u5bfc\u5165\uff0c\u68c0\u67e5\u662f\u5426\u80fd\u591f\u6b63\u5e38\u8bbf\u95ee\u3002\u5982\u679c\u4e0d\u6b63\u5e38\uff0c\u6709\u53ef\u80fd\u662f\u64cd\u4f5c\u6709\u8bef\uff0c\u5efa\u8bae\u4ed4\u7ec6\u9605\u8bfb\u4ee5\u4e0a\u6b65\u9aa4\uff0c\u7528\u4e4b\u524d\u5907\u4efd\u7684\u5143\u6570\u636e\u518d\u8bd5\u4e00\u6b21\u3002\u5982\u679c\u8fd8\u662f\u4e0d\u884c\uff0c\u95ee\u9898\u53ef\u80fd\u5c31\u6bd4\u8f83\u4e25\u91cd\u4e86\u3002")),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"\u5982\u679c\u6210\u529f\uff0c\u901a\u8fc7 ",(0,i.yg)("inlineCode",{parentName:"p"},"show frontends;")," \u547d\u4ee4\uff0c\u5e94\u8be5\u53ef\u4ee5\u770b\u5230\u4e4b\u524d\u6240\u6dfb\u52a0\u7684\u6240\u6709 FE\uff0c\u5e76\u4e14\u5f53\u524d FE \u662f master\u3002")),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"\u540e\u91cd\u542f\u8fd9\u4e2a FE\uff08",(0,i.yg)("strong",{parentName:"p"},"\u91cd\u8981"),"\uff09\u3002")),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},(0,i.yg)("strong",{parentName:"p"},"\u5982\u679c FE \u7248\u672c < 2.0.2"),"\uff0c\u5c06 fe.conf \u4e2d\u7684 ",(0,i.yg)("inlineCode",{parentName:"p"},"metadata_failure_recovery=true")," \u914d\u7f6e\u9879\u5220\u9664\uff0c\u6216\u8005\u8bbe\u7f6e\u4e3a ",(0,i.yg)("inlineCode",{parentName:"p"},"false"),"\uff0c\u7136\u540e\u91cd\u542f\u8fd9\u4e2a FE\uff08",(0,i.yg)("strong",{parentName:"p"},"\u91cd\u8981"),"\uff09\u3002"))),(0,i.yg)("admonition",{parentName:"li",type:"tip"},(0,i.yg)("p",{parentName:"admonition"},"\u5982\u679c\u4f60\u662f\u4ece\u4e00\u4e2a OBSERVER \u8282\u70b9\u7684\u5143\u6570\u636e\u8fdb\u884c\u6062\u590d\u7684\uff0c\u90a3\u4e48\u5b8c\u6210\u4e0a\u8ff0\u7b2c\u4e8c\u6b65\u540e\uff0c\u901a\u8fc7 ",(0,i.yg)("inlineCode",{parentName:"p"},"show frontends;")," \u8bed\u53e5\u4f60\u4f1a\u53d1\u73b0\uff0c\u5f53\u524d\u8fd9\u4e2a FE \u7684\u89d2\u8272\u4e3a OBSERVER\uff0c\u4f46\u662f ",(0,i.yg)("inlineCode",{parentName:"p"},"IsMaster")," \u663e\u793a\u4e3a ",(0,i.yg)("inlineCode",{parentName:"p"},"true"),"\u3002\u8fd9\u662f\u56e0\u4e3a\uff0c\u8fd9\u91cc\u770b\u5230\u7684\u201cOBSERVER\u201d\u662f\u8bb0\u5f55\u5728 Doris \u7684\u5143\u6570\u636e\u4e2d\u7684\uff0c\u800c\u662f\u5426\u662f master\uff0c\u662f\u8bb0\u5f55\u5728 bdbje \u7684\u5143\u6570\u636e\u4e2d\u7684\u3002\u56e0\u4e3a\u6211\u4eec\u662f\u4ece\u4e00\u4e2a OBSERVER \u8282\u70b9\u6062\u590d\u7684\uff0c\u6240\u4ee5\u8fd9\u91cc\u51fa\u73b0\u4e86\u4e0d\u4e00\u81f4\u3002\u8bf7\u6309\u5982\u4e0b\u6b65\u9aa4\u4fee\u590d\u8fd9\u4e2a\u95ee\u9898\uff08\u8fd9\u4e2a\u95ee\u9898\u6211\u4eec\u4f1a\u5728\u4e4b\u540e\u7684\u67d0\u4e2a\u7248\u672c\u4fee\u590d\uff09\uff1a"),(0,i.yg)("ol",{parentName:"admonition"},(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"\u5148\u628a\u9664\u4e86\u8fd9\u4e2a\u201cOBSERVER\u201d\u4ee5\u5916\u7684\u6240\u6709 FE \u8282\u70b9 DROP \u6389\u3002")),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"\u901a\u8fc7 ",(0,i.yg)("inlineCode",{parentName:"p"},"ADD FOLLOWER")," \u547d\u4ee4\uff0c\u6dfb\u52a0\u4e00\u4e2a\u65b0\u7684 FOLLOWER FE\uff0c\u5047\u8bbe\u5728 hostA \u4e0a\u3002")),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"\u5728 hostA \u4e0a\u542f\u52a8\u4e00\u4e2a\u5168\u65b0\u7684 FE\uff0c\u901a\u8fc7 ",(0,i.yg)("inlineCode",{parentName:"p"},"--helper")," \u7684\u65b9\u5f0f\u52a0\u5165\u96c6\u7fa4\u3002")),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"\u542f\u52a8\u6210\u529f\u540e\uff0c\u901a\u8fc7 ",(0,i.yg)("inlineCode",{parentName:"p"},"show frontends;")," \u8bed\u53e5\uff0c\u4f60\u5e94\u8be5\u80fd\u770b\u5230\u4e24\u4e2a FE\uff0c\u4e00\u4e2a\u662f\u4e4b\u524d\u7684  OBSERVER\uff0c\u4e00\u4e2a\u662f\u65b0\u6dfb\u52a0\u7684 FOLLOWER\uff0c\u5e76\u4e14 OBSERVER \u662f master\u3002")),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"\u786e\u8ba4\u8fd9\u4e2a\u65b0\u7684 FOLLOWER \u662f\u53ef\u4ee5\u6b63\u5e38\u5de5\u4f5c\u4e4b\u540e\uff0c\u7528\u8fd9\u4e2a\u65b0\u7684 FOLLOWER \u7684\u5143\u6570\u636e\uff0c\u91cd\u65b0\u6267\u884c\u4e00\u904d\u6545\u969c\u6062\u590d\u64cd\u4f5c\u3002")),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"\u4ee5\u4e0a\u8fd9\u4e9b\u6b65\u9aa4\u7684\u76ee\u7684\uff0c\u5176\u5b9e\u5c31\u662f\u4eba\u4e3a\u7684\u5236\u9020\u51fa\u4e00\u4e2a FOLLOWER \u8282\u70b9\u7684\u5143\u6570\u636e\uff0c\u7136\u540e\u7528\u8fd9\u4e2a\u5143\u6570\u636e\uff0c\u91cd\u65b0\u5f00\u59cb\u6545\u969c\u6062\u590d\u3002\u8fd9\u6837\u5c31\u907f\u514d\u4e86\u4ece OBSERVER \u6062\u590d\u5143\u6570\u636e\u6240\u9047\u5230\u7684\u4e0d\u4e00\u81f4\u7684\u95ee\u9898\u3002"))),(0,i.yg)("p",{parentName:"admonition"},(0,i.yg)("inlineCode",{parentName:"p"},"metadata_failure_recovery"),' \u7684\u542b\u4e49\u662f\uff0c\u6e05\u7a7a "bdbje" \u7684\u5143\u6570\u636e\u3002\u8fd9\u6837 bdbje \u5c31\u4e0d\u4f1a\u518d\u8054\u7cfb\u4e4b\u524d\u7684\u5176\u4ed6 FE \u4e86\uff0c\u800c\u4f5c\u4e3a\u4e00\u4e2a\u72ec\u7acb\u7684 FE \u542f\u52a8\u3002\u8fd9\u4e2a\u53c2\u6570\u53ea\u6709\u5728\u6062\u590d\u542f\u52a8\u65f6\u624d\u9700\u8981\u8bbe\u7f6e\u4e3a true\u3002\u6062\u590d\u5b8c\u6210\u540e\uff0c\u4e00\u5b9a\u8981\u8bbe\u7f6e\u4e3a false\uff0c\u5426\u5219\u4e00\u65e6\u91cd\u542f\uff0cbdbje \u7684\u5143\u6570\u636e\u53c8\u4f1a\u88ab\u6e05\u7a7a\uff0c\u5bfc\u81f4\u5176\u4ed6 FE \u65e0\u6cd5\u6b63\u5e38\u5de5\u4f5c\u3002'))),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"\u7b2c 3 \u6b65\u6267\u884c\u6210\u529f\u540e\uff0c\u6211\u4eec\u518d\u901a\u8fc7 ",(0,i.yg)("inlineCode",{parentName:"p"},"ALTER SYSTEM DROP FOLLOWER/OBSERVER")," \u547d\u4ee4\uff0c\u5c06\u4e4b\u524d\u7684\u5176\u4ed6\u7684 FE \u4ece\u5143\u6570\u636e\u5220\u9664\u540e\uff0c\u6309\u52a0\u5165\u65b0 FE \u7684\u65b9\u5f0f\uff0c\u91cd\u65b0\u628a\u8fd9\u4e9b FE \u6dfb\u52a0\u4e00\u904d\u3002")),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"\u5982\u679c\u4ee5\u4e0a\u64cd\u4f5c\u6b63\u5e38\uff0c\u5219\u6062\u590d\u5b8c\u6bd5\u3002"))),(0,i.yg)("h3",{id:"fe-\u7c7b\u578b\u53d8\u66f4"},"FE \u7c7b\u578b\u53d8\u66f4"),(0,i.yg)("p",null,"\u5982\u679c\u4f60\u9700\u8981\u5c06\u5f53\u524d\u5df2\u6709\u7684 FOLLOWER/OBSERVER \u7c7b\u578b\u7684 FE\uff0c\u53d8\u66f4\u4e3a OBSERVER/FOLLOWER \u7c7b\u578b\uff0c\u8bf7\u5148\u6309\u7167\u524d\u9762\u6240\u8ff0\u7684\u65b9\u5f0f\u5220\u9664 FE\uff0c\u518d\u6dfb\u52a0\u5bf9\u5e94\u7c7b\u578b\u7684 FE \u5373\u53ef"),(0,i.yg)("h3",{id:"fe-\u8fc1\u79fb"},"FE \u8fc1\u79fb"),(0,i.yg)("p",null,"\u5982\u679c\u4f60\u9700\u8981\u5c06\u4e00\u4e2a FE \u4ece\u5f53\u524d\u8282\u70b9\u8fc1\u79fb\u5230\u53e6\u4e00\u4e2a\u8282\u70b9\uff0c\u5206\u4ee5\u4e0b\u51e0\u79cd\u60c5\u51b5\u3002"),(0,i.yg)("ol",null,(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"\u975e MASTER \u8282\u70b9\u7684 FOLLOWER\uff0c\u6216\u8005 OBSERVER \u8fc1\u79fb"),(0,i.yg)("p",{parentName:"li"},"\u76f4\u63a5\u6dfb\u52a0\u65b0\u7684 FOLLOWER/OBSERVER \u6210\u529f\u540e\uff0c\u5220\u9664\u65e7\u7684 FOLLOWER/OBSERVER \u5373\u53ef\u3002")),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"\u5355\u8282\u70b9 MASTER \u8fc1\u79fb"),(0,i.yg)("p",{parentName:"li"},"\u5f53\u53ea\u6709\u4e00\u4e2a FE \u65f6\uff0c\u53c2\u8003 ",(0,i.yg)("inlineCode",{parentName:"p"},"\u6545\u969c\u6062\u590d")," \u4e00\u8282\u3002\u5c06 FE \u7684 doris-meta \u76ee\u5f55\u62f7\u8d1d\u5230\u65b0\u8282\u70b9\u4e0a\uff0c\u6309\u7167 ",(0,i.yg)("inlineCode",{parentName:"p"},"\u6545\u969c\u6062\u590d")," \u4e00\u8282\u4e2d\uff0c\u6b65\u9aa4 3 \u7684\u65b9\u5f0f\u542f\u52a8\u65b0\u7684 MASTER")),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"\u4e00\u7ec4 FOLLOWER \u4ece\u4e00\u7ec4\u8282\u70b9\u8fc1\u79fb\u5230\u53e6\u4e00\u7ec4\u65b0\u7684\u8282\u70b9"),(0,i.yg)("p",{parentName:"li"},"\u5728\u65b0\u7684\u8282\u70b9\u4e0a\u90e8\u7f72 FE\uff0c\u901a\u8fc7\u6dfb\u52a0 FOLLOWER \u7684\u65b9\u5f0f\u5148\u52a0\u5165\u65b0\u8282\u70b9\u3002\u518d\u9010\u53f0 DROP \u6389\u65e7\u8282\u70b9\u5373\u53ef\u3002\u5728\u9010\u53f0 DROP \u7684\u8fc7\u7a0b\u4e2d\uff0cMASTER \u4f1a\u81ea\u52a8\u9009\u62e9\u5728\u65b0\u7684 FOLLOWER \u8282\u70b9\u4e0a\u3002"))),(0,i.yg)("h3",{id:"\u66f4\u6362-fe-\u7aef\u53e3"},"\u66f4\u6362 FE \u7aef\u53e3"),(0,i.yg)("p",null,"FE \u76ee\u524d\u6709\u4ee5\u4e0b\u51e0\u4e2a\u7aef\u53e3"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"edit_log_port\uff1abdbje \u7684\u901a\u4fe1\u7aef\u53e3"),(0,i.yg)("li",{parentName:"ul"},"http_port\uff1ahttp \u7aef\u53e3\uff0c\u4e5f\u7528\u4e8e\u63a8\u9001 image"),(0,i.yg)("li",{parentName:"ul"},"rpc_port\uff1aFE \u7684 thrift server port"),(0,i.yg)("li",{parentName:"ul"},"query_port\uff1aMysql \u8fde\u63a5\u7aef\u53e3"),(0,i.yg)("li",{parentName:"ul"},"arrow_flight_sql_port: Arrow Flight SQL \u8fde\u63a5\u7aef\u53e3")),(0,i.yg)("ol",null,(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"edit_log_port"),(0,i.yg)("p",{parentName:"li"},"\u5982\u679c\u9700\u8981\u66f4\u6362\u8fd9\u4e2a\u7aef\u53e3\uff0c\u5219\u9700\u8981\u53c2\u7167 ",(0,i.yg)("inlineCode",{parentName:"p"},"\u6545\u969c\u6062\u590d")," \u4e00\u8282\u4e2d\u7684\u64cd\u4f5c\uff0c\u8fdb\u884c\u6062\u590d\u3002\u56e0\u4e3a\u8be5\u7aef\u53e3\u5df2\u7ecf\u88ab\u6301\u4e45\u5316\u5230 bdbje \u81ea\u5df1\u7684\u5143\u6570\u636e\u4e2d\uff08\u540c\u65f6\u4e5f\u8bb0\u5f55\u5728 Doris \u81ea\u5df1\u7684\u5143\u6570\u636e\u4e2d\uff09\uff0c\u9700\u8981\u542f\u52a8 FE \u65f6\u901a\u8fc7\u6307\u5b9a ",(0,i.yg)("inlineCode",{parentName:"p"},"--metadata_failure_recovery")," \u6765\u6e05\u7a7a bdbje \u7684\u5143\u6570\u636e\u3002")),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"http_port"),(0,i.yg)("p",{parentName:"li"},"\u6240\u6709 FE \u7684 http_port \u5fc5\u987b\u4fdd\u6301\u4e00\u81f4\u3002\u6240\u4ee5\u5982\u679c\u8981\u4fee\u6539\u8fd9\u4e2a\u7aef\u53e3\uff0c\u5219\u6240\u6709 FE \u90fd\u9700\u8981\u4fee\u6539\u5e76\u91cd\u542f\u3002\u4fee\u6539\u8fd9\u4e2a\u7aef\u53e3\uff0c\u5728\u591a FOLLOWER \u90e8\u7f72\u7684\u60c5\u51b5\u4e0b\u4f1a\u6bd4\u8f83\u590d\u6742\uff08\u6d89\u53ca\u5230\u9e21\u751f\u86cb\u86cb\u751f\u9e21\u7684\u95ee\u9898...\uff09\uff0c\u6240\u4ee5\u4e0d\u5efa\u8bae\u6709\u8fd9\u79cd\u64cd\u4f5c\u3002\u5982\u679c\u5fc5\u987b\uff0c\u76f4\u63a5\u6309\u7167 ",(0,i.yg)("inlineCode",{parentName:"p"},"\u6545\u969c\u6062\u590d")," \u4e00\u8282\u4e2d\u7684\u64cd\u4f5c\u5427\u3002")),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"rpc_port"),(0,i.yg)("p",{parentName:"li"},"\u4fee\u6539\u914d\u7f6e\u540e\uff0c\u76f4\u63a5\u91cd\u542f FE \u5373\u53ef\u3002Master FE \u4f1a\u901a\u8fc7\u5fc3\u8df3\u5c06\u65b0\u7684\u7aef\u53e3\u544a\u77e5 BE\u3002\u53ea\u6709 Master FE \u7684\u8fd9\u4e2a\u7aef\u53e3\u4f1a\u88ab\u4f7f\u7528\u3002\u4f46\u4ecd\u7136\u5efa\u8bae\u6240\u6709 FE \u7684\u7aef\u53e3\u4fdd\u6301\u4e00\u81f4\u3002")),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"query_port"),(0,i.yg)("p",{parentName:"li"},"\u4fee\u6539\u914d\u7f6e\u540e\uff0c\u76f4\u63a5\u91cd\u542f FE \u5373\u53ef\u3002\u8fd9\u4e2a\u53ea\u5f71\u54cd\u5230 mysql \u7684\u8fde\u63a5\u76ee\u6807\u3002")),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"arrow_flight_sql_port"),(0,i.yg)("p",{parentName:"li"},"\u4fee\u6539\u914d\u7f6e\u540e\uff0c\u76f4\u63a5\u91cd\u542f FE \u5373\u53ef\u3002\u8fd9\u4e2a\u53ea\u5f71\u54cd\u5230 Arrow Flight SQL \u7684\u8fde\u63a5\u76ee\u6807\u3002"))),(0,i.yg)("h3",{id:"\u4ece-fe-\u5185\u5b58\u4e2d\u6062\u590d\u5143\u6570\u636e"},"\u4ece FE \u5185\u5b58\u4e2d\u6062\u590d\u5143\u6570\u636e"),(0,i.yg)("p",null,"\u5728\u67d0\u4e9b\u6781\u7aef\u60c5\u51b5\u4e0b\uff0c\u78c1\u76d8\u4e0a image \u6587\u4ef6\u53ef\u80fd\u4f1a\u635f\u574f\uff0c\u4f46\u662f\u5185\u5b58\u4e2d\u7684\u5143\u6570\u636e\u662f\u5b8c\u597d\u7684\uff0c\u6b64\u65f6\u6211\u4eec\u53ef\u4ee5\u5148\u4ece\u5185\u5b58\u4e2d dump \u51fa\u5143\u6570\u636e\uff0c\u518d\u66ff\u6362\u6389\u78c1\u76d8\u4e0a\u7684 image \u6587\u4ef6\uff0c\u6765\u6062\u590d\u5143\u6570\u636e\uff0c\u6574\u4e2a",(0,i.yg)("strong",{parentName:"p"},"\u4e0d\u505c\u67e5\u8be2\u670d\u52a1"),"\u7684\u64cd\u4f5c\u6b65\u9aa4\u5982\u4e0b\uff1a"),(0,i.yg)("ol",null,(0,i.yg)("li",{parentName:"ol"},"\u96c6\u7fa4\u505c\u6b62\u6240\u6709 Load,Create,Alter \u64cd\u4f5c"),(0,i.yg)("li",{parentName:"ol"},"\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u4ece Master FE \u5185\u5b58\u4e2d dump \u51fa\u5143\u6570\u636e\uff1a(\u4e0b\u9762\u79f0\u4e3a image_mem)")),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre"},"curl -u $root_user:$password http://$master_hostname:8030/dump\n")),(0,i.yg)("ol",{start:3},(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"\u7528 image_mem \u6587\u4ef6\u66ff\u6362\u6389 OBSERVER FE \u8282\u70b9\u4e0a",(0,i.yg)("inlineCode",{parentName:"p"},"meta_dir/image"),"\u76ee\u5f55\u4e0b\u7684 image \u6587\u4ef6\uff0c\u91cd\u542f OBSERVER FE \u8282\u70b9\uff0c\n\u9a8c\u8bc1 image_mem \u6587\u4ef6\u7684\u5b8c\u6574\u6027\u548c\u6b63\u786e\u6027\uff08\u53ef\u4ee5\u5728 FE Web \u9875\u9762\u67e5\u770b DB \u548c Table \u7684\u5143\u6570\u636e\u662f\u5426\u6b63\u5e38\uff0c\u67e5\u770b fe.log \u662f\u5426\u6709\u5f02\u5e38\uff0c\u662f\u5426\u5728\u6b63\u5e38 replayed journal\uff09"),(0,i.yg)("pre",{parentName:"li"},(0,i.yg)("code",{parentName:"pre"},"\u81ea 1.2.0 \u7248\u672c\u8d77\uff0c\u63a8\u8350\u4f7f\u7528\u4ee5\u4e0b\u529f\u80fd\u9a8c\u8bc1 `image_mem` \u6587\u4ef6\uff1a\n\n```\nsh start_fe.sh --image path_to_image_mem\n```\n\n> \u6ce8\u610f\uff1a`path_to_image_mem` \u662f image_mem \u6587\u4ef6\u7684\u8def\u5f84\u3002\n>\n> \u5982\u679c\u6587\u4ef6\u6709\u6548\u4f1a\u8f93\u51fa `Load image success. Image file /absolute/path/to/image.xxxxxx is valid`\u3002\n>\n> \u5982\u679c\u6587\u4ef6\u65e0\u6548\u4f1a\u8f93\u51fa `Load image failed. Image file /absolute/path/to/image.xxxxxx is invalid`\u3002\n"))),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"\u4f9d\u6b21\u7528 image_mem \u6587\u4ef6\u66ff\u6362\u6389 FOLLOWER FE \u8282\u70b9\u4e0a",(0,i.yg)("inlineCode",{parentName:"p"},"meta_dir/image"),"\u76ee\u5f55\u4e0b\u7684 image \u6587\u4ef6\uff0c\u91cd\u542f FOLLOWER FE \u8282\u70b9\uff0c\n\u786e\u8ba4\u5143\u6570\u636e\u548c\u67e5\u8be2\u670d\u52a1\u90fd\u6b63\u5e38")),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"\u7528 image_mem \u6587\u4ef6\u66ff\u6362\u6389 Master FE \u8282\u70b9\u4e0a",(0,i.yg)("inlineCode",{parentName:"p"},"meta_dir/image"),"\u76ee\u5f55\u4e0b\u7684 image \u6587\u4ef6\uff0c\u91cd\u542f Master FE \u8282\u70b9\uff0c\n\u786e\u8ba4 FE Master \u5207\u6362\u6b63\u5e38\uff0cMaster FE \u8282\u70b9\u53ef\u4ee5\u901a\u8fc7 checkpoint \u6b63\u5e38\u751f\u6210\u65b0\u7684 image \u6587\u4ef6")),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"\u96c6\u7fa4\u6062\u590d\u6240\u6709 Load,Create,Alter \u64cd\u4f5c"))),(0,i.yg)("p",null,(0,i.yg)("strong",{parentName:"p"},"\u6ce8\u610f\uff1a\u5982\u679c Image \u6587\u4ef6\u5f88\u5927\uff0c\u6574\u4e2a\u64cd\u4f5c\u8fc7\u7a0b\u8017\u65f6\u53ef\u80fd\u4f1a\u5f88\u957f\uff0c\u6240\u4ee5\u5728\u6b64\u671f\u95f4\uff0c\u8981\u786e\u4fdd Master FE \u4e0d\u4f1a\u901a\u8fc7 checkpoint \u751f\u6210\u65b0\u7684 image \u6587\u4ef6\u3002\n\u5f53\u89c2\u5bdf\u5230 Master FE \u8282\u70b9\u4e0a ",(0,i.yg)("inlineCode",{parentName:"strong"},"meta_dir/image"),"\u76ee\u5f55\u4e0b\u7684 ",(0,i.yg)("inlineCode",{parentName:"strong"},"image.ckpt")," \u6587\u4ef6\u5feb\u548c ",(0,i.yg)("inlineCode",{parentName:"strong"},"image.xxx")," \u6587\u4ef6\u4e00\u6837\u5927\u65f6\uff0c\u53ef\u4ee5\u76f4\u63a5\u5220\u9664\u6389",(0,i.yg)("inlineCode",{parentName:"strong"},"image.ckpt")," \u6587\u4ef6\u3002")),(0,i.yg)("h3",{id:"\u67e5\u770b-bdbje-\u4e2d\u7684\u6570\u636e"},"\u67e5\u770b BDBJE \u4e2d\u7684\u6570\u636e"),(0,i.yg)("p",null,"FE \u7684\u5143\u6570\u636e\u65e5\u5fd7\u4ee5 Key-Value \u7684\u65b9\u5f0f\u5b58\u50a8\u5728 BDBJE \u4e2d\u3002\u67d0\u4e9b\u5f02\u5e38\u60c5\u51b5\u4e0b\uff0c\u53ef\u80fd\u56e0\u4e3a\u5143\u6570\u636e\u9519\u8bef\u800c\u65e0\u6cd5\u542f\u52a8 FE\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0cDoris \u63d0\u4f9b\u4e00\u79cd\u65b9\u5f0f\u53ef\u4ee5\u5e2e\u52a9\u7528\u6237\u67e5\u8be2 BDBJE \u4e2d\u5b58\u50a8\u7684\u6570\u636e\uff0c\u4ee5\u65b9\u4fbf\u8fdb\u884c\u95ee\u9898\u6392\u67e5\u3002"),(0,i.yg)("p",null,"\u9996\u5148\u9700\u5728 fe.conf \u4e2d\u589e\u52a0\u914d\u7f6e\uff1a",(0,i.yg)("inlineCode",{parentName:"p"},"enable_bdbje_debug_mode=true"),"\uff0c\u4e4b\u540e\u901a\u8fc7 ",(0,i.yg)("inlineCode",{parentName:"p"},"sh start_fe.sh --daemon")," \u542f\u52a8 FE\u3002"),(0,i.yg)("p",null,"\u6b64\u65f6\uff0cFE \u5c06\u8fdb\u5165 debug \u6a21\u5f0f\uff0c\u4ec5\u4f1a\u542f\u52a8 http server \u548c MySQL server\uff0c\u5e76\u6253\u5f00 BDBJE \u5b9e\u4f8b\uff0c\u4f46\u4e0d\u4f1a\u8fdb\u884c\u4efb\u4f55\u5143\u6570\u636e\u7684\u52a0\u8f7d\u53ca\u540e\u7eed\u5176\u4ed6\u542f\u52a8\u6d41\u7a0b\u3002"),(0,i.yg)("p",null,"\u8fd9\u65f6\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u8bbf\u95ee FE \u7684 web \u9875\u9762\uff0c\u6216\u901a\u8fc7 MySQL \u5ba2\u6237\u7aef\u8fde\u63a5\u5230 Doris \u540e\uff0c\u901a\u8fc7 ",(0,i.yg)("inlineCode",{parentName:"p"},'show proc "/bdbje";')," \u6765\u67e5\u770b BDBJE \u4e2d\u5b58\u50a8\u7684\u6570\u636e\u3002"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre"},'mysql> show proc "/bdbje";\n+----------+---------------+---------+\n| DbNames  | JournalNumber | Comment |\n+----------+---------------+---------+\n| 110589   | 4273          |         |\n| epochDB  | 4             |         |\n| metricDB | 430694        |         |\n+----------+---------------+---------+\n')),(0,i.yg)("p",null,"\u7b2c\u4e00\u7ea7\u76ee\u5f55\u4f1a\u5c55\u793a BDBJE \u4e2d\u6240\u6709\u7684 database \u540d\u79f0\uff0c\u4ee5\u53ca\u6bcf\u4e2a database \u4e2d\u7684 entry \u6570\u91cf\u3002"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre"},'mysql> show proc "/bdbje/110589";\n+-----------+\n| JournalId |\n+-----------+\n| 1         |\n| 2         |\n\n...\n| 114858    |\n| 114859    |\n| 114860    |\n| 114861    |\n+-----------+\n4273 rows in set (0.06 sec)\n')),(0,i.yg)("p",null,"\u8fdb\u5165\u7b2c\u4e8c\u7ea7\uff0c\u5219\u4f1a\u7f57\u5217\u6307\u5b9a database \u4e0b\u7684\u6240\u6709 entry \u7684 key\u3002"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre"},'mysql> show proc "/bdbje/110589/114861";\n+-----------+--------------+---------------------------------------------+\n| JournalId | OpType       | Data                                        |\n+-----------+--------------+---------------------------------------------+\n| 114861    | OP_HEARTBEAT | org.apache.doris.persist.HbPackage@6583d5fb |\n+-----------+--------------+---------------------------------------------+\n1 row in set (0.05 sec)\n')),(0,i.yg)("p",null,"\u7b2c\u4e09\u7ea7\u5219\u53ef\u4ee5\u5c55\u793a\u6307\u5b9a key \u7684 value \u4fe1\u606f\u3002"),(0,i.yg)("h2",{id:"\u6700\u4f73\u5b9e\u8df5"},"\u6700\u4f73\u5b9e\u8df5"),(0,i.yg)("p",null,"FE \u7684\u90e8\u7f72\u63a8\u8350\uff0c\u5728 ",(0,i.yg)("a",{parentName:"p",href:"../../install/cluster-deployment/standard-deployment"},"\u5b89\u88c5\u4e0e\u90e8\u7f72\u6587\u6863")," \u4e2d\u6709\u4ecb\u7ecd\uff0c\u8fd9\u91cc\u518d\u505a\u4e00\u4e9b\u8865\u5145\u3002"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("p",{parentName:"li"},(0,i.yg)("strong",{parentName:"p"},"\u5982\u679c\u4f60\u5e76\u4e0d\u5341\u5206\u4e86\u89e3 FE \u5143\u6570\u636e\u7684\u8fd0\u884c\u903b\u8f91\uff0c\u6216\u8005\u6ca1\u6709\u8db3\u591f FE \u5143\u6570\u636e\u7684\u8fd0\u7ef4\u7ecf\u9a8c\uff0c\u6211\u4eec\u5f3a\u70c8\u5efa\u8bae\u5728\u5b9e\u9645\u4f7f\u7528\u4e2d\uff0c\u53ea\u90e8\u7f72\u4e00\u4e2a FOLLOWER \u7c7b\u578b\u7684 FE \u4f5c\u4e3a MASTER\uff0c\u5176\u4f59 FE \u90fd\u662f OBSERVER\uff0c\u8fd9\u6837\u53ef\u4ee5\u51cf\u5c11\u5f88\u591a\u590d\u6742\u7684\u8fd0\u7ef4\u95ee\u9898\uff01")," \u4e0d\u7528\u8fc7\u4e8e\u62c5\u5fc3 MASTER \u5355\u70b9\u6545\u969c\u5bfc\u81f4\u65e0\u6cd5\u8fdb\u884c\u5143\u6570\u636e\u5199\u64cd\u4f5c\u3002\u9996\u5148\uff0c\u5982\u679c\u4f60\u914d\u7f6e\u5408\u7406\uff0cFE \u4f5c\u4e3a java \u8fdb\u7a0b\u5f88\u96be\u6302\u6389\u3002\u5176\u6b21\uff0c\u5982\u679c MASTER \u78c1\u76d8\u635f\u574f\uff08\u6982\u7387\u975e\u5e38\u4f4e\uff09\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u7528 OBSERVER \u4e0a\u7684\u5143\u6570\u636e\uff0c\u901a\u8fc7 ",(0,i.yg)("inlineCode",{parentName:"p"},"\u6545\u969c\u6062\u590d")," \u7684\u65b9\u5f0f\u624b\u52a8\u6062\u590d\u3002")),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("p",{parentName:"li"},"FE \u8fdb\u7a0b\u7684 JVM \u4e00\u5b9a\u8981\u4fdd\u8bc1\u8db3\u591f\u7684\u5185\u5b58\u3002\u6211\u4eec",(0,i.yg)("strong",{parentName:"p"},"\u5f3a\u70c8\u5efa\u8bae")," FE \u7684 JVM \u5185\u5b58\u81f3\u5c11\u5728 10GB \u4ee5\u4e0a\uff0c\u63a8\u8350 32GB \u81f3 64GB\u3002\u5e76\u4e14\u90e8\u7f72\u76d1\u63a7\u6765\u76d1\u63a7 JVM \u7684\u5185\u5b58\u4f7f\u7528\u60c5\u51b5\u3002\u56e0\u4e3a\u5982\u679c FE \u51fa\u73b0 OOM\uff0c\u53ef\u80fd\u5bfc\u81f4\u5143\u6570\u636e\u5199\u5165\u5931\u8d25\uff0c\u9020\u6210\u4e00\u4e9b",(0,i.yg)("strong",{parentName:"p"},"\u65e0\u6cd5\u6062\u590d"),"\u7684\u6545\u969c\uff01")),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("p",{parentName:"li"},"FE \u6240\u5728\u8282\u70b9\u8981\u6709\u8db3\u591f\u7684\u78c1\u76d8\u7a7a\u95f4\uff0c\u4ee5\u9632\u6b62\u5143\u6570\u636e\u8fc7\u5927\u5bfc\u81f4\u78c1\u76d8\u7a7a\u95f4\u4e0d\u8db3\u3002\u540c\u65f6 FE \u65e5\u5fd7\u4e5f\u4f1a\u5360\u7528\u5341\u51e0 G \u7684\u78c1\u76d8\u7a7a\u95f4\u3002"))),(0,i.yg)("h2",{id:"\u5176\u4ed6\u5e38\u89c1\u95ee\u9898"},"\u5176\u4ed6\u5e38\u89c1\u95ee\u9898"),(0,i.yg)("ol",null,(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"fe.log \u4e2d\u4e00\u76f4\u6eda\u52a8 ",(0,i.yg)("inlineCode",{parentName:"p"},"meta out of date. current time: xxx, synchronized time: xxx, has log: xxx, fe type: xxx")),(0,i.yg)("p",{parentName:"li"},"\u8fd9\u4e2a\u901a\u5e38\u662f\u56e0\u4e3a FE \u65e0\u6cd5\u9009\u4e3e\u51fa Master\u3002\u6bd4\u5982\u914d\u7f6e\u4e86 3 \u4e2a FOLLOWER\uff0c\u4f46\u662f\u53ea\u542f\u52a8\u4e86\u4e00\u4e2a FOLLOWER\uff0c\u5219\u8fd9\u4e2a FOLLOWER \u4f1a\u51fa\u73b0\u8fd9\u4e2a\u95ee\u9898\u3002\u901a\u5e38\uff0c\u53ea\u8981\u628a\u5269\u4f59\u7684 FOLLOWER \u542f\u52a8\u8d77\u6765\u5c31\u53ef\u4ee5\u4e86\u3002\u5982\u679c\u542f\u52a8\u8d77\u6765\u540e\uff0c\u4ecd\u7136\u6ca1\u6709\u89e3\u51b3\u95ee\u9898\uff0c\u90a3\u4e48\u53ef\u80fd\u9700\u8981\u6309\u7167 ",(0,i.yg)("inlineCode",{parentName:"p"},"\u6545\u969c\u6062\u590d")," \u4e00\u8282\u4e2d\u7684\u65b9\u5f0f\uff0c\u624b\u52a8\u8fdb\u884c\u6062\u590d\u3002")),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},(0,i.yg)("inlineCode",{parentName:"p"},"Clock delta: xxxx ms. between Feeder: xxxx and this Replica exceeds max permissible delta: xxxx ms.")),(0,i.yg)("p",{parentName:"li"},"bdbje \u8981\u6c42\u5404\u4e2a\u8282\u70b9\u4e4b\u95f4\u7684\u65f6\u949f\u8bef\u5dee\u4e0d\u80fd\u8d85\u8fc7\u4e00\u5b9a\u9608\u503c\u3002\u5982\u679c\u8d85\u8fc7\uff0c\u8282\u70b9\u4f1a\u5f02\u5e38\u9000\u51fa\u3002\u6211\u4eec\u9ed8\u8ba4\u8bbe\u7f6e\u7684\u9608\u503c\u4e3a 5000 ms\uff0c\u7531 FE \u7684\u53c2\u6570 ",(0,i.yg)("inlineCode",{parentName:"p"},"max_bdbje_clock_delta_ms")," \u63a7\u5236\uff0c\u53ef\u4ee5\u914c\u60c5\u4fee\u6539\u3002\u4f46\u6211\u4eec\u5efa\u8bae\u4f7f\u7528 ntp \u7b49\u65f6\u949f\u540c\u6b65\u65b9\u5f0f\u4fdd\u8bc1 Doris \u96c6\u7fa4\u5404\u4e3b\u673a\u7684\u65f6\u949f\u540c\u6b65\u3002")),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},(0,i.yg)("inlineCode",{parentName:"p"},"image/")," \u76ee\u5f55\u4e0b\u7684\u955c\u50cf\u6587\u4ef6\u5f88\u4e45\u6ca1\u6709\u66f4\u65b0"),(0,i.yg)("p",{parentName:"li"},"Master FE \u4f1a\u9ed8\u8ba4\u6bcf 50000 \u6761\u5143\u6570\u636e journal\uff0c\u751f\u6210\u4e00\u4e2a\u955c\u50cf\u6587\u4ef6\u3002\u5728\u4e00\u4e2a\u9891\u7e41\u4f7f\u7528\u7684\u96c6\u7fa4\u4e2d\uff0c\u901a\u5e38\u6bcf\u9694\u534a\u5929\u5230\u51e0\u5929\u7684\u65f6\u95f4\uff0c\u5c31\u4f1a\u751f\u6210\u4e00\u4e2a\u65b0\u7684 image \u6587\u4ef6\u3002\u5982\u679c\u4f60\u53d1\u73b0 image \u6587\u4ef6\u5df2\u7ecf\u5f88\u4e45\u6ca1\u6709\u66f4\u65b0\u4e86\uff08\u6bd4\u5982\u8d85\u8fc7\u4e00\u4e2a\u661f\u671f\uff09\uff0c\u5219\u53ef\u4ee5\u987a\u5e8f\u7684\u6309\u7167\u5982\u4e0b\u65b9\u6cd5\uff0c\u67e5\u770b\u5177\u4f53\u539f\u56e0\uff1a"),(0,i.yg)("ol",{parentName:"li"},(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"\u5728 Master FE \u7684 fe.log \u4e2d\u641c\u7d22 ",(0,i.yg)("inlineCode",{parentName:"p"},"memory is not enough to do checkpoint. Committed memory xxxx Bytes, used memory xxxx Bytes.")," \u5b57\u6837\u3002\u5982\u679c\u627e\u5230\uff0c\u5219\u8bf4\u660e\u5f53\u524d FE \u7684 JVM \u5185\u5b58\u4e0d\u8db3\u4ee5\u7528\u4e8e\u751f\u6210\u955c\u50cf\uff08\u901a\u5e38\u6211\u4eec\u9700\u8981\u9884\u7559\u4e00\u534a\u7684 FE \u5185\u5b58\u7528\u4e8e image \u7684\u751f\u6210\uff09\u3002\u90a3\u4e48\u9700\u8981\u589e\u52a0 JVM \u7684\u5185\u5b58\u5e76\u91cd\u542f FE \u540e\uff0c\u518d\u89c2\u5bdf\u3002\u6bcf\u6b21 Master FE \u91cd\u542f\u540e\uff0c\u90fd\u4f1a\u76f4\u63a5\u751f\u6210\u4e00\u4e2a\u65b0\u7684 image\u3002\u4e5f\u53ef\u7528\u8fd9\u79cd\u91cd\u542f\u65b9\u5f0f\uff0c\u4e3b\u52a8\u5730\u751f\u6210\u65b0\u7684 image\u3002\u6ce8\u610f\uff0c\u5982\u679c\u662f\u591a FOLLOWER \u90e8\u7f72\uff0c\u90a3\u4e48\u5f53\u4f60\u91cd\u542f\u5f53\u524d Master FE \u540e\uff0c\u53e6\u4e00\u4e2a FOLLOWER FE \u4f1a\u53d8\u6210 MASTER\uff0c\u5219\u540e\u7eed\u7684 image \u751f\u6210\u4f1a\u7531\u65b0\u7684 Master \u8d1f\u8d23\u3002\u56e0\u6b64\uff0c\u4f60\u53ef\u80fd\u9700\u8981\u4fee\u6539\u6240\u6709 FOLLOWER FE \u7684 JVM \u5185\u5b58\u914d\u7f6e\u3002")),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"\u5728 Master FE \u7684 fe.log \u4e2d\u641c\u7d22 ",(0,i.yg)("inlineCode",{parentName:"p"},"begin to generate new image: image.xxxx"),"\u3002\u5982\u679c\u627e\u5230\uff0c\u5219\u8bf4\u660e\u5f00\u59cb\u751f\u6210 image \u4e86\u3002\u68c0\u67e5\u8fd9\u4e2a\u7ebf\u7a0b\u7684\u540e\u7eed\u65e5\u5fd7\uff0c\u5982\u679c\u51fa\u73b0 ",(0,i.yg)("inlineCode",{parentName:"p"},"checkpoint finished save image.xxxx"),"\uff0c\u5219\u8bf4\u660e image \u5199\u5165\u6210\u529f\u3002\u5982\u679c\u51fa\u73b0 ",(0,i.yg)("inlineCode",{parentName:"p"},"Exception when generate new image file"),"\uff0c\u5219\u751f\u6210\u5931\u8d25\uff0c\u9700\u8981\u67e5\u770b\u5177\u4f53\u7684\u9519\u8bef\u4fe1\u606f\u3002"))))),(0,i.yg)("ol",{start:4},(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},(0,i.yg)("inlineCode",{parentName:"p"},"bdb/")," \u76ee\u5f55\u7684\u5927\u5c0f\u975e\u5e38\u5927\uff0c\u8fbe\u5230\u51e0\u4e2a G \u6216\u66f4\u591a"),(0,i.yg)("p",{parentName:"li"},"\u5982\u679c\u5728\u6392\u9664\u65e0\u6cd5\u751f\u6210\u65b0\u7684 image \u7684\u9519\u8bef\u540e\uff0cbdb \u76ee\u5f55\u5728\u4e00\u6bb5\u65f6\u95f4\u5185\u4f9d\u7136\u5f88\u5927\u3002\u5219\u53ef\u80fd\u662f\u56e0\u4e3a Master FE \u63a8\u9001 image \u4e0d\u6210\u529f\u3002\u53ef\u4ee5\u5728 Master FE \u7684 fe.log \u4e2d\u641c\u7d22 ",(0,i.yg)("inlineCode",{parentName:"p"},"push image.xxxx to other nodes. totally xx nodes, push succeeded yy nodes"),"\u3002\u5982\u679c yy \u6bd4 xx \u5c0f\uff0c\u5219\u8bf4\u660e\u6709\u7684 FE \u6ca1\u6709\u88ab\u63a8\u9001\u6210\u529f\u3002\u53ef\u4ee5\u5728 fe.log \u4e2d\u67e5\u770b\u5230\u5177\u4f53\u7684\u9519\u8bef ",(0,i.yg)("inlineCode",{parentName:"p"},"Exception when pushing image file. url = xxx"),"\u3002"),(0,i.yg)("p",{parentName:"li"},"\u540c\u65f6\uff0c\u4f60\u4e5f\u53ef\u4ee5\u5728 FE \u7684\u914d\u7f6e\u6587\u4ef6\u4e2d\u6dfb\u52a0\u914d\u7f6e\uff1a",(0,i.yg)("inlineCode",{parentName:"p"},"edit_log_roll_num=xxxx"),"\u3002\u8be5\u53c2\u6570\u8bbe\u5b9a\u4e86\u6bcf\u591a\u5c11\u6761\u5143\u6570\u636e journal\uff0c\u505a\u4e00\u6b21 image\u3002\u9ed8\u8ba4\u662f 50000\u3002\u53ef\u4ee5\u9002\u5f53\u6539\u5c0f\u8fd9\u4e2a\u6570\u5b57\uff0c\u4f7f\u5f97 image \u66f4\u52a0\u9891\u7e41\uff0c\u4ece\u800c\u52a0\u901f\u5220\u9664\u65e7\u7684 journal\u3002")),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"FOLLOWER FE \u63a5\u8fde\u6302\u6389"),(0,i.yg)("p",{parentName:"li"},"\u56e0\u4e3a Doris \u7684\u5143\u6570\u636e\u91c7\u7528\u591a\u6570\u5199\u7b56\u7565\uff0c\u5373\u4e00\u6761\u5143\u6570\u636e journal \u5fc5\u987b\u81f3\u5c11\u5199\u5165\u591a\u6570\u4e2a FOLLOWER FE \u540e\uff08\u6bd4\u5982 3 \u4e2a FOLLOWER\uff0c\u5fc5\u987b\u5199\u6210\u529f 2 \u4e2a\uff09\uff0c\u624d\u7b97\u6210\u529f\u3002\u800c\u5982\u679c\u5199\u5165\u5931\u8d25\uff0cFE \u8fdb\u7a0b\u4f1a\u4e3b\u52a8\u9000\u51fa\u3002\u90a3\u4e48\u5047\u8bbe\u6709 A\u3001B\u3001C \u4e09\u4e2a FOLLOWER\uff0cC \u5148\u6302\u6389\uff0c\u7136\u540e B \u518d\u6302\u6389\uff0c\u90a3\u4e48 A \u4e5f\u4f1a\u8ddf\u7740\u6302\u6389\u3002\u6240\u4ee5\u5982 ",(0,i.yg)("inlineCode",{parentName:"p"},"\u6700\u4f73\u5b9e\u8df5")," \u4e00\u8282\u4e2d\u6240\u8ff0\uff0c\u5982\u679c\u4f60\u6ca1\u6709\u4e30\u5bcc\u7684\u5143\u6570\u636e\u8fd0\u7ef4\u7ecf\u9a8c\uff0c\u4e0d\u5efa\u8bae\u90e8\u7f72\u591a FOLLOWER\u3002")),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"fe.log \u4e2d\u51fa\u73b0 ",(0,i.yg)("inlineCode",{parentName:"p"},"get exception when try to close previously opened bdb database. ignore it")),(0,i.yg)("p",{parentName:"li"},"\u5982\u679c\u540e\u9762\u6709 ",(0,i.yg)("inlineCode",{parentName:"p"},"ignore it")," \u5b57\u6837\uff0c\u901a\u5e38\u65e0\u9700\u5904\u7406\u3002\u5982\u679c\u4f60\u6709\u5174\u8da3\uff0c\u53ef\u4ee5\u5728 ",(0,i.yg)("inlineCode",{parentName:"p"},"BDBEnvironment.java")," \u641c\u7d22\u8fd9\u4e2a\u9519\u8bef\uff0c\u67e5\u770b\u76f8\u5173\u6ce8\u91ca\u8bf4\u660e\u3002")),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"\u4ece ",(0,i.yg)("inlineCode",{parentName:"p"},"show frontends;")," \u770b\uff0c\u67d0\u4e2a FE \u7684 ",(0,i.yg)("inlineCode",{parentName:"p"},"Join")," \u5217\u4e3a ",(0,i.yg)("inlineCode",{parentName:"p"},"true"),"\uff0c\u4f46\u662f\u5b9e\u9645\u8be5 FE \u4e0d\u6b63\u5e38"),(0,i.yg)("p",{parentName:"li"},"\u901a\u8fc7 ",(0,i.yg)("inlineCode",{parentName:"p"},"show frontends;")," \u67e5\u770b\u5230\u7684 ",(0,i.yg)("inlineCode",{parentName:"p"},"Join")," \u4fe1\u606f\u3002\u8be5\u5217\u5982\u679c\u4e3a ",(0,i.yg)("inlineCode",{parentName:"p"},"true"),"\uff0c\u4ec5\u8868\u793a\u8fd9\u4e2a FE ",(0,i.yg)("strong",{parentName:"p"},"\u66fe\u7ecf\u52a0\u5165\u8fc7")," \u96c6\u7fa4\u3002\u5e76\u4e0d\u80fd\u8868\u793a\u5f53\u524d\u4ecd\u7136\u6b63\u5e38\u7684\u5b58\u5728\u4e8e\u96c6\u7fa4\u4e2d\u3002\u5982\u679c\u4e3a ",(0,i.yg)("inlineCode",{parentName:"p"},"false"),"\uff0c\u5219\u8868\u793a\u8fd9\u4e2a FE ",(0,i.yg)("strong",{parentName:"p"},"\u4ece\u672a\u52a0\u5165\u8fc7")," \u96c6\u7fa4\u3002")),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"\u5173\u4e8e FE \u7684\u914d\u7f6e ",(0,i.yg)("inlineCode",{parentName:"p"},"master_sync_policy"),", ",(0,i.yg)("inlineCode",{parentName:"p"},"replica_sync_policy")," \u548c ",(0,i.yg)("inlineCode",{parentName:"p"},"txn_rollback_limit")),(0,i.yg)("p",{parentName:"li"},(0,i.yg)("inlineCode",{parentName:"p"},"master_sync_policy")," \u7528\u4e8e\u6307\u5b9a\u5f53 Leader FE \u5199\u5143\u6570\u636e\u65e5\u5fd7\u65f6\uff0c\u662f\u5426\u8c03\u7528 fsync(), ",(0,i.yg)("inlineCode",{parentName:"p"},"replica_sync_policy")," \u7528\u4e8e\u6307\u5b9a\u5f53 FE HA \u90e8\u7f72\u65f6\uff0c\u5176\u4ed6 Follower FE \u5728\u540c\u6b65\u5143\u6570\u636e\u65f6\uff0c\u662f\u5426\u8c03\u7528 fsync()\u3002\u5728\u65e9\u671f\u7684 Doris \u7248\u672c\u4e2d\uff0c\u8fd9\u4e24\u4e2a\u53c2\u6570\u9ed8\u8ba4\u662f ",(0,i.yg)("inlineCode",{parentName:"p"},"WRITE_NO_SYNC"),"\uff0c\u5373\u90fd\u4e0d\u8c03\u7528 fsync()\u3002\u5728\u6700\u65b0\u7248\u672c\u7684 Doris \u4e2d\uff0c\u9ed8\u8ba4\u5df2\u4fee\u6539\u4e3a ",(0,i.yg)("inlineCode",{parentName:"p"},"SYNC"),"\uff0c\u5373\u90fd\u8c03\u7528 fsync()\u3002\u8c03\u7528 fsync() \u4f1a\u663e\u8457\u964d\u4f4e\u5143\u6570\u636e\u5199\u76d8\u7684\u6548\u7387\u3002\u5728\u67d0\u4e9b\u73af\u5883\u4e0b\uff0cIOPS \u53ef\u80fd\u964d\u81f3\u51e0\u767e\uff0c\u5ef6\u8fdf\u589e\u52a0\u5230 2-3ms\uff08\u4f46\u5bf9\u4e8e Doris \u5143\u6570\u636e\u64cd\u4f5c\u4f9d\u7136\u591f\u7528\uff09\u3002\u56e0\u6b64\u6211\u4eec\u5efa\u8bae\u4ee5\u4e0b\u914d\u7f6e\uff1a"),(0,i.yg)("ol",{parentName:"li"},(0,i.yg)("li",{parentName:"ol"},"\u5bf9\u4e8e\u5355 Follower FE \u90e8\u7f72\uff0c",(0,i.yg)("inlineCode",{parentName:"li"},"master_sync_policy")," \u8bbe\u7f6e\u4e3a ",(0,i.yg)("inlineCode",{parentName:"li"},"SYNC"),"\uff0c\u9632\u6b62 FE \u7cfb\u7edf\u5b95\u673a\u5bfc\u81f4\u5143\u6570\u636e\u4e22\u5931\u3002"),(0,i.yg)("li",{parentName:"ol"},"\u5bf9\u4e8e\u591a Follower FE \u90e8\u7f72\uff0c\u53ef\u4ee5\u5c06 ",(0,i.yg)("inlineCode",{parentName:"li"},"master_sync_policy")," \u548c ",(0,i.yg)("inlineCode",{parentName:"li"},"replica_sync_policy")," \u8bbe\u4e3a ",(0,i.yg)("inlineCode",{parentName:"li"},"WRITE_NO_SYNC"),"\uff0c\u56e0\u4e3a\u6211\u4eec\u8ba4\u4e3a\u591a\u4e2a\u7cfb\u7edf\u540c\u65f6\u5b95\u673a\u7684\u6982\u7387\u975e\u5e38\u4f4e\u3002")),(0,i.yg)("p",{parentName:"li"},"\u5982\u679c\u5728\u5355 Follower FE \u90e8\u7f72\u4e2d\uff0c",(0,i.yg)("inlineCode",{parentName:"p"},"master_sync_policy")," \u8bbe\u7f6e\u4e3a ",(0,i.yg)("inlineCode",{parentName:"p"},"WRITE_NO_SYNC"),"\uff0c\u5219\u53ef\u80fd\u51fa\u73b0 FE \u7cfb\u7edf\u5b95\u673a\u5bfc\u81f4\u5143\u6570\u636e\u4e22\u5931\u3002\u8fd9\u65f6\u5982\u679c\u6709\u5176\u4ed6 Observer FE \u5c1d\u8bd5\u91cd\u542f\u65f6\uff0c\u53ef\u80fd\u4f1a\u62a5\u9519\uff1a"),(0,i.yg)("pre",{parentName:"li"},(0,i.yg)("code",{parentName:"pre"},"Node xxx must rollback xx total commits(numPassedDurableCommits of which were durable) to the earliest point indicated by transaction xxxx in order to rejoin the replication group, but the transaction rollback limit of xxx prohibits this.\n")),(0,i.yg)("p",{parentName:"li"},"\u610f\u601d\u6709\u90e8\u5206\u5df2\u7ecf\u6301\u4e45\u5316\u7684\u4e8b\u52a1\u9700\u8981\u56de\u6eda\uff0c\u4f46\u6761\u6570\u8d85\u8fc7\u4e0a\u9650\u3002\u8fd9\u91cc\u6211\u4eec\u7684\u9ed8\u8ba4\u4e0a\u9650\u662f 100\uff0c\u53ef\u4ee5\u901a\u8fc7\u8bbe\u7f6e ",(0,i.yg)("inlineCode",{parentName:"p"},"txn_rollback_limit")," \u6539\u53d8\u3002\u8be5\u64cd\u4f5c\u4ec5\u7528\u4e8e\u5c1d\u8bd5\u6b63\u5e38\u542f\u52a8 FE\uff0c\u4f46\u5df2\u4e22\u5931\u7684\u5143\u6570\u636e\u65e0\u6cd5\u6062\u590d\u3002"))))}N.isMDXComponent=!0}}]);