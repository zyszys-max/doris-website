"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([[234940],{15680:(e,a,n)=>{n.d(a,{xA:()=>s,yg:()=>c});var l=n(296540);function t(e,a,n){return a in e?Object.defineProperty(e,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[a]=n,e}function i(e,a){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);a&&(l=l.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),n.push.apply(n,l)}return n}function r(e){for(var a=1;a<arguments.length;a++){var n=null!=arguments[a]?arguments[a]:{};a%2?i(Object(n),!0).forEach((function(a){t(e,a,n[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))}))}return e}function o(e,a){if(null==e)return{};var n,l,t=function(e,a){if(null==e)return{};var n,l,t={},i=Object.keys(e);for(l=0;l<i.length;l++)n=i[l],a.indexOf(n)>=0||(t[n]=e[n]);return t}(e,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(l=0;l<i.length;l++)n=i[l],a.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(t[n]=e[n])}return t}var p=l.createContext({}),g=function(e){var a=l.useContext(p),n=a;return e&&(n="function"==typeof e?e(a):r(r({},a),e)),n},s=function(e){var a=g(e.components);return l.createElement(p.Provider,{value:a},e.children)},u="mdxType",m={inlineCode:"code",wrapper:function(e){var a=e.children;return l.createElement(l.Fragment,{},a)}},y=l.forwardRef((function(e,a){var n=e.components,t=e.mdxType,i=e.originalType,p=e.parentName,s=o(e,["components","mdxType","originalType","parentName"]),u=g(n),y=t,c=u["".concat(p,".").concat(y)]||u[y]||m[y]||i;return n?l.createElement(c,r(r({ref:a},s),{},{components:n})):l.createElement(c,r({ref:a},s))}));function c(e,a){var n=arguments,t=a&&a.mdxType;if("string"==typeof e||t){var i=n.length,r=new Array(i);r[0]=y;var o={};for(var p in a)hasOwnProperty.call(a,p)&&(o[p]=a[p]);o.originalType=e,o[u]="string"==typeof e?e:t,r[1]=o;for(var g=2;g<i;g++)r[g]=n[g];return l.createElement.apply(null,r)}return l.createElement.apply(null,n)}y.displayName="MDXCreateElement"},517264:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>p,contentTitle:()=>r,default:()=>m,frontMatter:()=>i,metadata:()=>o,toc:()=>g});var l=n(58168),t=(n(296540),n(15680));const i={title:"Release 2.1.0",language:"zh-CN"},r=void 0,o={unversionedId:"releasenotes/v2.1/release-2.1.0",id:"version-2.1/releasenotes/v2.1/release-2.1.0",title:"Release 2.1.0",description:"\x3c!--",source:"@site/i18n/zh-CN/docusaurus-plugin-content-docs/version-2.1/releasenotes/v2.1/release-2.1.0.md",sourceDirName:"releasenotes/v2.1",slug:"/releasenotes/v2.1/release-2.1.0",permalink:"/zh-CN/docs/releasenotes/v2.1/release-2.1.0",draft:!1,tags:[],version:"2.1",frontMatter:{title:"Release 2.1.0",language:"zh-CN"},sidebar:"releasenotes",previous:{title:"Release 2.1.1",permalink:"/zh-CN/docs/releasenotes/v2.1/release-2.1.1"},next:{title:"Release 2.0.15",permalink:"/zh-CN/docs/releasenotes/v2.0/release-2.0.15"}},p={},g=[{value:"\u590d\u6742\u67e5\u8be2\u6027\u80fd\u63d0\u5347 100%\uff0cTPC-DS \u4e1a\u754c\u9886\u5148",id:"\u590d\u6742\u67e5\u8be2\u6027\u80fd\u63d0\u5347-100tpc-ds-\u4e1a\u754c\u9886\u5148",level:2},{value:"\u4f18\u5316\u5668\u66f4\u667a\u80fd",id:"\u4f18\u5316\u5668\u66f4\u667a\u80fd",level:3},{value:"\u65e0\u7edf\u8ba1\u4fe1\u606f\u4f18\u5316",id:"\u65e0\u7edf\u8ba1\u4fe1\u606f\u4f18\u5316",level:3},{value:"Parallel Adaptive Scan \u5e76\u884c\u81ea\u9002\u5e94\u626b\u63cf",id:"parallel-adaptive-scan-\u5e76\u884c\u81ea\u9002\u5e94\u626b\u63cf",level:3},{value:"Local Shuffle",id:"local-shuffle",level:3},{value:"ARM \u67b6\u6784\u6df1\u5ea6\u9002\u914d\uff0c\u6027\u80fd\u63d0\u5347 230%",id:"arm-\u67b6\u6784\u6df1\u5ea6\u9002\u914d\u6027\u80fd\u63d0\u5347-230",level:2},{value:"\u6570\u636e\u6e56\u5206\u6790",id:"\u6570\u636e\u6e56\u5206\u6790",level:2},{value:"\u6027\u80fd\u63d0\u5347",id:"\u6027\u80fd\u63d0\u5347",level:3},{value:"\u591a SQL \u65b9\u8a00\u517c\u5bb9",id:"\u591a-sql-\u65b9\u8a00\u517c\u5bb9",level:3},{value:"\u9ad8\u901f\u6570\u636e\u8bfb\u53d6\uff0c\u6570\u636e\u4f20\u8f93\u6548\u7387\u63d0\u5347 100 \u500d",id:"\u9ad8\u901f\u6570\u636e\u8bfb\u53d6\u6570\u636e\u4f20\u8f93\u6548\u7387\u63d0\u5347-100-\u500d",level:3},{value:"\u5176\u4ed6",id:"\u5176\u4ed6",level:3},{value:"\u591a\u8868\u7269\u5316\u89c6\u56fe",id:"\u591a\u8868\u7269\u5316\u89c6\u56fe",level:2},{value:"\u5b58\u50a8\u80fd\u529b\u589e\u5f3a",id:"\u5b58\u50a8\u80fd\u529b\u589e\u5f3a",level:2},{value:"\u81ea\u589e\u5217 AUTO_INCREMENT",id:"\u81ea\u589e\u5217-auto_increment",level:3},{value:"\u81ea\u52a8\u5206\u533a Auto Partition",id:"\u81ea\u52a8\u5206\u533a-auto-partition",level:3},{value:"INSERT INTO SELECT \u5bfc\u5165\u6027\u80fd\u63d0\u5347 100%",id:"insert-into-select-\u5bfc\u5165\u6027\u80fd\u63d0\u5347-100",level:3},{value:"\u9ad8\u9891\u5b9e\u65f6\u5bfc\u5165/\u670d\u52a1\u7aef\u6512\u6279 Group Commit",id:"\u9ad8\u9891\u5b9e\u65f6\u5bfc\u5165\u670d\u52a1\u7aef\u6512\u6279-group-commit",level:3},{value:"\u534a\u7ed3\u6784\u5316\u6570\u636e\u5206\u6790",id:"\u534a\u7ed3\u6784\u5316\u6570\u636e\u5206\u6790",level:2},{value:"Variant \u6570\u636e\u7c7b\u578b",id:"variant-\u6570\u636e\u7c7b\u578b",level:3},{value:"IP \u6570\u636e\u7c7b\u578b",id:"ip-\u6570\u636e\u7c7b\u578b",level:3},{value:"\u590d\u6742\u6570\u636e\u7c7b\u578b\u5206\u6790\u51fd\u6570\u5b8c\u5584",id:"\u590d\u6742\u6570\u636e\u7c7b\u578b\u5206\u6790\u51fd\u6570\u5b8c\u5584",level:3},{value:"\u8d1f\u8f7d\u7ba1\u7406",id:"\u8d1f\u8f7d\u7ba1\u7406",level:2},{value:"\u8d44\u6e90\u786c\u9694\u79bb",id:"\u8d44\u6e90\u786c\u9694\u79bb",level:3},{value:"TopSQL",id:"topsql",level:3},{value:"\u5176\u4ed6",id:"\u5176\u4ed6-1",level:2},{value:"Decimal256",id:"decimal256",level:3},{value:"\u4efb\u52a1\u8c03\u5ea6 Job Scheduler",id:"\u4efb\u52a1\u8c03\u5ea6-job-scheduler",level:3},{value:"Behavior Changed",id:"behavior-changed",level:2},{value:"\u81f4\u8c22",id:"\u81f4\u8c22",level:2}],s={toc:g},u="wrapper";function m(e){let{components:a,...i}=e;return(0,t.yg)(u,(0,l.A)({},s,i,{components:a,mdxType:"MDXLayout"}),(0,t.yg)("p",null,"\u4eb2\u7231\u7684\u793e\u533a\u5c0f\u4f19\u4f34\u4eec\uff0c\u6211\u4eec\u5f88\u9ad8\u5174\u5730\u5411\u5927\u5bb6\u5ba3\u5e03\uff0c\u5728 3 \u6708 8 \u65e5\u6211\u4eec\u5f15\u6765\u4e86 Apache Doris 2.1.0 \u7248\u672c\u7684\u6b63\u5f0f\u53d1\u5e03\uff0c\u6b22\u8fce\u5927\u5bb6\u4e0b\u8f7d\u4f7f\u7528\u3002"),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"\u5728\u67e5\u8be2\u6027\u80fd\u65b9\u9762\uff0c2.1 \u7cfb\u5217\u7248\u672c\u6211\u4eec\u7740\u91cd\u63d0\u5347\u4e86\u5f00\u7bb1\u76f2\u6d4b\u6027\u80fd\uff0c\u529b\u4e89\u4e0d\u505a\u8c03\u4f18\u7684\u60c5\u51b5\u4e0b\u53d6\u5f97\u8f83\u597d\u7684\u6027\u80fd\u8868\u73b0\uff0c\u5305\u542b\u4e86\u5bf9\u590d\u6742 SQL \u67e5\u8be2\u6027\u80fd\u7684\u8fdb\u4e00\u6b65\u63d0\u5347\uff0c\u5728 TPC-DS 1TB \u6d4b\u8bd5\u6570\u636e\u96c6\u4e0a\u83b7\u5f97\u8d85\u8fc7 100% \u7684\u6027\u80fd\u63d0\u5347\uff0c\u67e5\u8be2\u6027\u80fd\u5c45\u4e8e\u4e1a\u754c\u9886\u5148\u5730\u4f4d\u3002")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"\u5728\u6570\u636e\u6e56\u5206\u6790\u573a\u666f\uff0c\u6211\u4eec\u8fdb\u884c\u4e86\u5927\u91cf\u6027\u80fd\u65b9\u9762\u7684\u6539\u8fdb\u3001\u76f8\u5bf9\u4e8e Trino \u548c Spark \u5206\u522b\u6709 4-6 \u500d\u7684\u6027\u80fd\u63d0\u5347\uff0c\u5e76\u5f15\u5165\u4e86\u591a SQL \u65b9\u8a00\u517c\u5bb9\u3001\u4fbf\u4e8e\u7528\u6237\u53ef\u4ee5\u4ece\u539f\u6709\u7cfb\u7edf\u65e0\u7f1d\u5207\u6362\u81f3 Apache Doris\u3002\u5728\u9762\u5411\u6570\u636e\u79d1\u5b66\u4ee5\u53ca\u5176\u4ed6\u5f62\u5f0f\u7684\u5927\u89c4\u6a21\u6570\u636e\u8bfb\u53d6\u573a\u666f\uff0c\u6211\u4eec\u5f15\u5165\u4e86\u57fa\u4e8e Arrow Flight \u7684\u9ad8\u901f\u8bfb\u53d6\u63a5\u53e3\uff0c\u6570\u636e\u4f20\u8f93\u6548\u7387\u63d0\u5347 100 \u500d\u3002")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"\u5728\u534a\u7ed3\u6784\u5316\u6570\u636e\u5206\u6790\u573a\u666f\uff0c\u6211\u4eec\u5f15\u5165\u4e86\u5168\u65b0\u7684 Variant \u548c IP \u6570\u636e\u7c7b\u578b\uff0c\u5b8c\u5584\u4e86\u4e00\u7cfb\u5217\u5206\u6790\u51fd\u6570\uff0c\u9762\u5411\u590d\u6742\u534a\u7ed3\u6784\u5316\u6570\u636e\u7684\u5b58\u50a8\u548c\u5206\u6790\u5904\u7406\u66f4\u52a0\u5f97\u5fc3\u5e94\u624b\u3002")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"\u5728 2.1.0 \u7248\u672c\u4e2d\u6211\u4eec\u4e5f\u5f15\u5165\u4e86\u57fa\u4e8e\u591a\u8868\u7684\u5f02\u6b65\u7269\u5316\u89c6\u56fe\u4ee5\u63d0\u5347\u67e5\u8be2\u6027\u80fd\uff0c\u652f\u6301\u900f\u660e\u6539\u5199\u52a0\u901f\u3001\u81ea\u52a8\u5237\u65b0\u3001\u5916\u8868\u5230\u5185\u8868\u7684\u7269\u5316\u89c6\u56fe\u4ee5\u53ca\u7269\u5316\u89c6\u56fe\u76f4\u67e5\uff0c\u57fa\u4e8e\u8fd9\u4e00\u80fd\u529b\u7269\u5316\u89c6\u56fe\u4e5f\u53ef\u7528\u4e8e\u6570\u636e\u4ed3\u5e93\u5206\u5c42\u5efa\u6a21\u3001\u4f5c\u4e1a\u8c03\u5ea6\u548c\u6570\u636e\u52a0\u5de5\u3002")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"\u5728\u5b58\u50a8\u65b9\u9762\uff0c\u6211\u4eec\u5f15\u5165\u4e86\u81ea\u589e\u5217\u3001\u81ea\u52a8\u5206\u533a\u3001MemTable \u524d\u79fb\u4ee5\u53ca\u670d\u52a1\u7aef\u6512\u6279\u7684\u80fd\u529b\uff0c\u4f7f\u5f97\u5927\u89c4\u6a21\u6570\u636e\u5b9e\u65f6\u5199\u5165\u7684\u6548\u7387\u66f4\u9ad8\u3002")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"\u5728\u8d1f\u8f7d\u7ba1\u7406\u65b9\u9762\uff0c\u6211\u4eec\u8fdb\u4e00\u6b65\u5b8c\u5584\u4e86 Workload Group \u8d44\u6e90\u7ec4\u7684\u9694\u79bb\u80fd\u529b\uff0c\u5e76\u589e\u52a0\u4e86\u8fd0\u884c\u65f6\u67e5\u770b SQL \u8d44\u6e90\u7528\u91cf\u7684\u80fd\u529b\uff0c\u8fdb\u4e00\u6b65\u63d0\u5347\u4e86\u591a\u8d1f\u8f7d\u573a\u666f\u4e0b\u7684\u7a33\u5b9a\u6027\u3002"))),(0,t.yg)("p",null,"\u5728 2.1.0 \u7248\u672c\u7684\u7814\u53d1\u8fc7\u7a0b\u4e2d\uff0c",(0,t.yg)("strong",{parentName:"p"},"\u6709 237 \u4f4d\u8d21\u732e\u8005\u4e3a Apache Doris \u5e26\u6765\u4e86\u63a5\u8fd1 6000 \u4e2a Commits\u3002")," \u540c\u65f6 2.1.0 \u7248\u672c\u4e5f\u540c\u6837\u7ecf\u8fc7\u4e86\u8fd1\u767e\u5bb6\u793e\u533a\u7528\u6237\u7684\u5927\u89c4\u6a21\u6253\u78e8\uff0c\u5728\u6d4b\u8bd5\u8fc7\u7a0b\u4e2d\u5411\u6211\u4eec\u53cd\u9988\u4e86\u8bb8\u591a\u6709\u4ef7\u503c\u7684\u4f18\u5316\u9879\uff0c\u5728\u6b64\u5411\u6240\u6709\u53c2\u4e0e\u7248\u672c\u7814\u53d1\u3001\u6d4b\u8bd5\u548c\u9700\u6c42\u53cd\u9988\u7684\u8d21\u732e\u8005\u4eec\u8868\u793a\u6700\u8877\u5fc3\u7684\u611f\u8c22\u3002\u540e\u7eed\u6211\u4eec\u5c06\u4f1a\u6301\u7eed\u654f\u6377\u53d1\u7248\u6765\u54cd\u5e94\u6240\u6709\u7528\u6237\u5bf9\u529f\u80fd\u548c\u7a33\u5b9a\u6027\u7684\u66f4\u9ad8\u8ffd\u6c42\uff0c\u6b22\u8fce\u5927\u5bb6\u5728\u4f7f\u7528\u8fc7\u7a0b\u4e2d\u7ed9\u4e88\u6211\u4eec\u66f4\u591a\u53cd\u9988\u3002"),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"GitHub \u4e0b\u8f7d\uff1a",(0,t.yg)("a",{parentName:"p",href:"https://github.com/apache/doris/releases"},"https://github.com/apache/doris/releases"))),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"\u5b98\u7f51\u4e0b\u8f7d\uff1a",(0,t.yg)("a",{parentName:"p",href:"https://doris.apache.org/download"},"https://doris.apache.org/download")))),(0,t.yg)("h2",{id:"\u590d\u6742\u67e5\u8be2\u6027\u80fd\u63d0\u5347-100tpc-ds-\u4e1a\u754c\u9886\u5148"},"\u590d\u6742\u67e5\u8be2\u6027\u80fd\u63d0\u5347 100%\uff0cTPC-DS \u4e1a\u754c\u9886\u5148"),(0,t.yg)("p",null," \u5728 2.1 \u7cfb\u5217\u7248\u672c\u4e2d\uff0c\u6211\u4eec\u7740\u91cd\u63d0\u5347\u4e86\u5f00\u7bb1\u76f2\u6d4b\u6027\u80fd\uff0c\u529b\u4e89\u4e0d\u505a\u8c03\u4f18\u7684\u60c5\u51b5\u4e0b\u53d6\u5f97\u8f83\u597d\u7684\u6027\u80fd\u8868\u73b0\uff0c\u5305\u542b\u4e86\u5bf9\u590d\u6742 SQL \u67e5\u8be2\u6027\u80fd\u7684\u8fdb\u4e00\u6b65\u63d0\u5347\u3002\u5728\u6b64\u6211\u4eec\u4ee5 TPC-DS 1TB \u4f5c\u4e3a\u6027\u80fd\u6d4b\u8bd5\u5bf9\u6bd4\u7684\u57fa\u51c6\uff0c\u91cd\u70b9\u5bf9\u6bd4\u6700\u65b0 2.1.0 \u7248\u672c\u4e0e 2.0.5 \u7248\u672c\u7684\u6027\u80fd\u63d0\u5347\u3002\u96c6\u7fa4\u89c4\u6a21\u5747\u4e3a 1FE\u30013BE\uff0c\u5176\u4e2d BE \u8282\u70b9\u7684\u670d\u52a1\u5668\u914d\u7f6e\u4e3a 48C 192G\u3002\u4ece\u4ee5\u4e0b\u6d4b\u8bd5\u7ed3\u679c\u4e2d\u53ef\u4ee5\u770b\u5230\uff1a"),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"2.1.0 \u7248\u672c\u7684\u603b\u67e5\u8be2\u8017\u65f6\u4e3a 245.7 \u79d2\uff0c\u76f8\u8f83\u4e8e 2.0.5 \u7248\u672c\u7684 489.6 \u79d2\uff0c",(0,t.yg)("strong",{parentName:"p"},"\u6027\u80fd\u63d0\u5347\u8fbe\u5230 100 %\uff1b"))),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"\u5728\u5168\u90e8 99 \u4e2a SQL \u4e2d\uff0c\u6709\u8fd1\u4e09\u5206\u4e4b\u4e00\u7684 SQL \u67e5\u8be2\u6027\u80fd\u63d0\u5347\u8fbe\u5230 2 \u500d\u4ee5\u4e0a\uff0c\u8d85\u8fc7 80 \u4e2a SQL \u90fd\u83b7\u5f97\u663e\u8457\u6027\u80fd\u63d0\u5347\uff1b")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"\u4e0d\u8bba\u662f\u57fa\u7840\u7684\u8fc7\u6ee4\u3001\u6392\u5e8f\u3001\u805a\u5408\uff0c\u6216\u8005\u590d\u6742\u7684\u591a\u8868\u5173\u8054\u67e5\u8be2\u3001\u5b50\u67e5\u8be2\u4ee5\u53ca\u7a97\u53e3\u51fd\u6570\u8ba1\u7b97\uff0c2.1.0 \u7248\u672c\u90fd\u6709\u66f4\u4e3a\u660e\u663e\u7684\u6027\u80fd\u4f18\u52bf\uff1b")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"2.0.5 \u7248\u672c\u6216 2.1.0 \u7248\u672c\uff0c\u90fd\u53ef\u4ee5\u5b8c\u6574\u6267\u884c TPC-DS \u7684 99 \u4e2a\u67e5\u8be2\u3002"))),(0,t.yg)("p",null,(0,t.yg)("img",{alt:"\u590d\u6742\u67e5\u8be2\u6027\u80fd\u63d0\u5347 100%\uff0cTPC-DS \u4e1a\u754c\u9886\u5148",src:n(505219).A,width:"1280",height:"675"})),(0,t.yg)("p",null,"\u4ee5\u4e0a\u8be6\u7ec6\u6d4b\u8bd5\u7ed3\u679c\u6211\u4eec\u5c06\u5728\u540e\u7eed\u63d0\u4ea4\u5230 Apache Doris \u5b98\u7f51\u6587\u6863\u4e2d\uff0c\u4e5f\u6b22\u8fce\u6240\u6709\u7528\u6237\u5728\u5b8c\u6210\u6700\u65b0\u7248\u672c\u7684\u90e8\u7f72\u540e\u8fdb\u884c\u6d4b\u8bd5\u590d\u73b0\u3002"),(0,t.yg)("p",null,"\u4e0e\u6b64\u540c\u65f6\uff0c\u6211\u4eec\u4e5f\u5bf9\u4e1a\u5185\u591a\u4e2a OLAP \u7cfb\u7edf\u5728\u540c\u7b49\u786c\u4ef6\u8d44\u6e90\u548c\u591a\u4e2a\u6d4b\u8bd5\u6570\u636e\u89c4\u6a21\u4e0b\u8fdb\u884c\u4e86\u6027\u80fd\u6d4b\u8bd5\uff0c\u4e0d\u8bba\u5927\u5bbd\u8868\u573a\u666f\u6216\u591a\u8868\u5173\u8054\u573a\u666f\uff0cApache Doris \u90fd\u5177\u5907\u7740\u6781\u4e3a\u660e\u663e\u7684\u6027\u80fd\u4f18\u52bf\u3002\u6beb\u65e0\u7591\u95ee\uff0c",(0,t.yg)("strong",{parentName:"p"},"Apache Doris \u5df2\u5728\u4e1a\u754c\u540c\u7c7b\u4ea7\u54c1\u4e2d\u6027\u80fd\u5c45\u4e8e\u6700\u9886\u5148\u5730\u4f4d"),"\uff01"),(0,t.yg)("h3",{id:"\u4f18\u5316\u5668\u66f4\u667a\u80fd"},"\u4f18\u5316\u5668\u66f4\u667a\u80fd"),(0,t.yg)("p",null,"\u5728 Apache Doris 2.0 \u7248\u672c\u4e2d\u6211\u4eec\u5f15\u5165\u4e86\u5168\u65b0\u67e5\u8be2\u4f18\u5316\u5668\uff0c\u5728\u7edd\u5927\u591a\u6570\u573a\u666f\u65e0\u9700\u4efb\u4f55\u8c03\u4f18\u5373\u53ef\u5b9e\u73b0\u6781\u81f4\u7684\u67e5\u8be2\u6027\u80fd\u3002\u800c\u5728\u6700\u65b0\u53d1\u5e03\u7684 Apache Doris 2.1 \u7248\u672c\u4e2d\uff0c\u67e5\u8be2\u4f18\u5316\u5668\u5728\u6574\u4f53\u4ee3\u9645\u66f4\u65b0\u7684\u57fa\u7840\u4e0a\uff0c\u8fdb\u884c\u4e86\u4f18\u5316\u89c4\u5219\u7684\u6269\u5c55\u548c\u679a\u4e3e\u6846\u67b6\u7684\u5b8c\u5584\uff0c\u9762\u5411\u590d\u6742\u5206\u6790\u573a\u666f\u66f4\u52a0\u5f97\u5fc3\u5e94\u624b\uff1a"),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},(0,t.yg)("strong",{parentName:"p"},"\u4f18\u5316\u5668\u57fa\u7840\u8bbe\u65bd\u5b8c\u5584"),"\uff1a\u5728\u591a\u79cd\u4f18\u5316\u5668\u57fa\u7840\u8bbe\u65bd\u65b9\u9762\u8fdb\u884c\u4e86\u8865\u5145\u548c\u589e\u5f3a\uff0c\u4f8b\u5982\u5bf9\u7edf\u8ba1\u4fe1\u606f\u63a8\u5bfc\u548c\u4ee3\u4ef7\u6a21\u578b\u65b9\u9762\u7684\u6301\u7eed\u6539\u8fdb\uff0c\u4f7f\u4e4b\u80fd\u591f\u6536\u96c6\u66f4\u591a\u7684\u7279\u5f81\u4fe1\u606f\u4e3a\u590d\u6742\u4f18\u5316\u63d0\u4f9b\u57fa\u7840\uff1b")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},(0,t.yg)("strong",{parentName:"p"},"\u4f18\u5316\u89c4\u5219\u6301\u7eed\u6269\u5c55"),"\uff1a\u5f97\u76ca\u4e8e\u4e30\u5bcc\u7684\u5b9e\u9645\u573a\u666f\u53cd\u9988\uff0c\u65b0\u7248\u672c\u4e2d\u67e5\u8be2\u4f18\u5316\u5668\u589e\u5f3a\u4e86\u5305\u62ec\u7b97\u5b50\u4e0b\u538b\u5728\u5185\u7684\u8bb8\u591a\u7ecf\u5178\u89c4\u5219\uff0c\u7ed3\u5408\u4e0a\u8ff0\u57fa\u7840\u8bbe\u65bd\u6269\u5145\u800c\u5f15\u5165\u7684\u65b0\u4f18\u5316\u89c4\u5219\uff0c\u4f7f\u5f97\u65b0\u7248\u672c\u7684\u67e5\u8be2\u4f18\u5316\u5668\u80fd\u8986\u76d6\u66f4\u5e7f\u6cdb\u7684\u4f7f\u7528\u573a\u666f\uff1b")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},(0,t.yg)("strong",{parentName:"p"},"\u679a\u4e3e\u6846\u67b6\u8fdb\u4e00\u6b65\u4f18\u5316"),"\uff1a\u5728\u67e5\u8be2\u4f18\u5316\u5668 Cascades \u548c DPhyper \u4e24\u5927\u878d\u5408\u6846\u67b6\u7684\u57fa\u7840\u4e0a\uff0c\u7ee7\u7eed\u6df1\u8015\u6846\u67b6\u80fd\u529b\u3001\u4f18\u5316\u6846\u67b6\u6027\u80fd\uff0c\u786e\u7acb\u4e86\u66f4\u4e3a\u6e05\u6670\u7684\u679a\u4e3e\u7b56\u7565\uff0c\u517c\u987e\u8ba1\u5212\u8d28\u91cf\u548c\u679a\u4e3e\u6548\u7387\uff0c\u4e3a\u9ad8\u6027\u80fd\u5f15\u64ce\u63d0\u4f9b\u575a\u5b9e\u57fa\u7840\u3002\u4f8b\u5982\u5c06 Cascades \u9ed8\u8ba4\u679a\u4e3e\u8868\u4e0a\u9650\u4ece 5 \u63d0\u5347\u5230\u4e86 8\u3001\u6709\u6548\u6269\u5927\u4e86\u9ad8\u8d28\u91cf\u8ba1\u5212\u7684\u8986\u76d6\u8303\u56f4\uff0c\u540c\u65f6\u8fdb\u4e00\u6b65\u4f18\u5316 DPhyper \u679a\u4e3e\u6548\u7387\u3001\u4f7f\u4e4b\u80fd\u591f\u679a\u4e3e\u51fa\u66f4\u4f18\u8ba1\u5212\u3002"))),(0,t.yg)("h3",{id:"\u65e0\u7edf\u8ba1\u4fe1\u606f\u4f18\u5316"},"\u65e0\u7edf\u8ba1\u4fe1\u606f\u4f18\u5316"),(0,t.yg)("p",null,"\u9488\u5bf9\u6d77\u91cf\u6570\u636e\u89c4\u6a21\u4ee5\u53ca\u6570\u636e\u6e56\u5206\u6790\u573a\u666f\u4e0b\uff0c\u9488\u5bf9\u7edf\u8ba1\u4fe1\u606f\u6536\u96c6\u96be\u5ea6\u9ad8\u3001\u6536\u96c6\u65f6\u95f4\u4e45\u7684\u95ee\u9898\uff0c\u5728 2.1 \u7248\u672c\u4e2d\u67e5\u8be2\u4f18\u5316\u5668\u5229\u7528\u591a\u79cd\u542f\u53d1\u5f0f\u6280\u672f\uff0c\u5927\u5927\u63d0\u5347\u4e86",(0,t.yg)("strong",{parentName:"p"},"\u65e0\u7edf\u8ba1\u4fe1\u606f\u573a\u666f\u4e0b"),"\u7684\u8ba1\u5212\u8d28\u91cf\uff0c\u4f7f\u5f97\u5728\u6ca1\u6709\u7edf\u8ba1\u4fe1\u606f\u7684\u573a\u666f\u4e0b\u4e5f\u53ef\u83b7\u5f97\u8f83\u597d\u7684\u67e5\u8be2\u8ba1\u5212\u3002\u540c\u65f6\u6269\u5c55\u4e86 Runtime Filter \u7684\u4e0b\u538b\u573a\u666f\u548c\u81ea\u9002\u5e94\u80fd\u529b\uff0c\u5728\u6267\u884c\u8fc7\u7a0b\u4e2d\u80fd\u591f\u81ea\u9002\u5e94\u5730\u52a8\u6001\u8c03\u6574\u90e8\u5206\u8868\u8fbe\u5f0f\u8c13\u8bcd\uff0c\u4f7f\u5f97 Apache Doris \u5728\u4e0d\u4f9d\u8d56\u7edf\u8ba1\u4fe1\u606f\u7684\u60c5\u51b5\u4e0b\u4e5f\u5177\u6709\u4f18\u5f02\u7684\u6027\u80fd\u8868\u73b0\u3002"),(0,t.yg)("h3",{id:"parallel-adaptive-scan-\u5e76\u884c\u81ea\u9002\u5e94\u626b\u63cf"},"Parallel Adaptive Scan \u5e76\u884c\u81ea\u9002\u5e94\u626b\u63cf"),(0,t.yg)("p",null,"\u5728\u590d\u6742\u6570\u636e\u5206\u6790\u573a\u666f\u4e0b\uff0c\u6bcf\u6b21\u67e5\u8be2\u90fd\u9700\u8981\u626b\u63cf\u5927\u91cf\u7684\u6570\u636e\u8fdb\u884c\u8ba1\u7b97\uff0c\u56e0\u6b64 IO \u74f6\u9888\u5f88\u5927\u7a0b\u5ea6\u4e0a\u51b3\u5b9a\u4e86\u67e5\u8be2\u6027\u80fd\u7684\u4e0a\u9650\u3002\u4e3a\u4e86\u63d0\u5347 Scan IO \u7684\u6027\u80fd\uff0cApache Doris \u91c7\u53d6\u4e86\u5e76\u884c\u8bfb\u53d6\u7684\u6280\u672f\uff0c\u6bcf\u4e2a\u626b\u63cf\u7ebf\u7a0b\u8bfb\u53d6 1 \u4e2a\u6216\u8005\u591a\u4e2a Tablet\uff08\u5373\u7528\u6237\u5efa\u8868\u65f6\u6307\u5b9a\u7684 Bucket\uff09\uff0c\u4f46\u5982\u82e5\u7528\u6237\u5efa\u8868\u65f6\u6307\u5b9a\u7684 Bucket \u6570\u76ee\u4e0d\u5408\u7406\u3001\u90a3\u4e48\u78c1\u76d8\u626b\u63cf\u7ebf\u7a0b\u5c31\u65e0\u6cd5\u5e76\u884c\u5de5\u4f5c\uff0c\u76f4\u63a5\u5f71\u54cd\u67e5\u8be2\u6027\u80fd\u3002\u4e3a\u6b64\uff0c\u5728 2.1 \u7248\u672c\u4e2d\u6211\u4eec\u5f15\u5165\u4e86 Tablet \u5185\u7684\u5e76\u884c\u626b\u63cf\u6280\u672f\uff0c\u53ef\u4ee5\u5c06\u591a\u4e2a Tablet \u8fdb\u884c\u6c60\u5316\uff0c\u5728\u78c1\u76d8\u626b\u63cf\u7aef\u53ef\u4ee5\u6839\u636e\u884c\u6570\u6765\u62c6\u5206\u591a\u4e2a\u7ebf\u7a0b\u5e76\u884c\u626b\u63cf\uff08\u6700\u591a\u652f\u6301 48 \u4e2a\u7ebf\u7a0b\uff09\uff0c\u4ece\u800c\u6709\u6548\u907f\u514d\u5206\u6876\u6570\u4e0d\u5408\u7406\u5bfc\u81f4\u7684\u67e5\u8be2\u6027\u80fd\u95ee\u9898\u3002"),(0,t.yg)("p",null,(0,t.yg)("img",{alt:"Parallel Adaptive Scan \u5e76\u884c\u81ea\u9002\u5e94\u626b\u63cf",src:n(726408).A,width:"1280",height:"424"})),(0,t.yg)("p",null,"\u56e0\u6b64\u5728 2.1 \u7248\u672c\u4ee5\u540e\uff0c\u6211\u4eec\u5efa\u8bae\u7528\u6237",(0,t.yg)("strong",{parentName:"p"},"\u5728\u5efa\u8868\u65f6\u8bbe\u7f6e\u7684\u5206\u6876\u6570=\u6574\u4e2a\u96c6\u7fa4\u78c1\u76d8\u7684\u6570\u91cf"),"\uff0c\u5728 IO \u5c42\u9762\u80fd\u5c06\u6574\u4e2a\u96c6\u7fa4\u6240\u6709\u7684 IO \u8d44\u6e90\u5168\u90e8\u5229\u7528\u8d77\u6765\u3002"),(0,t.yg)("admonition",{type:"tip"},(0,t.yg)("p",{parentName:"admonition"},"\u5f53\u524d 2.1.0 \u7248\u672c\u7684 Parallel Adaptive Scan \u53ea\u80fd\u9488\u5bf9 Unqiue Key \u6a21\u578b\u7684 Merge-on-Write \u8868\u4ee5\u53ca Duplicate Key \u6a21\u578b\u751f\u6548\uff0c\u9884\u8ba1\u5728 2.1.1 \u7248\u672c\u4e2d\u4f1a\u589e\u52a0\u5bf9 Unique Key \u6a21\u578b Merge-on-Read \u8868\u548c Aggregate Key \u6a21\u578b\u7684\u652f\u6301\u3002")),(0,t.yg)("h3",{id:"local-shuffle"},"Local Shuffle"),(0,t.yg)("p",null,"\u5728\u90e8\u5206\u573a\u666f\u4e0b\uff0c\u6570\u636e\u5206\u5e03\u4e0d\u5747\u4f1a\u5bfc\u81f4\u591a\u4e2a Instance \u7684\u67e5\u8be2\u6267\u884c\u51fa\u73b0\u957f\u5c3e\u3002\u800c\u4e3a\u4e86\u89e3\u51b3\u5355\u4e2a BE \u8282\u70b9\u4e0a\u591a\u4e2a Instance \u4e4b\u95f4\u7684\u6570\u636e\u503e\u659c\u95ee\u9898\uff0c\u5728 Apache Doris 2.1 \u7248\u672c\u4e2d\u6211\u4eec\u5f15\u5165\u4e86 Local Shuffle \u6280\u672f\uff0c\u5c3d\u53ef\u80fd\u5c06\u6570\u636e\u6253\u6563\u4ece\u800c\u52a0\u901f\u67e5\u8be2\u3002\u4f8b\u5982\u5728\u67d0\u4e00\u5178\u578b\u7684\u805a\u5408\u67e5\u8be2\u4e2d\uff0c\u6570\u636e\u5728\u7ecf\u8fc7\u805a\u5408\u4e4b\u524d\u5c06\u4f1a\u901a\u8fc7\u4e00\u4e2a Local Shuffle \u8282\u70b9\u88ab\u5747\u5300\u5206\u5e03\u5728\u4e0d\u540c\u7684 Pipeline Task \u4e2d\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a"),(0,t.yg)("p",null,(0,t.yg)("img",{alt:"Local Shuffle",src:n(770089).A,width:"1220",height:"1280"})),(0,t.yg)("p",null,"\u5728\u5177\u5907\u4e86 Parallel Adaptive Scan \u548c Local Shuffle \u80fd\u529b\u4e4b\u540e\uff0cApache Doris \u80fd\u591f\u89c4\u907f\u7531\u4e8e\u5206\u6876\u6570\u4e0d\u5408\u7406\u3001\u6570\u636e\u5206\u5e03\u4e0d\u5747\u5e26\u6765\u7684\u6027\u80fd\u95ee\u9898\u3002"),(0,t.yg)("p",null,"\u5728\u6b64\u6211\u4eec\u5206\u522b\u4f7f\u7528 Clickbench\uff08\u5927\u5bbd\u8868\u573a\u666f\uff09\u548c TPC-H\uff08\u591a\u8868 Join \u7684\u590d\u6742\u5206\u6790\u573a\u666f\uff09\u6570\u636e\u96c6\u6a21\u62df\u5efa\u8868\u5206\u6876\u4e0d\u5408\u7406\u7684\u60c5\u51b5\uff0c\u5728 Clickbench \u6570\u636e\u96c6\u4e2d\u6211\u4eec\u5efa\u8868 Bucket \u6570\u91cf\u5206\u522b\u8bbe\u4e3a 1 \u548c 16\uff0c\u5728 TPC-H 100G \u6570\u636e\u96c6\u4e0b\u6211\u4eec\u5efa\u8868\u65f6\u6bcf\u4e2a Partition \u7684 Bucket \u6570\u76ee\u5206\u522b\u8bbe\u4e3a 1 \u548c 16\u3002\u5728\u5f00\u542f Parallel Adaptive Scan \u548c Local Shuffle \u4e4b\u540e\uff0c\u6574\u4f53\u67e5\u8be2\u6027\u80fd\u8868\u73b0\u6bd4\u8f83\u5e73\u7a33\uff0c\u5373\u4f7f\u4e0d\u5408\u7406\u7684\u6570\u636e\u5206\u5e03\u4e5f\u80fd\u53d6\u5f97\u4f18\u5f02\u7684\u6027\u80fd\u8868\u73b0\u3002"),(0,t.yg)("p",null,(0,t.yg)("img",{alt:"Local Shuffle Clickbench and TPCH-100",src:n(405098).A,width:"1280",height:"702"})),(0,t.yg)("admonition",{title:"\u5907\u6ce8",type:"note"},(0,t.yg)("p",{parentName:"admonition"},"\u53c2\u8003\u6587\u6863\uff1a",(0,t.yg)("a",{parentName:"p",href:"https://doris.apache.org/zh-CN/docs/query-acceleration/pipeline-execution-engine"},"Pipeline X \u6267\u884c\u5f15\u64ce"))),(0,t.yg)("h2",{id:"arm-\u67b6\u6784\u6df1\u5ea6\u9002\u914d\u6027\u80fd\u63d0\u5347-230"},"ARM \u67b6\u6784\u6df1\u5ea6\u9002\u914d\uff0c\u6027\u80fd\u63d0\u5347 230%"),(0,t.yg)("p",null,"\u5728 Apache Doris 2.1 \u7248\u672c\u4e2d\u6211\u4eec\u9488\u5bf9 ARM \u67b6\u6784\u8fdb\u884c\u4e86\u6df1\u5ea6\u7684\u9002\u914d\u548c\u6307\u4ee4\u96c6\u4f18\u5316\uff0c\u53ef\u4ee5\u5728 ARM \u67b6\u6784\u4e0a\u5145\u5206\u53d1\u6325 Apache Doris \u7684\u6027\u80fd\u4f18\u52bf\u3002\u76f8\u8f83\u4e8e 2.0 \u7248\u672c\uff0c2.1 \u7248\u672c\u5728 ClickBench\u3001SSB 100G\u3001TPC-H 100G \u4ee5\u53ca TPC-DS 1TB \u7b49\u591a\u4e2a\u6d4b\u8bd5\u6570\u636e\u96c6\u4e2d\u53d6\u5f97\u4e86\u8d85\u8fc7 100% \u7684\u6027\u80fd\u63d0\u5347\u3002\u5728\u6b64\u6211\u4eec\u4ee5\u5927\u5bbd\u8868\u573a\u666f\u7684 ClickBench \u4ee5\u53ca\u591a\u8868\u5173\u8054\u573a\u666f\u7684 TPC-H \u4e3a\u4f8b\uff0c\u96c6\u7fa4\u914d\u7f6e\u5747\u4e3a 1FE 3BE\u3001BE \u8282\u70b9\u7684\u670d\u52a1\u5668\u914d\u7f6e\u4e3a 16C 64G \u7684 ARM \u670d\u52a1\u5668\uff0c\u6d4b\u8bd5\u7ed3\u8bba\u5982\u4e0b\uff1a"),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"\u5728\u5927\u5bbd\u8868\u573a\u666f\u4e2d\uff0cClickBench \u6d4b\u8bd5\u6570\u636e\u96c6 43 \u4e2a SQL \u7684\u603b\u67e5\u8be2\u8017\u65f6\u4ece 102.36 \u79d2\u964d\u4f4e\u81f3 30.73 \u79d2\uff0c\u6027\u80fd\u63d0\u5347\u8d85\u8fc7 230%\uff1b")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"\u5728\u591a\u8868\u5173\u8054\u573a\u666f\u4e2d\uff0cTPC-H 22 \u4e2a SQL \u7684\u603b\u67e5\u8be2\u8017\u65f6\u4ece 174.8 \u79d2\u964d\u4f4e\u81f3 90.4 \u79d2\uff0c\u6027\u80fd\u63d0\u5347 93%\uff1b"))),(0,t.yg)("h2",{id:"\u6570\u636e\u6e56\u5206\u6790"},"\u6570\u636e\u6e56\u5206\u6790"),(0,t.yg)("h3",{id:"\u6027\u80fd\u63d0\u5347"},"\u6027\u80fd\u63d0\u5347"),(0,t.yg)("p",null,"\u5728 2.1 \u7248\u672c\u4e2d\uff0c\u6211\u4eec\u5bf9\u6570\u636e\u6e56\u5206\u6790\u65b9\u9762\u505a\u4e86\u5927\u91cf\u6539\u8fdb\uff0c\u5305\u62ec\u5bf9 HDFS \u548c\u5bf9\u8c61\u5b58\u50a8\u7684 IO \u4f18\u5316\u3001Parquet/ORC \u6587\u4ef6\u683c\u5f0f\u7684\u8bfb\u53d6\u53cd\u5e8f\u5217\u4f18\u5316\u3001\u6d6e\u70b9\u7c7b\u578b\u89e3\u538b\u4f18\u5316\u3001\u8c13\u8bcd\u4e0b\u63a8\u6267\u884c\u4f18\u5316\u3001\u7f13\u5b58\u7b56\u7565\u4ee5\u53ca\u626b\u63cf\u4efb\u52a1\u8c03\u5ea6\u7b56\u7565\u7684\u4f18\u5316\uff0c\u4ee5\u53ca\u9488\u5bf9\u4e0d\u540c\u6570\u636e\u6e90\u7684\u7edf\u8ba1\u4fe1\u606f\u51c6\u786e\u6027\u7684\u63d0\u5347\u53ca\u66f4\u7cbe\u51c6\u7684\u4f18\u5316\u5668\u4ee3\u4ef7\u6a21\u578b\u3002\u57fa\u4e8e\u4ee5\u4e0a\u4f18\u5316\uff0cApache Doris \u5728\u6570\u636e\u6e56\u5206\u6790\u573a\u666f\u4e0b\u7684\u6027\u80fd\u5f97\u5230\u5927\u5e45\u5ea6\u63d0\u5347\u3002"),(0,t.yg)("p",null,(0,t.yg)("img",{alt:"Doris \u6570\u636e\u6e56\u5206\u6790 - \u6027\u80fd\u63d0\u5347",src:n(209381).A,width:"950",height:"550"})),(0,t.yg)("p",null,"\u5728\u6b64\u6211\u4eec\u4ee5 TPC-DS 1TB \u573a\u666f\u4e0b\u8fdb\u884c\u6d4b\u8bd5\uff0cApache Doris 2.1 \u7248\u672c\u548c Trino 435 \u7248\u672c\u7684\u6027\u80fd\u6d4b\u8bd5\u7ed3\u679c\u5982\u4e0b\uff1a"),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"\u5728\u65e0\u7f13\u5b58\u60c5\u51b5\u4e0b\uff0cApache Doris \u7684\u603b\u4f53\u8fd0\u884c\u8017\u65f6\u95f4\u4e3a 717s\u3001Trino \u4e3a 1296s\uff0c\u67e5\u8be2\u8017\u65f6\u964d\u4f4e\u4e86 45%\uff0c\u5168\u90e8 99 \u6761 SQL \u4e2d\u6709 80% \u6bd4 Trino \u66f4\u5feb\uff1b")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"\u5728\u5f00\u542f\u6587\u4ef6\u7f13\u5b58\u529f\u80fd\u5e76\u547d\u4e2d\u7684\u60c5\u51b5\u4e0b\uff0cApache Doris \u7684\u603b\u4f53\u6027\u80fd\u53ef\u4ee5\u8fdb\u4e00\u6b65\u63d0\u5347 2.2 \u500d\u4ee5\u4e0a\uff0c",(0,t.yg)("strong",{parentName:"p"},"\u8f83 Trino \u6709 4 \u500d\u4ee5\u4e0a\u7684\u6027\u80fd\u63d0\u5347\uff0c\u5168\u90e8 99 \u6761 SQL \u6027\u80fd\u5747\u4f18\u4e8e Trino"),"\u3002"))),(0,t.yg)("p",null,"\u4e0e\u6b64\u540c\u65f6\u4e5f\u5728 TPC-DS 10TB \u573a\u666f\u4e0b\u5bf9 Apache Doris 2.1 \u7248\u672c\u4e0e Spark 3.5.0 \u4ee5\u53ca 3.3.1 \u7248\u672c\u8fdb\u884c\u4e86\u6027\u80fd\u6d4b\u8bd5\uff0c\u67e5\u8be2\u6027\u80fd\u5206\u522b\u63d0\u5347 4.2 \u500d\u548c 6.1 \u500d\u3002"),(0,t.yg)("h3",{id:"\u591a-sql-\u65b9\u8a00\u517c\u5bb9"},"\u591a SQL \u65b9\u8a00\u517c\u5bb9"),(0,t.yg)("p",null,"\u5f53\u7528\u6237\u4ece\u539f\u6709 OLAP \u7cfb\u7edf\uff08\u5982 Clickhouse\u3001Trino\u3001Presto\u3001Hive \u7b49\uff09\u8fc1\u79fb\u81f3 Apache Doris \u65f6\uff0c\u4e00\u65b9\u9762\u56e0\u4e3a SQL \u65b9\u8a00\u5b58\u5728\u5dee\u5f02\uff0c\u9700\u8981\u540c\u6b65\u4fee\u6539\u5927\u91cf\u7684\u4e1a\u52a1\u67e5\u8be2\u903b\u8f91\u8fdb\u884c\u9002\u914d\uff0c\u65e0\u6cd5\u8fdb\u884c\u5e73\u6ed1\u8fc1\u79fb\u3002\u53e6\u4e00\u65b9\u9762\uff0c\u5f53\u4f7f\u7528 Apache Doris \u4f5c\u4e3a\u7edf\u4e00\u6570\u636e\u5206\u6790\u7f51\u5173\u65f6\uff0c\u9700\u8981\u5bf9\u63a5\u539f\u5148\u7684 Hive\u3001Spark \u7b49\u7cfb\u7edf\u3001\u4ee5\u6ee1\u8db3\u4e0d\u540c\u6570\u636e\u6e90\u7684\u67e5\u8be2\u9700\u6c42\u3002"),(0,t.yg)("p",null,"\u56e0\u6b64\u5728 Apache Doris 2.1 \u7248\u672c\u4e2d\u6211\u4eec\u5f15\u5165\u4e86\u591a SQL \u65b9\u8a00\u8f6c\u6362\u529f\u80fd\uff0c\u7528\u6237\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u539f\u5148\u7cfb\u7edf\u7684 SQL \u65b9\u8a00\u5728 Doris \u4e2d\u8fdb\u884c\u6570\u636e\u67e5\u8be2\u800c\u65e0\u9700\u4fee\u6539\u4e1a\u52a1\u903b\u8f91\u3002\u5728\u90e8\u7f72\u597d SQL \u8f6c\u6362\u670d\u52a1\u540e\uff0c\u7528\u6237\u53ea\u9700\u901a\u8fc7\u4f1a\u8bdd\u53d8\u91cf ",(0,t.yg)("inlineCode",{parentName:"p"},"sql_dialect"),"\u8bbe\u7f6e\u5f53\u524d\u4f1a\u8bdd\u7684 SQL \u65b9\u8a00\u7c7b\u578b\uff0c\u5373\u53ef\u4f7f\u7528\u5bf9\u5e94\u7684 SQL \u65b9\u8a00\u8fdb\u884c\u67e5\u8be2\u3002"),(0,t.yg)("p",null,"\u8be5\u529f\u80fd\u76ee\u524d\u4e3a\u5b9e\u9a8c\u6027\u8d28\u529f\u80fd\uff0c\u5f53\u524d\u5df2\u7ecf\u652f\u6301 ClickHouse\u3001Presto\u3001Trino\u3001Hive\u3001Spark\u3002\u5728\u6b64\u6211\u4eec\u4ee5 Trino \u4e3a\u4f8b\uff0c\u90e8\u7f72\u5b8c SQL \u8f6c\u6362\u670d\u52a1\u540e\uff0c\u5728\u4f1a\u8bdd\u53d8\u91cf\u4e2d\u8bbe\u7f6e ",(0,t.yg)("inlineCode",{parentName:"p"},"set sql_dialect = trino")," \uff0c\u5373\u53ef\u76f4\u63a5\u91c7\u53d6 Trino SQL \u8bed\u6cd5\u6267\u884c\u67e5\u8be2\u3002\u5728\u67d0\u4e9b\u793e\u533a\u7528\u6237\u7684\u5b9e\u9645\u7ebf\u4e0a\u4e1a\u52a1 SQL \u517c\u5bb9\u6027\u6d4b\u8bd5\u4e2d\uff0c\u5728\u5168\u90e8 3w \u591a\u6761\u67e5\u8be2\u8bed\u53e5\u4e2d\u4e0e Trino SQL \u517c\u5bb9\u5ea6\u9ad8\u8fbe 99% \u4ee5\u4e0a\u3002\u4e5f\u6b22\u8fce\u6240\u6709\u7528\u6237\u5728\u4f7f\u7528\u8fc7\u7a0b\u4e2d\u5411\u6211\u4eec\u53cd\u9988\u4e0d\u517c\u5bb9\u7684 Case\uff0c\u5e2e\u52a9 Apache Doris \u66f4\u52a0\u5b8c\u5584\u3002"),(0,t.yg)("admonition",{type:"note"},(0,t.yg)("ul",{parentName:"admonition"},(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"\u6f14\u793a Demo: ",(0,t.yg)("a",{parentName:"p",href:"https://www.bilibili.com/video/BV1cS421A7kA/?spm_id_from=333.999.0.0"},"https://www.bilibili.com/video/BV1cS421A7kA/?spm_id_from=333.999.0.0"))),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"\u53c2\u8003\u6587\u6863\uff1a",(0,t.yg)("a",{parentName:"p",href:"https://doris.apache.org/zh-CN/docs/lakehouse/sql-dialect.md"},"SQL \u65b9\u8a00\u517c\u5bb9"))))),(0,t.yg)("h3",{id:"\u9ad8\u901f\u6570\u636e\u8bfb\u53d6\u6570\u636e\u4f20\u8f93\u6548\u7387\u63d0\u5347-100-\u500d"},"\u9ad8\u901f\u6570\u636e\u8bfb\u53d6\uff0c\u6570\u636e\u4f20\u8f93\u6548\u7387\u63d0\u5347 100 \u500d"),(0,t.yg)("p",null,"\u5982\u4eca\u8bb8\u591a\u5927\u6570\u636e\u7cfb\u7edf\u90fd\u91c7\u53d6\u5217\u5f0f\u5185\u5b58\u6570\u636e\u683c\u5f0f\uff0c\u4ee5 MySQL/JDBC/ODBC \u4f5c\u4e3a\u4e0e\u6570\u636e\u5e93\u7cfb\u7edf\u4ea4\u4e92\u7684\u4e3b\u6d41\u534f\u8bae\u4e0e\u6807\u51c6\u3002\u5728\u6570\u636e\u8f93\u51fa\u81f3\u5916\u90e8\u7cfb\u7edf\u7684\u8fc7\u7a0b\u4e2d\uff0c\u9700\u8981\u5c06\u6570\u636e\u4ece\u7cfb\u7edf\u7279\u5b9a\u7684\u5217\u5b58\u683c\u5f0f\u5e8f\u5217\u5316\u4e3a MySQL/JDBC/ODBC \u534f\u8bae\u7684\u884c\u5b58\u683c\u5f0f\uff0c\u518d\u53cd\u5e8f\u5217\u5316\u56de\u5ba2\u6237\u7aef\u7684\u5217\u5b58\u683c\u5f0f\uff0c\u8fd9\u4f1a\u4f7f\u6570\u636e\u4f20\u8f93\u901f\u5ea6\u5927\u5e45\u964d\u4f4e\uff0c\u5728\u9762\u5411\u6570\u636e\u79d1\u5b66\u6216\u5176\u4ed6\u5f62\u5f0f\u7684\u5927\u89c4\u6a21\u6570\u636e\u8bfb\u5199\u65f6\uff0c\u6570\u636e\u4f20\u8f93\u7684\u6548\u7387\u7f3a\u9677\u6108\u53d1\u660e\u663e\u3002"),(0,t.yg)("p",null,"\u4f5c\u4e3a\u7528\u4e8e\u5927\u89c4\u6a21\u6570\u636e\u5904\u7406\u7684\u5217\u5f0f\u5185\u5b58\u683c\u5f0f\uff0cApache Arrow \u63d0\u4f9b\u4e86\u9ad8\u6548\u7684\u6570\u636e\u7ed3\u6784\u3001\u5141\u8bb8\u4e0d\u540c\u7cfb\u7edf\u95f4\u66f4\u5feb\u5171\u4eab\u6570\u636e\u3002\u5982\u679c\u6e90\u6570\u636e\u5e93\u548c\u76ee\u6807\u5ba2\u6237\u7aef\u90fd\u652f\u6301 Apache Arrow \u4f5c\u4e3a\u5217\u5f0f\u5185\u5b58\u683c\u5f0f\uff0c\u4f7f\u7528 Arrow Flight SQL \u534f\u8bae\u4f20\u8f93\u5c06\u65e0\u9700\u5e8f\u5217\u5316\u548c\u53cd\u5e8f\u5217\u5316\u6570\u636e\uff0c\u6d88\u9664\u6570\u636e\u4f20\u8f93\u4e2d\u7684\u5f00\u9500\u3002\u540c\u65f6 Arrow Flight \u8fd8\u53ef\u4ee5\u5229\u7528\u591a\u8282\u70b9\u548c\u591a\u6838\u67b6\u6784\uff0c\u901a\u8fc7\u5b8c\u5168\u5e76\u884c\u5316\u4f18\u5316\u541e\u5410\u80fd\u529b\u3002"),(0,t.yg)("p",null,(0,t.yg)("img",{alt:"\u9ad8\u901f\u6570\u636e\u8bfb\u53d6\uff0c\u6570\u636e\u4f20\u8f93\u6548\u7387\u63d0\u5347 100 \u500d",src:n(453108).A,width:"1280",height:"436"})),(0,t.yg)("p",null,"\u5728\u8fc7\u53bb\u5982\u679c\u9700\u8981\u91c7\u53d6 Python \u8bfb\u53d6 Apache Doris \u4e2d\u7684\u6570\u636e\uff0c\u9700\u8981\u5c06 Apache Doris \u4e2d\u5217\u5b58\u7684 Block \u5e8f\u5217\u5316\u4e3a MySQL \u534f\u8bae\u7684\u884c\u5b58 Bytes\uff0c\u7136\u540e\u5728 Python \u5ba2\u6237\u7aef\u518d\u53cd\u5e8f\u5217\u5316\u5230 Pandas \u4e2d\uff0c\u4f20\u8f93\u8fc7\u7a0b\u5e26\u6765\u7684\u6027\u80fd\u635f\u8017\u975e\u5e38\u5927\u3002"),(0,t.yg)("p",null,"\u5728 Apache Doris 2.1 \u7248\u672c\u4e2d\uff0c\u6211\u4eec\u63d0\u4f9b\u4e86\u57fa\u4e8e Arrow Flight \u7684 HTTP Data API \u9ad8\u541e\u5410\u6570\u636e\u8bfb\u5199\u63a5\u53e3\u3002\u76f8\u6bd4\u4e8e\u8fc7\u53bb\u7684 MySQL \u534f\u8bae\uff0c\u4f7f\u7528 Arrow Flight SQL \u540e\uff0c\u6211\u4eec\u5728 Apache Doris \u4e2d\u5148\u5c06\u5217\u5b58\u7684 Block \u8f6c\u4e3a\u540c\u6837\u5217\u5b58\u7684 Arrow RecordBatch\uff0c\u8fd9\u4e00\u6b65\u8f6c\u6362\u6548\u7387\u975e\u5e38\u9ad8\u3001\u4e14\u4f20\u8f93\u8fc7\u7a0b\u4e2d\u65e0\u9700\u518d\u6b21\u5e8f\u5217\u5316\u548c\u53cd\u5e8f\u5217\u5316\uff0c\u800c\u540e\u5728 Python \u5ba2\u6237\u7aef\u518d\u5c06 Arrow RecordBatch \u8f6c\u5230\u540c\u6837\u5217\u5b58\u7684 Pandas DataFrame \u4e2d\uff0c\u8fd9\u4e00\u6b65\u8f6c\u6362\u540c\u6837\u975e\u5e38\u5feb\u3002\u901a\u8fc7 Arrow Flight \u63d0\u4f9b\u7684 Python \u5ba2\u6237\u7aef Pandas/Numpy \u7b49\u6570\u636e\u79d1\u5b66\u5de5\u5177\uff0c\u53ef\u4ee5\u5feb\u901f\u4ece Apache Doris \u4e2d\u8bfb\u53d6\u6570\u636e\u5e76\u5728\u672c\u5730\u8fdb\u884c\u5206\u6790\u3002"),(0,t.yg)("p",null,"\u57fa\u4e8e\u6b64\uff0cApache Doris \u53ef\u4ee5\u4e0e\u6574\u4e2a AI \u548c\u6570\u636e\u79d1\u5b66\u751f\u6001\u8fdb\u884c\u826f\u597d\u7684\u6574\u5408\uff0c\u8fd9\u4e5f\u662f\u672a\u6765\u7684\u91cd\u8981\u53d1\u5c55\u65b9\u5411\u3002"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-C++"},'conn = flight_sql.connect(uri="grpc://{FE_HOST}:{fe.conf:arrow_flight_sql_port}", db_kwargs={\n            adbc_driver_manager.DatabaseOptions.USERNAME.value: "user",\n            adbc_driver_manager.DatabaseOptions.PASSWORD.value: "pass",\n        })\ncursor = conn.cursor()\ncursor.execute("select * from arrow_flight_sql_test order by k0;")\nprint(cursor.fetchallarrow().to_pandas())\n')),(0,t.yg)("p",null,"\u9488\u5bf9\u5e38\u89c1\u7684\u6570\u636e\u7c7b\u578b\uff0c\u6211\u4eec\u901a\u8fc7\u4e0d\u540c\u7684 MySQL \u5ba2\u6237\u7aef\u8fdb\u884c\u4e86\u5bf9\u6bd4\u6d4b\u8bd5\uff0c\u57fa\u4e8e Arrow Flight SQL \u6570\u636e\u4f20\u8f93\u6027\u80fd\u76f8\u8f83\u4e8e MySQL \u534f\u8bae\u63d0\u5347\u4e86\u8fd1\u767e\u500d\u3002"),(0,t.yg)("p",null,(0,t.yg)("img",{alt:"Arrow Flight SQL",src:n(638167).A,width:"1280",height:"502"})),(0,t.yg)("admonition",{type:"note"},(0,t.yg)("p",{parentName:"admonition"},"\u6f14\u793a Demo\uff1a",(0,t.yg)("a",{parentName:"p",href:"https://www.bilibili.com/video/BV1mj421Z7b7/?spm_id_from=333.999.0.0"},"https://www.bilibili.com/video/BV1mj421Z7b7/?spm_id_from=333.999.0.0"))),(0,t.yg)("h3",{id:"\u5176\u4ed6"},"\u5176\u4ed6"),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"Paimon Catalog\uff1aPaimon \u7248\u672c\u5347\u7ea7\u81f3 0.6.0\uff0c\u4f18\u5316\u4e86 Read Optimized \u8868\u7684\u8bfb\u53d6\uff0c\u5728 Paimon \u6570\u636e\u5145\u5206\u5408\u5e76\u7684\u573a\u666f\u4e0b\uff0c\u53ef\u4ee5\u6709 10 \u500d\u7684\u6027\u80fd\u63d0\u5347\uff1b")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"Iceberg Catalog\uff1aIceberg \u7248\u672c\u5347\u7ea7\u81f3 1.4.3\uff0c\u540c\u65f6\u89e3\u51b3\u4e86 AWS S3 \u8ba4\u8bc1\u7684\u82e5\u5e72\u517c\u5bb9\u6027\u95ee\u9898\uff1b")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"Hudi Catalog\uff1aHudi \u7248\u672c\u5347\u7ea7\u81f3 0.14.1\uff0c\u540c\u65f6\u89e3\u51b3\u4e86 Hudi Flink Catalog \u7684\u82e5\u5e72\u517c\u5bb9\u6027\u95ee\u9898\u3002"))),(0,t.yg)("h2",{id:"\u591a\u8868\u7269\u5316\u89c6\u56fe"},"\u591a\u8868\u7269\u5316\u89c6\u56fe"),(0,t.yg)("p",null,"\u4f5c\u4e3a\u4e00\u79cd\u5178\u578b\u7684\u201c\u7a7a\u95f4\u6362\u65f6\u95f4\u201d\u7b56\u7565\uff0c\u7269\u5316\u89c6\u56fe\u901a\u8fc7\u9884\u5148\u8ba1\u7b97\u548c\u5b58\u50a8 SQL \u67e5\u8be2\u7ed3\u679c\uff0c\u5f53\u6267\u884c\u76f8\u540c\u67e5\u8be2\u65f6\u53ef\u4ee5\u76f4\u63a5\u4ece\u7269\u5316\u89c6\u56fe\u8868\u4e2d\u83b7\u53d6\u7ed3\u679c\uff0c\u5728\u5927\u5e45\u63d0\u5347\u67e5\u8be2\u6027\u80fd\u7684\u540c\u65f6\u3001\u66f4\u662f\u51cf\u5c11\u91cd\u590d\u8ba1\u7b97\u5e26\u6765\u7684\u7cfb\u7edf\u8d44\u6e90\u6d88\u8017\u3002"),(0,t.yg)("p",null,"\u5728\u8fc7\u53bb\u7248\u672c\u4e2d Apache Doris \u63d0\u4f9b\u4e86\u5f3a\u4e00\u81f4\u7684\u5355\u8868\u7269\u5316\u89c6\u56fe\u3001\u4fdd\u8bc1\u57fa\u8868\u548c\u7269\u5316\u89c6\u56fe\u8868\u7684\u539f\u5b50\u6027\uff0c\u5e76\u652f\u6301\u4e86\u67e5\u8be2\u8bed\u53e5\u5728\u7269\u5316\u89c6\u56fe\u4e0a\u7684\u667a\u80fd\u8def\u7531\u3002"),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"\u5728 Apache Doris 2.1 \u7248\u672c\u4e2d\uff0c\u6211\u4eec\u5f15\u5165\u4e86\u5168\u65b0\u7684\u5f02\u6b65\u7269\u5316\u89c6\u56fe\uff0c\u53ef\u4ee5\u57fa\u4e8e\u591a\u8868\u6765\u6784\u5efa\u3002")," \u5f02\u6b65\u7269\u5316\u89c6\u56fe\u53ef\u4ee5\u5168\u91cf\u6216\u8005\u5206\u533a\u589e\u91cf\u6784\u5efa\uff0c\u4e5f\u53ef\u4ee5\u624b\u52a8\u6216\u8005\u5468\u671f\u6027\u5730\u6784\u5efa\u5237\u65b0\u6570\u636e\u3002\u5728\u591a\u8868\u5173\u8054\u67e5\u8be2\u4e14\u8868\u6570\u636e\u91cf\u8f83\u5927\u7684\u573a\u666f\u4e0b\uff0c\u4f18\u5316\u5668\u4f1a\u6839\u636e\u4ee3\u4ef7\u6a21\u578b\u8fdb\u884c\u900f\u660e\u6539\u5199\u3001\u5e76\u81ea\u52a8\u5bfb\u627e\u6700\u4f18\u7269\u5316\u89c6\u56fe\u6765\u54cd\u5e94\u67e5\u8be2\uff0c",(0,t.yg)("strong",{parentName:"p"},"\u4ee5\u5927\u5e45\u63d0\u5347\u67e5\u8be2\u6027\u80fd"),"\u3002\u4e0e\u6b64\u540c\u65f6\uff0c\u4e5f\u63d0\u4f9b\u4e86\u4ece\u5916\u8868\u5230\u5185\u8868\u7684\u7269\u5316\u89c6\u56fe\u4ee5\u53ca\u76f4\u67e5\u7269\u5316\u89c6\u56fe\u7684\u80fd\u529b\uff0c\u57fa\u4e8e\u6b64\u7279\u6027\uff0c",(0,t.yg)("strong",{parentName:"p"},"\u5f02\u6b65\u7269\u5316\u89c6\u56fe\u4e5f\u53ef\u7528\u4e8e\u6570\u636e\u4ed3\u5e93\u5206\u5c42\u5efa\u6a21\u3001\u4f5c\u4e1a\u8c03\u5ea6\u548c\u6570\u636e\u52a0\u5de5"),"\u3002\u5f02\u6b65\u7269\u5316\u89c6\u56fe\u4f7f\u7528\u65b9\u5f0f\u5982\u4e0b\uff1a"),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"\u8868\u5b9a\u4e49\uff1a")),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-SQL"},"use tpch;\n\nCREATE TABLE IF NOT EXISTS orders  (\n    o_orderkey       integer not null,\n    o_custkey        integer not null,\n    o_orderstatus    char(1) not null,\n    o_totalprice     decimalv3(15,2) not null,\n    o_orderdate      date not null,\n    o_orderpriority  char(15) not null,\n    o_clerk          char(15) not null,\n    o_shippriority   integer not null,\n    o_comment        varchar(79) not null\n    )\n    DUPLICATE KEY(o_orderkey, o_custkey)\n    PARTITION BY RANGE(o_orderdate)(\n    FROM ('2023-10-17') TO ('2023-10-20') INTERVAL 1 DAY)\n    DISTRIBUTED BY HASH(o_orderkey) BUCKETS 3\n    PROPERTIES (\"replication_num\" = \"1\");\n\ninsert into orders values\n   (1, 1, 'ok', 99.5, '2023-10-17', 'a', 'b', 1, 'yy'),\n   (2, 2, 'ok', 109.2, '2023-10-18', 'c','d',2, 'mm'),\n   (3, 3, 'ok', 99.5, '2023-10-19', 'a', 'b', 1, 'yy');\n\nCREATE TABLE IF NOT EXISTS lineitem (\n    l_orderkey    integer not null,\n    l_partkey     integer not null,\n    l_suppkey     integer not null,\n    l_linenumber  integer not null,\n    l_quantity    decimalv3(15,2) not null,\n    l_extendedprice  decimalv3(15,2) not null,\n    l_discount    decimalv3(15,2) not null,\n    l_tax         decimalv3(15,2) not null,\n    l_returnflag  char(1) not null,\n    l_linestatus  char(1) not null,\n    l_shipdate    date not null,\n    l_commitdate  date not null,\n    l_receiptdate date not null,\n    l_shipinstruct char(25) not null,\n    l_shipmode     char(10) not null,\n    l_comment      varchar(44) not null\n    )\n    DUPLICATE KEY(l_orderkey, l_partkey, l_suppkey, l_linenumber)\n    PARTITION BY RANGE(l_shipdate)\n    (FROM ('2023-10-17') TO ('2023-10-20') INTERVAL 1 DAY)\n    DISTRIBUTED BY HASH(l_orderkey) BUCKETS 3\n    PROPERTIES (\"replication_num\" = \"1\");\n\ninsert into lineitem values\n (1, 2, 3, 4, 5.5, 6.5, 7.5, 8.5, 'o', 'k', '2023-10-17', '2023-10-17', '2023-10-17', 'a', 'b', 'yyyyyyyyy'),\n (2, 2, 3, 4, 5.5, 6.5, 7.5, 8.5, 'o', 'k', '2023-10-18', '2023-10-18', '2023-10-18', 'a', 'b', 'yyyyyyyyy'),\n (3, 2, 3, 6, 7.5, 8.5, 9.5, 10.5, 'k', 'o', '2023-10-19', '2023-10-19', '2023-10-19', 'c', 'd', 'xxxxxxxxx');\n \n \n CREATE TABLE IF NOT EXISTS partsupp (\n  ps_partkey     INTEGER NOT NULL,\n  ps_suppkey     INTEGER NOT NULL,\n  ps_availqty    INTEGER NOT NULL,\n  ps_supplycost  DECIMALV3(15,2)  NOT NULL,\n  ps_comment     VARCHAR(199) NOT NULL \n)\nDUPLICATE KEY(ps_partkey, ps_suppkey)\nDISTRIBUTED BY HASH(ps_partkey) BUCKETS 3\nPROPERTIES (\n  \"replication_num\" = \"1\"\n)\n")),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"\u521b\u5efa\u7269\u5316\u89c6\u56fe\uff1a")),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-SQL"},"CREATE MATERIALIZED VIEW mv1 \n        BUILD DEFERRED REFRESH AUTO ON MANUAL\n        partition by(l_shipdate)\n        DISTRIBUTED BY RANDOM BUCKETS 2\n        PROPERTIES ('replication_num' = '1') \n        AS \n        select l_shipdate, o_orderdate, l_partkey, \n            l_suppkey, sum(o_totalprice) as sum_total\n            from lineitem\n            left join orders on lineitem.l_orderkey = orders.o_orderkey \n                             and l_shipdate = o_orderdate\n            group by\n            l_shipdate,\n            o_orderdate,\n            l_partkey,\n            l_suppkey;\n")),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"\u76ee\u524d\u5f02\u6b65\u7269\u5316\u89c6\u56fe\u5df2\u7ecf\u5177\u5907\u4ee5\u4e0b\u529f\u80fd\uff1a")),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},(0,t.yg)("strong",{parentName:"p"},"\u900f\u660e\u6539\u5199\u52a0\u901f\uff1a"),"\u652f\u6301\u5e38\u89c1\u7b97\u5b50\u7684\u900f\u660e\u6539\u5199\uff0c\u5982 Select\u3001Where\u3001Join\u3001Group by\u3001Aggregation \u7b49\uff0c\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7\u5efa\u7acb\u7269\u5316\u89c6\u56fe\uff0c\u5bf9\u73b0\u6709\u7684\u67e5\u8be2\u8fdb\u884c\u52a0\u901f\u3002\u4f8b\u5982\u5728 BI \u62a5\u8868\u573a\u666f\uff0c\u67d0\u4e9b\u62a5\u8868\u67e5\u8be2\u5ef6\u65f6\u6bd4\u8f83\u9ad8\uff0c\u5c31\u53ef\u4ee5\u901a\u8fc7\u5efa\u7acb\u5408\u9002\u7684\u7269\u5316\u89c6\u56fe\u8fdb\u884c\u52a0\u901f\u3002")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},(0,t.yg)("strong",{parentName:"p"},"\u81ea\u52a8\u5237\u65b0\uff1a"),"\u7269\u5316\u89c6\u56fe\u652f\u6301\u4e0d\u540c\u5237\u65b0\u7b56\u7565\uff0c\u5982\u5b9a\u65f6\u5237\u65b0\u548c\u624b\u52a8\u5237\u65b0\uff0c\u4e5f\u652f\u6301\u4e0d\u540c\u7684\u5237\u65b0\u7c92\u5ea6\uff0c\u5982\u5168\u91cf\u5237\u65b0\u3001\u5206\u533a\u7c92\u5ea6\u7684\u589e\u91cf\u5237\u65b0\u7b49\u3002")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},(0,t.yg)("strong",{parentName:"p"},"\u5916\u8868\u5230\u5185\u8868\u7684\u7269\u5316\u89c6\u56fe\uff1a"),"\u53ef\u4ee5\u5bf9\u5b58\u653e\u5728 Hive\u3001Hudi\u3001Iceberg \u7b49\u6570\u636e\u6e56\u7cfb\u7edf\u4e0a\u7684\u6570\u636e\u5efa\u7acb\u7269\u5316\u89c6\u56fe\uff0c\u52a0\u901f\u5bf9\u6570\u636e\u6e56\u7684\u8bbf\u95ee\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u7269\u5316\u89c6\u56fe\u7684\u65b9\u5f0f\u5c06\u6570\u636e\u6e56\u4e2d\u7684\u6570\u636e\u540c\u6b65\u5230 Apache Doris \u5185\u8868\u4e2d\u3002")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},(0,t.yg)("strong",{parentName:"p"},"\u7269\u5316\u89c6\u56fe\u76f4\u67e5\uff1a"),"\u7528\u6237\u4e5f\u53ef\u4ee5\u5c06\u7269\u5316\u89c6\u56fe\u7684\u6784\u5efa\u770b\u505a ETL \u7684\u8fc7\u7a0b\uff0c\u628a\u7269\u5316\u89c6\u56fe\u770b\u505a\u662f ETL \u52a0\u5de5\u540e\u7684\u7ed3\u679c\u6570\u636e\uff0c\u7531\u4e8e\u7269\u5316\u89c6\u56fe\u672c\u8eab\u4e5f\u662f\u4e00\u4e2a\u8868\uff0c\u6240\u4ee5\u7528\u6237\u53ef\u4ee5\u76f4\u63a5\u67e5\u8be2\u7269\u5316\u89c6\u56fe\u3002"))),(0,t.yg)("admonition",{type:"note"},(0,t.yg)("ul",{parentName:"admonition"},(0,t.yg)("li",{parentName:"ul"},"\u6f14\u793a Demo: ",(0,t.yg)("a",{parentName:"li",href:"https://www.bilibili.com/video/BV1s2421T71z/?spm_id_from=333.999.0.0"},"https://www.bilibili.com/video/BV1s2421T71z/?spm_id_from=333.999.0.0")),(0,t.yg)("li",{parentName:"ul"},"\u53c2\u8003\u6587\u6863\uff1a",(0,t.yg)("a",{parentName:"li",href:"https://doris.apache.org/zh-CN/docs/query-acceleration/materialized-view/async-materialized-view/overview"},"\u5f02\u6b65\u7269\u5316\u89c6\u56fe")))),(0,t.yg)("h2",{id:"\u5b58\u50a8\u80fd\u529b\u589e\u5f3a"},"\u5b58\u50a8\u80fd\u529b\u589e\u5f3a"),(0,t.yg)("h3",{id:"\u81ea\u589e\u5217-auto_increment"},"\u81ea\u589e\u5217 AUTO_INCREMENT"),(0,t.yg)("p",null,"\u81ea\u589e\u5217 AUTO_INCREMENT \u662f OLTP \u6570\u636e\u5e93\u4e2d\u5e38\u89c1\u7684\u4e00\u9879\u529f\u80fd\uff0c\u63d0\u4f9b\u4e86\u4e00\u79cd\u65b9\u4fbf\u9ad8\u6548\u7684\u65b9\u5f0f\u6765\u4e3a\u65b0\u63d2\u5165\u7684\u6570\u636e\u884c\u81ea\u52a8\u5206\u914d\u552f\u4e00\u6807\u8bc6\u7b26\u3002\u7531\u4e8e\u81ea\u589e\u5217\u7684\u53ef\u7528\u503c\u5206\u914d\u6d89\u53ca\u5230\u5168\u5c40\u4e8b\u52a1\uff0c\u56e0\u6b64\u5728\u5206\u5e03\u5f0f OLAP \u6570\u636e\u5e93\u4e2d\u5e76\u4e0d\u5e38\u89c1\u3002\u5728 Apache Doris 2.1 \u7248\u672c\u4e2d\uff0c\u6211\u4eec\u901a\u8fc7\u521b\u65b0\u6027\u7684\u81ea\u589e\u5e8f\u5217\u9884\u5206\u914d\u7b56\u7565\uff0c\u63d0\u4f9b\u4e86\u9ad8\u6548\u7684\u81ea\u589e\u5217\u5b9e\u73b0\u3002\u57fa\u4e8e\u81ea\u589e\u5217\u7684\u552f\u4e00\u6027\u4fdd\u8bc1\uff0c\u7528\u6237\u53ef\u4ee5\u5229\u7528\u81ea\u589e\u5217\u5b9e\u73b0\u9ad8\u6548\u7684\u5b57\u5178\u7f16\u7801\u548c\u67e5\u8be2\u5206\u9875\u3002"),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"\u5b57\u5178\u7f16\u7801\uff1a")," \u5728\u8fdb\u884c PV/UV \u7edf\u8ba1\u6216\u4eba\u7fa4\u5708\u9009\u7b49\u9700\u8981\u7cbe\u786e\u53bb\u91cd\u7684\u67e5\u8be2\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528\u81ea\u589e\u5217\u5bf9 UserID \u6216\u8ba2\u5355 ID \u7b49\u5b57\u7b26\u4e32\u503c\u521b\u5efa\u5b57\u5178\u8868\uff0c\u5c06\u7528\u6237\u6570\u636e\u6279\u91cf\u6216\u8005\u5b9e\u65f6\u5199\u5165\u5b57\u5178\u8868\u5373\u53ef\u751f\u6210\u5b57\u5178\uff0c\u6839\u636e\u5404\u79cd\u7ef4\u5ea6\u7684\u6761\u4ef6\u5bf9\u5bf9\u5e94\u7684 Bitmap \u8fdb\u884c\u805a\u5408\u8fd0\u7b97\uff1b"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-SQL"},'CREATE TABLE `demo`.`dictionary_tbl` (\n    `user_id` varchar(50) NOT NULL,\n    `aid` BIGINT NOT NULL AUTO_INCREMENT\n) ENGINE=OLAP\nUNIQUE KEY(`user_id`)\nDISTRIBUTED BY HASH(`user_id`) BUCKETS 32\nPROPERTIES (\n"replication_allocation" = "tag.location.default: 3",\n"enable_unique_key_merge_on_write" = "true"\n);\n')),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"\u67e5\u8be2\u5206\u9875"),"\uff1a\u5728\u9875\u9762\u5c55\u793a\u6570\u636e\u65f6\uff0c\u5f80\u5f80\u9700\u8981\u505a\u5206\u9875\u5c55\u793a\u3002\u4f20\u7edf\u7684\u5206\u9875\u901a\u5e38\u4f7f\u7528 SQL \u4e2d\u7684 ",(0,t.yg)("inlineCode",{parentName:"p"},"limit"),", ",(0,t.yg)("inlineCode",{parentName:"p"},"offset")," + ",(0,t.yg)("inlineCode",{parentName:"p"},"order by")," \u8fdb\u884c\u67e5\u8be2\u3002\u5728\u8fdb\u884c\u6df1\u5206\u9875\u67e5\u8be2\u65f6\uff0c\u5373\u4f7f\u67e5\u8be2\u6570\u636e\u91cf\u8f83\u5c11\u3001\u6570\u636e\u5e93\u4ecd\u9700\u5c06\u5168\u90e8\u6570\u636e\u8bfb\u53d6\u81f3\u5185\u5b58\u8fdb\u884c\u5168\u91cf\u6392\u5e8f\uff0c\u67e5\u8be2\u6548\u7387\u6bd4\u8f83\u4f4e\u4e0b\u3002\u91c7\u53d6\u81ea\u589e\u5217\u53ef\u4ee5\u4e3a\u6bcf\u4e00\u884c\u751f\u6210\u552f\u4e00\u6807\u8bc6\u3001\u67e5\u8be2\u65f6\u8bb0\u4f4f\u4e0a\u4e00\u9875\u6700\u5927\u552f\u4e00\u6807\u8bc6\u5e76\u7528\u4e8e\u4e0b\u4e00\u9875\u7684\u67e5\u8be2\u6761\u4ef6\uff0c\u5b9e\u73b0\u66f4\u9ad8\u6548\u7684\u5206\u9875\u67e5\u8be2\u3002"),(0,t.yg)("p",null,"\u4ee5\u4e0b\u8868\u4e3a\u4f8b\uff0cunique_value \u662f\u4e00\u4e2a\u552f\u4e00\u503c\uff1a"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-SQL"},'CREATE TABLE `demo`.`records_tbl2` (\n    `key` int(11) NOT NULL COMMENT "",\n    `name` varchar(26) NOT NULL COMMENT "",\n    `address` varchar(41) NOT NULL COMMENT "",\n    `city` varchar(11) NOT NULL COMMENT "",\n    `nation` varchar(16) NOT NULL COMMENT "",\n    `region` varchar(13) NOT NULL COMMENT "",\n    `phone` varchar(16) NOT NULL COMMENT "",\n    `mktsegment` varchar(11) NOT NULL COMMENT "",\n    `unique_value` BIGINT NOT NULL AUTO_INCREMENT\n) DUPLICATE KEY (`key`, `name`)\nDISTRIBUTED BY HASH(`key`) BUCKETS 10\nPROPERTIES (\n    "replication_num" = "3"\n);\n')),(0,t.yg)("p",null,"\u5728\u5206\u9875\u5c55\u793a\u4e2d\uff0c\u6bcf\u9875\u5c55\u793a 100 \u6761\u6570\u636e\uff0c\u4f7f\u7528\u5982\u4e0b\u65b9\u5f0f\u83b7\u53d6\u7b2c\u4e00\u9875\u7684\u6570\u636e\uff1a"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-SQL"},"select * from records_tbl2 order by unique_value limit 100;\n")),(0,t.yg)("p",null,"\u901a\u8fc7\u7a0b\u5e8f\u8bb0\u5f55\u4e0b\u8fd4\u56de\u7ed3\u679c\u4e2d",(0,t.yg)("inlineCode",{parentName:"p"},"unique_value"),"\u4e2d\u7684\u6700\u5927\u503c\uff0c\u5047\u8bbe\u4e3a 99\uff0c\u5219\u53ef\u7528\u5982\u4e0b\u65b9\u5f0f\u67e5\u8be2\u7b2c\u4e8c\u9875\u7684\u6570\u636e\uff1a"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-SQL"},"select * from records_tbl2 where unique_value > 99 order by unique_value limit 100;\n")),(0,t.yg)("p",null,"\u5982\u679c\u8981\u76f4\u63a5\u67e5\u8be2\u4e00\u4e2a\u9760\u540e\u9875\u9762\u7684\u5185\u5bb9\uff0c\u6b64\u65f6\u4e0d\u65b9\u4fbf\u76f4\u63a5\u83b7\u53d6\u4e4b\u524d\u9875\u9762\u6570\u636e\u4e2d",(0,t.yg)("inlineCode",{parentName:"p"},"unique_value"),"\u7684\u6700\u5927\u503c\u65f6\uff0c\u4f8b\u5982\u8981\u76f4\u63a5\u83b7\u53d6\u7b2c 101 \u9875\u7684\u5185\u5bb9\uff0c\u5219\u53ef\u4ee5\u4f7f\u7528\u5982\u4e0b\u65b9\u5f0f\u8fdb\u884c\u67e5\u8be2"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-SQL"},"select key, name, address, city, nation, region, phone, mktsegment\nfrom records_tbl2, (select unique_value as max_value from records_tbl2 order by uniuqe_value limit 1 offset 9999) as previous_data\nwhere records_tbl2.uniuqe_value > previous_data.max_value\norder by unique_value limit 100;\n")),(0,t.yg)("admonition",{type:"note"},(0,t.yg)("p",{parentName:"admonition"},"\u6f14\u793a Demo\uff1a",(0,t.yg)("a",{parentName:"p",href:"https://www.bilibili.com/video/BV1VC411h7Gr/?spm_id_from=333.999.0.0"},"https://www.bilibili.com/video/BV1VC411h7Gr/?spm_id_from=333.999.0.0"))),(0,t.yg)("h3",{id:"\u81ea\u52a8\u5206\u533a-auto-partition"},"\u81ea\u52a8\u5206\u533a Auto Partition"),(0,t.yg)("p",null,"\u5728 Apache Doris 2.1 \u7248\u672c\u4e4b\u524d\u4e00\u76f4\u91c7\u53d6\u624b\u52a8\u5206\u533a\u7684\u5f62\u5f0f\uff0c\u7528\u6237\u9700\u8981\u63d0\u524d\u628a\u5206\u533a\u5efa\u7acb\u597d\uff0c\u5426\u5219\u5728\u5bfc\u5165\u6570\u636e\u8fc7\u7a0b\u4e2d\u4f1a\u56e0\u4e3a\u627e\u4e0d\u5230\u5bf9\u5e94\u5206\u533a\u800c\u51fa\u9519\u3002\u800c\u81ea\u52a8\u5206\u533a\u529f\u80fd\u652f\u6301\u4e86\u5728\u5bfc\u5165\u6570\u636e\u8fc7\u7a0b\u4e2d\u81ea\u52a8\u68c0\u6d4b\u5206\u533a\u5217\u7684\u6570\u636e\u5bf9\u5e94\u7684\u5206\u533a\u662f\u5426\u5b58\u5728\u3002\u5982\u679c\u4e0d\u5b58\u5728\uff0c\u5219\u4f1a\u81ea\u52a8\u521b\u5efa\u5206\u533a\u5e76\u6b63\u5e38\u8fdb\u884c\u5bfc\u5165\u3002"),(0,t.yg)("p",null,"\u81ea\u52a8\u5206\u533a\u529f\u80fd\u4f7f\u7528\u65b9\u5f0f\u5982\u4e0b\uff1a"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-SQL"},"CREATE TABLE `DAILY_TRADE_VALUE`\n(\n    `TRADE_DATE`              datev2 NULL COMMENT '\u4ea4\u6613\u65e5\u671f',\n    `TRADE_ID`                varchar(40) NULL COMMENT '\u4ea4\u6613\u7f16\u53f7',\n    ......\n)\nUNIQUE KEY(`TRADE_DATE`, `TRADE_ID`)\nAUTO PARTITION BY RANGE date_trunc(`TRADE_DATE`, 'year')\n(\n)\nDISTRIBUTED BY HASH(`TRADE_DATE`) BUCKETS 10\nPROPERTIES (\n  \"replication_num\" = \"1\"\n);\n")),(0,t.yg)("admonition",{type:"caution"},(0,t.yg)("p",{parentName:"admonition"},"\u6ce8\u610f\u4e8b\u9879"),(0,t.yg)("ol",{parentName:"admonition"},(0,t.yg)("li",{parentName:"ol"},(0,t.yg)("p",{parentName:"li"},"\u5f53\u524d\u81ea\u52a8\u5206\u533a\u529f\u80fd\u4ec5\u652f\u6301\u4e00\u4e2a\u5206\u533a\u5217\uff0c\u5e76\u4e14\u5206\u533a\u5217\u5fc5\u987b\u4e3a NOT NULL \u5217\uff1b")),(0,t.yg)("li",{parentName:"ol"},(0,t.yg)("p",{parentName:"li"},"\u81ea\u52a8\u5206\u533a\u5f53\u524d\u5df2\u652f\u6301 Range \u5206\u533a\u548c List \u5206\u533a\uff0c\u5176\u4e2d Range \u5206\u533a\u51fd\u6570\u4ec5\u652f\u6301 ",(0,t.yg)("inlineCode",{parentName:"p"},"date_trunc"),"\u3001\u5206\u533a\u5217\u4ec5\u652f\u6301 ",(0,t.yg)("inlineCode",{parentName:"p"},"DATE")," \u6216\u8005 ",(0,t.yg)("inlineCode",{parentName:"p"},"DATETIME")," \u683c\u5f0f\uff1bList \u5206\u533a\u4e0d\u652f\u6301\u51fd\u6570\u8c03\u7528\uff0c\u5206\u533a\u5217\u652f\u6301 ",(0,t.yg)("inlineCode",{parentName:"p"},"BOOLEAN\u3001TINYINT\u3001SMALLINT\u3001INT\u3001BIGINT\u3001LARGEINT\u3001DATE\u3001DATETIME\u3001CHAR\u3001VARCHAR")," \u6570\u636e\u7c7b\u578b\uff0c\u5206\u533a\u503c\u4e3a\u679a\u4e3e\u503c\uff1b")),(0,t.yg)("li",{parentName:"ol"},(0,t.yg)("p",{parentName:"li"},"\u4f7f\u7528 List \u5206\u533a\u65f6\uff0c\u4e00\u65e6\u5206\u533a\u5217\u7684\u503c\u5f53\u524d\u4e0d\u5b58\u5728\uff0c\u81ea\u52a8\u5206\u533a\u529f\u80fd\u90fd\u4f1a\u4e3a\u5176\u521b\u5efa\u4e00\u4e2a\u72ec\u7acb\u7684\u65b0\u5206\u533a\u3002")))),(0,t.yg)("admonition",{type:"note"},(0,t.yg)("p",{parentName:"admonition"},"\u53c2\u8003\u6587\u6863\uff1a",(0,t.yg)("a",{parentName:"p",href:"https://doris.apache.org/zh-CN/docs/table-design/data-partitioning/basic-concepts"},"\u6570\u636e\u5212\u5206"))),(0,t.yg)("h3",{id:"insert-into-select-\u5bfc\u5165\u6027\u80fd\u63d0\u5347-100"},"INSERT INTO SELECT \u5bfc\u5165\u6027\u80fd\u63d0\u5347 100%"),(0,t.yg)("p",null,(0,t.yg)("inlineCode",{parentName:"p"},"INSERT INTO\u2026SELECT")," \u8bed\u53e5\u662f ETL \u4e2d\u6700\u9ad8\u9891\u4f7f\u7528\u7684\u64cd\u4f5c\u4e4b\u4e00\uff0c\u53ef\u4ee5\u5feb\u901f\u5b8c\u6210\u6570\u636e\u5728\u5e93\u8868\u4e4b\u95f4\u7684\u8fc1\u79fb\u3001\u8f6c\u6362\u4ee5\u53ca\u6e05\u6d17\u5408\u5e76\uff0c\u63d0\u5347 ",(0,t.yg)("inlineCode",{parentName:"p"},"INSERT INTO\u2026SELECT")," \u6027\u80fd\u53ef\u4ee5\u66f4\u597d\u6ee1\u8db3\u7528\u6237\u5bf9\u6570\u636e\u5feb\u901f\u63d0\u53d6\u548c\u5206\u6790\u7684\u9700\u6c42\u3002\u5728 Apache Doris 2.0 \u7248\u672c\u4e2d\uff0c\u6211\u4eec\u5f15\u5165\u4e86\u5355\u526f\u672c\u5bfc\u5165\u529f\u80fd\uff08Single Replica Load\uff09\u6765\u51cf\u5c11\u591a\u526f\u672c\u7684\u91cd\u590d\u5199\u5165\u548c Compaction \u5de5\u4f5c\uff0c\u4f46\u662f\u5bfc\u5165\u6027\u80fd\u8fd8\u5b58\u5728\u4f18\u5316\u7684\u7a7a\u95f4\u3002"),(0,t.yg)("p",null,"\u5728 Apache Doris 2.1 \u7248\u672c\u4e2d\uff0c\u4e3a\u4e86\u8fdb\u4e00\u6b65\u63d0\u5347",(0,t.yg)("inlineCode",{parentName:"p"},"INSERT INTO\u2026SELECT")," \u6027\u80fd\uff0c\u6211\u4eec\u5b9e\u73b0\u4e86 MemTable \u524d\u79fb\u4ee5\u8fdb\u4e00\u6b65\u51cf\u5c11\u5bfc\u5165\u8fc7\u7a0b\u4e2d\u7684\u5f00\u9500\uff0c\u80fd\u5728\u5927\u591a\u6570\u573a\u666f\u4e2d\u80fd\u5728 2.0 \u7248\u672c\u7684\u57fa\u7840\u4e0a\u53d6\u5f97 100% \u7684\u5bfc\u5165\u6027\u80fd\u63d0\u5347\u3002"),(0,t.yg)("p",null,(0,t.yg)("img",{alt:"INSERT INTO SELECT \u5bfc\u5165\u6027\u80fd\u63d0\u5347 100%",src:n(811981).A,width:"961",height:"571"})),(0,t.yg)("p",null,"MemTable \u524d\u79fb\u548c\u975e\u524d\u79fb\u7684\u6d41\u7a0b\u5bf9\u6bd4\u5982\u4e0a\u56fe\u6240\u793a\uff0cSink \u8282\u70b9\u4e0d\u518d\u53d1\u9001\u7f16\u7801\u540e\u7684 Block\uff0c\u800c\u662f\u5728\u672c\u5730\u5904\u7406\u5b8c MemTable \u5c06\u751f\u6210\u7684 Segment \u6570\u636e\u53d1\u7ed9\u4e0b\u6e38\u8282\u70b9\uff0c\u51cf\u5c11\u4e86\u6570\u636e\u591a\u6b21\u7f16\u7801\u7684\u5f00\u9500\uff0c\u540c\u65f6\u4f7f\u5185\u5b58\u53cd\u538b\u66f4\u51c6\u786e\u548c\u53ca\u65f6\u3002\u6b64\u5916\uff0c\u6211\u4eec\u4f7f\u7528\u4e86 Streaming RPC \u6765\u66ff\u4ee3\u4e86 Ping-pong RPC\uff0c\u51cf\u5c11\u4e86\u6570\u636e\u4f20\u8f93\u8fc7\u7a0b\u4e2d\u7684\u7b49\u5f85\u3002"),(0,t.yg)("p",null,"\u5728\u6b64\u6211\u4eec\u5bf9 2.1 \u7248\u672c\u5f00\u542f MemTable \u524d\u79fb\u540e\u7684\u5bfc\u5165\u6027\u80fd\u8fdb\u884c\u4e86\u6d4b\u8bd5\uff0c\u6d4b\u8bd5\u73af\u5883\u5982\u4e0b\uff1a1 FE+3 BE\u3001\u6bcf\u4e2a\u8282\u70b9 16C 64G\u30013 \u5757\u9ad8\u6027\u80fd\u4e91\u76d8\uff08\u4fdd\u8bc1\u78c1\u76d8 I/O \u4e0d\u6210\u4e3a\u74f6\u9888\uff09"),(0,t.yg)("p",null,"\u53ef\u4ee5\u770b\u5230\u5728\u5355\u526f\u672c\u573a\u666f\u4e0b\uff0c2.1 \u7248\u672c\u5f00\u542f MemTable \u524d\u79fb\u540e\u3001\u5bfc\u5165\u8017\u65f6\u964d\u4f4e\u81f3 2.0 \u7248\u672c\u7684 36%\uff0c\u4e09\u526f\u672c\u573a\u666f\u4e0b\u5bfc\u5165\u8017\u65f6\u964d\u4f4e\u81f3 2.0 \u7248\u672c\u7684 54%\uff0c\u6574\u4f53\u5bfc\u5165\u6027\u80fd\u63d0\u5347\u8d85\u8fc7 100%\u3002"),(0,t.yg)("table",null,(0,t.yg)("thead",{parentName:"table"},(0,t.yg)("tr",{parentName:"thead"},(0,t.yg)("th",{parentName:"tr",align:"left"},"INSERT INTO \u8868"),(0,t.yg)("th",{parentName:"tr",align:"left"},"Doris 2.0 \u975e\u524d\u79fb\u9ed8\u8ba4"),(0,t.yg)("th",{parentName:"tr",align:"left"},"Doris 2.1MemTable \u524d\u79fb"))),(0,t.yg)("tbody",{parentName:"table"},(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},"linitem 1 \u526f\u672c (38G)"),(0,t.yg)("td",{parentName:"tr",align:"left"},"30.2 s"),(0,t.yg)("td",{parentName:"tr",align:"left"},"11.1 s")),(0,t.yg)("tr",{parentName:"tbody"},(0,t.yg)("td",{parentName:"tr",align:"left"},"linitem 3 \u526f\u672c (38G)"),(0,t.yg)("td",{parentName:"tr",align:"left"},"47.4 s"),(0,t.yg)("td",{parentName:"tr",align:"left"},"25.4 s")))),(0,t.yg)("p",null,(0,t.yg)("img",{alt:"INSERT INTO SELECT \u5bfc\u5165\u6027\u80fd\u63d0\u5347 100%",src:n(378657).A,width:"1280",height:"375"})),(0,t.yg)("admonition",{type:"note"},(0,t.yg)("p",{parentName:"admonition"},"MemTable \u524d\u79fb\u5728 2.1 \u7248\u672c\u4e2d\u9ed8\u8ba4\u5f00\u542f\uff0c\u7528\u6237\u65e0\u9700\u4fee\u6539\u539f\u6709\u7684\u5bfc\u5165\u547d\u4ee4\u5373\u53ef\u83b7\u5f97\u5927\u5e45\u6027\u80fd\u63d0\u5347\u3002\u5982\u679c\u5728\u4f7f\u7528\u8fc7\u7a0b\u4e2d\u9047\u5230\u95ee\u9898\u3001\u5e0c\u671b\u56de\u9000\u5230\u539f\u6709\u7684\u5bfc\u5165\u65b9\u5f0f\uff0c\u53ef\u4ee5\u5728 MySQL \u8fde\u63a5\u4e2d\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf ",(0,t.yg)("inlineCode",{parentName:"p"},"enable_memtable_on_sink_node=false")," \u6765\u5173\u95ed MemTable \u524d\u79fb\u3002")),(0,t.yg)("h3",{id:"\u9ad8\u9891\u5b9e\u65f6\u5bfc\u5165\u670d\u52a1\u7aef\u6512\u6279-group-commit"},"\u9ad8\u9891\u5b9e\u65f6\u5bfc\u5165/\u670d\u52a1\u7aef\u6512\u6279 Group Commit"),(0,t.yg)("p",null,"\u5728\u6570\u636e\u5bfc\u5165\u8fc7\u7a0b\u4e2d\uff0c\u4e0d\u540c\u6279\u6b21\u5bfc\u5165\u7684\u6570\u636e\u90fd\u4f1a\u5199\u5165\u5185\u5b58\u8868\u4e2d\uff0c\u968f\u540e\u5728\u78c1\u76d8\u4e2d\u4e0a\u5f62\u6210\u4e00\u4e2a\u4e2a RowSet \u6587\u4ef6\uff0c\u6bcf\u4e2a Rowset \u6587\u4ef6\u5bf9\u5e94\u4e00\u6b21\u6570\u636e\u5bfc\u5165\u7248\u672c\u3002\u540e\u53f0 Compaction \u8fdb\u7a0b\u4f1a\u81ea\u52a8\u5bf9\u591a\u4e2a\u7248\u672c\u7684 RowSet \u6587\u4ef6\u8fdb\u884c\u5408\u5e76\uff0c\u5c06\u591a\u4e2a RowSet \u5c0f\u6587\u4ef6\u5408\u5e76\u6210 RowSet \u5927\u6587\u4ef6\u4ee5\u4f18\u5316\u67e5\u8be2\u6027\u80fd\u4ee5\u53ca\u5b58\u50a8\u7a7a\u95f4\uff0c\u800c\u6bcf\u4e00\u6b21\u7684 Compaction \u8fdb\u7a0b\u90fd\u4f1a\u4ea7\u751f\u5bf9 CPU\u3001\u5185\u5b58\u4ee5\u53ca\u78c1\u76d8 IO \u8d44\u6e90\u7684\u6d88\u8017\u3002\u5728\u5b9e\u9645\u6570\u636e\u5199\u5165\u573a\u666f\u4e2d\uff0c\u5199\u5165\u8d8a\u5b9e\u65f6\u9ad8\u9891\u3001\u751f\u6210 RowSet \u7248\u672c\u6570\u8d8a\u9ad8\u3001Compaction \u6240\u6d88\u8017\u7684\u8d44\u6e90\u5c31\u8d8a\u5927\u3002\u4e3a\u4e86\u907f\u514d\u9ad8\u9891\u5199\u5165\u5e26\u6765\u7684\u8fc7\u591a\u8d44\u6e90\u6d88\u8017\u751a\u81f3 OOM\uff0cApache Doris \u5f15\u5165\u4e86\u53cd\u538b\u673a\u5236\uff0c\u5373\u5728\u7248\u672c\u8fc7\u591a\u7684\u60c5\u51b5\u4e0b\u4f1a\u8fd4\u56de -235\uff0c\u5e76\u5bf9\u6570\u636e\u7684\u7248\u672c\u6570\u91cf\u8fdb\u884c\u63a7\u5236\u3002"),(0,t.yg)("p",null,(0,t.yg)("img",{alt:"\u9ad8\u9891\u5b9e\u65f6\u5bfc\u5165/\u670d\u52a1\u7aef\u6512\u6279 Group Commit",src:n(273463).A,width:"1280",height:"912"})),(0,t.yg)("p",null,"\u4ece Apache Doris 2.1 \u7248\u672c\u5f00\u59cb\uff0c\u6211\u4eec\u5f15\u5165\u4e86\u670d\u52a1\u7aef\u6512\u6279 Group Commit\uff0c\u5927\u5e45\u5f3a\u5316\u4e86\u9ad8\u5e76\u53d1\u3001\u9ad8\u9891\u5b9e\u65f6\u5199\u5165\u7684\u80fd\u529b\u3002"),(0,t.yg)("p",null,"\u987e\u540d\u601d\u4e49\uff0cGroup Commit \u4f1a\u628a\u7528\u6237\u4fa7\u7684\u591a\u6b21\u5199\u5165\u5728 BE \u7aef\u8fdb\u884c\u79ef\u6512\u540e\u6279\u91cf\u63d0\u4ea4\u3002\u5bf9\u4e8e\u7528\u6237\u800c\u8a00\uff0c\u65e0\u9700\u63a7\u5236\u5199\u5165\u7a0b\u5e8f\u7684\u9891\u7387\uff0cDoris \u4f1a\u81ea\u52a8\u628a\u7528\u6237\u63d0\u4ea4\u7684\u591a\u6b21\u5199\u5165\u5728\u5185\u90e8\u5408\u5e76\u4e3a\u4e00\u4e2a\u7248\u672c\uff0c\u4ece\u800c\u53ef\u4ee5\u5927\u5e45\u63d0\u5347\u7528\u6237\u4fa7\u7684\u5199\u5165\u9891\u6b21\u3002"),(0,t.yg)("p",null,(0,t.yg)("img",{alt:"\u9ad8\u9891\u5b9e\u65f6\u5bfc\u5165/\u670d\u52a1\u7aef\u6512\u6279 Group Commit",src:n(132410).A,width:"1280",height:"757"})),(0,t.yg)("p",null,"\u5f53\u524d Group Commit \u5df2\u7ecf\u652f\u6301\u540c\u6b65\u6a21\u5f0f ",(0,t.yg)("inlineCode",{parentName:"p"},"sync_mode")," \u548c\u5f02\u6b65\u6a21\u5f0f ",(0,t.yg)("inlineCode",{parentName:"p"},"async_mode"),"\u3002\u540c\u6b65\u6a21\u5f0f\u4e0b\u4f1a\u5c06\u591a\u4e2a\u5bfc\u5165\u5728\u4e00\u4e2a\u4e8b\u52a1\u63d0\u4ea4\uff0c\u4e8b\u52a1\u63d0\u4ea4\u540e\u5bfc\u5165\u8fd4\u56de\uff0c\u5728\u5bfc\u5165\u5b8c\u6210\u540e\u6570\u636e\u7acb\u5373\u53ef\u89c1\u3002\u5f02\u6b65\u6a21\u5f0f\u4e0b\u6570\u636e\u4f1a\u5148\u5199\u5165 WAL\uff0cApache Doris \u4f1a\u6839\u636e\u8d1f\u8f7d\u548c\u8868\u7684",(0,t.yg)("inlineCode",{parentName:"p"},"group_commit_interval"),"\u5c5e\u6027\u5f02\u6b65\u63d0\u4ea4\u6570\u636e\uff0c\u63d0\u4ea4\u4e4b\u540e\u6570\u636e\u53ef\u89c1\u3002\u4e3a\u4e86\u9632\u6b62 WAL \u5360\u7528\u8f83\u5927\u7684\u78c1\u76d8\u7a7a\u95f4\uff0c\u5355\u6b21\u5bfc\u5165\u6570\u636e\u91cf\u8f83\u5927\u65f6\uff0c\u4f1a\u81ea\u52a8\u5207\u6362\u4e3a",(0,t.yg)("inlineCode",{parentName:"p"},"sync_mode"),"\u3002"),(0,t.yg)("p",null,"\u6211\u4eec\u5206\u522b\u91c7\u53d6 JDBC \u548c Stream Load \u4e24\u79cd\u65b9\u5f0f\u5bf9\u9ad8\u5e76\u53d1\u5199\u5165\u573a\u666f\u4e0b Group Commit\uff08\u5f02\u6b65\u6a21\u5f0f ",(0,t.yg)("inlineCode",{parentName:"p"},"async_mode"),"\uff09\u7684\u5199\u5165\u6027\u80fd\u8fdb\u884c\u4e86\u6d4b\u8bd5\uff0c\u6d4b\u8bd5\u62a5\u544a\u5982\u4e0b\uff1a"),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},(0,t.yg)("strong",{parentName:"p"},"JDBC \u5199\u5165"),"\uff1a"),(0,t.yg)("ul",{parentName:"li"},(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"\u96c6\u7fa4\u914d\u7f6e\u4e3a 1FE 1BE\uff0c\u6570\u636e\u96c6\u4e3a TPC-H SF10 Lineitem \u8868\uff0c\u603b\u5171\u7ea6 22GB\u30011.8 \u4ebf\u884c\uff1b")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"\u7ecf\u6d4b\u8bd5\uff0c\u5728\u5e76\u53d1\u6570 20\u3001\u5355\u6b21 Insert \u6570\u636e\u884c\u6570 100 \u884c\u4e0b\uff0c\u5bfc\u5165\u6548\u7387\u8fbe\u5230 10.69w \u884c/\u79d2\u3001\u5bfc\u5165\u541e\u5410\u8fbe 11.46 MB/\u79d2\uff0cBE \u8282\u70b9\u7684 CPU \u4f7f\u7528\u7387\u7a33\u5b9a\u4fdd\u6301\u5728 10%-20%\uff1b")))),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},(0,t.yg)("strong",{parentName:"p"},"Stream Load \u5199\u5165"),"\uff1a"),(0,t.yg)("ul",{parentName:"li"},(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"\u96c6\u7fa4\u914d\u7f6e\u4e3a 1FE 3BE\uff0c\u6570\u636e\u96c6\u4e3a httplogs\u3001\u603b\u5171 31GB\u30012.47 \u4ebf\u884c\u3002\u5728\u672a\u5f00\u542f Group Commit \u548c \u5f00\u542f Group Commit \u7684\u5f02\u6b65\u6a21\u5f0f\u65f6\uff0c\u901a\u8fc7\u8bbe\u7f6e\u4e0d\u540c\u7684\u5355\u5e76\u53d1\u6570\u636e\u91cf\u548c\u5e76\u53d1\u6570\uff0c\u5bf9\u6bd4\u6570\u636e\u7684\u5199\u5165\u6027\u80fd\u3002")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"\u7ecf\u6d4b\u8bd5\uff0c\u5728\u5e76\u53d1\u6570 10\u3001\u5355\u6b21\u5bfc\u5165\u6570\u636e\u91cf 1 MB \u4e0b\uff0c\u672a\u5f00\u542f Group Commit \u65f6\u4f1a\u63d0\u793a -235 \u9519\u8bef\uff0c\u5f00\u542f\u540e\u53ef\u7a33\u5b9a\u8fd0\u884c\u4e14\u5bfc\u5165\u6548\u7387\u8fbe 81w \u884c/\u79d2\u3001\u5bfc\u5165\u541e\u5410\u8fbe 104 MB/\u79d2\uff1b\u5728\u5e76\u53d1\u6570 10\u3001\u5355\u6b21\u5bfc\u5165\u6570\u636e\u91cf 10MB \u4e0b\uff0c\u5f00\u542f Group Commit \u540e\u8017\u65f6\u964d\u4f4e\u81f3\u539f\u5148\u7684 55%\u3001\u5bfc\u5165\u541e\u5410\u63d0\u5347 79%\uff1b"))))),(0,t.yg)("admonition",{type:"note"},(0,t.yg)("ul",{parentName:"admonition"},(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"\u6f14\u793a Demo\uff1a",(0,t.yg)("a",{parentName:"p",href:"https://www.bilibili.com/video/BV1um411o7Ha/?spm_id_from=333.999.0.0"},"https://www.bilibili.com/video/BV1um411o7Ha/?spm_id_from=333.999.0.0"))),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"\u53c2\u8003\u6587\u6863\u548c\u5b8c\u6574\u6d4b\u8bd5\u62a5\u544a\uff1a",(0,t.yg)("a",{parentName:"p",href:"https://doris.apache.org/zh-CN/docs/data-operate/import/import-way/group-commit-manual"},"Group Commit"))))),(0,t.yg)("h2",{id:"\u534a\u7ed3\u6784\u5316\u6570\u636e\u5206\u6790"},"\u534a\u7ed3\u6784\u5316\u6570\u636e\u5206\u6790"),(0,t.yg)("h3",{id:"variant-\u6570\u636e\u7c7b\u578b"},"Variant \u6570\u636e\u7c7b\u578b"),(0,t.yg)("p",null,"\u8fc7\u53bb Apache Doris \u5728\u5e94\u5bf9\u590d\u6742\u534a\u7ed3\u6784\u5316\u6570\u636e\u7684\u5b58\u50a8\u548c\u5206\u6790\u5904\u7406\u65f6\uff0c\u4e00\u822c\u6709\u4e24\u79cd\u65b9\u5f0f\uff1a"),(0,t.yg)("ol",null,(0,t.yg)("li",{parentName:"ol"},(0,t.yg)("p",{parentName:"li"},"\u4e00\u79cd\u65b9\u5f0f\u662f\u7528\u6237\u63d0\u524d\u9884\u5b9a\u597d\u8868\u7ed3\u6784\uff0c\u52a0\u5de5\u6210\u5bbd\u8868\uff0c\u5728\u6570\u636e\u8fdb\u5165\u524d\u5c06\u6570\u636e\u89e3\u6790\u597d\uff0c\u8fd9\u79cd\u65b9\u6848\u7684\u4f18\u70b9\u662f\u5199\u5165\u6027\u80fd\u597d\uff0c\u67e5\u8be2\u4e5f\u4e0d\u9700\u8981\u89e3\u6790\uff0c\u4f46\u662f\u4f7f\u7528\u4e0d\u591f\u7075\u6d3b\u3001\u5bf9\u8868\u7ed3\u6784\u53d1\u8d77\u53d8\u66f4\u589e\u52a0\u8fd0\u7ef4\u3001\u7814\u53d1\u7684\u6210\u672c\u3002")),(0,t.yg)("li",{parentName:"ol"},(0,t.yg)("p",{parentName:"li"},"\u4f7f\u7528 Doris \u4e2d\u7684 JSON \u7c7b\u578b\u3001\u6216\u662f\u5b58\u6210 JSON String\uff0c\u5c06\u539f\u59cb JSON \u6570\u636e\u4e0d\u7ecf\u8fc7\u52a0\u5de5\u76f4\u63a5\u5165\u5e93\uff0c\u67e5\u8be2\u7684\u65f6\u5019\uff0c\u7528\u89e3\u6790\u51fd\u6570\u5904\u7406\u3002\u4f18\u70b9\u662f\u4e0d\u9700\u8981\u989d\u5916\u7684\u6570\u636e\u52a0\u5de5\u3001\u9884\u5b9a\u4e49\u8868\u7ed3\u6784\u62cd\u5e73\u5d4c\u5957\u7ed3\u6784\uff0c\u8fd0\u7ef4\u3001\u7814\u53d1\u65b9\u4fbf\uff0c\u4f46\u5b58\u5728\u89e3\u6790\u6027\u80fd\u4ee5\u53ca\u6570\u636e\u8bfb\u53d6\u6548\u7387\u4f4e\u4e0b\u7684\u95ee\u9898\u3002"))),(0,t.yg)("p",null,"\u4e3a\u4e86\u89e3\u51b3\u4e0a\u8ff0\u534a\u7ed3\u6784\u5316\u6570\u636e\u7684\u6311\u6218\uff0c\u5728 Apache Doris 2.1 \u7248\u672c\u4e2d\u6211\u4eec\u5f15\u5165\u5168\u65b0\u7684\u6570\u636e\u7c7b\u578b",(0,t.yg)("inlineCode",{parentName:"p"},"VARIANT"),"\uff0c\u652f\u6301\u5b58\u50a8\u534a\u7ed3\u6784\u5316\u6570\u636e\u3001\u5141\u8bb8\u5b58\u50a8\u5305\u542b\u4e0d\u540c\u6570\u636e\u7c7b\u578b\uff08\u5982\u6574\u6570\u3001\u5b57\u7b26\u4e32\u3001\u5e03\u5c14\u503c\u7b49\uff09\u7684\u590d\u6742\u6570\u636e\u7ed3\u6784\uff0c\u65e0\u9700\u5728\u8868\u7ed3\u6784\u4e2d\u63d0\u524d\u5b9a\u4e49\u5177\u4f53\u7684\u5217\uff0c\u5176\u5b58\u50a8\u548c\u67e5\u8be2\u4e0e\u4f20\u7edf\u7684 String\u3001JSONB \u7b49\u884c\u5b58\u7c7b\u578b\u53d1\u751f\u4e86\u672c\u8d28\u7684\u6539\u53d8\uff0c\u671f\u671b\u5176\u4f5c\u4e3a\u534a\u7ed3\u6784\u5316\u6570\u636e\u9996\u9009\u6570\u636e\u7c7b\u578b\uff0c\u7ed9\u7528\u6237\u5e26\u6765\u66f4\u52a0\u9ad8\u6548\u7684\u6570\u636e\u5904\u7406\u673a\u5236\u3002"),(0,t.yg)("p",null,"Variant \u7c7b\u578b\u7279\u522b\u9002\u7528\u4e8e\u5904\u7406\u7ed3\u6784\u53ef\u80fd\u968f\u65f6\u4f1a\u53d1\u751f\u53d8\u5316\u7684\u590d\u6742\u5d4c\u5957\u7ed3\u6784\u3002\u5728\u5199\u5165\u8fc7\u7a0b\u4e2d\uff0cVariant \u7c7b\u578b\u53ef\u4ee5\u81ea\u52a8\u6839\u636e\u5217\u7684\u7ed3\u6784\u548c\u7c7b\u578b\u63a8\u65ad\u5217\u4fe1\u606f\uff0c\u5e76\u5c06\u5176\u5408\u5e76\u5230\u73b0\u6709\u8868\u7684 Schema \u4e2d\uff0c\u5c06 JSON \u952e\u53ca\u5176\u5bf9\u5e94\u7684\u503c\u7075\u6d3b\u5b58\u50a8\u4e3a\u52a8\u6001\u5b50\u5217\u3002\u540c\u65f6\uff0c\u4e00\u4e2a\u8868\u53ef\u4ee5\u540c\u65f6\u5305\u542b\u7075\u6d3b\u7684 Variant \u5bf9\u8c61\u5217\u548c\u9884\u5148\u5b9a\u4e49\u7c7b\u578b\u7684\u66f4\u4e25\u683c\u7684\u9759\u6001\u5217\uff0c\u4ece\u800c\u5728\u6570\u636e\u5b58\u50a8\u3001\u67e5\u8be2\u4e0a\u63d0\u4f9b\u4e86\u66f4\u5927\u7684\u7075\u6d3b\u6027\u3002\u9664\u6b64\u4e4b\u5916\uff0cVariant \u7c7b\u578b\u80fd\u591f\u4e0e Doris \u6838\u5fc3\u7279\u6027\u878d\u5408\uff0c\u5229\u7528\u5217\u5f0f\u5b58\u50a8\u3001\u5411\u91cf\u5316\u5f15\u64ce\u3001\u4f18\u5316\u5668\u7b49\u6280\u672f\uff0c\u4e3a\u7528\u6237\u5e26\u6765\u6781\u9ad8\u6027\u4ef7\u6bd4\u7684\u67e5\u8be2\u6027\u80fd\u53ca\u5b58\u50a8\u6027\u80fd\u3002"),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"\u4f7f\u7528\u65b9\u5f0f\u5982\u4e0b\uff1a")),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-SQL"},'-- \u65e0\u7d22\u5f15\nCREATE TABLE IF NOT EXISTS ${table_name} (\n    k BIGINT,\n    v VARIANT\n)\ntable_properties;\n\n-- \u5728v\u5217\u521b\u5efa\u7d22\u5f15\uff0c\u53ef\u9009\u6307\u5b9a\u5206\u8bcd\u65b9\u5f0f\uff0c\u9ed8\u8ba4\u4e0d\u5206\u8bcd\nCREATE TABLE IF NOT EXISTS ${table_name} (\n    k BIGINT,\n    v VARIANT,\n    INDEX idx_var(v) USING INVERTED [PROPERTIES("parser" = "english|unicode|chinese")] [COMMENT \'your comment\']\n)\ntable_properties;\n\n-- \u67e5\u8be2\uff0c\u4f7f\u7528`[]`\u5f62\u5f0f\u8bbf\u95ee\u5b50\u5217\nSELECT v["properties"]["title"] from ${table_name}\n')),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"\u76f8\u6bd4 JSON \u7c7b\u578b\u7684\u4f18\u52bf")),(0,t.yg)("p",null,"\u5728 Apache Doris \u4e2d JSON \u7c7b\u578b\u662f\u4ee5\u4e8c\u8fdb\u5236 JSONB \u683c\u5f0f\u8fdb\u884c\u5b58\u50a8\uff0c\u6574\u884c JSON \u4ee5\u884c\u5b58\u7684\u5f62\u5f0f\u5b58\u50a8\u5230 Segment \u6587\u4ef6\u4e2d\u3002\u800c VARIANT \u7c7b\u578b\u5728\u5199\u5165\u7684\u65f6\u5019\u8fdb\u884c\u7c7b\u578b\u63a8\u65ad\uff0c\u5c06\u5199\u5165\u7684 JSON \u5217\u5b58\u5316\uff0c\u67e5\u8be2\u4e0d\u9700\u8981\u8fdb\u884c\u89e3\u6790\u3002\u6b64\u5916 Variant \u7c7b\u578b\u9488\u5bf9\u7a00\u758f\u573a\u666f\u7684 JSON \u8fdb\u884c\u4f18\u5316\uff0c\u53ea\u63d0\u53d6\u9891\u7e41\u51fa\u73b0\u7684\u5217\uff0c\u7a00\u758f\u7684\u5217\u4f1a\u4ee5\u5355\u72ec\u7684\u683c\u5f0f\u8fdb\u884c\u5b58\u50a8\u3002"),(0,t.yg)("p",null,"\u4e3a\u4e86\u9a8c\u8bc1\u5f15\u5165 Variant \u6570\u636e\u7c7b\u578b\u540e\u5728\u5b58\u50a8\u4ee5\u53ca\u67e5\u8be2\u4e0a\u6240\u5e26\u6765\u7684\u4f18\u52bf\uff0c\u6211\u4eec\u57fa\u4e8e ClickBench \u6d4b\u8bd5\u6570\u636e\u96c6\u8fdb\u884c\u4e86\u5b58\u50a8\u7a7a\u95f4\u548c\u67e5\u8be2\u6027\u80fd\u7684\u6d4b\u8bd5\u3002"),(0,t.yg)("p",null,"\u5728\u5b58\u50a8\u7a7a\u95f4\u65b9\u9762\uff0c\u76f8\u540c\u6570\u636e\u91c7\u53d6 Variant \u7c7b\u578b\uff0c\u6240\u5360\u7528\u7684\u5b58\u50a8\u7a7a\u95f4\u8ddf\u9884\u5b9a\u4e49\u7684\u9759\u6001\u5217\u7684\u5b58\u50a8\u7a7a\u95f4\u6301\u5e73\uff0c\u76f8\u6bd4\u4e8e JSON \u7c7b\u578b\u5219\u51cf\u5c11\u4e86\u7ea6 65%\u3002\u5728\u4e00\u4e9b\u4f4e\u57fa\u6570\u573a\u666f\uff0c\u7531\u4e8e\u5217\u5b58\u7684\u4f18\u52bf\uff0c\u5b58\u50a8\u8d44\u6e90\u7684\u6210\u672c\u6548\u5e94\u4f1a\u66f4\u52a0\u660e\u663e\u3002"),(0,t.yg)("p",null,(0,t.yg)("img",{alt:"\u76f8\u6bd4 JSON \u7c7b\u578b\u7684\u4f18\u52bf",src:n(517431).A,width:"1120",height:"416"})),(0,t.yg)("p",null,"\u5728\u67e5\u8be2\u6027\u80fd\u65b9\u9762\uff0c\u5982\u4e0b\u8868\u53ef\u77e5\uff0cVariant \u7c7b\u578b\u4e0e\u9884\u5b9a\u4e49\u9759\u6001\u5217\u7684\u67e5\u8be2\u6027\u80fd\u5dee\u5f02\u5728 10% \u5de6\u53f3\uff1b",(0,t.yg)("strong",{parentName:"p"},"\u800c\u5bf9\u4e8e JSON \u7c7b\u578b\u6765\u8bf4\uff0cVariant \u7c7b\u578b\u7684\u70ed\u67e5\u8be2\u901f\u5ea6\u76f8\u6bd4\u4e8e JSON \u7c7b\u578b\u63d0\u5347\u4e86 8 \u500d\u4ee5\u4e0a\uff0c\u51b7\u67e5\u8be2\u6709\u7740\u6570\u91cf\u7ea7\u7684\u63d0\u5347\u3002"),"\uff08\u7531\u4e8e I/O \u539f\u56e0\uff0cJSONB \u7c7b\u578b\u7684\u51b7\u67e5\u8be2\u5927\u90e8\u5206\u8d85\u65f6\uff09\u3002"),(0,t.yg)("p",null,(0,t.yg)("img",{alt:"\u76f8\u6bd4 JSON \u7c7b\u578b\u7684\u4f18\u52bf",src:n(143802).A,width:"1280",height:"459"})),(0,t.yg)("admonition",{type:"caution"},(0,t.yg)("p",{parentName:"admonition"},"\u6ce8\u610f\u4e8b\u9879\uff1a"),(0,t.yg)("ul",{parentName:"admonition"},(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"\u76ee\u524d Variant \u6682\u4e0d\u652f\u6301 Aggregate \u6a21\u578b\uff0c\u4e5f\u4e0d\u652f\u6301\u5c06 Variant \u7c7b\u578b\u4f5c\u4e3a Unique \u6216 Duplicate \u6a21\u578b\u7684\u4e3b\u952e\u53ca\u6392\u5e8f\u952e\uff1b")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"\u63a8\u8350\u4f7f\u7528 RANDOM \u6a21\u5f0f\u6216\u8005\u5f00\u542f Group Commit \u5bfc\u5165\uff0c\u5199\u5165\u6027\u80fd\u66f4\u9ad8\u6548\uff1b")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"\u65e5\u671f\u3001Decimal \u7b49\u975e\u6807\u51c6 JSON \u7c7b\u578b\u5c3d\u53ef\u80fd\u63d0\u53d6\u51fa\u6765\u4f5c\u4e3a\u9759\u6001\u5b57\u6bb5\uff0c\u6027\u80fd\u66f4\u597d\uff1b")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"\u4e8c\u7ef4\u53ca\u5176\u4ee5\u4e0a\u7684\u6570\u7ec4\u4ee5\u53ca\u6570\u7ec4\u5d4c\u5957\u5bf9\u8c61\uff0c\u5217\u5b58\u5316\u4f1a\u88ab\u5b58\u6210 JSONB \u7f16\u7801\uff0c\u6027\u80fd\u4e0d\u5982\u539f\u751f\u6570\u7ec4\uff1b")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"\u67e5\u8be2\u8fc7\u6ee4\u3001\u805a\u5408\u9700\u8981\u5e26 Cast\uff0c\u5b58\u50a8\u5c42\u4f1a\u6839\u636e\u5b58\u50a8\u7c7b\u578b\u548c Cast \u76ee\u6807\u7c7b\u578b\u6765\u63d0\u793a\uff08hint\uff09\u5b58\u50a8\u5f15\u64ce\u8c13\u8bcd\u4e0b\u63a8\uff0c\u52a0\u901f\u67e5\u8be2\u3002")))),(0,t.yg)("admonition",{type:"note"},(0,t.yg)("ul",{parentName:"admonition"},(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"\u6f14\u793a Demo: ",(0,t.yg)("a",{parentName:"p",href:"https://www.bilibili.com/video/BV13u4m1g7ra/?spm_id_from=333.999.0.0"},"https://www.bilibili.com/video/BV13u4m1g7ra/?spm_id_from=333.999.0.0"))),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"\u53c2\u8003\u6587\u6863\uff1a",(0,t.yg)("a",{parentName:"p",href:"https://doris.apache.org/zh-CN/docs/sql-manual/sql-data-types/semi-structured/VARIANT.md"},"VARIANT"))))),(0,t.yg)("h3",{id:"ip-\u6570\u636e\u7c7b\u578b"},"IP \u6570\u636e\u7c7b\u578b"),(0,t.yg)("p",null,"\u5728\u7f51\u7edc\u6d41\u91cf\u76d1\u63a7\u7684\u573a\u666f\u4e2d\uff0cIP \u5730\u5740\u662f\u4e00\u4e2a\u5e38\u89c1\u7684\u5b57\u6bb5\uff0c\u5927\u91cf\u7684\u7edf\u8ba1\u5206\u6790\u57fa\u4e8e IP \u5730\u5740\u8fdb\u884c\u3002\u5728 Apache Doris 2.1 \u7248\u672c\u4e2d\uff0c\u5c06\u539f\u751f\u652f\u6301 IPv4 \u548c IPv6 \u6570\u636e\u7c7b\u578b\uff0c\u7528\u9ad8\u6548\u7684\u4e8c\u8fdb\u5236\u5f62\u5f0f\u5b58\u50a8 IP \u6570\u636e\u3002\u76f8\u6bd4\u4e8e\u4f7f\u7528\u660e\u6587\u7684 IP String\uff0c\u5185\u5b58\u548c\u5b58\u50a8\u7a7a\u95f4\u53ef\u8282\u7701 60% \u5de6\u53f3\u3002"),(0,t.yg)("p",null,"\u540c\u65f6\u57fa\u4e8e IP \u7c7b\u578b\uff0c\u6211\u4eec\u589e\u52a0\u4e86\u5e38\u7528\u7684 20 \u591a\u4e2a IP \u5904\u7406\u51fd\u6570\uff0c\u5982\uff1a"),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},"IPV4_NUM_TO_STRING\uff1a\u5c06\u7c7b\u578b\u4e3a Int16\u3001Int32\u3001Int64 \u4e14\u5927\u7aef\u8868\u793a\u7684 IPv4 \u7684\u5730\u5740\uff0c\u8fd4\u56de\u76f8\u5e94 IPv4 \u7684\u5b57\u7b26\u4e32\u8868\u73b0\u5f62\u5f0f\uff1b"),(0,t.yg)("li",{parentName:"ul"},"IPV4_CIDR_TO_RANGE\uff1a\u63a5\u6536\u4e00\u4e2a IPv4 \u548c\u4e00\u4e2a\u5305\u542b CIDR \u7684 Int16 \u503c\uff0c\u8fd4\u56de\u4e00\u4e2a\u7ed3\u6784\u4f53\uff0c\u5176\u4e2d\u5305\u542b\u4e24\u4e2a IPv4 \u5b57\u6bb5\u5206\u522b\u8868\u793a\u5b50\u7f51\u7684\u8f83\u4f4e\u8303\u56f4\uff08min\uff09\u548c\u8f83\u9ad8\u8303\u56f4\uff08max\uff09\uff1b"),(0,t.yg)("li",{parentName:"ul"},"INET_ATON\uff1a\u83b7\u53d6\u5305\u542b IPv4 \u5730\u5740\u7684\u5b57\u7b26\u4e32\uff0c\u683c\u5f0f\u4e3a A.B.C.D\uff08\u70b9\u5206\u9694\u7684\u5341\u8fdb\u5236\u6570\u5b57\uff09")),(0,t.yg)("admonition",{type:"note"},(0,t.yg)("p",{parentName:"admonition"},"\u53c2\u8003\u6587\u6863\uff1a",(0,t.yg)("a",{parentName:"p",href:"https://doris.apache.org/zh-CN/docs/sql-manual/sql-data-types/ip/IPV6"},"IPV6"))),(0,t.yg)("h3",{id:"\u590d\u6742\u6570\u636e\u7c7b\u578b\u5206\u6790\u51fd\u6570\u5b8c\u5584"},"\u590d\u6742\u6570\u636e\u7c7b\u578b\u5206\u6790\u51fd\u6570\u5b8c\u5584"),(0,t.yg)("p",null,"\u5728 Apache Doris 2.1 \u7248\u672c\u4e2d\u6211\u4eec\u4e30\u5bcc\u4e86\u884c\u8f6c\u5217\u548c IN \u80fd\u652f\u6301\u7684\u6570\u636e\u7c7b\u578b\u3002\u5982\uff1a"),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("inlineCode",{parentName:"li"},"explode_map"),"\uff1a\u652f\u6301 MAP \u7c7b\u578b\u6570\u636e\u884c\u8f6c\u5217\uff08\u4ec5\u5728\u65b0\u4f18\u5316\u5668\u4e2d\u5b9e\u73b0\uff09")),(0,t.yg)("p",null,"\u652f\u6301 Map \u7c7b\u578b Explode \u884c\u8f6c\u5217\uff0c\u5c06 Map \u5b57\u6bb5\u7684 N \u4e2a Key Value \u5bf9\u5c55\u5f00\u6210 N \u884c\uff0c\u6bcf\u884c\u7684 Map \u5b57\u6bb5\u66ff\u6362\u6210 Key \u548c Value \u4e24\u4e2a\u5b57\u6bb5\u3002",(0,t.yg)("inlineCode",{parentName:"p"},"explode_map")," \u9700\u8981\u548c Lateral View \u4e00\u8d77\u4f7f\u7528\uff0c\u53ef\u4ee5\u63a5\u591a\u4e2a Lateral View, \u7ed3\u679c\u5219\u662f\u6bcf\u4e2a ",(0,t.yg)("inlineCode",{parentName:"p"},"explode_map")," \u4e4b\u540e\u7684\u884c\u6570\u4ee5\u7b1b\u5361\u5c14\u79ef\u7684\u5f62\u5f0f\u5c55\u793a\u3002"),(0,t.yg)("p",null,"\u5177\u4f53\u4f7f\u7528\u5982\u4e0b\uff1a"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-SQL"},'-- \u5efa\u8868\u8bed\u53e5\n CREATE TABLE `sdu` (\n  `id` INT NULL,\n  `name` TEXT NULL,\n  `score` MAP<TEXT,INT> NULL\n) ENGINE=OLAP\nDUPLICATE KEY(`id`)\nCOMMENT \'OLAP\'\nDISTRIBUTED BY HASH(`id`) BUCKETS 1\nPROPERTIES (\n"replication_allocation" = "tag.location.default: 1"\n);\n\n-- insert \u6570\u636e\ninsert into sdu values (0, "zhangsan", {"Chinese":"80","Math":"60","English":"90"});\ninsert into sdu values (1, "lisi", {"null":null});\ninsert into sdu values (2, "wangwu", {"Chinese":"88","Math":"90","English":"96"});\ninsert into sdu values (3, "lisi2", {null:null});\ninsert into sdu values (4, "amory", NULL);\n\nmysql> select name, course_0, score_0 from sdu lateral view explode_map(score) tmp as course_0,score_0;\n+----------+----------+---------+\n| name     | course_0 | score_0 |\n+----------+----------+---------+\n| zhangsan | Chinese  |      80 |\n| zhangsan | Math     |      60 |\n| zhangsan | English  |      90 |\n| lisi     | null     |    NULL |\n| wangwu   | Chinese  |      88 |\n| wangwu   | Math     |      90 |\n| wangwu   | English  |      96 |\n| lisi2    | NULL     |    NULL |\n+----------+----------+---------+\n\nmysql> select name, course_0, score_0, course_1, score_1 from sdu lateral view explode_map(score) tmp as course_0,score_0 lateral view explode_map(score) tmp1 as course_1,score_1;\n+----------+----------+---------+----------+---------+\n| name     | course_0 | score_0 | course_1 | score_1 |\n+----------+----------+---------+----------+---------+\n| zhangsan | Chinese  |      80 | Chinese  |      80 |\n| zhangsan | Chinese  |      80 | Math     |      60 |\n| zhangsan | Chinese  |      80 | English  |      90 |\n| zhangsan | Math     |      60 | Chinese  |      80 |\n| zhangsan | Math     |      60 | Math     |      60 |\n| zhangsan | Math     |      60 | English  |      90 |\n| zhangsan | English  |      90 | Chinese  |      80 |\n| zhangsan | English  |      90 | Math     |      60 |\n| zhangsan | English  |      90 | English  |      90 |\n| lisi     | null     |    NULL | null     |    NULL |\n| wangwu   | Chinese  |      88 | Chinese  |      88 |\n| wangwu   | Chinese  |      88 | Math     |      90 |\n| wangwu   | Chinese  |      88 | English  |      96 |\n| wangwu   | Math     |      90 | Chinese  |      88 |\n| wangwu   | Math     |      90 | Math     |      90 |\n| wangwu   | Math     |      90 | English  |      96 |\n| wangwu   | English  |      96 | Chinese  |      88 |\n| wangwu   | English  |      96 | Math     |      90 |\n| wangwu   | English  |      96 | English  |      96 |\n| lisi2    | NULL     |    NULL | NULL     |    NULL |\n+----------+----------+---------+----------+---------+\n')),(0,t.yg)("p",null,(0,t.yg)("inlineCode",{parentName:"p"},"explode_map_outer")," \u548c ",(0,t.yg)("inlineCode",{parentName:"p"},"explode_outer")," \u7684\u76ee\u7684\u4e00\u81f4\uff0c\u53ef\u4ee5\u5c06\u5f53\u524d MAP \u7c7b\u578b\u7684\u5217\u4e2d\u662f NULL \u7684\u6570\u636e\u884c\u5c55\u793a\u51fa\u6765\u3002"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-SQL"},"mysql> select name, course_0, score_0 from sdu lateral view explode_map_outer(score) tmp as course_0,score_0;\n+----------+----------+---------+\n| name     | course_0 | score_0 |\n+----------+----------+---------+\n| zhangsan | Chinese  |      80 |\n| zhangsan | Math     |      60 |\n| zhangsan | English  |      90 |\n| lisi     | null     |    NULL |\n| wangwu   | Chinese  |      88 |\n| wangwu   | Math     |      90 |\n| wangwu   | English  |      96 |\n| lisi2    | NULL     |    NULL |\n| amory    | NULL     |    NULL |\n+----------+----------+---------+\n")),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},"\u589e\u52a0 IN \u8c13\u8bcd\u652f\u6301 Struct \u7c7b\u578b\u6570\u636e\u7684\u80fd\u529b\uff08\u4ec5\u5728\u65b0\u4f18\u5316\u5668\u4e2d\u5b9e\u73b0\uff09")),(0,t.yg)("p",null,"IN \u8c13\u8bcd\u7684\u5de6\u53c2\u6570\u652f\u6301 ",(0,t.yg)("inlineCode",{parentName:"p"},"struct() function")," \u6784\u5efa\u7684 Struct \u7c7b\u578b\u7684\u6570\u636e\uff0c\u4e5f\u652f\u6301 Select \u67d0\u8868\u4e2d\u67d0\u4e00\u5217\u662f Struct \u7c7b\u578b\u7684\u6570\u636e\uff0c\u53f3\u8fb9\u7684\u53c2\u6570\u652f\u6301\u4e00\u4e2a\u7531 ",(0,t.yg)("inlineCode",{parentName:"p"},"struct() function")," \u6784\u5efa\u7684 Struct \u7c7b\u578b\u7684\u6570\u636e\u7684\u6570\u7ec4\u3002IN \u8c13\u8bcd\u652f\u6301 Struct \u7c7b\u578b\u53ef\u4ee5\u6709\u6548\u66ff\u6362 Where \u6761\u4ef6\u4e2d\u5982\u679c\u9700\u8981\u5927\u91cf\u7684 or \u8fde\u8bcd\u8fde\u63a5\u7684\u8868\u8fbe\u5f0f\uff0c\u5982\uff1a ",(0,t.yg)("inlineCode",{parentName:"p"},"(a = 1 and b = '2') or (a = 1 and b = '3') or (...)")," \u53ef\u4ee5\u901a\u8fc7 IN \u5b9e\u73b0\u4e3a ",(0,t.yg)("inlineCode",{parentName:"p"},"struct(a,b) in (struct(1, '2'), struct(1, '3'), ...)")),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-SQL"},"mysql> select struct(1,\"2\")  in (struct(1,3), struct(1,\"2\"), struct(1,1), null);\n+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| cast(struct(1, '2') as STRUCT<col1:TINYINT,col2:TEXT>) IN (NULL, cast(struct(1, '2') as STRUCT<col1:TINYINT,col2:TEXT>), cast(struct(1, 1) as STRUCT<col1:TINYINT,col2:TEXT>), cast(struct(1, 3) as STRUCT<col1:TINYINT,col2:TEXT>)) |\n+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n|                                                                                                                                                                                                                                    1 |\n+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\nmysql> select struct(1,\"2\") not in (struct(1,3), struct(1,\"2\"), struct(1,1), null);\n+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| ( not cast(struct(1, '2') as STRUCT<col1:TINYINT,col2:TEXT>) IN (NULL, cast(struct(1, '2') as STRUCT<col1:TINYINT,col2:TEXT>), cast(struct(1, 1) as STRUCT<col1:TINYINT,col2:TEXT>), cast(struct(1, 3) as STRUCT<col1:TINYINT,col2:TEXT>))) |\n+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n|                                                                                                                                                                                                                                           0 |\n+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n")),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("inlineCode",{parentName:"li"},"MAP_AGG"),"\uff1a\u63a5\u6536 expr1 \u4f5c\u4e3a\u952e\uff0cexpr2 \u4f5c\u4e3a\u5bf9\u5e94\u7684\u503c\uff0c\u8fd4\u56de\u4e00\u4e2a MAP ")),(0,t.yg)("admonition",{type:"note"},(0,t.yg)("p",{parentName:"admonition"},"\u53c2\u8003\u6587\u6863\uff1a",(0,t.yg)("a",{parentName:"p",href:"https://doris.apache.org/zh-CN/docs/sql-manual/sql-functions/aggregate-functions/map-agg.md"},"MAP_AGG"))),(0,t.yg)("h2",{id:"\u8d1f\u8f7d\u7ba1\u7406"},"\u8d1f\u8f7d\u7ba1\u7406"),(0,t.yg)("h3",{id:"\u8d44\u6e90\u786c\u9694\u79bb"},"\u8d44\u6e90\u786c\u9694\u79bb"),(0,t.yg)("p",null,"\u5728 Apache Doris 2.0 \u7248\u672c\u6211\u4eec\u5f15\u5165\u4e86 Workload Group\uff0c\u53ef\u4ee5\u5b9e\u73b0\u5bf9 CPU \u8d44\u6e90\u7684\u8f6f\u9650\u5236\u3002Workload Group \u8f6f\u9650\u7684\u4f18\u70b9\u662f\u53ef\u4ee5\u63d0\u5347\u8d44\u6e90\u7684\u5229\u7528\u7387\uff0c\u4f46\u540c\u65f6\u4e5f\u4f1a\u5e26\u6765\u67e5\u8be2\u5ef6\u8fdf\u7684\u4e0d\u786e\u5b9a\u6027\uff0c\u8fd9\u5bf9\u90a3\u4e9b\u671f\u671b\u67e5\u8be2\u6027\u80fd\u7a33\u5b9a\u6027\u7684\u7528\u6237\u6765\u8bf4\u662f\u96be\u4ee5\u63a5\u53d7\u7684\u3002\u56e0\u6b64\u5728 Apache Doris 2.1 \u7248\u672c\u4e2d\u6211\u4eec\u5bf9 Workload Group \u5b9e\u73b0\u4e86 CPU \u786c\u9650\uff0c\u5373\u65e0\u8bba\u5f53\u524d\u7269\u7406\u673a\u7684\u6574\u4f53 CPU \u662f\u5426\u7a7a\u95f2\uff0c\u914d\u7f6e\u4e86\u786c\u9650\u7684 Group \u6700\u5927 CPU \u7528\u91cf\u4e0d\u80fd\u8d85\u8fc7\u914d\u7f6e\u7684\u503c\u3002"),(0,t.yg)("p",null,"\u8fd9\u610f\u5473\u7740\u4e0d\u7ba1\u5355\u673a\u7684\u8d44\u6e90\u662f\u5426\u5145\u8db3\uff0c\u8be5 Workload Group \u7684\u6700\u5927\u53ef\u7528 CPU \u8d44\u6e90\u90fd\u662f\u56fa\u5b9a\u7684\uff0c\u53ea\u8981\u7528\u6237\u7684\u67e5\u8be2\u8d1f\u8f7d\u4e0d\u53d1\u751f\u5927\u7684\u53d8\u5316\uff0c\u90a3\u4e48\u67e5\u8be2\u6027\u80fd\u5c31\u4f1a\u76f8\u5bf9\u7a33\u5b9a\u3002\u7531\u4e8e\u5f71\u54cd\u4e00\u4e2a\u67e5\u8be2\u6027\u80fd\u7a33\u5b9a\u6027\u7684\u56e0\u7d20\u5f88\u591a\uff0c\u9664\u4e86 CPU \u4e4b\u5916\uff0c\u5185\u5b58\u3001IO \u4ee5\u53ca\u8f6f\u4ef6\u5c42\u9762\u7684\u8d44\u6e90\u7ade\u4e89\u4e5f\u90fd\u4f1a\u4ea7\u751f\u5f71\u54cd\uff0c\u56e0\u6b64\u5f53\u96c6\u7fa4\u7684\u8d1f\u8f7d\u5728\u7a7a\u95f2\u548c\u6ee1\u8f7d\u4e4b\u95f4\u5207\u6362\u65f6\uff0c\u5373\u4f7f\u914d\u7f6e\u4e86 CPU \u7684\u786c\u9650\uff0c\u67e5\u8be2\u6027\u80fd\u7684\u7a33\u5b9a\u6027\u4e5f\u4f1a\u4ea7\u751f\u6ce2\u52a8\uff0c\u4f46\u662f\u9884\u671f\u7684\u8868\u73b0\u5e94\u8be5\u662f\u4f18\u4e8e\u8f6f\u9650\u5236\u3002"),(0,t.yg)("admonition",{type:"caution"},(0,t.yg)("p",{parentName:"admonition"},"\u6ce8\u610f\u4e8b\u9879"),(0,t.yg)("ol",{parentName:"admonition"},(0,t.yg)("li",{parentName:"ol"},(0,t.yg)("p",{parentName:"li"},"Doris 2.0 \u7248\u672c\u7684 CPU \u9694\u79bb\u662f\u57fa\u4e8e\u4f18\u5148\u7ea7\u961f\u5217\u5b9e\u73b0\u7684\uff0c\u800c\u5728 2.1 \u7248\u672c\u4e2d Apache Doris \u662f\u57fa\u4e8e CGroup \u5b9e\u73b0\u4e86 CPU \u8d44\u6e90\u7684\u9694\u79bb\uff0c\u56e0\u6b64\u4ece 2.0 \u7248\u672c\u5347\u7ea7\u5230 2.1 \u7248\u672c\u65f6\uff0c\u9700\u8981\u5728\u4f7f\u7528\u524d\u5b8c\u6210 CGroup \u7684\u914d\u7f6e\uff0c\u8be6\u7ec6\u6ce8\u610f\u4e8b\u9879\u53c2\u8003\u5b98\u7f51\u6587\u6863\u3002")),(0,t.yg)("li",{parentName:"ol"},(0,t.yg)("p",{parentName:"li"},"\u76ee\u524d Workload Group \u652f\u6301\u7684\u5de5\u4f5c\u8d1f\u8f7d\u7c7b\u578b\u5305\u62ec\u67e5\u8be2\u95f4\u7684\u9694\u79bb\u4ee5\u53ca\u5bfc\u5165\u4e0e\u67e5\u8be2\u4e4b\u95f4\u7684\u9694\u79bb\uff0c\u9700\u8981\u6ce8\u610f\u7684\u662f\u5982\u679c\u671f\u671b\u5bf9\u5bfc\u5165\u8d1f\u8f7d\u8fdb\u884c\u5f7b\u5e95\u7684\u9650\u5236\uff0c\u90a3\u4e48\u9700\u8981\u5f00\u542f MemTable \u524d\u79fb\u3002")),(0,t.yg)("li",{parentName:"ol"},(0,t.yg)("p",{parentName:"li"},"\u7528\u6237\u9700\u8981\u901a\u8fc7\u5f00\u5173\u6307\u5b9a\u5f53\u524d\u96c6\u7fa4\u7684 CPU \u9650\u5236\u6a21\u5f0f\u662f\u8f6f\u9650\u8fd8\u662f\u786c\u9650\uff0c\u6682\u4e0d\u652f\u6301\u4e24\u79cd\u6a21\u5f0f\u540c\u65f6\u8fd0\u884c\uff0c\u4e24\u79cd\u6a21\u5f0f\u7684\u5207\u6362\u53ef\u4ee5\u53c2\u8003\u5b98\u7f51\u6587\u6863\uff0c\u540e\u7eed\u6211\u4eec\u4e5f\u4f1a\u6839\u636e\u7528\u6237\u7684\u5b9e\u9645\u9700\u6c42\u51b3\u5b9a\u662f\u5426\u8981\u540c\u65f6\u652f\u6301\u8fd9\u4e24\u79cd\u6a21\u5f0f\u3002")))),(0,t.yg)("admonition",{type:"note"},(0,t.yg)("ul",{parentName:"admonition"},(0,t.yg)("li",{parentName:"ul"},"\u6f14\u793a Demo\uff1a",(0,t.yg)("a",{parentName:"li",href:"https://www.bilibili.com/video/BV1Fz421X7XE/?spm_id_from=333.999.0.0"},"https://www.bilibili.com/video/BV1Fz421X7XE/?spm_id_from=333.999.0.0")),(0,t.yg)("li",{parentName:"ul"},"\u53c2\u8003\u6587\u6863\uff1a",(0,t.yg)("a",{parentName:"li",href:"https://doris.apache.org/zh-CN/docs/admin-manual/resource-admin/workload-group.md"},"Workload Group")))),(0,t.yg)("h3",{id:"topsql"},"TopSQL"),(0,t.yg)("p",null,"\u5f53\u96c6\u7fa4\u51fa\u73b0\u9884\u671f\u5916\u7684\u5927\u67e5\u8be2\u5bfc\u81f4\u96c6\u7fa4\u6574\u4f53\u8d1f\u8f7d\u4e0a\u5347\u3001\u67e5\u8be2\u53ef\u7528\u6027\u4e0b\u964d\u65f6\uff0c\u7528\u6237\u96be\u4ee5\u5feb\u901f\u627e\u5230\u8fd9\u4e9b\u5927\u67e5\u8be2\u5e76\u8fdb\u884c\u76f8\u5e94\u7684\u964d\u7ea7\u64cd\u4f5c\u3002\u56e0\u6b64\u5728 Apache Doris 2.1 \u7248\u672c\u4e2d\u6211\u4eec\u652f\u6301\u4e86\u8fd0\u884c\u65f6\u67e5\u770b SQL \u8d44\u6e90\u7528\u91cf\u7684\u529f\u80fd\uff0c\u5177\u4f53\u6307\u6807\u5982\u4e0b\uff1a"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-SQL"},"mysql [(none)]>desc function active_queries();\n+------------------------+--------+------+-------+---------+-------+\n| Field                  | Type   | Null | Key   | Default | Extra |\n+------------------------+--------+------+-------+---------+-------+\n| BeHost                 | TEXT   | No   | false | NULL    | NONE  |\n| BePort                 | BIGINT | No   | false | NULL    | NONE  |\n| QueryId                | TEXT   | No   | false | NULL    | NONE  |\n| StartTime              | TEXT   | No   | false | NULL    | NONE  |\n| QueryTimeMs            | BIGINT | No   | false | NULL    | NONE  |\n| WorkloadGroupId        | BIGINT | No   | false | NULL    | NONE  |\n| QueryCpuTimeMs         | BIGINT | No   | false | NULL    | NONE  |\n| ScanRows               | BIGINT | No   | false | NULL    | NONE  |\n| ScanBytes              | BIGINT | No   | false | NULL    | NONE  |\n| BePeakMemoryBytes      | BIGINT | No   | false | NULL    | NONE  |\n| CurrentUsedMemoryBytes | BIGINT | No   | false | NULL    | NONE  |\n| ShuffleSendBytes       | BIGINT | No   | false | NULL    | NONE  |\n| ShuffleSendRows        | BIGINT | No   | false | NULL    | NONE  |\n| Database               | TEXT   | No   | false | NULL    | NONE  |\n| FrontendInstance       | TEXT   | No   | false | NULL    | NONE  |\n| Sql                    | TEXT   | No   | false | NULL    | NONE  |\n+------------------------+--------+------+-------+---------+-------+\n")),(0,t.yg)("p",null,(0,t.yg)("inlineCode",{parentName:"p"},"active_queries()")," \u51fd\u6570\u8bb0\u5f55\u4e86\u67e5\u8be2\u5728\u5404\u4e2a BE \u4e0a\u8fd0\u884c\u65f6\u7684\u5ba1\u8ba1\u4fe1\u606f\uff0c\u8be5\u51fd\u6570\u53ef\u4ee5\u5f53\u505a\u666e\u901a\u7684 Doris \u8868\u6765\u770b\u5f85\uff0c\u652f\u6301\u67e5\u8be2\u3001\u8c13\u8bcd\u8fc7\u6ee4\u3001\u6392\u5e8f\u548c Join \u7b49\u64cd\u4f5c\u3002\u5e38\u7528\u7684\u6307\u6807\u5305\u62ec SQL \u7684\u8fd0\u884c\u65f6\u95f4\u3001CPU \u65f6\u95f4\u3001\u5355 BE \u7684\u5cf0\u503c\u5185\u5b58\u3001Scan \u7684\u6570\u636e\u91cf\u4ee5\u53ca Shuffle \u7684\u6570\u636e\u91cf\uff0c\u4e5f\u53ef\u4ee5\u4ece BE \u7684\u7c92\u5ea6\u505a\u4e0a\u5377\uff0c\u67e5\u770b SQL \u5168\u5c40\u7684\u8d44\u6e90\u7528\u91cf\u3002"),(0,t.yg)("p",null,"\u9700\u8981\u6ce8\u610f\u7684\u662f\u8fd9\u91cc\u53ea\u663e\u793a\u8fd0\u884c\u65f6\u7684 SQL\uff0c\u67e5\u8be2\u7ed3\u675f\u7684 SQL \u4e0d\u4f1a\u5728\u8fd9\u91cc\u663e\u793a\uff0c\u800c\u662f\u5199\u5165\u5ba1\u8ba1\u65e5\u5fd7\u4e2d\uff08\u76ee\u524d\u4e3b\u8981\u662f fe.audit.log\uff09\u3002\u5e38\u7528\u7684 SQL \u5982\u4e0b\uff1a"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-SQL"},"\u67e5\u770b\u96c6\u7fa4\u4e2d\u76ee\u524d\u8fd0\u884c\u65f6\u95f4\u6700\u4e45\u7684n\u4e2asql\nselect QueryId,max(QueryTimeMs) as query_time from active_queries() group by QueryId order by query_time desc limit 10;\n\n\u67e5\u770b\u76ee\u524d\u96c6\u7fa4\u4e2dCPU\u8017\u65f6\u6700\u957f\u7684n\u4e2asql\nselect QueryId, sum(QueryCpuTimeMs) as cpu_time from active_queries() group by QueryId order by cpu_time desc limit 10\n\n\u67e5\u770b\u76ee\u524d\u96c6\u7fa4\u4e2dscan\u884c\u6570\u6700\u591a\u7684n\u4e2asql\u4ee5\u53ca\u4ed6\u4eec\u7684\u8fd0\u884c\u65f6\u95f4\nselect t1.QueryId,t1.scan_rows, t2.query_time from \n    (select QueryId, sum(ScanRows) as scan_rows from active_queries()  group by QueryId order by scan_rows desc limit 10) t1 \n    left join (select QueryId,max(QueryTimeMs) as query_time from active_queries() group by QueryId) t2 on t1.QueryId = t2.QueryId\n    \n\u67e5\u770b\u76ee\u524d\u5404\u4e2aBE\u7684\u8d1f\u8f7d\u60c5\u51b5\uff0c\u6309\u7167CPU\u65f6\u95f4/scan\u884c\u6570/shuffle\u5b57\u8282\u6570\u964d\u5e8f\u6392\u5217\nselect BeHost,sum(QueryCpuTimeMs) as query_cpu_time, sum(ScanRows) as scan_rows,sum(ShuffleSendBytes) as shuffle_bytes from active_queries() group by BeHost order by query_cpu_time desc,scan_rows desc ,shuffle_bytes desc limit 10\n\n\u67e5\u770b\u5355BE\u5cf0\u503c\u5185\u5b58\u6700\u9ad8\u7684N\u4e2asql\nselect QueryId,max(BePeakMemoryBytes) as be_peak_mem from active_queries() group by QueryId order by be_peak_mem desc limit 10;\n")),(0,t.yg)("p",null,"\u76ee\u524d\u4e3b\u8981\u5c55\u793a\u7684\u8d1f\u8f7d\u7c7b\u578b\u5305\u62ec Select \u548c",(0,t.yg)("inlineCode",{parentName:"p"},"Insert Into\u2026\u2026Select"),"\uff0c\u9884\u8ba1\u5728 2.1 \u7248\u672c\u4e4b\u4e0a\u7684\u4e09\u4f4d\u8fed\u4ee3\u7248\u672c\u4e2d\u4f1a\u652f\u6301 Stream Load \u548c Broker Load \u7684\u8d44\u6e90\u7528\u91cf\u5c55\u793a\u3002"),(0,t.yg)("admonition",{type:"note"},(0,t.yg)("p",{parentName:"admonition"},"\u53c2\u8003\u6587\u6863\uff1a",(0,t.yg)("a",{parentName:"p",href:"https://doris.apache.org/zh-CN/docs/sql-manual/sql-functions/table-functions/active_queries.md"},"ACTIVE_QUERIES"))),(0,t.yg)("h2",{id:"\u5176\u4ed6-1"},"\u5176\u4ed6"),(0,t.yg)("h3",{id:"decimal256"},"Decimal256"),(0,t.yg)("p",null,"\u4e3a\u4e86\u66f4\u597d\u7684\u6ee1\u8db3\u91d1\u878d\u7c7b\u6216\u8005\u8d22\u52a1\u7c7b\u5ba2\u6237\u4ee5\u53ca\u4e00\u4e9b\u9ad8\u7aef\u5236\u9020\u4e1a\u5ba2\u6237\u5bf9\u4e8e\u6570\u5b57\u7c7b\u578b\u8fdb\u884c\u7cbe\u786e\u8ba1\u7b97\u7684\u9700\u6c42\uff0c2.1 \u65b0\u7248\u672c\u4e2d\u63d0\u4f9b\u4e86\u66f4\u9ad8\u7cbe\u5ea6\u7684 Decimal \u6570\u636e\u7c7b\u578b\uff0c\u6700\u9ad8\u652f\u6301 76 \u4f4d\u6709\u6548\u6570\u5b57\uff08\u8be5\u7c7b\u578b\u5904\u4e8e Experimental \u72b6\u6001\uff0c\u9700\u8981\u624b\u5de5\u5f00\u542f\u914d\u7f6e\u9879 set enable_decimal256=true \u624d\u80fd\u4f7f\u7528\uff09\u3002"),(0,t.yg)("p",null,"\u793a\u4f8b\uff1a"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-SQL"},'CREATE TABLE `test_arithmetic_expressions_256` (\n      k1 decimal(76, 30),\n      k2 decimal(76, 30)\n    )\n    DISTRIBUTED BY HASH(k1)\n    PROPERTIES (\n    "replication_num" = "1"\n    );\n\ninsert into test_arithmetic_expressions_256 values\n  (1.000000000000000000000000000001, 9999999999999999999999999999999999999999999998.999999999999999999999999999998),\n  (2.100000000000000000000000000001, 4999999999999999999999999999999999999999999999.899999999999999999999999999998),\n  (3.666666666666666666666666666666, 3333333333333333333333333333333333333333333333.333333333333333333333333333333);\n')),(0,t.yg)("p",null,"\u67e5\u8be2\u8bed\u53e5\u53ca\u7ed3\u679c\uff1a"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-SQL"},"select k1, k2, k1 + k2 a from test_arithmetic_expressions_256 order by 1, 2;\n+----------------------------------+-------------------------------------------------------------------------------+-------------------------------------------------------------------------------+\n| k1                               | k2                                                                            | a                                                                             |\n+----------------------------------+-------------------------------------------------------------------------------+-------------------------------------------------------------------------------+\n| 1.000000000000000000000000000001 | 9999999999999999999999999999999999999999999998.999999999999999999999999999998 | 9999999999999999999999999999999999999999999999.999999999999999999999999999999 |\n| 2.100000000000000000000000000001 | 4999999999999999999999999999999999999999999999.899999999999999999999999999998 | 5000000000000000000000000000000000000000000001.999999999999999999999999999999 |\n| 3.666666666666666666666666666666 | 3333333333333333333333333333333333333333333333.333333333333333333333333333333 | 3333333333333333333333333333333333333333333336.999999999999999999999999999999 |\n+----------------------------------+-------------------------------------------------------------------------------+-------------------------------------------------------------------------------+\n3 rows in set (0.09 sec)\n")),(0,t.yg)("admonition",{type:"caution"},(0,t.yg)("p",{parentName:"admonition"},"\u6ce8\u610f\u4e8b\u9879"),(0,t.yg)("ul",{parentName:"admonition"},(0,t.yg)("li",{parentName:"ul"},"Decimal256 \u7c7b\u578b\u5bf9\u4e8e\u8ba1\u7b97 CPU \u7684\u6d88\u8017\u66f4\u9ad8\uff0c\u56e0\u6b64\u5728\u6027\u80fd\u4e0a\u4f1a\u6709\u4e00\u4e9b\u635f\u8017\u3002"))),(0,t.yg)("h3",{id:"\u4efb\u52a1\u8c03\u5ea6-job-scheduler"},"\u4efb\u52a1\u8c03\u5ea6 Job Scheduler"),(0,t.yg)("p",null,"\u540c\u793e\u533a\u7528\u6237\u591a\u6b21\u4ea4\u6d41\u4e2d\uff0c\u6211\u4eec\u53d1\u73b0\u8bb8\u591a\u573a\u666f\u4e0b\u7528\u6237\u4f7f\u7528 Apache Doris \u65f6\u90fd\u5b58\u5728\u5b9a\u65f6\u8c03\u5ea6\u7684\u9700\u6c42\uff0c\u4f8b\u5982\uff1a"),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"\u5468\u671f\u6027\u7684 Backup\uff1b")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"\u8fc7\u671f\u6570\u636e\u5b9a\u65f6\u6e05\u7406\uff1b")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"\u5468\u671f\u6027\u7684\u5bfc\u5165\u4efb\u52a1\uff0c\u5982\u5b9a\u65f6\u901a\u8fc7 Catalog \u7684\u65b9\u5f0f\u53bb\u8fdb\u884c\u589e\u91cf\u6216\u5168\u91cf\u6570\u636e\u540c\u6b65\uff1b")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"\u5b9a\u671f ETL\uff0c\u5982\u90e8\u5206\u7528\u6237\u5b9a\u671f\u4ece\u5bbd\u8868\u4e2d Load \u6570\u636e\u81f3\u6307\u5b9a\u8868\u3001\u4ece\u660e\u7ec6\u8868\u4e2d\u5b9a\u65f6\u62c9\u53d6\u6570\u636e\u5b58\u81f3\u805a\u5408\u8868\u3001ODS \u5c42\u8868\u5b9a\u65f6\u6253\u5bbd\u5e76\u5199\u5165\u539f\u6709\u5bbd\u8868\u66f4\u65b0\uff1b"))),(0,t.yg)("p",null,"\u5c3d\u7ba1\u8bf8\u5982 Airflow\u3001DolphinScheduler \u7b49\u53ef\u4f9b\u9009\u62e9\u7684\u5916\u90e8\u8c03\u5ea6\u7cfb\u7edf\u975e\u5e38\u591a\uff0c\u4f46\u4ecd\u9762\u4e34\u4e00\u81f4\u6027\u7684\u95ee\u9898\u2014\u2014\u5728\u6781\u7aef\u60c5\u51b5\u4e0b\uff0c\u5916\u90e8\u8c03\u5ea6\u7cfb\u7edf\u89e6\u53d1 Doris \u5bfc\u5165\u4efb\u52a1\u5e76\u6267\u884c\u6210\u529f\uff0c\u56e0\u610f\u5916\u60c5\u51b5\u5ffd\u7136\u5b95\u673a\u65f6\uff0c\u5916\u90e8\u8c03\u5ea6\u7cfb\u7edf\u65e0\u6cd5\u6b63\u786e\u83b7\u53d6\u6267\u884c\u7ed3\u679c\uff0c\u4f1a\u8ba4\u4e3a\u6b64\u6b21\u8c03\u5ea6\u5931\u8d25\uff0c\u5bfc\u81f4\u89e6\u53d1\u8c03\u5ea6\u7cfb\u7edf\u7684\u5bb9\u9519\u673a\u5236\uff0c\u901a\u5e38\u662f\u91cd\u8bd5\u6216\u8005\u76f4\u63a5\u5931\u8d25\u3002\u800c\u65e0\u8bba\u91c7\u7528\u54ea\u79cd\u7b56\u7565\uff0c\u6700\u7ec8\u90fd\u4f1a\u5bfc\u81f4\u4ee5\u4e0b\u51e0\u4e2a\u60c5\u51b5\u53d1\u751f\uff1a"),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},(0,t.yg)("strong",{parentName:"p"},"\u8d44\u6e90\u6d6a\u8d39"),"\uff1a\u7531\u4e8e\u8c03\u5ea6\u7cfb\u7edf\u8bef\u8ba4\u4e3a\u4efb\u52a1\u5931\u8d25\uff0c\u53ef\u80fd\u4f1a\u91cd\u65b0\u8c03\u5ea6\u6267\u884c\u5df2\u7ecf\u6210\u529f\u7684\u4efb\u52a1\uff0c\u5bfc\u81f4\u4e0d\u5fc5\u8981\u7684\u8d44\u6e90\u6d88\u8017\u3002")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},(0,t.yg)("strong",{parentName:"p"},"\u6570\u636e\u91cd\u590d\u6216\u4e22\u5931"),"\uff1a\u5982\u679c\u8c03\u5ea6\u7cfb\u7edf\u9009\u62e9\u91cd\u8bd5\u5bfc\u5165\u4efb\u52a1\uff0c\u53ef\u80fd\u5bfc\u81f4\u6570\u636e\u91cd\u590d\u5bfc\u5165\uff0c\u9020\u6210\u6570\u636e\u5197\u4f59\u548c\u4e0d\u4e00\u81f4\u3002\u53e6\u4e00\u65b9\u9762\uff0c\u5982\u679c\u8c03\u5ea6\u7cfb\u7edf\u76f4\u63a5\u6807\u8bb0\u4efb\u52a1\u4e3a\u5931\u8d25\uff0c\u53ef\u80fd\u5bfc\u81f4\u5b9e\u9645\u5df2\u6210\u529f\u5bfc\u5165\u7684\u6570\u636e\u88ab\u5ffd\u7565\u6216\u4e22\u5931\u3002")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},(0,t.yg)("strong",{parentName:"p"},"\u65f6\u95f4\u5ef6\u8bef"),"\uff1a\u7531\u4e8e\u8c03\u5ea6\u7cfb\u7edf\u7684\u5bb9\u9519\u673a\u5236\u88ab\u89e6\u53d1\uff0c\u53ef\u80fd\u9700\u8981\u8fdb\u884c\u989d\u5916\u7684\u4efb\u52a1\u8c03\u5ea6\u548c\u91cd\u8bd5\uff0c\u5bfc\u81f4\u6574\u4f53\u6570\u636e\u5904\u7406\u65f6\u95f4\u5ef6\u957f\uff0c\u5f71\u54cd\u4e1a\u52a1\u6548\u7387\u548c\u54cd\u5e94\u901f\u5ea6\u3002")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},(0,t.yg)("strong",{parentName:"p"},"\u7cfb\u7edf\u7a33\u5b9a\u6027\u4e0b\u964d"),"\uff1a\u9891\u7e41\u7684\u91cd\u8bd5\u6216\u76f4\u63a5\u5931\u8d25\u53ef\u80fd\u5bfc\u81f4\u8c03\u5ea6\u7cfb\u7edf\u548c Doris \u7684\u8d1f\u8f7d\u589e\u52a0\uff0c\u8fdb\u800c\u5f71\u54cd\u7cfb\u7edf\u7684\u7a33\u5b9a\u6027\u548c\u6027\u80fd\u3002"))),(0,t.yg)("p",null,"\u56e0\u6b64\u6211\u4eec\u5728 Apache Doris 2.1 \u7248\u672c\u4e2d\u5f15\u5165\u4e86 Job Scheduler \u529f\u80fd\u5e76\u5177\u5907\u4e86\u81ea\u884c\u4efb\u52a1\u8c03\u5ea6\u7684\u80fd\u529b\u3002Doris Job Scheduler \u662f\u6839\u636e\u65e2\u5b9a\u8ba1\u5212\u8fd0\u884c\u7684\u4efb\u52a1\uff0c\u7528\u4e8e\u5728\u7279\u5b9a\u65f6\u95f4\u6216\u6307\u5b9a\u65f6\u95f4\u95f4\u9694\u89e6\u53d1\u9884\u5b9a\u4e49\u7684\u64cd\u4f5c\uff0c\u4ece\u800c\u5e2e\u52a9\u6211\u4eec\u81ea\u52a8\u6267\u884c\u4e00\u4e9b\u4efb\u52a1\u3002\u4ece\u529f\u80fd\u4e0a\u6765\u8bb2\uff0c\u5b83\u7c7b\u4f3c\u4e8e\u64cd\u4f5c\u7cfb\u7edf\u4e0a\u7684\u5b9a\u65f6\u4efb\u52a1\uff08\u5982\uff1aLinux \u4e2d\u7684 cron\u3001Windows \u4e2d\u7684\u8ba1\u5212\u4efb\u52a1\uff09\uff0c\u4f46 Doris \u7684 Job \u8c03\u5ea6\u53ef\u4ee5\u7cbe\u786e\u5230\u79d2\u7ea7\u3002\u5bf9\u4e8e\u5bfc\u5165\u573a\u666f\uff0c\u6211\u4eec\u80fd\u591f\u505a\u5230\u5b8c\u5168\u7684\u4e00\u81f4\u6027\u4fdd\u969c\u3002\u9664\u6b64\u4e4b\u5916\uff0cDoris \u5185\u7f6e\u7684 Jon Scheduler \u8fd8\u5177\u6709\u4ee5\u4e0b\u7279\u70b9\uff1a"),(0,t.yg)("ol",null,(0,t.yg)("li",{parentName:"ol"},(0,t.yg)("p",{parentName:"li"},(0,t.yg)("strong",{parentName:"p"},"\u9ad8\u6548\u8c03\u5ea6"),"\uff1aJob Scheduler \u53ef\u4ee5\u5728\u6307\u5b9a\u7684\u65f6\u95f4\u95f4\u9694\u5185\u5b89\u6392\u4efb\u52a1\u548c\u4e8b\u4ef6\uff0c\u786e\u4fdd\u6570\u636e\u5904\u7406\u7684\u9ad8\u6548\u6027\u3002\u91c7\u7528\u65f6\u95f4\u8f6e\u7b97\u6cd5\u4fdd\u8bc1\u4e8b\u4ef6\u80fd\u591f\u7cbe\u51c6\u505a\u5230\u79d2\u7ea7\u89e6\u53d1\u3002")),(0,t.yg)("li",{parentName:"ol"},(0,t.yg)("p",{parentName:"li"},(0,t.yg)("strong",{parentName:"p"},"\u7075\u6d3b\u8c03\u5ea6"),"\uff1aJob Scheduler \u63d0\u4f9b\u4e86\u591a\u79cd\u8c03\u5ea6\u9009\u9879\uff0c\u5982\u6309 \u5206\u3001\u5c0f\u65f6\u3001\u5929\u6216\u5468\u7684\u95f4\u9694\u8fdb\u884c\u8c03\u5ea6\uff0c\u540c\u65f6\u652f\u6301\u4e00\u6b21\u6027\u8c03\u5ea6\u4ee5\u53ca\u5faa\u73af\uff08\u5468\u671f\uff09\u4e8b\u4ef6\u8c03\u5ea6\uff0c\u5e76\u4e14\u5468\u671f\u8c03\u5ea6\u4e5f\u53ef\u4ee5\u6307\u5b9a\u5f00\u59cb\u65f6\u95f4\u3001\u7ed3\u675f\u65f6\u95f4\u3002")),(0,t.yg)("li",{parentName:"ol"},(0,t.yg)("p",{parentName:"li"},(0,t.yg)("strong",{parentName:"p"},"\u4e8b\u4ef6\u6c60\u548c\u9ad8\u6027\u80fd\u5904\u7406\u961f\u5217"),"\uff1aJob Scheduler \u91c7\u7528 Disruptor \u5b9e\u73b0\u9ad8\u6027\u80fd\u7684\u751f\u4ea7\u6d88\u8d39\u8005\u6a21\u578b\uff0c\u6700\u5927\u53ef\u80fd\u7684\u907f\u514d\u4efb\u52a1\u6267\u884c\u8fc7\u8f7d\u3002")),(0,t.yg)("li",{parentName:"ol"},(0,t.yg)("p",{parentName:"li"},(0,t.yg)("strong",{parentName:"p"},"\u8c03\u5ea6\u8bb0\u5f55\u53ef\u8ffd\u6eaf"),"\uff1aJob Scheduler \u4f1a\u5b58\u50a8\u6700\u65b0\u7684 Task \u6267\u884c\u8bb0\u5f55\uff08\u53ef\u914d\u7f6e\uff09\uff0c\u901a\u8fc7\u7b80\u5355\u7684\u547d\u4ee4\u5373\u53ef\u67e5\u770b\u4efb\u52a1\u6267\u884c\u8bb0\u5f55\uff0c\u786e\u4fdd\u8fc7\u7a0b\u53ef\u8ffd\u6eaf\u3002")),(0,t.yg)("li",{parentName:"ol"},(0,t.yg)("p",{parentName:"li"},(0,t.yg)("strong",{parentName:"p"},"\u9ad8\u53ef\u7528"),"\uff1a\u4f9d\u6258\u4e8e Doris \u81ea\u8eab\u7684\u9ad8\u53ef\u7528\u673a\u5236\uff0cJob \u53ef\u4ee5\u5f88\u8f7b\u677e\u7684\u505a\u5230\u81ea\u6062\u590d\uff0c\u9ad8\u53ef\u7528\u3002"))),(0,t.yg)("p",null,"\u5728\u6b64\u6211\u4eec\u521b\u5efa\u4e00\u4e2a\u5b9a\u65f6\u8c03\u5ea6\u4efb\u52a1\u4f5c\u4e3a\u793a\u4f8b\uff1a"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-SQL"},"// \u4ece  2023-11-17 \u8d77\u6bcf\u5929\u5b9a\u65f6\u6267\u884c insert\u8bed\u53e5\u76f4\u5230 2038 \u5e74\u7ed3\u675f\nCREATE\nJOB e_daily\n    ON SCHEDULE\n      EVERY 1 DAY \n      STARTS '2023-11-17 23:59:00'\n      ENDS '2038-01-19 03:14:07'\n    COMMENT 'Saves total number of sessions'\n    DO\n        INSERT INTO site_activity.totals (time, total)\n        SELECT CURRENT_TIMESTAMP, COUNT(*)\n        FROM site_activity.sessions where create_time >=  days_add(now(),-1) ;\n")),(0,t.yg)("admonition",{title:"\u6ce8\u610f\u4e8b\u9879",type:"caution"},(0,t.yg)("p",{parentName:"admonition"},"\u5f53\u524d Job Scheduler \u4ec5\u652f\u6301 Insert \u5185\u8868\uff0c\u53c2\u8003\u6587\u6863\uff1a",(0,t.yg)("a",{parentName:"p",href:"https://doris.apache.org/zh-CN/docs/sql-manual/sql-statements/Data-Definition-Statements/Create/CREATE-JOB.md"},"CREATE-JOB"))),(0,t.yg)("h2",{id:"behavior-changed"},"Behavior Changed"),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"Unique Key \u6a21\u578b\u9ed8\u8ba4\u5f00\u542f Merge On Write \u5199\u65f6\u5408\u5e76\uff0c\u65b0\u521b\u5efa\u7684 Unique Key \u6a21\u578b\u7684\u8868\u5c06\u81ea\u52a8\u8bbe\u7f6e ",(0,t.yg)("inlineCode",{parentName:"p"},"enable_unique_key_merge_on_write=true"),"\u3002")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"\u5012\u6392\u7d22\u5f15 Invert Index \u7ecf\u8fc7\u4e00\u5e74\u591a\u65f6\u95f4\u7684\u6253\u78e8\uff0c\u5df2\u5b9e\u73b0\u4e86\u5bf9\u539f\u672c\u7684\u4f4d\u56fe\u7d22\u5f15 Bitmap Index \u529f\u80fd\u548c\u573a\u666f\u7684\u5168\u8986\u76d6\uff0c\u4e14\u529f\u80fd\u4e0a\u548c\u6027\u80fd\u4e0a\u90fd\u5927\u5e45\u4f18\u4e8e\u539f\u672c\u7684\u4f4d\u56fe\u7d22\u5f15 Bitmap Index\uff0c\u56e0\u6b64\u4ece Apache Doris 2.1 \u7248\u672c\u8d77\uff0c\u6211\u4eec\u5c06\u9ed8\u8ba4\u505c\u6b62\u5bf9\u4f4d\u56fe\u7d22\u5f15 Bitmap Index \u7684\u652f\u6301\uff0c\u5df2\u7ecf\u521b\u5efa\u7684\u4f4d\u56fe\u7d22\u5f15\u4fdd\u6301\u4e0d\u53d8\u5c06\u7ee7\u7eed\u751f\u6548\uff0c\u4e0d\u5141\u8bb8\u521b\u5efa\u65b0\u7684\u4f4d\u56fe\u7d22\u5f15\uff0c\u5728\u672a\u6765\u6211\u4eec\u5c06\u4f1a\u79fb\u9664\u4f4d\u56fe\u7d22\u5f15\u7684\u76f8\u5173\u4ee3\u7801\u3002")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},(0,t.yg)("inlineCode",{parentName:"p"},"cpu_resource_limit"),"\u4e0d\u518d\u652f\u6301\uff0c\u5176\u672c\u8eab\u662f\u9650\u5236 BE \u4e0a Scanner \u7ebf\u7a0b\u6570\u76ee\u7684\u529f\u80fd\uff0c\u800c Workload Group \u4e5f\u80fd\u652f\u6301\u8bbe\u7f6e BE Scanner \u7ebf\u7a0b\u6570\u76ee\uff0c\u6240\u4ee5\u5df2\u8bbe\u7f6e\u7684 ",(0,t.yg)("inlineCode",{parentName:"p"},"cpu_resource_limit "),"\u5c06\u5931\u6548\u3002")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"Segment Compaction \u4e3b\u8981\u5e94\u5bf9\u5355\u6279\u6b21\u5927\u6570\u636e\u91cf\u7684\u5bfc\u5165\uff0c\u53ef\u4ee5\u5728\u540c\u4e00\u6279\u6b21\u6570\u636e\u4e2d\u8fdb\u884c\u591a\u4e2a Segment \u7684 Compaction \u64cd\u4f5c\uff0c\u5728 2.1 \u7248\u672c\u5f00\u59cb Segment Compaction \u5c06\u9ed8\u8ba4\u5f00\u542f\uff0c",(0,t.yg)("inlineCode",{parentName:"p"},"enable_segcompaction")," \u9ed8\u8ba4\u503c\u8bbe\u7f6e\u4e3a True\u3002")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"Audit Log \u63d2\u4ef6"),(0,t.yg)("ul",{parentName:"li"},(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"\u4ece 2.1 \u7248\u672c\u5f00\u59cb\uff0cApache Doris \u5f00\u59cb\u5185\u7f6e Audit Log \u5ba1\u8ba1\u65e5\u5fd7\u63d2\u4ef6\uff0c\u7528\u6237\u53ea\u9700\u901a\u8fc7\u8bbe\u7f6e\u5168\u5c40\u53d8\u91cf ",(0,t.yg)("inlineCode",{parentName:"p"},"enable_audit_plugin")," \u5f00\u542f\u6216\u5173\u95ed\u5ba1\u8ba1\u65e5\u5fd7\u529f\u80fd\u3002")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"\u5bf9\u4e8e\u4e4b\u524d\u5df2\u7ecf\u5b89\u88c5\u8fc7\u5ba1\u8ba1\u65e5\u5fd7\u63d2\u4ef6\u7684\u7528\u6237\uff0c\u5347\u7ea7\u540e\u53ef\u4ee5\u7ee7\u7eed\u4f7f\u7528\u539f\u6709\u63d2\u4ef6\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7 uninstall \u547d\u4ee4\u5378\u8f7d\u539f\u6709\u63d2\u4ef6\u540e\uff0c\u4f7f\u7528\u65b0\u7684\u63d2\u4ef6\u3002\u4f46\u6ce8\u610f\uff0c\u5207\u6362\u63d2\u4ef6\u540e\uff0c\u5ba1\u8ba1\u65e5\u5fd7\u8868\u4e5f\u5c06\u5207\u6362\u5230\u65b0\u7684\u8868\u4e2d\u3002")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"\u5177\u4f53\u53ef\u53c2\u9605\uff1a",(0,t.yg)("a",{parentName:"p",href:"https://doris.apache.org/zh-CN/docs/admin-manual/audit-plugin.md"},"\u5ba1\u8ba1\u65e5\u5fd7\u63d2\u4ef6")))))),(0,t.yg)("h2",{id:"\u81f4\u8c22"},"\u81f4\u8c22"),(0,t.yg)("p",null,"467887319, 924060929, acnot, airborne12, AKIRA, alan_rodriguez, AlexYue, allenhooo, amory, amory, AshinGau, beat4ocean, BePPPower, bigben0204, bingquanzhao, BirdAmosBird, BiteTheDDDDt, bobhan1, caiconghui, camby, camby, CanGuan, caoliang-web, catpineapple, Centurybbx, chen, ChengDaqi2023, ChenyangSunChenyang, Chester, ChinaYiGuan, ChouGavinChou, chunping, colagy, CSTGluigi, czzmmc, daidai, dalong, dataroaring, DeadlineFen, DeadlineFen, deadlinefen, deardeng, didiaode18, DongLiang-0, dong-shuai, Doris-Extras, Dragonliu2018, DrogonJackDrogon, DuanXujianDuan, DuRipeng, dutyu, echo-dundun, ElvinWei, englefly, Euporia, feelshana, feifeifeimoon, feiniaofeiafei, felixwluo, figurant, flynn, fornaix, FreeOnePlus, Gabriel39, gitccl, gnehil, GoGoWen, gohalo, guardcrystal, hammer, HappenLee, HB, hechao, HelgeLarsHelge, herry2038, HeZhangJianHe, HHoflittlefish777, HonestManXin, hongkun-Shao, HowardQin, hqx871, httpshirley, htyoung, huanghaibin, HuJerryHu, HuZhiyuHu, Hyman-zhao, i78086, irenesrl, ixzc, jacktengg, jacktengg, jackwener, jayhua, Jeffrey, jiafeng.zhang, Jibing-Li, JingDas, julic20s, kaijchen, kaka11chen, KassieZ, kindred77, KirsCalvinKirs, KirsCalvinKirs, kkop, koarz, LemonLiTree, LHG41278, liaoxin01, LiBinfeng-01, LiChuangLi, LiDongyangLi, Lightman, lihangyu, lihuigang, LingAdonisLing, liugddx, LiuGuangdongLiu, LiuHongLiu, liuJiwenliu, LiuLijiaLiu, lsy3993, LuGuangmingLu, LuoMetaLuo, luozenglin, Luwei, Luzhijing, lxliyou001, Ma1oneZhang, mch_ucchi, Miaohongkai, morningman, morrySnow, Mryange, mymeiyi, nanfeng, nanfeng, Nitin-Kashyap, PaiVallishPai, Petrichor, plat1ko, py023, q763562998, qidaye, QiHouliangQi, ranxiang327, realize096, rohitrs1983, sdhzwc, seawinde, seuhezhiqiang, seuhezhiqiang, shee, shuke987, shysnow, songguangfan, Stalary, starocean999, SunChenyangSun, sunny, SWJTU-ZhangLei, TangSiyang2001, Tanya-W, taoxutao, Uniqueyou, vhwzIs, walter, walter, wangbo, Wanghuan, wangqt, wangtao, wangtianyi2004, wenluowen, whuxingying, wsjz, wudi, wudongliang, wuwenchihdu, wyx123654, xiangran0327, Xiaocc, XiaoChangmingXiao, xiaokang, XieJiann, Xinxing, xiongjx, xuefengze, xueweizhang, XueYuhai, XuJianxu, xuke-hat, xy, xy720, xyfsjq, xzj7019, yagagagaga, yangshijie, YangYAN, yiguolei, yiguolei, yimeng, YinShaowenYin, Yoko, yongjinhou, ytwp, yuanyuan8983, yujian, yujun777, Yukang-Lian, Yulei-Yang, yuxuan-luo, zclllyybb, ZenoYang, zfr95, zgxme, zhangdong, zhangguoqiang, zhangstar333, zhangstar333, zhangy5, ZhangYu0123, zhannngchen, ZhaoLongZhao, zhaoshuo, zhengyu, zhiqqqq, ZhongJinHacker, ZhuArmandoZhu, zlw5307, ZouXinyiZou, zxealous, zy-kkk, zzwwhh, zzzxl1993, zzzzzzzs"))}m.isMDXComponent=!0},505219:(e,a,n)=>{n.d(a,{A:()=>l});const l=n.p+"assets/images/2.1-Doris-TPC-DS-best-performance-196cfa22d1783b3e3a367bed4e300dd1.png"},143802:(e,a,n)=>{n.d(a,{A:()=>l});const l=n.p+"assets/images/2.1-comparied-to-Json-2-c7606d1a83dc41edf2ccb6e5b050d90b.png"},517431:(e,a,n)=>{n.d(a,{A:()=>l});const l=n.p+"assets/images/2.1-comparied-to-Json-5fe5e1dea3cfefdc4d7a456edb28dd9e.png"},811981:(e,a,n)=>{n.d(a,{A:()=>l});const l=n.p+"assets/images/2.1-doris-INSERT-INTO-SELECT-a423f62c84e5ee2112933fcb2c8e6f21.png"},209381:(e,a,n)=>{n.d(a,{A:()=>l});const l=n.p+"assets/images/2.1-doris-TPC-DS-326352a5581f27b587ff6e7d451c0ee4.png"},638167:(e,a,n)=>{n.d(a,{A:()=>l});const l=n.p+"assets/images/2.1-doris-arrow-flight-sql-f8707eb6a387ed03a83fd20c373e810a.png"},453108:(e,a,n)=>{n.d(a,{A:()=>l});const l=n.p+"assets/images/2.1-doris-arrow-flight-3585c9cac786689f50ad42c8b76d3b8e.png"},405098:(e,a,n)=>{n.d(a,{A:()=>l});const l=n.p+"assets/images/2.1-doris-clickbench-tpch-85fffd14ee5ac4bef3cfc65074044bdc.png"},132410:(e,a,n)=>{n.d(a,{A:()=>l});const l=n.p+"assets/images/2.1-doris-group-commit-2-4bc76d5f1b65ab702ea7156c1eab24a4.png"},273463:(e,a,n)=>{n.d(a,{A:()=>l});const l=n.p+"assets/images/2.1-doris-group-commit-d6b8b226770cf1fdb5836854ed595e49.png"},770089:(e,a,n)=>{n.d(a,{A:()=>l});const l=n.p+"assets/images/2.1-doris-local-shuffle-6f7365d5417f254f369c691827d034eb.png"},726408:(e,a,n)=>{n.d(a,{A:()=>l});const l=n.p+"assets/images/2.1-doris-parallel-adaptive-scan-ac95c58d6afe58c11121e37ee355685e.png"},378657:(e,a,n)=>{n.d(a,{A:()=>l});const l=n.p+"assets/images/2.1-insert-into-table-a67da860f18aaceefabc007c5bf60705.png"}}]);