"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([[401010],{15680:(e,n,a)=>{a.d(n,{xA:()=>m,yg:()=>u});var r=a(296540);function t(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function l(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,r)}return a}function o(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?l(Object(a),!0).forEach((function(n){t(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}function p(e,n){if(null==e)return{};var a,r,t=function(e,n){if(null==e)return{};var a,r,t={},l=Object.keys(e);for(r=0;r<l.length;r++)a=l[r],n.indexOf(a)>=0||(t[a]=e[a]);return t}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)a=l[r],n.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(t[a]=e[a])}return t}var s=r.createContext({}),i=function(e){var n=r.useContext(s),a=n;return e&&(a="function"==typeof e?e(n):o(o({},n),e)),a},m=function(e){var n=i(e.components);return r.createElement(s.Provider,{value:n},e.children)},d="mdxType",y={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},g=r.forwardRef((function(e,n){var a=e.components,t=e.mdxType,l=e.originalType,s=e.parentName,m=p(e,["components","mdxType","originalType","parentName"]),d=i(a),g=t,u=d["".concat(s,".").concat(g)]||d[g]||y[g]||l;return a?r.createElement(u,o(o({ref:n},m),{},{components:a})):r.createElement(u,o({ref:n},m))}));function u(e,n){var a=arguments,t=n&&n.mdxType;if("string"==typeof e||t){var l=a.length,o=new Array(l);o[0]=g;var p={};for(var s in n)hasOwnProperty.call(n,s)&&(p[s]=n[s]);p.originalType=e,p[d]="string"==typeof e?e:t,o[1]=p;for(var i=2;i<l;i++)o[i]=a[i];return r.createElement.apply(null,o)}return r.createElement.apply(null,a)}g.displayName="MDXCreateElement"},517105:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>s,contentTitle:()=>o,default:()=>y,frontMatter:()=>l,metadata:()=>p,toc:()=>i});var r=a(58168),t=(a(296540),a(15680));const l={title:"Broker Load",language:"zh-CN"},o=void 0,p={unversionedId:"data-operate/import/import-way/broker-load-manual",id:"version-3.0/data-operate/import/import-way/broker-load-manual",title:"Broker Load",description:"\x3c!--",source:"@site/i18n/zh-CN/docusaurus-plugin-content-docs/version-3.0/data-operate/import/import-way/broker-load-manual.md",sourceDirName:"data-operate/import/import-way",slug:"/data-operate/import/import-way/broker-load-manual",permalink:"/zh-CN/docs/3.0/data-operate/import/import-way/broker-load-manual",draft:!1,tags:[],version:"3.0",frontMatter:{title:"Broker Load",language:"zh-CN"},sidebar:"docs",previous:{title:"Stream Load",permalink:"/zh-CN/docs/3.0/data-operate/import/import-way/stream-load-manual"},next:{title:"Routine Load",permalink:"/zh-CN/docs/3.0/data-operate/import/import-way/routine-load-manual"}},s={},i=[{value:"\u4e3a\u4ec0\u4e48\u5f15\u5165 Broker Load\uff1f",id:"\u4e3a\u4ec0\u4e48\u5f15\u5165-broker-load",level:2},{value:"\u57fa\u672c\u539f\u7406",id:"\u57fa\u672c\u539f\u7406",level:2},{value:"\u5bfc\u5165\u8bed\u6cd5",id:"\u5bfc\u5165\u8bed\u6cd5",level:2},{value:"\u67e5\u770b\u5bfc\u5165\u72b6\u6001",id:"\u67e5\u770b\u5bfc\u5165\u72b6\u6001",level:2},{value:"\u53d6\u6d88\u5bfc\u5165",id:"\u53d6\u6d88\u5bfc\u5165",level:2},{value:"HDFS Load",id:"hdfs-load",level:2},{value:"\u7b80\u5355\u8ba4\u8bc1",id:"\u7b80\u5355\u8ba4\u8bc1",level:3},{value:"Kerberos \u8ba4\u8bc1",id:"kerberos-\u8ba4\u8bc1",level:3},{value:"HDFS HA \u6a21\u5f0f",id:"hdfs-ha-\u6a21\u5f0f",level:3},{value:"\u5bfc\u5165\u793a\u4f8b",id:"\u5bfc\u5165\u793a\u4f8b",level:3},{value:"S3 Load",id:"s3-load",level:2},{value:"\u51c6\u5907\u5de5\u4f5c",id:"\u51c6\u5907\u5de5\u4f5c",level:3},{value:"\u5bfc\u5165\u793a\u4f8b",id:"\u5bfc\u5165\u793a\u4f8b-1",level:3},{value:"\u5e38\u89c1\u95ee\u9898",id:"\u5e38\u89c1\u95ee\u9898",level:3},{value:"\u5176\u4ed6 Broker \u5bfc\u5165",id:"\u5176\u4ed6-broker-\u5bfc\u5165",level:2},{value:"Broker \u4fe1\u606f",id:"broker-\u4fe1\u606f",level:3},{value:"Broker \u4e3e\u4f8b",id:"broker-\u4e3e\u4f8b",level:3},{value:"\u76f8\u5173\u914d\u7f6e",id:"\u76f8\u5173\u914d\u7f6e",level:2},{value:"\u5e38\u89c1\u95ee\u9898",id:"\u5e38\u89c1\u95ee\u9898-1",level:2},{value:"\u66f4\u591a\u5e2e\u52a9",id:"\u66f4\u591a\u5e2e\u52a9",level:2}],m={toc:i},d="wrapper";function y(e){let{components:n,...l}=e;return(0,t.yg)(d,(0,r.A)({},m,l,{components:n,mdxType:"MDXLayout"}),(0,t.yg)("h2",{id:"\u4e3a\u4ec0\u4e48\u5f15\u5165-broker-load"},"\u4e3a\u4ec0\u4e48\u5f15\u5165 Broker Load\uff1f"),(0,t.yg)("p",null,"Stream Load \u662f\u4e00\u79cd\u63a8\u7684\u65b9\u5f0f\uff0c\u5373\u5bfc\u5165\u7684\u6570\u636e\u4f9d\u9760\u5ba2\u6237\u7aef\u8bfb\u53d6\uff0c\u5e76\u63a8\u9001\u5230 Doris\u3002Broker Load \u5219\u662f\u5c06\u5bfc\u5165\u8bf7\u6c42\u53d1\u9001\u7ed9 Doris\uff0c\u6709 Doris \u4e3b\u52a8\u62c9\u53d6\u6570\u636e\uff0c\u6240\u4ee5\u5982\u679c\u6570\u636e\u5b58\u50a8\u5728\u7c7b\u4f3c HDFS \u6216\u8005 \u5bf9\u8c61\u5b58\u50a8\u4e2d\uff0c\u5219\u4f7f\u7528 Broker Load \u662f\u6700\u65b9\u4fbf\u7684\u3002\u8fd9\u6837\uff0c\u6570\u636e\u5c31\u4e0d\u9700\u8981\u7ecf\u8fc7\u5ba2\u6237\u7aef\uff0c\u800c\u6709 Doris \u76f4\u63a5\u8bfb\u53d6\u5bfc\u5165\u3002"),(0,t.yg)("p",null,"\u4ece HDFS \u6216\u8005 S3 \u76f4\u63a5\u8bfb\u53d6\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7 ",(0,t.yg)("a",{parentName:"p",href:"../../../lakehouse/file"},"\u6e56\u4ed3\u4e00\u4f53/TVF")," \u4e2d\u7684 HDFS TVF \u6216\u8005 S3 TVF \u8fdb\u884c\u5bfc\u5165\u3002\u57fa\u4e8e TVF \u7684 Insert Into \u5f53\u524d\u4e3a\u540c\u6b65\u5bfc\u5165\uff0cBroker Load \u662f\u4e00\u4e2a\u5f02\u6b65\u7684\u5bfc\u5165\u65b9\u5f0f\u3002"),(0,t.yg)("p",null,"Broker Load \u9002\u5408\u6e90\u6570\u636e\u5b58\u50a8\u5728\u8fdc\u7a0b\u5b58\u50a8\u7cfb\u7edf\uff0c\u6bd4\u5982 HDFS\uff0c\u5e76\u4e14\u6570\u636e\u91cf\u6bd4\u8f83\u5927\u7684\u573a\u666f\u3002"),(0,t.yg)("h2",{id:"\u57fa\u672c\u539f\u7406"},"\u57fa\u672c\u539f\u7406"),(0,t.yg)("p",null,"\u7528\u6237\u5728\u63d0\u4ea4\u5bfc\u5165\u4efb\u52a1\u540e\uff0cFE \u4f1a\u751f\u6210\u5bf9\u5e94\u7684 Plan \u5e76\u6839\u636e\u76ee\u524d BE \u7684\u4e2a\u6570\u548c\u6587\u4ef6\u7684\u5927\u5c0f\uff0c\u5c06 Plan \u5206\u7ed9 \u591a\u4e2a BE \u6267\u884c\uff0c\u6bcf\u4e2a BE \u6267\u884c\u4e00\u90e8\u5206\u5bfc\u5165\u6570\u636e\u3002"),(0,t.yg)("p",null,"BE \u5728\u6267\u884c\u7684\u8fc7\u7a0b\u4e2d\u4f1a\u4ece Broker \u62c9\u53d6\u6570\u636e\uff0c\u5728\u5bf9\u6570\u636e transform \u4e4b\u540e\u5c06\u6570\u636e\u5bfc\u5165\u7cfb\u7edf\u3002\u6240\u6709 BE \u5747\u5b8c\u6210\u5bfc\u5165\uff0c\u7531 FE \u6700\u7ec8\u51b3\u5b9a\u5bfc\u5165\u662f\u5426\u6210\u529f\u3002"),(0,t.yg)("p",null,(0,t.yg)("img",{alt:"Broker Load \u57fa\u672c\u539f\u7406",src:a(241102).A,width:"2560",height:"1376"})),(0,t.yg)("p",null,"\u4ece\u4e0a\u56fe\u4e2d\u53ef\u4ee5\u770b\u5230\uff0cBE \u4f1a\u4f9d\u8d56 Broker \u8fdb\u7a0b\u6765\u8bfb\u53d6\u76f8\u5e94\u8fdc\u7a0b\u5b58\u50a8\u7cfb\u7edf\u7684\u6570\u636e\u3002\u4e4b\u6240\u4ee5\u5f15\u5165 Broker \u8fdb\u7a0b\uff0c\u4e3b\u8981\u662f\u7528\u6765\u9488\u5bf9\u4e0d\u540c\u7684\u8fdc\u7a0b\u5b58\u50a8\u7cfb\u7edf\uff0c\u7528\u6237\u53ef\u4ee5\u6309\u7167 Broker \u8fdb\u7a0b\u7684\u6807\u51c6\u5f00\u53d1\u5176\u76f8\u5e94\u7684 Broker \u8fdb\u7a0b\uff0cBroker \u8fdb\u7a0b\u53ef\u4ee5\u4f7f\u7528 Java \u7a0b\u5e8f\u5f00\u53d1\uff0c\u66f4\u597d\u7684\u517c\u5bb9\u5927\u6570\u636e\u751f\u6001\u4e2d\u7684\u5404\u7c7b\u5b58\u50a8\u7cfb\u7edf\u3002\u7531\u4e8e broker \u8fdb\u7a0b\u548c BE \u8fdb\u7a0b\u7684\u5206\u79bb\uff0c\u4e5f\u786e\u4fdd\u4e86\u4e24\u4e2a\u8fdb\u7a0b\u7684\u9519\u8bef\u9694\u79bb\uff0c\u63d0\u5347 BE \u7684\u7a33\u5b9a\u6027\u3002"),(0,t.yg)("p",null,"\u5f53\u524d BE \u5185\u7f6e\u4e86\u5bf9 HDFS \u548c S3 \u4e24\u4e2a Broker \u7684\u652f\u6301\uff0c\u6240\u4ee5\u5982\u679c\u4ece HDFS \u548c S3 \u4e2d\u5bfc\u5165\u6570\u636e\uff0c\u5219\u4e0d\u9700\u8981\u989d\u5916\u542f\u52a8 Broker \u8fdb\u7a0b\u3002\u5982\u679c\u6709\u81ea\u5df1\u5b9a\u5236\u7684 Broker \u5b9e\u73b0\uff0c\u5219\u9700\u8981\u90e8\u7f72\u76f8\u5e94\u7684 Broker \u8fdb\u7a0b\u3002"),(0,t.yg)("h2",{id:"\u5bfc\u5165\u8bed\u6cd5"},"\u5bfc\u5165\u8bed\u6cd5"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-sql"},'LOAD LABEL load_label\n(\ndata_desc1[, data_desc2, ...]\n)\nWITH [HDFS|S3|BROKER broker_name] \n[broker_properties]\n[load_properties]\n[COMMENT "comments"];\n')),(0,t.yg)("p",null,"\u5177\u4f53\u7684\u4f7f\u7528\u8bed\u6cd5\uff0c\u8bf7\u53c2\u8003 SQL \u624b\u518c\u4e2d\u7684 ",(0,t.yg)("a",{parentName:"p",href:"../../../sql-manual/sql-statements/Data-Manipulation-Statements/Load/BROKER-LOAD"},"Broker Load"),"\u3002"),(0,t.yg)("h2",{id:"\u67e5\u770b\u5bfc\u5165\u72b6\u6001"},"\u67e5\u770b\u5bfc\u5165\u72b6\u6001"),(0,t.yg)("p",null,"Broker load \u662f\u4e00\u4e2a\u5f02\u6b65\u7684\u5bfc\u5165\u65b9\u5f0f\uff0c\u5177\u4f53\u5bfc\u5165\u7ed3\u679c\u53ef\u4ee5\u901a\u8fc7 ",(0,t.yg)("a",{parentName:"p",href:"../../../sql-manual/sql-statements/Show-Statements/SHOW-LOAD"},"SHOW LOAD")," \u547d\u4ee4\u67e5\u770b"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-sql"},'mysql> show load order by createtime desc limit 1\\G;\n*************************** 1. row ***************************\n         JobId: 41326624\n         Label: broker_load_2022_04_15\n         State: FINISHED\n      Progress: ETL:100%; LOAD:100%\n          Type: BROKER\n       EtlInfo: unselected.rows=0; dpp.abnorm.ALL=0; dpp.norm.ALL=27\n      TaskInfo: cluster:N/A; timeout(s):1200; max_filter_ratio:0.1\n      ErrorMsg: NULL\n    CreateTime: 2022-04-01 18:59:06\n  EtlStartTime: 2022-04-01 18:59:11\n EtlFinishTime: 2022-04-01 18:59:11\n LoadStartTime: 2022-04-01 18:59:11\nLoadFinishTime: 2022-04-01 18:59:11\n           URL: NULL\n    JobDetails: {"Unfinished backends":{"5072bde59b74b65-8d2c0ee5b029adc0":[]},"ScannedRows":27,"TaskNumber":1,"All backends":{"5072bde59b74b65-8d2c0ee5b029adc0":[36728051]},"FileNumber":1,"FileSize":5540}\n1 row in set (0.01 sec)\n')),(0,t.yg)("h2",{id:"\u53d6\u6d88\u5bfc\u5165"},"\u53d6\u6d88\u5bfc\u5165"),(0,t.yg)("p",null,"\u5f53 Broker load \u4f5c\u4e1a\u72b6\u6001\u4e0d\u4e3a CANCELLED \u6216 FINISHED \u65f6\uff0c\u53ef\u4ee5\u88ab\u7528\u6237\u624b\u52a8\u53d6\u6d88\u3002\u53d6\u6d88\u65f6\u9700\u8981\u6307\u5b9a\u5f85\u53d6\u6d88\u5bfc\u5165\u4efb\u52a1\u7684 Label\u3002\u53d6\u6d88\u5bfc\u5165\u547d\u4ee4\u8bed\u6cd5\u53ef\u6267\u884c ",(0,t.yg)("a",{parentName:"p",href:"../../../sql-manual/sql-statements/Data-Manipulation-Statements/Load/CANCEL-LOAD"},"CANCEL LOAD")," \u67e5\u770b\u3002"),(0,t.yg)("p",null,"\u4f8b\u5982\uff1a\u64a4\u9500\u6570\u636e\u5e93 DEMO \u4e0a\uff0clabel \u4e3a broker_load_2022_03_23 \u7684\u5bfc\u5165\u4f5c\u4e1a"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-SQL"},'CANCEL LOAD FROM demo WHERE LABEL = "broker_load_2022_03_23";\n')),(0,t.yg)("h2",{id:"hdfs-load"},"HDFS Load"),(0,t.yg)("h3",{id:"\u7b80\u5355\u8ba4\u8bc1"},"\u7b80\u5355\u8ba4\u8bc1"),(0,t.yg)("p",null,"\u7b80\u5355\u8ba4\u8bc1\u5373 Hadoop \u914d\u7f6e ",(0,t.yg)("inlineCode",{parentName:"p"},"hadoop.security.authentication")," \u4e3a ",(0,t.yg)("inlineCode",{parentName:"p"},"simple"),"\u3002"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-Plain"},'(\n    "username" = "user",\n    "password" = ""\n);\n')),(0,t.yg)("p",null,"username \u914d\u7f6e\u4e3a\u8981\u8bbf\u95ee\u7684\u7528\u6237\uff0c\u5bc6\u7801\u7f6e\u7a7a\u5373\u53ef\u3002"),(0,t.yg)("h3",{id:"kerberos-\u8ba4\u8bc1"},"Kerberos \u8ba4\u8bc1"),(0,t.yg)("p",null,"\u8be5\u8ba4\u8bc1\u65b9\u5f0f\u9700\u63d0\u4f9b\u4ee5\u4e0b\u4fe1\u606f\uff1a"),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},(0,t.yg)("inlineCode",{parentName:"p"},"hadoop.security.authentication"),"\uff1a\u6307\u5b9a\u8ba4\u8bc1\u65b9\u5f0f\u4e3a Kerberos\u3002")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},(0,t.yg)("inlineCode",{parentName:"p"},"hadoop.kerberos.principal"),"\uff1a\u6307\u5b9a Kerberos \u7684 principal\u3002")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},(0,t.yg)("inlineCode",{parentName:"p"},"hadoop.kerberos.keytab"),"\uff1a\u6307\u5b9a Kerberos \u7684 keytab \u6587\u4ef6\u8def\u5f84\u3002\u8be5\u6587\u4ef6\u5fc5\u987b\u4e3a Broker \u8fdb\u7a0b\u6240\u5728\u670d\u52a1\u5668\u4e0a\u7684\u6587\u4ef6\u7684\u7edd\u5bf9\u8def\u5f84\u3002\u5e76\u4e14\u53ef\u4ee5\u88ab Broker \u8fdb\u7a0b\u8bbf\u95ee\u3002")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},(0,t.yg)("inlineCode",{parentName:"p"},"kerberos_keytab_content"),"\uff1a\u6307\u5b9a Kerberos \u4e2d keytab \u6587\u4ef6\u5185\u5bb9\u7ecf\u8fc7 base64 \u7f16\u7801\u4e4b\u540e\u7684\u5185\u5bb9\u3002\u8fd9\u4e2a\u8ddf ",(0,t.yg)("inlineCode",{parentName:"p"},"kerberos_keytab")," \u914d\u7f6e\u4e8c\u9009\u4e00\u5373\u53ef\u3002"))),(0,t.yg)("p",null,"\u793a\u4f8b\u5982\u4e0b\uff1a"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-Plain"},'(\n    "hadoop.security.authentication" = "kerberos",\n    "hadoop.kerberos.principal" = "doris@YOUR.COM",\n    "hadoop.kerberos.keytab" = "/home/doris/my.keytab"\n)\n(\n    "hadoop.security.authentication" = "kerberos",\n    "hadoop.kerberos.principal" = "doris@YOUR.COM",\n    "kerberos_keytab_content" = "ASDOWHDLAWIDJHWLDKSALDJSDIWALD"\n)\n')),(0,t.yg)("p",null,"\u91c7\u7528 Kerberos \u8ba4\u8bc1\u65b9\u5f0f\uff0c\u9700\u8981 ",(0,t.yg)("a",{parentName:"p",href:"https://web.mit.edu/kerberos/krb5-1.12/doc/admin/conf_files/krb5_conf.html"},"krb5.conf (opens new window)")," \u6587\u4ef6\uff0ckrb5.conf \u6587\u4ef6\u5305\u542b Kerberos \u7684\u914d\u7f6e\u4fe1\u606f\uff0c\u901a\u5e38\uff0c\u5e94\u8be5\u5c06 krb5.conf \u6587\u4ef6\u5b89\u88c5\u5728\u76ee\u5f55/etc \u4e2d\u3002\u53ef\u4ee5\u901a\u8fc7\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf KRB5_CONFIG \u8986\u76d6\u9ed8\u8ba4\u4f4d\u7f6e\u3002krb5.conf \u6587\u4ef6\u7684\u5185\u5bb9\u793a\u4f8b\u5982\u4e0b\uff1a"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-Plain"},"[libdefaults]\n    default_realm = DORIS.HADOOP\n    default_tkt_enctypes = des3-hmac-sha1 des-cbc-crc\n    default_tgs_enctypes = des3-hmac-sha1 des-cbc-crc\n    dns_lookup_kdc = true\n    dns_lookup_realm = false\n\n[realms]\n    DORIS.HADOOP = {\n        kdc = kerberos-doris.hadoop.service:7005\n    }\n")),(0,t.yg)("h3",{id:"hdfs-ha-\u6a21\u5f0f"},"HDFS HA \u6a21\u5f0f"),(0,t.yg)("p",null,"\u8fd9\u4e2a\u914d\u7f6e\u7528\u4e8e\u8bbf\u95ee\u4ee5 HA \u6a21\u5f0f\u90e8\u7f72\u7684 HDFS \u96c6\u7fa4\u3002"),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},(0,t.yg)("inlineCode",{parentName:"p"},"dfs.nameservices"),'\uff1a\u6307\u5b9a HDFS \u670d\u52a1\u7684\u540d\u5b57\uff0c\u81ea\u5b9a\u4e49\uff0c\u5982\uff1a"dfs.nameservices" = "my_ha"\u3002')),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},(0,t.yg)("inlineCode",{parentName:"p"},"dfs.ha.namenodes.xxx"),"\uff1a\u81ea\u5b9a\u4e49 namenode \u7684\u540d\u5b57\uff0c\u591a\u4e2a\u540d\u5b57\u4ee5\u9017\u53f7\u5206\u9694\u3002\u5176\u4e2d xxx \u4e3a ",(0,t.yg)("inlineCode",{parentName:"p"},"dfs.nameservices"),' \u4e2d\u81ea\u5b9a\u4e49\u7684\u540d\u5b57\uff0c\u5982\uff1a "dfs.ha.namenodes.my_ha" = "my_nn"\u3002')),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},(0,t.yg)("inlineCode",{parentName:"p"},"dfs.namenode.rpc-address.xxx.nn"),"\uff1a\u6307\u5b9a namenode \u7684 rpc \u5730\u5740\u4fe1\u606f\u3002\u5176\u4e2d nn \u8868\u793a ",(0,t.yg)("inlineCode",{parentName:"p"},"dfs.ha.namenodes.xxx"),' \u4e2d\u914d\u7f6e\u7684 namenode \u7684\u540d\u5b57\uff0c\u5982\uff1a"dfs.namenode.rpc-address.my_ha.my_nn" = "host:port"\u3002')),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},(0,t.yg)("inlineCode",{parentName:"p"},"dfs.client.failover.proxy.provider.[nameservice ID]"),"\uff1a\u6307\u5b9a client \u8fde\u63a5 namenode \u7684 provider\uff0c\u9ed8\u8ba4\u4e3a\uff1aorg.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider\u3002"))),(0,t.yg)("p",null,"\u793a\u4f8b\u5982\u4e0b\uff1a"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-sql"},'(\n    "fs.defaultFS" = "hdfs://my_ha",\n    "dfs.nameservices" = "my_ha",\n    "dfs.ha.namenodes.my_ha" = "my_namenode1, my_namenode2",\n    "dfs.namenode.rpc-address.my_ha.my_namenode1" = "nn1_host:rpc_port",\n    "dfs.namenode.rpc-address.my_ha.my_namenode2" = "nn2_host:rpc_port",\n    "dfs.client.failover.proxy.provider.my_ha" = "org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider"\n)\n')),(0,t.yg)("p",null,"HA \u6a21\u5f0f\u53ef\u4ee5\u548c\u524d\u9762\u4e24\u79cd\u8ba4\u8bc1\u65b9\u5f0f\u7ec4\u5408\uff0c\u8fdb\u884c\u96c6\u7fa4\u8bbf\u95ee\u3002\u5982\u901a\u8fc7\u7b80\u5355\u8ba4\u8bc1\u8bbf\u95ee HA HDFS\uff1a"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-sql"},'(\n    "username"="user",\n    "password"="passwd",\n    "fs.defaultFS" = "hdfs://my_ha",\n    "dfs.nameservices" = "my_ha",\n    "dfs.ha.namenodes.my_ha" = "my_namenode1, my_namenode2",\n    "dfs.namenode.rpc-address.my_ha.my_namenode1" = "nn1_host:rpc_port",\n    "dfs.namenode.rpc-address.my_ha.my_namenode2" = "nn2_host:rpc_port",\n    "dfs.client.failover.proxy.provider.my_ha" = "org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider"\n)\n')),(0,t.yg)("h3",{id:"\u5bfc\u5165\u793a\u4f8b"},"\u5bfc\u5165\u793a\u4f8b"),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"\u5bfc\u5165 HDFS \u4e0a\u7684 TXT \u6587\u4ef6"),(0,t.yg)("pre",{parentName:"li"},(0,t.yg)("code",{parentName:"pre",className:"language-sql"},'LOAD LABEL demo.label_20220402\n(\n    DATA INFILE("hdfs://host:port/tmp/test_hdfs.txt")\n    INTO TABLE `load_hdfs_file_test`\n    COLUMNS TERMINATED BY "\\t"            \n    (id,age,name)\n) \nwith HDFS\n(\n  "fs.defaultFS"="hdfs://host:port",\n  "hadoop.username" = "user"\n)\nPROPERTIES\n(\n    "timeout"="1200",\n    "max_filter_ratio"="0.1"\n);\n'))),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"HDFS \u9700\u8981\u914d\u7f6e NameNode HA \u7684\u60c5\u51b5"),(0,t.yg)("pre",{parentName:"li"},(0,t.yg)("code",{parentName:"pre",className:"language-sql"},'LOAD LABEL demo.label_20220402\n(\n    DATA INFILE("hdfs://hafs/tmp/test_hdfs.txt")\n    INTO TABLE `load_hdfs_file_test`\n    COLUMNS TERMINATED BY "\\t"            \n    (id,age,name)\n) \nwith HDFS\n(\n    "hadoop.username" = "user",\n    "fs.defaultFS"="hdfs://hafs"\uff0c\n    "dfs.nameservices" = "hafs",\n    "dfs.ha.namenodes.hafs" = "my_namenode1, my_namenode2",\n    "dfs.namenode.rpc-address.hafs.my_namenode1" = "nn1_host:rpc_port",\n    "dfs.namenode.rpc-address.hafs.my_namenode2" = "nn2_host:rpc_port",\n    "dfs.client.failover.proxy.provider.hafs" = "org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider"\n)\nPROPERTIES\n(\n    "timeout"="1200",\n    "max_filter_ratio"="0.1"\n);\n'))),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"\u4ece HDFS \u5bfc\u5165\u6570\u636e\uff0c\u4f7f\u7528\u901a\u914d\u7b26\u5339\u914d\u4e24\u6279\u6587\u4ef6\uff0c\u5206\u522b\u5bfc\u5165\u5230\u4e24\u4e2a\u8868\u4e2d"),(0,t.yg)("pre",{parentName:"li"},(0,t.yg)("code",{parentName:"pre",className:"language-sql"},'LOAD LABEL example_db.label2\n(\n    DATA INFILE("hdfs://host:port/input/file-10*")\n    INTO TABLE `my_table1`\n    PARTITION (p1)\n    COLUMNS TERMINATED BY ","\n    (k1, tmp_k2, tmp_k3)\n    SET (\n        k2 = tmp_k2 + 1,\n        k3 = tmp_k3 + 1\n    ),\n    DATA INFILE("hdfs://host:port/input/file-20*")\n    INTO TABLE `my_table2`\n    COLUMNS TERMINATED BY ","\n    (k1, k2, k3)\n)\nwith HDFS\n(\n  "fs.defaultFS"="hdfs://host:port",\n  "hadoop.username" = "user"\n);\n')),(0,t.yg)("p",{parentName:"li"},"\u4f7f\u7528\u901a\u914d\u7b26\u5339\u914d\u5bfc\u5165\u4e24\u6279\u6587\u4ef6 ",(0,t.yg)("inlineCode",{parentName:"p"},"file-10*")," \u548c ",(0,t.yg)("inlineCode",{parentName:"p"},"file-20*"),"\u3002\u5206\u522b\u5bfc\u5165\u5230 ",(0,t.yg)("inlineCode",{parentName:"p"},"my_table1")," \u548c ",(0,t.yg)("inlineCode",{parentName:"p"},"my_table2")," \u4e24\u5f20\u8868\u4e2d\u3002\u5176\u4e2d ",(0,t.yg)("inlineCode",{parentName:"p"},"my_table1")," \u6307\u5b9a\u5bfc\u5165\u5230\u5206\u533a ",(0,t.yg)("inlineCode",{parentName:"p"},"p1")," \u4e2d\uff0c\u5e76\u4e14\u5c06\u5bfc\u5165\u6e90\u6587\u4ef6\u4e2d\u7b2c\u4e8c\u5217\u548c\u7b2c\u4e09\u5217\u7684\u503c +1 \u540e\u5bfc\u5165\u3002")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"\u4f7f\u7528\u901a\u914d\u7b26\u4ece HDFS \u5bfc\u5165\u4e00\u6279\u6570\u636e"),(0,t.yg)("pre",{parentName:"li"},(0,t.yg)("code",{parentName:"pre",className:"language-sql"},'LOAD LABEL example_db.label3\n(\n    DATA INFILE("hdfs://host:port/user/doris/data/*/*")\n    INTO TABLE `my_table`\n    COLUMNS TERMINATED BY "\\\\x01"\n)\nwith HDFS\n(\n  "fs.defaultFS"="hdfs://host:port",\n  "hadoop.username" = "user"\n);\n')),(0,t.yg)("p",{parentName:"li"},"\u6307\u5b9a\u5206\u9694\u7b26\u4e3a Hive \u7ecf\u5e38\u7528\u7684\u9ed8\u8ba4\u5206\u9694\u7b26 ",(0,t.yg)("inlineCode",{parentName:"p"},"\\\\x01"),"\uff0c\u5e76\u4f7f\u7528\u901a\u914d\u7b26 * \u6307\u5b9a ",(0,t.yg)("inlineCode",{parentName:"p"},"data")," \u76ee\u5f55\u4e0b\u6240\u6709\u76ee\u5f55\u7684\u6240\u6709\u6587\u4ef6\u3002")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"\u5bfc\u5165 Parquet \u683c\u5f0f\u6570\u636e\uff0c\u6307\u5b9a FORMAT \u4e3a ",(0,t.yg)("inlineCode",{parentName:"p"},"parquet")),(0,t.yg)("pre",{parentName:"li"},(0,t.yg)("code",{parentName:"pre",className:"language-SQL"},'LOAD LABEL example_db.label4\n(\n    DATA INFILE("hdfs://host:port/input/file")\n    INTO TABLE `my_table`\n    FORMAT AS "parquet"\n    (k1, k2, k3)\n)\nwith HDFS\n(\n  "fs.defaultFS"="hdfs://host:port",\n  "hadoop.username" = "user"\n);\n')),(0,t.yg)("p",{parentName:"li"},"\u9ed8\u8ba4\u662f\u901a\u8fc7\u6587\u4ef6\u540e\u7f00\u5224\u65ad\u3002")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"\u5bfc\u5165\u6570\u636e\uff0c\u5e76\u63d0\u53d6\u6587\u4ef6\u8def\u5f84\u4e2d\u7684\u5206\u533a\u5b57\u6bb5"),(0,t.yg)("pre",{parentName:"li"},(0,t.yg)("code",{parentName:"pre",className:"language-sql"},'LOAD LABEL example_db.label5\n(\n    DATA INFILE("hdfs://host:port/input/city=beijing/*/*")\n    INTO TABLE `my_table`\n    FORMAT AS "csv"\n    (k1, k2, k3)\n    COLUMNS FROM PATH AS (city, utc_date)\n)\nwith HDFS\n(\n  "fs.defaultFS"="hdfs://host:port",\n  "hadoop.username" = "user"\n);\n')),(0,t.yg)("p",{parentName:"li"},(0,t.yg)("inlineCode",{parentName:"p"},"my_table")," \u8868\u4e2d\u7684\u5217\u4e3a ",(0,t.yg)("inlineCode",{parentName:"p"},"k1, k2, k3, city, utc_date"),"\u3002"),(0,t.yg)("p",{parentName:"li"},"\u5176\u4e2d ",(0,t.yg)("inlineCode",{parentName:"p"},"hdfs://hdfs_host:hdfs_port/user/doris/data/input/dir/city=beijing")," \u76ee\u5f55\u4e0b\u5305\u62ec\u5982\u4e0b\u6587\u4ef6\uff1a"),(0,t.yg)("pre",{parentName:"li"},(0,t.yg)("code",{parentName:"pre",className:"language-Plain"},"hdfs://hdfs_host:hdfs_port/input/city=beijing/utc_date=2020-10-01/0000.csv\nhdfs://hdfs_host:hdfs_port/input/city=beijing/utc_date=2020-10-02/0000.csv\nhdfs://hdfs_host:hdfs_port/input/city=tianji/utc_date=2020-10-03/0000.csv\nhdfs://hdfs_host:hdfs_port/input/city=tianji/utc_date=2020-10-04/0000.csv\n")),(0,t.yg)("p",{parentName:"li"},"\u6587\u4ef6\u4e2d\u53ea\u5305\u542b ",(0,t.yg)("inlineCode",{parentName:"p"},"k1, k2, k3")," \u4e09\u5217\u6570\u636e\uff0c",(0,t.yg)("inlineCode",{parentName:"p"},"city, utc_date")," \u8fd9\u4e24\u5217\u6570\u636e\u4f1a\u4ece\u6587\u4ef6\u8def\u5f84\u4e2d\u63d0\u53d6\u3002")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"\u5bf9\u5bfc\u5165\u6570\u636e\u8fdb\u884c\u8fc7\u6ee4"),(0,t.yg)("pre",{parentName:"li"},(0,t.yg)("code",{parentName:"pre",className:"language-sql"},'LOAD LABEL example_db.label6\n(\n    DATA INFILE("hdfs://host:port/input/file")\n    INTO TABLE `my_table`\n    (k1, k2, k3)\n    SET (\n        k2 = k2 + 1\n    )\n    PRECEDING FILTER k1 = 1\n    WHERE k1 > k2\n)\nwith HDFS\n(\n  "fs.defaultFS"="hdfs://host:port",\n  "hadoop.username" = "user"\n);\n')),(0,t.yg)("p",{parentName:"li"},"\u53ea\u6709\u539f\u59cb\u6570\u636e\u4e2d\uff0ck1 = 1\uff0c\u5e76\u4e14\u8f6c\u6362\u540e\uff0ck1 > k2 \u7684\u884c\u624d\u4f1a\u88ab\u5bfc\u5165\u3002")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"\u5bfc\u5165\u6570\u636e\uff0c\u63d0\u53d6\u6587\u4ef6\u8def\u5f84\u4e2d\u7684\u65f6\u95f4\u5206\u533a\u5b57\u6bb5"),(0,t.yg)("pre",{parentName:"li"},(0,t.yg)("code",{parentName:"pre",className:"language-sql"},'LOAD LABEL example_db.label7\n(\n    DATA INFILE("hdfs://host:port/user/data/*/test.txt") \n    INTO TABLE `tbl12`\n    COLUMNS TERMINATED BY ","\n    (k2,k3)\n    COLUMNS FROM PATH AS (data_time)\n    SET (\n        data_time=str_to_date(data_time, \'%Y-%m-%d %H%%3A%i%%3A%s\')\n    )\n)\nwith HDFS\n(\n  "fs.defaultFS"="hdfs://host:port",\n  "hadoop.username" = "user"\n);\n')),(0,t.yg)("admonition",{parentName:"li",type:"tip"},(0,t.yg)("p",{parentName:"admonition"},"\u65f6\u95f4\u5305\u542b %3A\u3002\u5728 hdfs \u8def\u5f84\u4e2d\uff0c\u4e0d\u5141\u8bb8\u6709 ':'\uff0c\u6240\u6709 ':' \u4f1a\u7531 %3A \u66ff\u6362\u3002")),(0,t.yg)("p",{parentName:"li"},"\u8def\u5f84\u4e0b\u6709\u5982\u4e0b\u6587\u4ef6\uff1a"),(0,t.yg)("pre",{parentName:"li"},(0,t.yg)("code",{parentName:"pre",className:"language-Plain"},"/user/data/data_time=2020-02-17 00%3A00%3A00/test.txt\n/user/data/data_time=2020-02-18 00%3A00%3A00/test.txt\n")),(0,t.yg)("p",{parentName:"li"},"\u8868\u7ed3\u6784\u4e3a\uff1a"),(0,t.yg)("pre",{parentName:"li"},(0,t.yg)("code",{parentName:"pre",className:"language-sql"},'CREATE TABLE IF NOT EXISTS tbl12 (\n    data_time DATETIME,\n    k2        INT,\n    k3        INT\n) DISTRIBUTED BY HASH(data_time) BUCKETS 10\nPROPERTIES (\n    "replication_num" = "3"\n);\n'))),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"\u4f7f\u7528 Merge \u65b9\u5f0f\u5bfc\u5165"),(0,t.yg)("pre",{parentName:"li"},(0,t.yg)("code",{parentName:"pre",className:"language-sql"},'LOAD LABEL example_db.label8\n(\n    MERGE DATA INFILE("hdfs://host:port/input/file")\n    INTO TABLE `my_table`\n    (k1, k2, k3, v2, v1)\n    DELETE ON v2 > 100\n)\nwith HDFS\n(\n  "fs.defaultFS"="hdfs://host:port",\n  "hadoop.username"="user"\n)\nPROPERTIES\n(\n    "timeout" = "3600",\n    "max_filter_ratio" = "0.1"\n);\n')),(0,t.yg)("p",{parentName:"li"},"\u4f7f\u7528 Merge \u65b9\u5f0f\u5bfc\u5165\u3002",(0,t.yg)("inlineCode",{parentName:"p"},"my_table")," \u5fc5\u987b\u662f\u4e00\u5f20 Unique Key \u7684\u8868\u3002\u5f53\u5bfc\u5165\u6570\u636e\u4e2d\u7684 v2 \u5217\u7684\u503c\u5927\u4e8e 100 \u65f6\uff0c\u8be5\u884c\u4f1a\u88ab\u8ba4\u4e3a\u662f\u4e00\u4e2a\u5220\u9664\u884c\u3002\u5bfc\u5165\u4efb\u52a1\u7684\u8d85\u65f6\u65f6\u95f4\u662f 3600 \u79d2\uff0c\u5e76\u4e14\u5141\u8bb8\u9519\u8bef\u7387\u5728 10% \u4ee5\u5185\u3002")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"\u5bfc\u5165\u65f6\u6307\u5b9a source_sequence \u5217\uff0c\u4fdd\u8bc1\u66ff\u6362\u987a\u5e8f"),(0,t.yg)("pre",{parentName:"li"},(0,t.yg)("code",{parentName:"pre",className:"language-sql"},'LOAD LABEL example_db.label9\n(\n    DATA INFILE("hdfs://host:port/input/file")\n    INTO TABLE `my_table`\n    COLUMNS TERMINATED BY ","\n    (k1,k2,source_sequence,v1,v2)\n    ORDER BY source_sequence\n) \nwith HDFS\n(\n  "fs.defaultFS"="hdfs://host:port",\n  "hadoop.username"="user"\n);\n')),(0,t.yg)("p",{parentName:"li"},(0,t.yg)("inlineCode",{parentName:"p"},"my_table")," \u5fc5\u987b\u662f Unique Key \u6a21\u578b\u8868\uff0c\u5e76\u4e14\u6307\u5b9a\u4e86 Sequence \u5217\u3002\u6570\u636e\u4f1a\u6309\u7167\u6e90\u6570\u636e\u4e2d ",(0,t.yg)("inlineCode",{parentName:"p"},"source_sequence")," \u5217\u7684\u503c\u6765\u4fdd\u8bc1\u987a\u5e8f\u6027\u3002")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"\u5bfc\u5165\u6307\u5b9a\u6587\u4ef6\u683c\u5f0f\u4e3a ",(0,t.yg)("inlineCode",{parentName:"p"},"json"),"\uff0c\u5e76\u6307\u5b9a ",(0,t.yg)("inlineCode",{parentName:"p"},"json_root"),"\u3001",(0,t.yg)("inlineCode",{parentName:"p"},"jsonpaths")),(0,t.yg)("pre",{parentName:"li"},(0,t.yg)("code",{parentName:"pre",className:"language-sql"},'LOAD LABEL example_db.label10\n(\n    DATA INFILE("hdfs://host:port/input/file.json")\n    INTO TABLE `my_table`\n    FORMAT AS "json"\n    PROPERTIES(\n      "json_root" = "$.item",\n      "jsonpaths" = "[\\"$.id\\", \\"$.city\\", \\"$.code\\"]"\n    )       \n)\nwith HDFS\n(\n  "fs.defaultFS"="hdfs://host:port",\n  "hadoop.username"="user"\n);\n')),(0,t.yg)("p",{parentName:"li"},(0,t.yg)("inlineCode",{parentName:"p"},"jsonpaths")," \u4e5f\u53ef\u4ee5\u4e0e ",(0,t.yg)("inlineCode",{parentName:"p"},"column list")," \u53ca ",(0,t.yg)("inlineCode",{parentName:"p"},"SET (column_mapping)"),"\u914d\u5408\u4f7f\u7528\uff1a"),(0,t.yg)("pre",{parentName:"li"},(0,t.yg)("code",{parentName:"pre",className:"language-sql"},'LOAD LABEL example_db.label10\n(\n    DATA INFILE("hdfs://host:port/input/file.json")\n    INTO TABLE `my_table`\n    FORMAT AS "json"\n    (id, code, city)\n    SET (id = id * 10)\n    PROPERTIES(\n      "json_root" = "$.item",\n      "jsonpaths" = "[\\"$.id\\", \\"$.city\\", \\"$.code\\"]"\n    )       \n)\nwith HDFS\n(\n  "fs.defaultFS"="hdfs://host:port",\n  "hadoop.username"="user"\n);\n')))),(0,t.yg)("h2",{id:"s3-load"},"S3 Load"),(0,t.yg)("p",null,"Doris \u652f\u6301\u901a\u8fc7 S3 \u534f\u8bae\u76f4\u63a5\u4ece\u652f\u6301 S3 \u534f\u8bae\u7684\u5bf9\u8c61\u5b58\u50a8\u7cfb\u7edf\u5bfc\u5165\u6570\u636e\u3002\u8fd9\u91cc\u4e3b\u8981\u4ecb\u7ecd\u5982\u4f55\u5bfc\u5165 AWS S3 \u4e2d\u5b58\u50a8\u7684\u6570\u636e\uff0c\u652f\u6301\u5bfc\u5165\u5176\u4ed6\u652f\u6301 S3 \u534f\u8bae\u7684\u5bf9\u8c61\u5b58\u50a8\u7cfb\u7edf\u53ef\u4ee5\u53c2\u8003 AWS S3\u3002 "),(0,t.yg)("h3",{id:"\u51c6\u5907\u5de5\u4f5c"},"\u51c6\u5907\u5de5\u4f5c"),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"AK \u548c SK\uff1a\u9996\u5148\u9700\u8981\u627e\u5230\u6216\u8005\u91cd\u65b0\u751f\u6210 AWS ",(0,t.yg)("inlineCode",{parentName:"p"},"Access keys"),"\uff0c\u53ef\u4ee5\u5728 AWS console \u7684 ",(0,t.yg)("inlineCode",{parentName:"p"},"My Security Credentials")," \u627e\u5230\u751f\u6210\u65b9\u5f0f\u3002")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"REGION \u548c ENDPOINT\uff1aREGION \u53ef\u4ee5\u5728\u521b\u5efa\u6876\u7684\u65f6\u5019\u9009\u62e9\u4e5f\u53ef\u4ee5\u5728\u6876\u5217\u8868\u4e2d\u67e5\u770b\u5230\u3002\u6bcf\u4e2a REGION \u7684 S3 ENDPOINT \u53ef\u4ee5\u901a\u8fc7\u5982\u4e0b\u9875\u9762\u67e5\u5230 ",(0,t.yg)("a",{parentName:"p",href:"https://docs.aws.amazon.com/general/latest/gr/s3.html#s3_region"},"AWS \u6587\u6863"),"\u3002"))),(0,t.yg)("h3",{id:"\u5bfc\u5165\u793a\u4f8b-1"},"\u5bfc\u5165\u793a\u4f8b"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-sql"},'    LOAD LABEL example_db.example_label_1\n    (\n        DATA INFILE("s3://your_bucket_name/your_file.txt")\n        INTO TABLE load_test\n        COLUMNS TERMINATED BY ","\n    )\n    WITH S3\n    (\n        "AWS_ENDPOINT" = "AWS_ENDPOINT",\n        "AWS_ACCESS_KEY" = "AWS_ACCESS_KEY",\n        "AWS_SECRET_KEY"="AWS_SECRET_KEY",\n        "AWS_REGION" = "AWS_REGION"\n    )\n    PROPERTIES\n    (\n        "timeout" = "3600"\n    );\n')),(0,t.yg)("h3",{id:"\u5e38\u89c1\u95ee\u9898"},"\u5e38\u89c1\u95ee\u9898"),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"S3 SDK \u9ed8\u8ba4\u4f7f\u7528 virtual-hosted style \u65b9\u5f0f\u3002\u4f46\u67d0\u4e9b\u5bf9\u8c61\u5b58\u50a8\u7cfb\u7edf\u53ef\u80fd\u6ca1\u5f00\u542f\u6216\u6ca1\u652f\u6301 virtual-hosted style \u65b9\u5f0f\u7684\u8bbf\u95ee\uff0c\u6b64\u65f6\u6211\u4eec\u53ef\u4ee5\u6dfb\u52a0 ",(0,t.yg)("inlineCode",{parentName:"p"},"use_path_style")," \u53c2\u6570\u6765\u5f3a\u5236\u4f7f\u7528 path style \u65b9\u5f0f\uff1a"),(0,t.yg)("pre",{parentName:"li"},(0,t.yg)("code",{parentName:"pre",className:"language-sql"},'  WITH S3\n  (\n        "AWS_ENDPOINT" = "AWS_ENDPOINT",\n        "AWS_ACCESS_KEY" = "AWS_ACCESS_KEY",\n        "AWS_SECRET_KEY"="AWS_SECRET_KEY",\n        "AWS_REGION" = "AWS_REGION",\n        "use_path_style" = "true"\n  )\n'))),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"\u652f\u6301\u4f7f\u7528\u4e34\u65f6\u79d8\u94a5 (TOKEN) \u8bbf\u95ee\u6240\u6709\u652f\u6301 S3 \u534f\u8bae\u7684\u5bf9\u8c61\u5b58\u50a8\uff0c\u7528\u6cd5\u5982\u4e0b\uff1a"),(0,t.yg)("pre",{parentName:"li"},(0,t.yg)("code",{parentName:"pre",className:"language-sql"},'  WITH S3\n  (\n        "AWS_ENDPOINT" = "AWS_ENDPOINT",\n        "AWS_ACCESS_KEY" = "AWS_TEMP_ACCESS_KEY",\n        "AWS_SECRET_KEY" = "AWS_TEMP_SECRET_KEY",\n        "AWS_TOKEN" = "AWS_TEMP_TOKEN",\n        "AWS_REGION" = "AWS_REGION"\n  )\n')))),(0,t.yg)("h2",{id:"\u5176\u4ed6-broker-\u5bfc\u5165"},"\u5176\u4ed6 Broker \u5bfc\u5165"),(0,t.yg)("p",null,"\u5176\u4ed6\u8fdc\u7aef\u5b58\u50a8\u7cfb\u7edf\u7684 Broker \u662f Doris \u96c6\u7fa4\u4e2d\u4e00\u79cd\u53ef\u9009\u8fdb\u7a0b\uff0c\u4e3b\u8981\u7528\u4e8e\u652f\u6301 Doris \u8bfb\u5199\u8fdc\u7aef\u5b58\u50a8\u4e0a\u7684\u6587\u4ef6\u548c\u76ee\u5f55\u3002\u76ee\u524d\u63d0\u4f9b\u4e86\u5982\u4e0b\u5b58\u50a8\u7cfb\u7edf\u7684 Broker \u5b9e\u73b0\u3002"),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"\u963f\u91cc\u4e91 OSS")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"\u767e\u5ea6\u4e91 BOS")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"\u817e\u8baf\u4e91 CHDFS")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"\u817e\u8baf\u4e91 GFS")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"\u534e\u4e3a\u4e91 OBS")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"JuiceFS ")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"GCS"))),(0,t.yg)("p",null,"Broker \u901a\u8fc7\u63d0\u4f9b\u4e00\u4e2a RPC \u670d\u52a1\u7aef\u53e3\u6765\u63d0\u4f9b\u670d\u52a1\uff0c\u662f\u4e00\u4e2a\u65e0\u72b6\u6001\u7684 Java \u8fdb\u7a0b\uff0c\u8d1f\u8d23\u4e3a\u8fdc\u7aef\u5b58\u50a8\u7684\u8bfb\u5199\u64cd\u4f5c\u5c01\u88c5\u4e00\u4e9b\u7c7b POSIX \u7684\u6587\u4ef6\u64cd\u4f5c\uff0c\u5982 open\uff0cpread\uff0cpwrite \u7b49\u7b49\u3002\u9664\u6b64\u4e4b\u5916\uff0cBroker \u4e0d\u8bb0\u5f55\u4efb\u4f55\u5176\u4ed6\u4fe1\u606f\uff0c\u6240\u4ee5\u5305\u62ec\u8fdc\u7aef\u5b58\u50a8\u7684\u8fde\u63a5\u4fe1\u606f\u3001\u6587\u4ef6\u4fe1\u606f\u3001\u6743\u9650\u4fe1\u606f\u7b49\u7b49\uff0c\u90fd\u9700\u8981\u901a\u8fc7\u53c2\u6570\u5728 RPC \u8c03\u7528\u4e2d\u4f20\u9012\u7ed9 Broker \u8fdb\u7a0b\uff0c\u624d\u80fd\u4f7f\u5f97 Broker \u80fd\u591f\u6b63\u786e\u8bfb\u5199\u6587\u4ef6\u3002"),(0,t.yg)("p",null,"Broker \u4ec5\u4f5c\u4e3a\u4e00\u4e2a\u6570\u636e\u901a\u8def\uff0c\u5e76\u4e0d\u53c2\u4e0e\u4efb\u4f55\u8ba1\u7b97\uff0c\u56e0\u6b64\u4ec5\u9700\u5360\u7528\u8f83\u5c11\u7684\u5185\u5b58\u3002\u901a\u5e38\u4e00\u4e2a Doris \u7cfb\u7edf\u4e2d\u4f1a\u90e8\u7f72\u4e00\u4e2a\u6216\u591a\u4e2a Broker \u8fdb\u7a0b\u3002\u5e76\u4e14\u76f8\u540c\u7c7b\u578b\u7684 Broker \u4f1a\u7ec4\u6210\u4e00\u4e2a\u7ec4\uff0c\u5e76\u8bbe\u5b9a\u4e00\u4e2a \u540d\u79f0\uff08Broker name\uff09\u3002"),(0,t.yg)("p",null,"\u8fd9\u91cc\u4e3b\u8981\u4ecb\u7ecd Broker \u5728\u8bbf\u95ee\u4e0d\u540c\u8fdc\u7aef\u5b58\u50a8\u65f6\u9700\u8981\u7684\u53c2\u6570\uff0c\u5982\u8fde\u63a5\u4fe1\u606f\u3001\u6743\u9650\u8ba4\u8bc1\u4fe1\u606f\u7b49\u7b49\u3002"),(0,t.yg)("h3",{id:"broker-\u4fe1\u606f"},"Broker \u4fe1\u606f"),(0,t.yg)("p",null,"Broker \u7684\u4fe1\u606f\u5305\u62ec \u540d\u79f0\uff08Broker name\uff09\u548c \u8ba4\u8bc1\u4fe1\u606f \u4e24\u90e8\u5206\u3002\u901a\u5e38\u7684\u8bed\u6cd5\u683c\u5f0f\u5982\u4e0b\uff1a"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-sql"},'WITH BROKER "broker_name" \n(\n    "username" = "xxx",\n    "password" = "yyy",\n    "other_prop" = "prop_value",\n    ...\n);\n')),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"\u540d\u79f0")),(0,t.yg)("p",null,"\u901a\u5e38\u7528\u6237\u9700\u8981\u901a\u8fc7\u64cd\u4f5c\u547d\u4ee4\u4e2d\u7684 ",(0,t.yg)("inlineCode",{parentName:"p"},'WITH BROKER "broker_name"')," \u5b50\u53e5\u6765\u6307\u5b9a\u4e00\u4e2a\u5df2\u7ecf\u5b58\u5728\u7684 Broker Name\u3002Broker Name \u662f\u7528\u6237\u5728\u901a\u8fc7 ",(0,t.yg)("inlineCode",{parentName:"p"},"ALTER SYSTEM ADD BROKER")," \u547d\u4ee4\u6dfb\u52a0 Broker \u8fdb\u7a0b\u65f6\u6307\u5b9a\u7684\u4e00\u4e2a\u540d\u79f0\u3002\u4e00\u4e2a\u540d\u79f0\u901a\u5e38\u5bf9\u5e94\u4e00\u4e2a\u6216\u591a\u4e2a Broker \u8fdb\u7a0b\u3002Doris \u4f1a\u6839\u636e\u540d\u79f0\u9009\u62e9\u53ef\u7528\u7684 Broker \u8fdb\u7a0b\u3002\u7528\u6237\u53ef\u4ee5\u901a\u8fc7 ",(0,t.yg)("inlineCode",{parentName:"p"},"SHOW BROKER")," \u547d\u4ee4\u67e5\u770b\u5f53\u524d\u96c6\u7fa4\u4e2d\u5df2\u7ecf\u5b58\u5728\u7684 Broker\u3002"),(0,t.yg)("admonition",{title:"\u5907\u6ce8",type:"info"},(0,t.yg)("p",{parentName:"admonition"},"Broker Name \u53ea\u662f\u4e00\u4e2a\u7528\u6237\u81ea\u5b9a\u4e49\u540d\u79f0\uff0c\u4e0d\u4ee3\u8868 Broker \u7684\u7c7b\u578b\u3002")),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"\u8ba4\u8bc1\u4fe1\u606f")),(0,t.yg)("p",null,"\u4e0d\u540c\u7684 Broker \u7c7b\u578b\uff0c\u4ee5\u53ca\u4e0d\u540c\u7684\u8bbf\u95ee\u65b9\u5f0f\u9700\u8981\u63d0\u4f9b\u4e0d\u540c\u7684\u8ba4\u8bc1\u4fe1\u606f\u3002\u8ba4\u8bc1\u4fe1\u606f\u901a\u5e38\u5728 ",(0,t.yg)("inlineCode",{parentName:"p"},'WITH BROKER "broker_name"')," \u4e4b\u540e\u7684 Property Map \u4e2d\u4ee5 Key-Value \u7684\u65b9\u5f0f\u63d0\u4f9b\u3002"),(0,t.yg)("h3",{id:"broker-\u4e3e\u4f8b"},"Broker \u4e3e\u4f8b"),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},"\u963f\u91cc\u4e91 OSS")),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-sql"},'(\n    "fs.oss.accessKeyId" = "",\n    "fs.oss.accessKeySecret" = "",\n    "fs.oss.endpoint" = ""\n)\n')),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},"\u767e\u5ea6\u4e91 BOS")),(0,t.yg)("p",null,"\u5f53\u524d\u4f7f\u7528 BOS \u65f6\u9700\u8981\u4e0b\u8f7d\u76f8\u5e94\u7684 SDK \u5305\uff0c\u5177\u4f53\u914d\u7f6e\u4e0e\u4f7f\u7528\uff0c\u53ef\u4ee5\u53c2\u8003 ",(0,t.yg)("a",{parentName:"p",href:"https://cloud.baidu.com/doc/BOS/s/fk53rav99"},"BOS HDFS \u5b98\u65b9\u6587\u6863"),"\u3002\u5728\u4e0b\u8f7d\u5b8c\u6210\u5e76\u89e3\u538b\u540e\u5c06 jar \u5305\u653e\u5230 broker \u7684 lib \u76ee\u5f55\u4e0b\u3002"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-sql"},'(\n    "fs.bos.access.key" = "xx",\n    "fs.bos.secret.access.key" = "xx",\n    "fs.bos.endpoint" = "xx"\n)\n')),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},"\u534e\u4e3a\u4e91 OBS")),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-sql"},'(\n    "fs.obs.access.key" = "xx",\n    "fs.obs.secret.key" = "xx",\n    "fs.obs.endpoint" = "xx"\n)\n')),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},"JuiceFS")),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-sql"},'(\n    "fs.defaultFS" = "jfs://xxx/",\n    "fs.jfs.impl" = "io.juicefs.JuiceFileSystem",\n    "fs.AbstractFileSystem.jfs.impl" = "io.juicefs.JuiceFS",\n    "juicefs.meta" = "xxx",\n    "juicefs.access-log" = "xxx"\n)\n')),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},"GCS")),(0,t.yg)("p",null,"\u5728\u4f7f\u7528 Broker \u8bbf\u95ee GCS \u65f6\uff0cProject ID \u662f\u5fc5\u987b\u7684\uff0c\u5176\u4ed6\u53c2\u6570\u53ef\u9009\uff0c\u6240\u6709\u53c2\u6570\u914d\u7f6e\u8bf7\u53c2\u8003 ",(0,t.yg)("a",{parentName:"p",href:"https://github.com/GoogleCloudDataproc/hadoop-connectors/blob/branch-2.2.x/gcs/CONFIGURATION.md"},"GCS Config")),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-sql"},'(\n    "fs.gs.project.id" = "\u4f60\u7684 Project ID",\n    "fs.AbstractFileSystem.gs.impl" = "com.google.cloud.hadoop.fs.gcs.GoogleHadoopFS",\n    "fs.gs.impl" = "com.google.cloud.hadoop.fs.gcs.GoogleHadoopFileSystem",\n)\n')),(0,t.yg)("h2",{id:"\u76f8\u5173\u914d\u7f6e"},"\u76f8\u5173\u914d\u7f6e"),(0,t.yg)("p",null,"\u4e0b\u9762\u51e0\u4e2a\u914d\u7f6e\u5c5e\u4e8e Broker load \u7684\u7cfb\u7edf\u7ea7\u522b\u914d\u7f6e\uff0c\u4e5f\u5c31\u662f\u4f5c\u7528\u4e8e\u6240\u6709 Broker load \u5bfc\u5165\u4efb\u52a1\u7684\u914d\u7f6e\u3002\u4e3b\u8981\u901a\u8fc7\u4fee\u6539 ",(0,t.yg)("inlineCode",{parentName:"p"},"fe.conf"),"\u6765\u8c03\u6574\u914d\u7f6e\u503c\u3002"),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"min_bytes_per_broker_scanner")),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"\u9ed8\u8ba4 64MB\u3002")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"\u4e00\u4e2a Broker Load \u4f5c\u4e1a\u4e2d\u5355 BE \u5904\u7406\u7684\u6570\u636e\u91cf\u7684\u6700\u5c0f\u503c"))),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"max_bytes_per_broker_scanner")),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"\u9ed8\u8ba4 500GB\u3002")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"\u4e00\u4e2a Broker Load \u4f5c\u4e1a\u4e2d\u5355 BE \u5904\u7406\u7684\u6570\u636e\u91cf\u7684\u6700\u5927\u503c"))),(0,t.yg)("p",null,"\u901a\u5e38\u4e00\u4e2a\u5bfc\u5165\u4f5c\u4e1a\u652f\u6301\u7684\u6700\u5927\u6570\u636e\u91cf\u4e3a ",(0,t.yg)("inlineCode",{parentName:"p"},"max_bytes_per_broker_scanner * BE \u8282\u70b9\u6570"),"\u3002\u5982\u679c\u9700\u8981\u5bfc\u5165\u66f4\u5927\u6570\u636e\u91cf\uff0c\u5219\u9700\u8981\u9002\u5f53\u8c03\u6574 ",(0,t.yg)("inlineCode",{parentName:"p"},"max_bytes_per_broker_scanner")," \u53c2\u6570\u7684\u5927\u5c0f\u3002"),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"max_broker_concurrency")),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"\u9ed8\u8ba4 10\u3002")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"\u9650\u5236\u4e86\u4e00\u4e2a\u4f5c\u4e1a\u7684\u6700\u5927\u7684\u5bfc\u5165\u5e76\u53d1\u6570\u3002")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"\u6700\u5c0f\u5904\u7406\u7684\u6570\u636e\u91cf\uff0c\u6700\u5927\u5e76\u53d1\u6570\uff0c\u6e90\u6587\u4ef6\u7684\u5927\u5c0f\u548c\u5f53\u524d\u96c6\u7fa4 BE \u7684\u4e2a\u6570\u5171\u540c\u51b3\u5b9a\u4e86\u672c\u6b21\u5bfc\u5165\u7684\u5e76\u53d1\u6570\u3002"))),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-Plain"},"\u672c\u6b21\u5bfc\u5165\u5e76\u53d1\u6570 = Math.min(\u6e90\u6587\u4ef6\u5927\u5c0f/min_bytes_per_broker_scanner\uff0cmax_broker_concurrency\uff0c\u5f53\u524dBE\u8282\u70b9\u4e2a\u6570 * load_parallelism)\n\u672c\u6b21\u5bfc\u5165\u5355\u4e2aBE\u7684\u5904\u7406\u91cf = \u6e90\u6587\u4ef6\u5927\u5c0f/\u672c\u6b21\u5bfc\u5165\u7684\u5e76\u53d1\u6570\n")),(0,t.yg)("h2",{id:"\u5e38\u89c1\u95ee\u9898-1"},"\u5e38\u89c1\u95ee\u9898"),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"1. \u5bfc\u5165\u62a5\u9519\uff1a",(0,t.yg)("inlineCode",{parentName:"strong"},"Scan bytes per broker scanner exceed limit:xxx"))),(0,t.yg)("p",null,"\u8bf7\u53c2\u7167\u6587\u6863\u4e2d\u6700\u4f73\u5b9e\u8df5\u90e8\u5206\uff0c\u4fee\u6539 FE \u914d\u7f6e\u9879 ",(0,t.yg)("inlineCode",{parentName:"p"},"max_bytes_per_broker_scanner")," \u548c ",(0,t.yg)("inlineCode",{parentName:"p"},"max_broker_concurrency")),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"2. \u5bfc\u5165\u62a5\u9519\uff1a",(0,t.yg)("inlineCode",{parentName:"strong"},"failed to send batch")," \u6216 ",(0,t.yg)("inlineCode",{parentName:"strong"},"TabletWriter add batch with unknown id"))),(0,t.yg)("p",null,"\u9002\u5f53\u4fee\u6539 ",(0,t.yg)("inlineCode",{parentName:"p"},"query_timeout")," \u548c ",(0,t.yg)("inlineCode",{parentName:"p"},"streaming_load_rpc_max_alive_time_sec"),"\u3002"),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"3. \u5bfc\u5165\u62a5\u9519\uff1a",(0,t.yg)("inlineCode",{parentName:"strong"},"LOAD_RUN_FAIL; msg:Invalid Column Name:xxx"))),(0,t.yg)("p",null,"\u5982\u679c\u662f PARQUET \u6216\u8005 ORC \u683c\u5f0f\u7684\u6570\u636e\uff0c\u5219\u6587\u4ef6\u5934\u7684\u5217\u540d\u9700\u8981\u4e0e doris \u8868\u4e2d\u7684\u5217\u540d\u4fdd\u6301\u4e00\u81f4\uff0c\u5982\uff1a"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-sql"},"(tmp_c1,tmp_c2)\nSET\n(\n    id=tmp_c2,\n    name=tmp_c1\n)\n")),(0,t.yg)("p",null,"\u4ee3\u8868\u83b7\u53d6\u5728 parquet \u6216 orc \u4e2d\u4ee5 (tmp_c1, tmp_c2) \u4e3a\u5217\u540d\u7684\u5217\uff0c\u6620\u5c04\u5230 doris \u8868\u4e2d\u7684 (id, name) \u5217\u3002\u5982\u679c\u6ca1\u6709\u8bbe\u7f6e set, \u5219\u4ee5 column \u4e2d\u7684\u5217\u4f5c\u4e3a\u6620\u5c04\u3002"),(0,t.yg)("p",null,"\u6ce8\uff1a\u5982\u679c\u4f7f\u7528\u67d0\u4e9b hive \u7248\u672c\u76f4\u63a5\u751f\u6210\u7684 orc \u6587\u4ef6\uff0corc \u6587\u4ef6\u4e2d\u7684\u8868\u5934\u5e76\u975e hive meta \u6570\u636e\uff0c\u800c\u662f\uff08_col0, _col1, _col2, ...\uff09, \u53ef\u80fd\u5bfc\u81f4 Invalid Column Name \u9519\u8bef\uff0c\u90a3\u4e48\u5219\u9700\u8981\u4f7f\u7528 set \u8fdb\u884c\u6620\u5c04"),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"4. \u5bfc\u5165\u62a5\u9519\uff1a",(0,t.yg)("inlineCode",{parentName:"strong"},"Failed to get S3 FileSystem for bucket is null/empty"))),(0,t.yg)("p",null,"bucket \u4fe1\u606f\u586b\u5199\u4e0d\u6b63\u786e\u6216\u8005\u4e0d\u5b58\u5728\u3002\u6216\u8005 bucket \u7684\u683c\u5f0f\u4e0d\u53d7\u652f\u6301\u3002\u4f7f\u7528 GCS \u521b\u5efa\u5e26",(0,t.yg)("inlineCode",{parentName:"p"},"_"),"\u7684\u6876\u540d\u65f6\uff0c\u6bd4\u5982\uff1a",(0,t.yg)("inlineCode",{parentName:"p"},"s3://gs_bucket/load_tbl"),"\uff0cS3 Client \u8bbf\u95ee GCS \u4f1a\u62a5\u9519\uff0c\u5efa\u8bae\u521b\u5efa bucket \u8def\u5f84\u65f6\u4e0d\u4f7f\u7528",(0,t.yg)("inlineCode",{parentName:"p"},"_"),"\u3002"),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"5. \u5bfc\u5165\u8d85\u65f6")),(0,t.yg)("p",null,"\u5bfc\u5165\u7684 timeout \u9ed8\u8ba4\u8d85\u65f6\u65f6\u95f4\u4e3a 4 \u5c0f\u65f6\u3002\u5982\u679c\u8d85\u65f6\uff0c\u4e0d\u63a8\u8350\u7528\u6237\u5c06\u5bfc\u5165\u6700\u5927\u8d85\u65f6\u65f6\u95f4\u76f4\u63a5\u6539\u5927\u6765\u89e3\u51b3\u95ee\u9898\u3002\u5355\u4e2a\u5bfc\u5165\u65f6\u95f4\u5982\u679c\u8d85\u8fc7\u9ed8\u8ba4\u7684\u5bfc\u5165\u8d85\u65f6\u65f6\u95f4 4 \u5c0f\u65f6\uff0c\u6700\u597d\u662f\u901a\u8fc7\u5207\u5206\u5f85\u5bfc\u5165\u6587\u4ef6\u5e76\u4e14\u5206\u591a\u6b21\u5bfc\u5165\u6765\u89e3\u51b3\u95ee\u9898\u3002\u56e0\u4e3a\u8d85\u65f6\u65f6\u95f4\u8bbe\u7f6e\u8fc7\u5927\uff0c\u90a3\u4e48\u5355\u6b21\u5bfc\u5165\u5931\u8d25\u540e\u91cd\u8bd5\u7684\u65f6\u95f4\u6210\u672c\u5f88\u9ad8\u3002"),(0,t.yg)("p",null,"\u53ef\u4ee5\u901a\u8fc7\u5982\u4e0b\u516c\u5f0f\u8ba1\u7b97\u51fa Doris \u96c6\u7fa4\u671f\u671b\u6700\u5927\u5bfc\u5165\u6587\u4ef6\u6570\u636e\u91cf\uff1a"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-Plain"},"\u671f\u671b\u6700\u5927\u5bfc\u5165\u6587\u4ef6\u6570\u636e\u91cf = 14400s * 10M/s * BE \u4e2a\u6570\n\u6bd4\u5982\uff1a\u96c6\u7fa4\u7684 BE \u4e2a\u6570\u4e3a 10\u4e2a\n\u671f\u671b\u6700\u5927\u5bfc\u5165\u6587\u4ef6\u6570\u636e\u91cf = 14400s * 10M/s * 10 = 1440000M \u2248 1440G\n\n\u6ce8\u610f\uff1a\u4e00\u822c\u7528\u6237\u7684\u73af\u5883\u53ef\u80fd\u8fbe\u4e0d\u5230 10M/s \u7684\u901f\u5ea6\uff0c\u6240\u4ee5\u5efa\u8bae\u8d85\u8fc7 500G \u7684\u6587\u4ef6\u90fd\u8fdb\u884c\u6587\u4ef6\u5207\u5206\uff0c\u518d\u5bfc\u5165\u3002\n")),(0,t.yg)("h2",{id:"\u66f4\u591a\u5e2e\u52a9"},"\u66f4\u591a\u5e2e\u52a9"),(0,t.yg)("p",null,"\u5173\u4e8e Broker Load \u4f7f\u7528\u7684\u66f4\u591a\u8be6\u7ec6\u8bed\u6cd5\u53ca\u6700\u4f73\u5b9e\u8df5\uff0c\u8bf7\u53c2\u9605 ",(0,t.yg)("a",{parentName:"p",href:"../../../sql-manual/sql-statements/Data-Manipulation-Statements/Load/BROKER-LOAD"},"Broker Load")," \u547d\u4ee4\u624b\u518c\uff0c\u4f60\u4e5f\u53ef\u4ee5\u5728 MySQL \u5ba2\u6237\u7aef\u547d\u4ee4\u884c\u4e0b\u8f93\u5165 ",(0,t.yg)("inlineCode",{parentName:"p"},"HELP BROKER LOAD")," \u83b7\u53d6\u66f4\u591a\u5e2e\u52a9\u4fe1\u606f\u3002"))}y.isMDXComponent=!0},241102:(e,n,a)=>{a.d(n,{A:()=>r});const r=a.p+"assets/images/broker-load-ad8c8c6f730de2066090371965f1ffd5.png"}}]);