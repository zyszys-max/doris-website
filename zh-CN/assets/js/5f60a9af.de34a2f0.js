"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([[838231],{15680:(e,r,a)=>{a.d(r,{xA:()=>y,yg:()=>g});var n=a(296540);function t(e,r,a){return r in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function o(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),a.push.apply(a,n)}return a}function m(e){for(var r=1;r<arguments.length;r++){var a=null!=arguments[r]?arguments[r]:{};r%2?o(Object(a),!0).forEach((function(r){t(e,r,a[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))}))}return e}function l(e,r){if(null==e)return{};var a,n,t=function(e,r){if(null==e)return{};var a,n,t={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],r.indexOf(a)>=0||(t[a]=e[a]);return t}(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],r.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(t[a]=e[a])}return t}var i=n.createContext({}),p=function(e){var r=n.useContext(i),a=r;return e&&(a="function"==typeof e?e(r):m(m({},r),e)),a},y=function(e){var r=p(e.components);return n.createElement(i.Provider,{value:r},e.children)},c="mdxType",s={inlineCode:"code",wrapper:function(e){var r=e.children;return n.createElement(n.Fragment,{},r)}},u=n.forwardRef((function(e,r){var a=e.components,t=e.mdxType,o=e.originalType,i=e.parentName,y=l(e,["components","mdxType","originalType","parentName"]),c=p(a),u=t,g=c["".concat(i,".").concat(u)]||c[u]||s[u]||o;return a?n.createElement(g,m(m({ref:r},y),{},{components:a})):n.createElement(g,m({ref:r},y))}));function g(e,r){var a=arguments,t=r&&r.mdxType;if("string"==typeof e||t){var o=a.length,m=new Array(o);m[0]=u;var l={};for(var i in r)hasOwnProperty.call(r,i)&&(l[i]=r[i]);l.originalType=e,l[c]="string"==typeof e?e:t,m[1]=l;for(var p=2;p<o;p++)m[p]=a[p];return n.createElement.apply(null,m)}return n.createElement.apply(null,a)}u.displayName="MDXCreateElement"},652519:(e,r,a)=>{a.r(r),a.d(r,{assets:()=>i,contentTitle:()=>m,default:()=>s,frontMatter:()=>o,metadata:()=>l,toc:()=>p});var n=a(58168),t=(a(296540),a(15680));const o={title:"\u6982\u8ff0",language:"zh-CN"},m=void 0,l={unversionedId:"admin-manual/memory-management/overview",id:"admin-manual/memory-management/overview",title:"\u6982\u8ff0",description:"\x3c!--",source:"@site/i18n/zh-CN/docusaurus-plugin-content-docs/current/admin-manual/memory-management/overview.md",sourceDirName:"admin-manual/memory-management",slug:"/admin-manual/memory-management/overview",permalink:"/zh-CN/docs/dev/admin-manual/memory-management/overview",draft:!1,tags:[],version:"current",frontMatter:{title:"\u6982\u8ff0",language:"zh-CN"},sidebar:"docs",previous:{title:"HTTP \u5b89\u5168\u4f20\u8f93",permalink:"/zh-CN/docs/dev/admin-manual/auth/fe-certificate"},next:{title:"\u5185\u5b58\u95ee\u9898 FAQ",permalink:"/zh-CN/docs/dev/admin-manual/memory-management/memory-issue-faq"}},i={},p=[{value:"Doris BE \u5185\u5b58\u7ed3\u6784",id:"doris-be-\u5185\u5b58\u7ed3\u6784",level:2},{value:"\u5185\u5b58\u67e5\u770b",id:"\u5185\u5b58\u67e5\u770b",level:2},{value:"\u5b9e\u65f6\u5185\u5b58\u7edf\u8ba1",id:"\u5b9e\u65f6\u5185\u5b58\u7edf\u8ba1",level:3},{value:"\u5386\u53f2\u5185\u5b58\u7edf\u8ba1",id:"\u5386\u53f2\u5185\u5b58\u7edf\u8ba1",level:3},{value:"\u5185\u5b58\u5206\u6790",id:"\u5185\u5b58\u5206\u6790",level:2},{value:"\u5185\u5b58\u95ee\u9898 FAQ",id:"\u5185\u5b58\u95ee\u9898-faq",level:2},{value:"\u5185\u5b58\u63a7\u5236\u7b56\u7565",id:"\u5185\u5b58\u63a7\u5236\u7b56\u7565",level:2}],y={toc:p},c="wrapper";function s(e){let{components:r,...o}=e;return(0,t.yg)(c,(0,n.A)({},y,o,{components:r,mdxType:"MDXLayout"}),(0,t.yg)("p",null,"\u5185\u5b58\u7ba1\u7406\u662fDoris\u4e2d\u6700\u91cd\u8981\u7684\u7ec4\u6210\u90e8\u5206\u4e4b\u4e00\uff0c\u5728Doris \u8fd0\u884c\u8fc7\u7a0b\u4e2d\uff0c\u4e0d\u8bba\u5bfc\u5165\u8fd8\u662f\u67e5\u8be2\u90fd\u4f9d\u8d56\u5927\u91cf\u7684\u5185\u5b58\u64cd\u4f5c\u3002\u5185\u5b58\u7ba1\u7406\u7684\u597d\u574f\u76f4\u63a5\u5f71\u54cd\u5230Doris\u7684\u7a33\u5b9a\u6027\u548c\u6027\u80fd\u3002"),(0,t.yg)("p",null,"Apache Doris \u4f5c\u4e3a\u57fa\u4e8e MPP \u67b6\u6784\u7684 OLAP \u6570\u636e\u5e93\uff0c\u6570\u636e\u4ece\u78c1\u76d8\u52a0\u8f7d\u5230\u5185\u5b58\u540e\uff0c\u4f1a\u5728\u7b97\u5b50\u95f4\u6d41\u5f0f\u4f20\u9012\u5e76\u8ba1\u7b97\uff0c\u5728\u5185\u5b58\u4e2d\u5b58\u50a8\u8ba1\u7b97\u7684\u4e2d\u95f4\u7ed3\u679c\uff0c\u8fd9\u79cd\u65b9\u5f0f\u51cf\u5c11\u4e86\u9891\u7e41\u7684\u78c1\u76d8 I/O \u64cd\u4f5c\uff0c\u5145\u5206\u5229\u7528\u591a\u673a\u591a\u6838\u7684\u5e76\u884c\u8ba1\u7b97\u80fd\u529b\uff0c\u53ef\u5728\u6027\u80fd\u4e0a\u5448\u73b0\u5de8\u5927\u4f18\u52bf\u3002"),(0,t.yg)("p",null,"\u5728\u9762\u4e34\u5185\u5b58\u8d44\u6e90\u6d88\u8017\u5de8\u5927\u7684\u590d\u6742\u8ba1\u7b97\u548c\u5927\u89c4\u6a21\u4f5c\u4e1a\u65f6\uff0c\u6709\u6548\u7684\u5185\u5b58\u5206\u914d\u3001\u7edf\u8ba1\u3001\u7ba1\u63a7\u5bf9\u4e8e\u7cfb\u7edf\u7684\u7a33\u5b9a\u6027\u8d77\u7740\u5341\u5206\u5173\u952e\u7684\u4f5c\u7528\u2014\u2014\u66f4\u5feb\u7684\u5185\u5b58\u5206\u914d\u901f\u5ea6\u5c06\u6709\u6548\u63d0\u5347\u67e5\u8be2\u6027\u80fd\uff0c\u901a\u8fc7\u5bf9\u5185\u5b58\u7684\u5206\u914d\u3001\u8ddf\u8e2a\u4e0e\u9650\u5236\u53ef\u4ee5\u4fdd\u8bc1\u4e0d\u5b58\u5728\u5185\u5b58\u70ed\u70b9\uff0c\u53ca\u65f6\u51c6\u786e\u5730\u54cd\u5e94\u5185\u5b58\u4e0d\u8db3\u5e76\u5c3d\u53ef\u80fd\u89c4\u907f OOM \u548c\u67e5\u8be2\u5931\u8d25\uff0c\u8fd9\u4e00\u7cfb\u5217\u673a\u5236\u90fd\u5c06\u663e\u8457\u63d0\u9ad8\u7cfb\u7edf\u7a33\u5b9a\u6027\uff1b\u540c\u65f6\u66f4\u7cbe\u786e\u7684\u5185\u5b58\u7edf\u8ba1\uff0c\u4e5f\u662f\u5927\u67e5\u8be2\u843d\u76d8\u7684\u57fa\u7840\u3002"),(0,t.yg)("h2",{id:"doris-be-\u5185\u5b58\u7ed3\u6784"},"Doris BE \u5185\u5b58\u7ed3\u6784"),(0,t.yg)("p",null,(0,t.yg)("img",{alt:"Memory Structure",src:a(627137).A,width:"1686",height:"1420"})),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre"},"Server physical memory: \u4f9b\u670d\u52a1\u5668\u4e0a\u6240\u6709\u8fdb\u7a0b\u4f7f\u7528\u7684\u7684\u7269\u7406\u5185\u5b58\uff0c`cat /proc/meminfo` \u6216 `free -h` \u770b\u5230\u7684 MemTotal\u3002\n    |\n    |---\x3e Linux Kernel Memory And Other Process Memory: Linux \u5185\u6838\u548c\u5176\u4ed6\u8fdb\u7a0b\u4f7f\u7528\u7684\u5185\u5b58\u3002\n    |\n    |---\x3e Doris BE Process Memory: Doris BE \u8fdb\u7a0b\u4f7f\u7528\u7684\u5185\u5b58\uff0c\u4e0a\u9650\u662f\u670d\u52a1\u5668\u7269\u7406\u5185\u5b58\u51cf\u53bb Linux \u5185\u6838\u548c\u5176\u4ed6\u8fdb\u7a0b\u4f7f\u7528\u7684\u5185\u5b58\uff0c\u6216\u8005 Cgroup \u914d\u7f6e\u7684\u5185\u5b58\u5927\u5c0f\u3002\n            |\n            |---\x3e untracked: \u6ca1\u6709\u88ab\u8ddf\u8e2a\u548c\u7ba1\u7406\u7684\u5185\u5b58\uff0c\u5305\u62ec rpc\uff0cjvm\uff0c\u90e8\u5206 metadata \u7b49\u3002\u5728\u8bbf\u95ee\u5916\u8868\u6216\u4f7f\u7528 java udf \u65f6\u4f1a\u7528\u5230 jvm\u3002\n            |\n            |---\x3e tracked: \u88ab\u8ddf\u8e2a\u548c\u7ba1\u7406\u7684\u5185\u5b58\uff0c\u5141\u8bb8\u5b9e\u65f6\u67e5\u770b\uff0c\u81ea\u52a8\u5185\u5b58\u56de\u6536\uff0c\u901a\u8fc7\u53c2\u6570\u63a7\u5236\u5927\u5c0f\u3002\n                    |\n                    |---\x3e jemalloc: jemalloc \u7ba1\u7406\u7684 cache \u548c metadata\uff0c\u652f\u6301\u53c2\u6570\u63a7\u5236\uff0c\u5185\u5b58\u4e0d\u8db3\u65f6\u81ea\u52a8\u56de\u6536\u3002\n                    |\n                    |---\x3e global: Doris \u5168\u5c40\u5171\u4eab\u7684\u5185\u5b58\uff0c\u4e3b\u8981\u5305\u62ec cache \u548c metadata\u3002\n                    |       |\n                    |       |---\x3e doris cache: doris \u81ea\u5df1\u7ba1\u7406\u7684 cache\uff0c\u652f\u6301\u5355\u72ec\u901a\u8fc7\u53c2\u6570\u63a7\u5236\u5bb9\u91cf\u548c\u6dd8\u6c70\u65f6\u957f\uff0c\u5185\u5b58\u4e0d\u8db3\u65f6\u81ea\u52a8\u56de\u6536\u3002\n                    |       |\n                    |       |---\x3e doris metadata: BE \u4e0a\u5b58\u50a8\u6570\u636e\u7684 metadata\uff0c\u5305\u62ec\u6570\u636e schema \u7b49\u4e00\u7cfb\u5217\u5185\u5b58\u6570\u636e\u7ed3\u6784\u548c\u5b83\u4eec\u7684\u7f13\u5b58\u3002\n                    |\n                    |---\x3e task: Doris \u4e0a\u6267\u884c\u7684\u4efb\u52a1\u4f7f\u7528\u7684\u5185\u5b58\uff0c\u9884\u671f\u5728\u4efb\u52a1\u7ed3\u675f\u540e\u91ca\u653e\uff0c\u5305\u62ec query\uff0cload\uff0ccompaction \u7b49\u3002\n                    |       |\n                    |       |---\x3e query: \u67e5\u8be2\u671f\u95f4\u4f7f\u7528\u7684\u5185\u5b58\u3002\u4e00\u4e2a\u67e5\u8be2\u88ab\u62c6\u5206\u6210\u591a\u4e2a fragment \u5355\u72ec\u6267\u884c\uff0c\u901a\u8fc7\u6570\u636e shuffle \u76f8\u8fde\u3002\n                    |       |       |\n                    |       |       |---\x3e fragment: \u4e00\u4e2a fragment \u88ab\u62c6\u5206\u6210\u591a\u4e2a operator \u4ee5 pipeline \u7684\u5f62\u5f0f\u6267\u884c\u3002\n                    |       |       |       |\n                    |       |       |       |---\x3e operator: \u5305\u62ec data block, hash table, arena, exchange sink buffer \u7b49\u5185\u5b58\u6570\u636e\u7ed3\u6784\u3002\n                    |       |\n                    |       |---\x3e load: \u6570\u636e\u5bfc\u5165\u671f\u95f4\u4f7f\u7528\u7684\u5185\u5b58\u3002\u6570\u636e\u5bfc\u5165\u5305\u62ec fragment \u8bfb\u53d6\u548c channel \u5199\u5165\u6570\u636e\u4e24\u4e2a\u9636\u6bb5\u3002\n                    |       |       |\n                    |       |       |---\x3e fragment: \u548c\u67e5\u8be2\u7684 fragment \u6267\u884c\u76f8\u540c\uff0cstream load \u901a\u5e38\u53ea\u6709 scan operator\u3002\n                    |       |       |\n                    |       |       |---\x3e channel: tablet channel \u5c06\u6570\u636e\u5199\u5165\u4e34\u65f6\u7684\u6570\u636e\u7ed3\u6784 memtable\uff0c\u7136\u540e delta writer \u5c06\u6570\u636e\u538b\u7f29\u540e\u5199\u5165\u6587\u4ef6\u3002\n")),(0,t.yg)("hr",null),(0,t.yg)("h2",{id:"\u5185\u5b58\u67e5\u770b"},"\u5185\u5b58\u67e5\u770b"),(0,t.yg)("p",null,"Doris BE \u4f7f\u7528\u5185\u5b58\u8ddf\u8e2a\u5668\uff08Memory Tracker\uff09\u8bb0\u5f55\u8fdb\u7a0b\u5185\u5b58\u4f7f\u7528\uff0c\u652f\u6301 Web \u9875\u9762\u67e5\u770b\uff0c\u5e76\u5728\u5185\u5b58\u76f8\u5173\u62a5\u9519\u65f6\u6253\u5370\u5230 BE \u65e5\u5fd7\u4e2d\uff0c\u7528\u4e8e\u5185\u5b58\u5206\u6790\u548c\u6392\u67e5\u5185\u5b58\u95ee\u9898\u3002"),(0,t.yg)("h3",{id:"\u5b9e\u65f6\u5185\u5b58\u7edf\u8ba1"},"\u5b9e\u65f6\u5185\u5b58\u7edf\u8ba1"),(0,t.yg)("p",null,"\u5b9e\u65f6\u7684\u5185\u5b58\u7edf\u8ba1\u7ed3\u679c\u901a\u8fc7 Doris BE \u7684 Web \u9875\u9762\u67e5\u770b ",(0,t.yg)("inlineCode",{parentName:"p"},"http://{be_host}:{be_web_server_port}/mem_tracker"),"\uff0c\u5c55\u793a ",(0,t.yg)("inlineCode",{parentName:"p"},"type=overview")," \u7684 Memory Tracker \u5f53\u524d\u8ddf\u8e2a\u7684\u5185\u5b58\u5927\u5c0f\u548c\u5cf0\u503c\u5185\u5b58\u5927\u5c0f\uff0c\u5305\u62ec Query/Load/Compaction/Global \u7b49\uff0c",(0,t.yg)("inlineCode",{parentName:"p"},"be_web_server_port")," \u9ed8\u8ba4 8040\u3002"),(0,t.yg)("p",null,(0,t.yg)("img",{parentName:"p",src:"https://github.com/apache/doris/assets/13197424/f989f4d2-4cc5-4a8e-880e-93ae6073d17d",alt:"image"})),(0,t.yg)("p",null,"Memory Tracker \u5206\u4e3a\u4e0d\u540c\u7684\u7c7b\u578b\uff0c\u5176\u4e2d ",(0,t.yg)("inlineCode",{parentName:"p"},"type=overview")," \u7684 Memory Tracker \u4e2d\u9664 ",(0,t.yg)("inlineCode",{parentName:"p"},"process resident memory"),"\u3001",(0,t.yg)("inlineCode",{parentName:"p"},"process virtual memory"),"\u3001",(0,t.yg)("inlineCode",{parentName:"p"},"sum of all trackers")," \u5916\uff0c\u5176\u4ed6 ",(0,t.yg)("inlineCode",{parentName:"p"},"type=overview")," \u7684 Memory Tracker \u90fd\u53ef\u4ee5\u901a\u8fc7 ",(0,t.yg)("inlineCode",{parentName:"p"},"http://{be_host}:{be_web_server_port}/mem_tracker?type=Lable")," \u67e5\u770b\u8be6\u60c5\u3002"),(0,t.yg)("p",null,"Memory Tracker \u62e5\u6709\u5982\u4e0b\u7684\u5c5e\u6027\uff1a"),(0,t.yg)("ol",null,(0,t.yg)("li",{parentName:"ol"},"Label: Memory Tracker \u7684\u540d\u79f0"),(0,t.yg)("li",{parentName:"ol"},"Current Consumption(Bytes): \u5f53\u524d\u5185\u5b58\u503c\uff0c\u5355\u4f4d B\u3002"),(0,t.yg)("li",{parentName:"ol"},"Current Consumption(Normalize): \u5f53\u524d\u5185\u5b58\u503c\u7684 .G.M.K \u683c\u5f0f\u5316\u8f93\u51fa\u3002"),(0,t.yg)("li",{parentName:"ol"},"Peak Consumption(Bytes): BE \u8fdb\u7a0b\u542f\u52a8\u540e\u7684\u5185\u5b58\u5cf0\u503c\uff0c\u5355\u4f4d B\uff0cBE \u91cd\u542f\u540e\u91cd\u7f6e\u3002"),(0,t.yg)("li",{parentName:"ol"},"Peak Consumption(Normalize): BE \u8fdb\u7a0b\u542f\u52a8\u540e\u5185\u5b58\u5cf0\u503c\u7684 .G.M.K \u683c\u5f0f\u5316\u8f93\u51fa\uff0cBE \u91cd\u542f\u540e\u91cd\u7f6e\u3002"),(0,t.yg)("li",{parentName:"ol"},"Parent Label: \u7528\u4e8e\u8868\u660e\u4e24\u4e2a Memory Tracker \u7684\u7236\u5b50\u5173\u7cfb\uff0cChild Tracker \u8bb0\u5f55\u7684\u5185\u5b58\u662f Parent Tracker \u7684\u5b50\u96c6\uff0cParent \u76f8\u540c\u7684\u4e0d\u540c Tracker \u8bb0\u5f55\u7684\u5185\u5b58\u53ef\u80fd\u5b58\u5728\u4ea4\u96c6\u3002")),(0,t.yg)("p",null,"\u6709\u5173 Memory Tracker \u7684\u66f4\u591a\u4ecb\u7ecd\u53c2\u8003 ",(0,t.yg)("a",{parentName:"p",href:"/zh-CN/docs/dev/admin-manual/memory-management/memory-feature/memory-tracker"},"\u5185\u5b58\u8ddf\u8e2a\u5668"),"\u3002"),(0,t.yg)("h3",{id:"\u5386\u53f2\u5185\u5b58\u7edf\u8ba1"},"\u5386\u53f2\u5185\u5b58\u7edf\u8ba1"),(0,t.yg)("p",null,"\u5386\u53f2\u7684\u5185\u5b58\u7edf\u8ba1\u7ed3\u679c\u901a\u8fc7 Doris BE \u7684 Bvar \u9875\u9762\u67e5\u770b ",(0,t.yg)("inlineCode",{parentName:"p"},"http://http://{be_host}:{brpc_port}/vars/*memory_*"),"\uff0c\u7528\u5b9e\u65f6\u5185\u5b58\u7edf\u8ba1\u9875\u9762 ",(0,t.yg)("inlineCode",{parentName:"p"},"http://{be_host}:{be_web_server_port}/mem_tracker")," \u4e2d Memory Tracker \u7684 Label \u641c\u7d22 Bvar \u9875\u9762\uff0c\u5373\u53ef\u5f97\u5230\u5bf9\u5e94 Memory Tracker \u8ddf\u8e2a\u7684\u5185\u5b58\u5927\u5c0f\u53d8\u5316\u8d8b\u52bf\uff0c",(0,t.yg)("inlineCode",{parentName:"p"},"brpc_port")," \u9ed8\u8ba4 8060\u3002"),(0,t.yg)("p",null,(0,t.yg)("img",{alt:"Bvar Memory",src:a(909753).A,width:"1592",height:"1792"})),(0,t.yg)("p",null,"\u5f53\u62a5\u9519\u8fdb\u7a0b\u5185\u5b58\u8d85\u9650\u6216\u53ef\u7528\u5185\u5b58\u4e0d\u8db3\u65f6\uff0c\u5728 ",(0,t.yg)("inlineCode",{parentName:"p"},"be/log/be.INFO")," \u65e5\u5fd7\u4e2d\u53ef\u4ee5\u627e\u5230 ",(0,t.yg)("inlineCode",{parentName:"p"},"Memory Tracker Summary"),"\uff0c\u5305\u542b\u6240\u6709 ",(0,t.yg)("inlineCode",{parentName:"p"},"Type=overview")," \u548c ",(0,t.yg)("inlineCode",{parentName:"p"},"Type=global")," \u7684 Memory Tracker\uff0c\u5e2e\u52a9\u4f7f\u7528\u8005\u5206\u6790\u5f53\u65f6\u7684\u5185\u5b58\u72b6\u6001\uff0c\u5177\u4f53\u53c2\u8003 ",(0,t.yg)("a",{parentName:"p",href:"/zh-CN/docs/dev/admin-manual/memory-management/memory-analysis/memory-log-analysis"},"\u5185\u5b58\u65e5\u5fd7\u5206\u6790")),(0,t.yg)("hr",null),(0,t.yg)("h2",{id:"\u5185\u5b58\u5206\u6790"},"\u5185\u5b58\u5206\u6790"),(0,t.yg)("p",null,"\u5c06 ",(0,t.yg)("inlineCode",{parentName:"p"},"type=overview")," \u7684 Memory Tracker \u5bf9\u5e94\u5230\u4e0a\u8ff0\u5185\u5b58\u7ed3\u6784\u4e2d ",(0,t.yg)("inlineCode",{parentName:"p"},"tracked")," \u4e0b\u7684\u6bcf\u4e00\u90e8\u5206\u5185\u5b58\uff1a"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre"},"Doris BE Process Memory\n    |\n    |---\x3e tracked: \u5bf9\u5e94 `MemTrackerLimiter Label=sum of all trackers, Type=overview`\uff0c\u662f Memory Tracker \u7edf\u8ba1\u5230\u7684\u6240\u6709\u5185\u5b58\uff0c\u5373\u9664 `Label=process resident memory` \u548c `Label=process virtual memory` \u5916\uff0c\u5176\u4ed6 `type=overview` \u7684 Memory Tracker \u7684 Current Consumption \u603b\u548c\u3002\n            |\n            |---\x3e jemalloc\n            |       |\n            |       |---\x3e jemalloc cache: \u5bf9\u5e94 `MemTrackerLimiter Label=tc/jemalloc_cache, Type=overview`\uff0cJemalloc \u7f13\u5b58\u5305\u62ec Dirty Page\u3001Thread Cache \u4e24\u90e8\u5206\u3002\n            |       |\n            |       |---\x3e jemalloc metadata: \u5bf9\u5e94 `MemTrackerLimiter Label=tc/jemalloc_metadata, Type=overview`\uff0cJemalloc \u7684 Metadata\u3002\n            |\n            |---\x3e global: \u5bf9\u5e94 `MemTrackerLimiter Label=global, Type=overview`\uff0c\u5305\u62ec Cache\u3001\u5143\u6570\u636e\u3001\u89e3\u538b\u7f29 \u7b49\u751f\u547d\u5468\u671f\u548c\u8fdb\u7a0b\u76f8\u540c\u7684\u5168\u5c40 Memory Tracker\uff0cWeb \u9875\u9762 `http://{be_host}:{be_web_server_port}/mem_tracker?type=global` \u5c55\u793a `type=global` \u7684\u6240\u6709 Memory Tracker\u3002\n            |\n            |---\x3e task\n            |       |\n            |       |---\x3e query: \u5bf9\u5e94 `MemTrackerLimiter Label=query, Type=overview`\uff0c\u5373\u6240\u6709 Query Memory Tracker \u7684 Current Consumption \u603b\u548c\uff0cWeb \u9875\u9762 `http://{be_host}:{be_web_server_port}/mem_tracker?type=query` \u5c55\u793a `type=query` \u7684\u6240\u6709 Memory Tracker\u3002\n            |       |\n            |       |---\x3e load: \u5bf9\u5e94 `MemTrackerLimiter Label=load, Type=overview`\uff0c\u6240\u6709 Load Memory Tracker \u7684 Current Consumption \u603b\u548c\uff0cWeb \u9875\u9762 `http://{be_host}:{be_web_server_port}/mem_tracker?type=load` \u5c55\u793a `type=load` \u7684\u6240\u6709 Memory Tracker\u3002\n            |       |\n            |       |---\x3e reserved: \u5bf9\u5e94 `MemTrackerLimiter Label=reserved_memory, Type=overview`\uff0c\u88ab\u9884\u7559\u7684\u5185\u5b58\uff0c\u67e5\u8be2\u5728\u6784\u5efa Hash Table \u7b49\u9700\u8981\u5927\u5185\u5b58\u7684\u884c\u4e3a\u4e4b\u524d\uff0c\u4f1a\u5148\u4ece Memory Tracker \u4e2d\u9884\u7559\u51fa\u6240\u6784\u5efa Hash Table \u5927\u5c0f\u7684\u5185\u5b58\uff0c\u786e\u4fdd\u540e\u7eed\u5185\u5b58\u7533\u8bf7\u80fd\u591f\u6ee1\u8db3\u3002\n            |       |\n            |       |---\x3e compaction: \u5bf9\u5e94 `MemTrackerLimiter Label=compaction, Type=overview`\uff0c\u6240\u6709 Compaction Memory Tracker \u7684 Current Consumption \u603b\u548c\uff0cWeb \u9875\u9762 `http://{be_host}:{be_web_server_port}/mem_tracker?type=compaction` \u5c55\u793a `type=compaction` \u7684\u6240\u6709 Memory Tracker\u3002\n            |       |\n            |       |---\x3e schema_change: \u5bf9\u5e94 `MemTrackerLimiter Label=schema_change, Type=overview`\uff0c\u6240\u6709 Schema Change Memory Tracker \u7684 Current Consumption \u603b\u548c\uff0cWeb \u9875\u9762 `http://{be_host}:{be_web_server_port}/mem_tracker?type=schema_change` \u5c55\u793a `type=schema_change` \u7684\u6240\u6709 Memory Tracker\u3002\n\n            |       |\n            |       |---\x3e other: \u5bf9\u5e94 `MemTrackerLimiter Label=other, Type=overview`\uff0c\u9664\u4e0a\u8ff0\u4e4b\u5916\u5176\u4ed6\u4efb\u52a1\u7684\u5185\u5b58\u603b\u548c\uff0c\u4f8b\u5982 EngineAlterTabletTask\u3001EngineCloneTask\u3001CloudEngineCalcDeleteBitmapTask\u3001SnapshotManager \u7b49\uff0cWeb \u9875\u9762 `http://{be_host}:{be_web_server_port}/mem_tracker?type=other` \u5c55\u793a `type=other` \u7684\u6240\u6709 Memory Tracker\u3002\n    |\n    |---\x3e Doris BE \u8fdb\u7a0b\u7269\u7406\u5185\u5b58\uff0c\u5bf9\u5e94 `MemTrackerLimiter Label=process resident memory, Type=overview`\uff0cCurrent Consumption \u53d6\u81ea VmRSS in `/proc/self/status`\uff0cPeak Consumption \u53d6\u81ea VmHWM in `/proc/self/status`\u3002\n    |\n    |---\x3e Doris BE \u8fdb\u7a0b\u865a\u62df\u5185\u5b58\uff0c\u5bf9\u5e94 `MemTrackerLimiter Label=process virtual memory, Type=overview`\uff0cCurrent Consumption \u53d6\u81ea VmSize in `/proc/self/status`\uff0cPeak Consumption \u53d6\u81ea VmPeak in `/proc/self/status`\u3002\n")),(0,t.yg)("p",null,"\u4e0a\u8ff0\u5185\u5b58\u7ed3\u6784\u4e2d\u6bcf\u4e00\u90e8\u5206\u5185\u5b58\u7684\u5206\u6790\u65b9\u6cd5:"),(0,t.yg)("ol",null,(0,t.yg)("li",{parentName:"ol"},(0,t.yg)("p",{parentName:"li"},(0,t.yg)("a",{parentName:"p",href:"/zh-CN/docs/dev/admin-manual/memory-management/memory-analysis/jemalloc-memory-analysis"},"Jemalloc \u5185\u5b58\u5206\u6790"))),(0,t.yg)("li",{parentName:"ol"},(0,t.yg)("p",{parentName:"li"},(0,t.yg)("a",{parentName:"p",href:"/zh-CN/docs/dev/admin-manual/memory-management/memory-analysis/global-memory-analysis"},"\u5168\u5c40\u5185\u5b58\u5206\u6790"))),(0,t.yg)("li",{parentName:"ol"},(0,t.yg)("p",{parentName:"li"},(0,t.yg)("a",{parentName:"p",href:"/zh-CN/docs/dev/admin-manual/memory-management/memory-analysis/query-memory-analysis"},"Query \u5185\u5b58\u5206\u6790"))),(0,t.yg)("li",{parentName:"ol"},(0,t.yg)("p",{parentName:"li"},(0,t.yg)("a",{parentName:"p",href:"/zh-CN/docs/dev/admin-manual/memory-management/memory-analysis/load-memory-analysis"},"Load \u5185\u5b58\u5206\u6790")))),(0,t.yg)("hr",null),(0,t.yg)("h2",{id:"\u5185\u5b58\u95ee\u9898-faq"},"\u5185\u5b58\u95ee\u9898 FAQ"),(0,t.yg)("p",null,"\u53c2\u8003 ",(0,t.yg)("a",{parentName:"p",href:"/zh-CN/docs/dev/admin-manual/memory-management/memory-issue-faq"},"\u5185\u5b58\u95ee\u9898 FAQ")," \u5206\u6790\u5e38\u89c1\u7684\u5185\u5b58\u95ee\u9898\u3002"),(0,t.yg)("hr",null),(0,t.yg)("h2",{id:"\u5185\u5b58\u63a7\u5236\u7b56\u7565"},"\u5185\u5b58\u63a7\u5236\u7b56\u7565"),(0,t.yg)("p",null,"\u53c2\u8003 ",(0,t.yg)("a",{parentName:"p",href:"/zh-CN/docs/dev/admin-manual/memory-management/memory-feature/memory-control-strategy"},"\u5185\u5b58\u63a7\u5236\u7b56\u7565")," \u4e2d\u5bf9\u5185\u5b58\u5206\u914d\u3001\u76d1\u63a7\u3001\u56de\u6536\u7684\u4ecb\u7ecd\uff0c\u5b83\u4eec\u4fdd\u8bc1\u4e86 Doris BE \u8fdb\u7a0b\u5185\u5b58\u7684\u9ad8\u6548\u53ef\u63a7\u3002"))}s.isMDXComponent=!0},909753:(e,r,a)=>{a.d(r,{A:()=>n});const n=a.p+"assets/images/bvar-memory-9c598521dff20751a24f3a3ae458096a.png"},627137:(e,r,a)=>{a.d(r,{A:()=>n});const n=a.p+"assets/images/memory-structure-c33470cfd0abfcf0b7ced0de7e483537.png"}}]);