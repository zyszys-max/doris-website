"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([[172454],{15680:(e,r,n)=>{n.d(r,{xA:()=>u,yg:()=>y});var t=n(296540);function o(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function a(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function s(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?a(Object(n),!0).forEach((function(r){o(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function l(e,r){if(null==e)return{};var n,t,o=function(e,r){if(null==e)return{};var n,t,o={},a=Object.keys(e);for(t=0;t<a.length;t++)n=a[t],r.indexOf(n)>=0||(o[n]=e[n]);return o}(e,r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(t=0;t<a.length;t++)n=a[t],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var i=t.createContext({}),c=function(e){var r=t.useContext(i),n=r;return e&&(n="function"==typeof e?e(r):s(s({},r),e)),n},u=function(e){var r=c(e.components);return t.createElement(i.Provider,{value:r},e.children)},m="mdxType",p={inlineCode:"code",wrapper:function(e){var r=e.children;return t.createElement(t.Fragment,{},r)}},d=t.forwardRef((function(e,r){var n=e.components,o=e.mdxType,a=e.originalType,i=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),m=c(n),d=o,y=m["".concat(i,".").concat(d)]||m[d]||p[d]||a;return n?t.createElement(y,s(s({ref:r},u),{},{components:n})):t.createElement(y,s({ref:r},u))}));function y(e,r){var n=arguments,o=r&&r.mdxType;if("string"==typeof e||o){var a=n.length,s=new Array(a);s[0]=d;var l={};for(var i in r)hasOwnProperty.call(r,i)&&(l[i]=r[i]);l.originalType=e,l[m]="string"==typeof e?e:o,s[1]=l;for(var c=2;c<a;c++)s[c]=n[c];return t.createElement.apply(null,s)}return t.createElement.apply(null,n)}d.displayName="MDXCreateElement"},270511:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>i,contentTitle:()=>s,default:()=>p,frontMatter:()=>a,metadata:()=>l,toc:()=>c});var t=n(58168),o=(n(296540),n(15680));const a={title:"\u4f7f\u7528Workload Group\u7ba1\u7406\u8fdc\u7a0bIO",language:"zh-CN"},s=void 0,l={unversionedId:"admin-manual/resource-admin/use-workload-remote-io-limit",id:"version-3.0/admin-manual/resource-admin/use-workload-remote-io-limit",title:"\u4f7f\u7528Workload Group\u7ba1\u7406\u8fdc\u7a0bIO",description:"\x3c!--",source:"@site/i18n/zh-CN/docusaurus-plugin-content-docs/version-3.0/admin-manual/resource-admin/use-workload-remote-io-limit.md",sourceDirName:"admin-manual/resource-admin",slug:"/admin-manual/resource-admin/use-workload-remote-io-limit",permalink:"/zh-CN/docs/3.0/admin-manual/resource-admin/use-workload-remote-io-limit",draft:!1,tags:[],version:"3.0",frontMatter:{title:"\u4f7f\u7528Workload Group\u7ba1\u7406\u8fdc\u7a0bIO",language:"zh-CN"},sidebar:"docs",previous:{title:"\u4f7f\u7528Workload Group\u7ba1\u7406\u672c\u5730IO",permalink:"/zh-CN/docs/3.0/admin-manual/resource-admin/use-workload-local-io-limit"},next:{title:"SQL \u62e6\u622a",permalink:"/zh-CN/docs/3.0/admin-manual/query-admin/sql-interception"}},i={},c=[{value:"\u6d4b\u8bd5\u8fdc\u7a0bIO\u9650\u5236",id:"\u6d4b\u8bd5\u8fdc\u7a0bio\u9650\u5236",level:2},{value:"\u6d4b\u8bd5\u73af\u5883",id:"\u6d4b\u8bd5\u73af\u5883",level:3},{value:"\u6d4b\u8bd5\u4e0d\u9650\u5236\u8fdc\u7a0b\u8bfb\u7684IO",id:"\u6d4b\u8bd5\u4e0d\u9650\u5236\u8fdc\u7a0b\u8bfb\u7684io",level:3},{value:"\u6d4b\u8bd5\u9650\u5236\u8fdc\u7a0b\u8bfb\u7684IO",id:"\u6d4b\u8bd5\u9650\u5236\u8fdc\u7a0b\u8bfb\u7684io",level:3}],u={toc:c},m="wrapper";function p(e){let{components:r,...a}=e;return(0,o.yg)(m,(0,t.A)({},u,a,{components:r,mdxType:"MDXLayout"}),(0,o.yg)("p",null,"BrokerLoad\u548cS3Load \u662f\u5e38\u7528\u7684\u5927\u6279\u91cf\u6570\u636e\u5bfc\u5165\u65b9\u5f0f\uff0c\u7528\u6237\u53ef\u4ee5\u628a\u6570\u636e\u5148\u4e0a\u4f20\u5230HDFS\u6216\u8005S3\uff0c\u7136\u540e\u901a\u8fc7Brokerload\u548cS3Load \u5bf9\u6570\u636e\u8fdb\u884c\u5e76\u884c\u5bfc\u5165\u3002 Doris\u4e3a\u4e86\u52a0\u5feb\u5bfc\u5165\u901f\u5ea6\uff0c\u4f1a\u4f7f\u7528\u591a\u7ebf\u7a0b\u5e76\u884c\u7684\u65b9\u5f0f\u4eceHDFS/S3\u62c9\u53d6\u6570\u636e\uff0c\u6b64\u65f6\u4f1a\u5bf9HDFS/S3 \u4ea7\u751f\u5de8\u5927\u7684\u538b\u529b\uff0c\u4f1a\u5bfc\u81f4HDFS/S3\u4e0a\u8fd0\u884c\u7684\u522b\u7684\u4f5c\u4e1a\u4e0d\u7a33\u5b9a\u3002\n\u53ef\u4ee5\u901a\u8fc7Workload Group \u8fdc\u7a0bIO\u7684\u9650\u5236\u529f\u80fd\u6765\u9650\u5236\u5bfc\u5165\u8fc7\u7a0b\u4e2d\u5bf9HDFS/S3\u7684\u5e26\u5bbd\uff0c\u964d\u4f4e\u5bf9\u5176\u4ed6\u4e1a\u52a1\u7684\u5f71\u54cd\u3002"),(0,o.yg)("h2",{id:"\u6d4b\u8bd5\u8fdc\u7a0bio\u9650\u5236"},"\u6d4b\u8bd5\u8fdc\u7a0bIO\u9650\u5236"),(0,o.yg)("h3",{id:"\u6d4b\u8bd5\u73af\u5883"},"\u6d4b\u8bd5\u73af\u5883"),(0,o.yg)("p",null,"1FE\uff0c1BE\u90e8\u7f72\u5728\u540c\u4e00\u53f0\u673a\u5668\uff0c\u914d\u7f6e\u4e3a16\u683864G\u5185\u5b58\u3002\u6d4b\u8bd5\u6570\u636e\u4e3aclickbench\u6570\u636e\u96c6\uff0c\u6d4b\u8bd5\u524d\u9700\u8981\u628a\u6570\u636e\u96c6\u4e0a\u4f20\u5230S3\u4e0a\u3002\u8003\u8651\u5230\u4e0a\u4f20\u65f6\u95f4\u7684\u95ee\u9898\uff0c\u6211\u4eec\u53ea\u53d6\u5176\u4e2d\u76841\u5343\u4e07\u884c\u6570\u636e\u4e0a\u4f20\uff0c\u7136\u540e\u4f7f\u7528tvf\u7684\u529f\u80fd\u67e5\u8be2s3\u7684\u6570\u636e\u3002"),(0,o.yg)("p",null,"\u4e0a\u4f20\u6210\u529f\u540e\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4\u67e5\u770bSchema\u4fe1\u606f\u3002"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre"},'// \u67e5\u770bschema\nDESC FUNCTION s3 (\n    "URI" = "https://bucketname/1kw.tsv",\n    "s3.access_key"= "ak",\n    "s3.secret_key" = "sk",\n    "format" = "csv",\n    "use_path_style"="true"\n);\n')),(0,o.yg)("h3",{id:"\u6d4b\u8bd5\u4e0d\u9650\u5236\u8fdc\u7a0b\u8bfb\u7684io"},"\u6d4b\u8bd5\u4e0d\u9650\u5236\u8fdc\u7a0b\u8bfb\u7684IO"),(0,o.yg)("ol",null,(0,o.yg)("li",{parentName:"ol"},"\u53d1\u8d77\u5355\u5e76\u53d1\u6d4b\u8bd5\uff0c\u5168\u8868\u626b\u63cfclickbench\u8868\u3002")),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre"},'// \u8bbe\u7f6e\u53eascan\u6570\u636e\uff0c\u4e0d\u8fd4\u56de\u7ed3\u679c\nset dry_run_query = true;\n\n// \u4f7f\u7528tvf\u67e5\u8be2s3\u7684\u6570\u636e\nSELECT * FROM s3(\n    "URI" = "https://bucketname/1kw.tsv",\n    "s3.access_key"= "ak",\n    "s3.secret_key" = "sk",\n    "format" = "csv",\n    "use_path_style"="true"\n);\n')),(0,o.yg)("ol",{start:2},(0,o.yg)("li",{parentName:"ol"},"\u4f7f\u7528\u7cfb\u7edf\u8868\u67e5\u770b\u6b64\u65f6\u7684\u8fdc\u7a0bIO\u541e\u5410\u3002\u53ef\u4ee5\u770b\u5230\u8fd9\u4e2a\u67e5\u8be2\u7684\u8fdc\u7a0bIO\u541e\u5410\u4e3a837M\u6bcf\u79d2\uff0c\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u8fd9\u91cc\u7684\u5b9e\u9645IO\u541e\u5410\u53d7\u73af\u5883\u5f71\u54cd\u8f83\u5927\uff0c\u5982\u679cBE\u6240\u5728\u7684\u673a\u5668\u8fde\u63a5\u5916\u90e8\u5b58\u50a8\u7684\u5e26\u5bbd\u6bd4\u8f83\u4f4e\uff0c\u90a3\u4e48\u53ef\u80fd\u5b9e\u9645\u7684\u541e\u5410\u4f1a\u5c0f\u3002")),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre"},"MySQL [(none)]> select cast(REMOTE_SCAN_BYTES_PER_SECOND/1024/1024 as int) as read_mb from information_schema.workload_group_resource_usage;\n+---------+\n| read_mb |\n+---------+\n|     837 |\n+---------+\n1 row in set (0.104 sec)\n\nMySQL [(none)]> select cast(REMOTE_SCAN_BYTES_PER_SECOND/1024/1024 as int) as read_mb from information_schema.workload_group_resource_usage;\n+---------+\n| read_mb |\n+---------+\n|     867 |\n+---------+\n1 row in set (0.070 sec)\n\nMySQL [(none)]> select cast(REMOTE_SCAN_BYTES_PER_SECOND/1024/1024 as int) as read_mb from information_schema.workload_group_resource_usage;\n+---------+\n| read_mb |\n+---------+\n|     867 |\n+---------+\n1 row in set (0.186 sec)\n")),(0,o.yg)("ol",{start:3},(0,o.yg)("li",{parentName:"ol"},"\u4f7f\u7528sar(sar -n DEV 1 3600)\u547d\u4ee4\u67e5\u770b\u673a\u5668\u7684\u7f51\u7edc\u5e26\u5bbd\uff0c\u53ef\u4ee5\u770b\u5230\u673a\u5668\u7ea7\u522b\u6700\u5927\u7f51\u7edc\u5e26\u5bbd\u4e3a1033M\u6bcf\u79d2\u3002\n\u8f93\u51fa\u7684\u7b2c\u4e00\u5217\u4e3a\u5f53\u524d\u673a\u5668\u67d0\u4e2a\u7f51\u5361\u6bcf\u79d2\u63a5\u6536\u7684\u5b57\u8282\u6570\uff0c\u5355\u4f4d\u4e3aKB\u6bcf\u79d2\u3002")),(0,o.yg)("p",null,(0,o.yg)("img",{alt:"use workload group rio",src:n(379125).A,width:"960",height:"436"})),(0,o.yg)("h3",{id:"\u6d4b\u8bd5\u9650\u5236\u8fdc\u7a0b\u8bfb\u7684io"},"\u6d4b\u8bd5\u9650\u5236\u8fdc\u7a0b\u8bfb\u7684IO"),(0,o.yg)("ol",null,(0,o.yg)("li",{parentName:"ol"},"\u4fee\u6539Workload Group\u7684\u914d\u7f6e\uff0c\u9650\u5236\u8fdc\u7a0b\u8bfb\u7684IO\u541e\u5410\u4e3a100M\u6bcf\u79d2\u3002")),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre"},"alter workload group normal properties('remote_read_bytes_per_second'='104857600');\n")),(0,o.yg)("ol",{start:2},(0,o.yg)("li",{parentName:"ol"},"\u53d1\u8d77\u5355\u5e76\u53d1\u626b\u5168\u8868\u7684\u67e5\u8be2\u3002")),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre"},'// \u8bbe\u7f6e\u53eascan\u6570\u636e\uff0c\u4e0d\u8fd4\u56de\u7ed3\u679c\nset dry_run_query = true;\n\n// \u4f7f\u7528tvf\u67e5\u8be2s3\u7684\u6570\u636e\nSELECT * FROM s3(\n    "URI" = "https://bucketname/1kw.tsv",\n    "s3.access_key"= "ak",\n    "s3.secret_key" = "sk",\n    "format" = "csv",\n    "use_path_style"="true"\n);\n')),(0,o.yg)("ol",{start:3},(0,o.yg)("li",{parentName:"ol"},"\u4f7f\u7528\u7cfb\u7edf\u8868\u67e5\u770b\u6b64\u65f6\u7684\u8fdc\u7a0b\u8bfbIO\u541e\u5410\uff0c\u6b64\u65f6\u7684IO\u541e\u5410\u5728100M\u5de6\u53f3\uff0c\u4f1a\u6709\u4e00\u5b9a\u7684\u6ce2\u52a8\uff0c\u8fd9\u4e2a\u6ce2\u52a8\u662f\u53d7\u76ee\u524d\u7b97\u6cd5\u8bbe\u8ba1\u7684\u5f71\u54cd\uff0c\u901a\u5e38\u4f1a\u6709\u4e00\u4e2a\u9ad8\u5cf0\uff0c\u4f46\u4e0d\u4f1a\u6301\u7eed\u5f88\u957f\u65f6\u95f4\uff0c\u5c5e\u4e8e\u6b63\u5e38\u60c5\u51b5\u3002")),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre"},"MySQL [(none)]> select cast(REMOTE_SCAN_BYTES_PER_SECOND/1024/1024 as int) as read_mb from information_schema.workload_group_resource_usage;\n+---------+\n| read_mb |\n+---------+\n|      56 |\n+---------+\n1 row in set (0.010 sec)\n\nMySQL [(none)]> select cast(REMOTE_SCAN_BYTES_PER_SECOND/1024/1024 as int) as read_mb from information_schema.workload_group_resource_usage;\n+---------+\n| read_mb |\n+---------+\n|     131 |\n+---------+\n1 row in set (0.009 sec)\n\nMySQL [(none)]> select cast(REMOTE_SCAN_BYTES_PER_SECOND/1024/1024 as int) as read_mb from information_schema.workload_group_resource_usage;\n+---------+\n| read_mb |\n+---------+\n|     111 |\n+---------+\n1 row in set (0.009 sec)\n")),(0,o.yg)("ol",{start:4},(0,o.yg)("li",{parentName:"ol"},"\u4f7f\u7528sar\u547d\u4ee4\uff08sar -n DEV 1 3600\uff09\u67e5\u770b\u76ee\u524d\u7684\u7f51\u5361\u63a5\u6536\u6d41\u91cf\uff0c\u7b2c\u4e00\u5217\u4e3a\u6bcf\u79d2\u63a5\u6536\u7684\u6570\u636e\u91cf\uff0c\u53ef\u4ee5\u770b\u5230\u6700\u5927\u503c\u53d8\u6210\u4e86207M\u6bcf\u79d2\uff0c\u8bf4\u660e\u8bfbIO\u7684\u9650\u5236\u662f\u751f\u6548\u7684\uff0c\u4f46\u662f\u7531\u4e8esar\u547d\u4ee4\u770b\u5230\u7684\u662f\u673a\u5668\u7ea7\u522b\u7684\u6d41\u91cf\uff0c\u56e0\u6b64\u8981\u6bd4Doris\u7edf\u8ba1\u5230\u7684\u4f1a\u5927\u4e00\u4e9b\u3002")),(0,o.yg)("p",null,(0,o.yg)("img",{alt:"use workload group rio",src:n(293374).A,width:"864",height:"472"})))}p.isMDXComponent=!0},379125:(e,r,n)=>{n.d(r,{A:()=>t});const t=n.p+"assets/images/use_wg_rio_1-e3ae321d5e709bb0ba21b9572d2bce1f.png"},293374:(e,r,n)=>{n.d(r,{A:()=>t});const t=n.p+"assets/images/use_wg_rio_2-7511c9afedf43b931909b18e529f00ea.png"}}]);