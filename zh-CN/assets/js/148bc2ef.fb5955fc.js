"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([[720352],{15680:(e,a,t)=>{t.d(a,{xA:()=>m,yg:()=>u});var n=t(296540);function r(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function l(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function i(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?l(Object(t),!0).forEach((function(a){r(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function s(e,a){if(null==e)return{};var t,n,r=function(e,a){if(null==e)return{};var t,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)t=l[n],a.indexOf(t)>=0||(r[t]=e[t]);return r}(e,a);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)t=l[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var p=n.createContext({}),o=function(e){var a=n.useContext(p),t=a;return e&&(t="function"==typeof e?e(a):i(i({},a),e)),t},m=function(e){var a=o(e.components);return n.createElement(p.Provider,{value:a},e.children)},E="mdxType",c={inlineCode:"code",wrapper:function(e){var a=e.children;return n.createElement(n.Fragment,{},a)}},g=n.forwardRef((function(e,a){var t=e.components,r=e.mdxType,l=e.originalType,p=e.parentName,m=s(e,["components","mdxType","originalType","parentName"]),E=o(t),g=r,u=E["".concat(p,".").concat(g)]||E[g]||c[g]||l;return t?n.createElement(u,i(i({ref:a},m),{},{components:t})):n.createElement(u,i({ref:a},m))}));function u(e,a){var t=arguments,r=a&&a.mdxType;if("string"==typeof e||r){var l=t.length,i=new Array(l);i[0]=g;var s={};for(var p in a)hasOwnProperty.call(a,p)&&(s[p]=a[p]);s.originalType=e,s[E]="string"==typeof e?e:r,i[1]=s;for(var o=2;o<l;o++)i[o]=t[o];return n.createElement.apply(null,i)}return n.createElement.apply(null,t)}g.displayName="MDXCreateElement"},931092:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>p,contentTitle:()=>i,default:()=>c,frontMatter:()=>l,metadata:()=>s,toc:()=>o});var n=t(58168),r=(t(296540),t(15680));const l={title:"CREATE-EXTERNAL-TABLE",language:"zh-CN"},i=void 0,s={unversionedId:"sql-manual/sql-reference/Data-Definition-Statements/Create/CREATE-EXTERNAL-TABLE",id:"version-2.0/sql-manual/sql-reference/Data-Definition-Statements/Create/CREATE-EXTERNAL-TABLE",title:"CREATE-EXTERNAL-TABLE",description:"\x3c!--",source:"@site/i18n/zh-CN/docusaurus-plugin-content-docs/version-2.0/sql-manual/sql-reference/Data-Definition-Statements/Create/CREATE-EXTERNAL-TABLE.md",sourceDirName:"sql-manual/sql-reference/Data-Definition-Statements/Create",slug:"/sql-manual/sql-reference/Data-Definition-Statements/Create/CREATE-EXTERNAL-TABLE",permalink:"/zh-CN/docs/2.0/sql-manual/sql-reference/Data-Definition-Statements/Create/CREATE-EXTERNAL-TABLE",draft:!1,tags:[],version:"2.0",frontMatter:{title:"CREATE-EXTERNAL-TABLE",language:"zh-CN"},sidebar:"docs",previous:{title:"CREATE-TABLE-AS-SELECT",permalink:"/zh-CN/docs/2.0/sql-manual/sql-reference/Data-Definition-Statements/Create/CREATE-TABLE-AS-SELECT"},next:{title:"CREATE-INDEX",permalink:"/zh-CN/docs/2.0/sql-manual/sql-reference/Data-Definition-Statements/Create/CREATE-INDEX"}},p={},o=[{value:"CREATE-EXTERNAL-TABLE",id:"create-external-table",level:2},{value:"Name",id:"name",level:3},{value:"Description",id:"description",level:3},{value:"Example",id:"example",level:3},{value:"Keywords",id:"keywords",level:3},{value:"Best Practice",id:"best-practice",level:3}],m={toc:o},E="wrapper";function c(e){let{components:a,...t}=e;return(0,r.yg)(E,(0,n.A)({},m,t,{components:a,mdxType:"MDXLayout"}),(0,r.yg)("h2",{id:"create-external-table"},"CREATE-EXTERNAL-TABLE"),(0,r.yg)("h3",{id:"name"},"Name"),(0,r.yg)("p",null,"CREATE EXTERNAL TABLE"),(0,r.yg)("h3",{id:"description"},"Description"),(0,r.yg)("p",null,"\u6b64\u8bed\u53e5\u7528\u6765\u521b\u5efa\u5916\u90e8\u8868\uff0c\u5177\u4f53\u8bed\u6cd5\u53c2\u9605 ",(0,r.yg)("a",{parentName:"p",href:"/zh-CN/docs/2.0/sql-manual/sql-reference/Data-Definition-Statements/Create/CREATE-TABLE"},"CREATE TABLE"),"\u3002"),(0,r.yg)("p",null,"\u4e3b\u8981\u901a\u8fc7 ENGINE \u7c7b\u578b\u6765\u6807\u8bc6\u662f\u54ea\u79cd\u7c7b\u578b\u7684\u5916\u90e8\u8868\uff0c\u76ee\u524d\u53ef\u9009 MYSQL\u3001BROKER\u3001HIVE\u3001ICEBERG\n\u3001HUDI"),(0,r.yg)("ol",null,(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},"\u5982\u679c\u662f mysql\uff0c\u5219\u9700\u8981\u5728 properties \u63d0\u4f9b\u4ee5\u4e0b\u4fe1\u606f\uff1a"),(0,r.yg)("pre",{parentName:"li"},(0,r.yg)("code",{parentName:"pre",className:"language-sql"},'PROPERTIES (\n    "host" = "mysql_server_host",\n    "port" = "mysql_server_port",\n    "user" = "your_user_name",\n    "password" = "your_password",\n    "database" = "database_name",\n    "table" = "table_name"\n)\n')),(0,r.yg)("p",{parentName:"li"},'\u4ee5\u53ca\u4e00\u4e2a\u53ef\u9009\u5c5e\u6027"charset"\uff0c\u53ef\u4ee5\u7528\u6765\u8bbe\u7f6e mysql \u8fde\u63a5\u7684\u5b57\u7b26\u96c6\uff0c\u9ed8\u8ba4\u503c\u662f"utf8"\u3002\u5982\u6709\u9700\u8981\uff0c\u4f60\u53ef\u4ee5\u8bbe\u7f6e\u4e3a\u53e6\u5916\u4e00\u4e2a\u5b57\u7b26\u96c6"utf8mb4"\u3002'),(0,r.yg)("p",{parentName:"li"},"\u6ce8\u610f\uff1a"),(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},'"table" \u6761\u76ee\u4e2d\u7684 "table_name" \u662f mysql \u4e2d\u7684\u771f\u5b9e\u8868\u540d\u3002\u800c CREATE TABLE \u8bed\u53e5\u4e2d\u7684 table_name \u662f\u8be5 mysql \u8868\u5728 Doris \u4e2d\u7684\u540d\u5b57\uff0c\u53ef\u4ee5\u4e0d\u540c\u3002')),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"\u5728 Doris \u521b\u5efa mysql \u8868\u7684\u76ee\u7684\u662f\u53ef\u4ee5\u901a\u8fc7 Doris \u8bbf\u95ee mysql \u6570\u636e\u5e93\u3002\u800c Doris \u672c\u8eab\u5e76\u4e0d\u7ef4\u62a4\u3001\u5b58\u50a8\u4efb\u4f55 mysql \u6570\u636e\u3002")))),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},"\u5982\u679c\u662f broker\uff0c\u8868\u793a\u8868\u7684\u8bbf\u95ee\u9700\u8981\u901a\u8fc7\u6307\u5b9a\u7684 broker, \u9700\u8981\u5728 properties \u63d0\u4f9b\u4ee5\u4e0b\u4fe1\u606f\uff1a"),(0,r.yg)("pre",{parentName:"li"},(0,r.yg)("code",{parentName:"pre",className:"language-sql"},'PROPERTIES (\n    "broker_name" = "broker_name",\n    "path" = "file_path1[,file_path2]",\n    "column_separator" = "value_separator"\n    "line_delimiter" = "value_delimiter"\n)\n')),(0,r.yg)("p",{parentName:"li"},"\u53e6\u5916\u8fd8\u9700\u8981\u63d0\u4f9b Broker \u9700\u8981\u7684 Property \u4fe1\u606f\uff0c\u901a\u8fc7 BROKER PROPERTIES \u6765\u4f20\u9012\uff0c\u4f8b\u5982 HDFS \u9700\u8981\u4f20\u5165"),(0,r.yg)("pre",{parentName:"li"},(0,r.yg)("code",{parentName:"pre",className:"language-sql"},'BROKER PROPERTIES(\n  "username" = "name",\n  "password" = "password"\n)\n')),(0,r.yg)("p",{parentName:"li"},"\u8fd9\u4e2a\u6839\u636e\u4e0d\u540c\u7684 Broker \u7c7b\u578b\uff0c\u9700\u8981\u4f20\u5165\u7684\u5185\u5bb9\u4e5f\u4e0d\u76f8\u540c"),(0,r.yg)("p",{parentName:"li"},"\u6ce8\u610f\uff1a"),(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},'"path" \u4e2d\u5982\u679c\u6709\u591a\u4e2a\u6587\u4ef6\uff0c\u7528\u9017\u53f7',"[,]","\u5206\u5272\u3002\u5982\u679c\u6587\u4ef6\u540d\u4e2d\u5305\u542b\u9017\u53f7\uff0c\u90a3\u4e48\u4f7f\u7528 %2c \u6765\u66ff\u4ee3\u3002\u5982\u679c\u6587\u4ef6\u540d\u4e2d\u5305\u542b %\uff0c\u4f7f\u7528 %25 \u4ee3\u66ff"),(0,r.yg)("li",{parentName:"ul"},"\u73b0\u5728\u6587\u4ef6\u5185\u5bb9\u683c\u5f0f\u652f\u6301 CSV\uff0c\u652f\u6301 GZ\uff0cBZ2\uff0cLZ4\uff0cLZO(LZOP) \u538b\u7f29\u683c\u5f0f\u3002"))),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},"\u5982\u679c\u662f hive\uff0c\u5219\u9700\u8981\u5728 properties \u63d0\u4f9b\u4ee5\u4e0b\u4fe1\u606f\uff1a"),(0,r.yg)("pre",{parentName:"li"},(0,r.yg)("code",{parentName:"pre",className:"language-sql"},'PROPERTIES (\n    "database" = "hive_db_name",\n    "table" = "hive_table_name",\n    "hive.metastore.uris" = "thrift://127.0.0.1:9083"\n)\n')),(0,r.yg)("p",{parentName:"li"},"\u5176\u4e2d database \u662f hive \u8868\u5bf9\u5e94\u7684\u5e93\u540d\u5b57\uff0ctable \u662f hive \u8868\u7684\u540d\u5b57\uff0chive.metastore.uris \u662f hive metastore \u670d\u52a1\u5730\u5740\u3002")),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},"\u5982\u679c\u662f iceberg\uff0c\u5219\u9700\u8981\u5728 properties \u4e2d\u63d0\u4f9b\u4ee5\u4e0b\u4fe1\u606f\uff1a"),(0,r.yg)("pre",{parentName:"li"},(0,r.yg)("code",{parentName:"pre",className:"language-sql"},'PROPERTIES (\n    "iceberg.database" = "iceberg_db_name",\n    "iceberg.table" = "iceberg_table_name",\n    "iceberg.hive.metastore.uris" = "thrift://127.0.0.1:9083",\n    "iceberg.catalog.type" = "HIVE_CATALOG"\n)\n')),(0,r.yg)("p",{parentName:"li"},"\u5176\u4e2d database \u662f Iceberg \u5bf9\u5e94\u7684\u5e93\u540d\uff1b\ntable \u662f Iceberg \u4e2d\u5bf9\u5e94\u7684\u8868\u540d\uff1b\nhive.metastore.uris \u662f hive metastore \u670d\u52a1\u5730\u5740\uff1b\ncatalog.type \u9ed8\u8ba4\u4e3a HIVE_CATALOG\u3002\u5f53\u524d\u4ec5\u652f\u6301 HIVE_CATALOG\uff0c\u540e\u7eed\u4f1a\u652f\u6301\u66f4\u591a Iceberg catalog \u7c7b\u578b\u3002")),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},"\u5982\u679c\u662f hudi\uff0c\u5219\u9700\u8981\u5728 properties \u4e2d\u63d0\u4f9b\u4ee5\u4e0b\u4fe1\u606f\uff1a"),(0,r.yg)("pre",{parentName:"li"},(0,r.yg)("code",{parentName:"pre",className:"language-sql"},'PROPERTIES (\n"hudi.database" = "hudi_db_in_hive_metastore",\n"hudi.table" = "hudi_table_in_hive_metastore",\n"hudi.hive.metastore.uris" = "thrift://127.0.0.1:9083"\n)\n')),(0,r.yg)("p",{parentName:"li"},"\u5176\u4e2d hudi.database \u662f hive \u8868\u5bf9\u5e94\u7684\u5e93\u540d\u5b57\uff0chudi.table \u662f hive \u8868\u7684\u540d\u5b57\uff0chive.metastore.uris \u662f hive metastore \u670d\u52a1\u5730\u5740\u3002"))),(0,r.yg)("h3",{id:"example"},"Example"),(0,r.yg)("ol",null,(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},"\u521b\u5efa MYSQL \u5916\u90e8\u8868"),(0,r.yg)("p",{parentName:"li"},"\u76f4\u63a5\u901a\u8fc7\u5916\u8868\u4fe1\u606f\u521b\u5efa mysql \u8868"),(0,r.yg)("pre",{parentName:"li"},(0,r.yg)("code",{parentName:"pre",className:"language-sql"},'CREATE EXTERNAL TABLE example_db.table_mysql\n(\n    k1 DATE,\n    k2 INT,\n    k3 SMALLINT,\n    k4 VARCHAR(2048),\n    k5 DATETIME\n)\nENGINE=mysql\nPROPERTIES\n(\n    "host" = "127.0.0.1",\n    "port" = "8239",\n    "user" = "mysql_user",\n    "password" = "mysql_passwd",\n    "database" = "mysql_db_test",\n"table" = "mysql_table_test",\n"charset" = "utf8mb4"\n)\n')),(0,r.yg)("p",{parentName:"li"},"\u901a\u8fc7 External Catalog Resource \u521b\u5efa mysql \u8868"),(0,r.yg)("pre",{parentName:"li"},(0,r.yg)("code",{parentName:"pre",className:"language-sql"},'# \u5148\u521b\u5efa Resource\nCREATE EXTERNAL RESOURCE "mysql_resource" \nPROPERTIES\n(\n  "type" = "odbc_catalog",\n  "user" = "mysql_user",\n  "password" = "mysql_passwd",\n  "host" = "127.0.0.1",\n   "port" = "8239"          \n);\n\n# \u518d\u901a\u8fc7 Resource \u521b\u5efa mysql \u5916\u90e8\u8868\nCREATE EXTERNAL TABLE example_db.table_mysql\n(\n    k1 DATE,\n    k2 INT,\n    k3 SMALLINT,\n    k4 VARCHAR(2048),\n    k5 DATETIME\n)\nENGINE=mysql\nPROPERTIES\n(\n    "odbc_catalog_resource" = "mysql_resource",\n    "database" = "mysql_db_test",\n    "table" = "mysql_table_test"\n)\n'))),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},'\u521b\u5efa\u4e00\u4e2a\u6570\u636e\u6587\u4ef6\u5b58\u50a8\u5728 HDFS \u4e0a\u7684 broker \u5916\u90e8\u8868\uff0c\u6570\u636e\u4f7f\u7528 "|" \u5206\u5272\uff0c',(0,r.yg)("inlineCode",{parentName:"p"},"\\n")," \u6362\u884c"),(0,r.yg)("pre",{parentName:"li"},(0,r.yg)("code",{parentName:"pre",className:"language-sql"},'CREATE EXTERNAL TABLE example_db.table_broker (\n    k1 DATE,\n    k2 INT,\n    k3 SMALLINT,\n    k4 VARCHAR(2048),\n    k5 DATETIME\n)\nENGINE=broker\nPROPERTIES (\n    "broker_name" = "hdfs",\n    "path" = "hdfs://hdfs_host:hdfs_port/data1,hdfs://hdfs_host:hdfs_port/data2,hdfs://hdfs_host:hdfs_port/data3%2c4",\n    "column_separator" = "|",\n    "line_delimiter" = "\\n"\n)\nBROKER PROPERTIES (\n    "username" = "hdfs_user",\n    "password" = "hdfs_password"\n)\n'))),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},"\u521b\u5efa\u4e00\u4e2a hive \u5916\u90e8\u8868"),(0,r.yg)("pre",{parentName:"li"},(0,r.yg)("code",{parentName:"pre",className:"language-sql"},'CREATE TABLE example_db.table_hive\n(\n  k1 TINYINT,\n  k2 VARCHAR(50),\n  v INT\n)\nENGINE=hive\nPROPERTIES\n(\n  "database" = "hive_db_name",\n  "table" = "hive_table_name",\n  "hive.metastore.uris" = "thrift://127.0.0.1:9083"\n);\n'))),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},"\u521b\u5efa\u4e00\u4e2a Iceberg \u5916\u8868"),(0,r.yg)("pre",{parentName:"li"},(0,r.yg)("code",{parentName:"pre",className:"language-sql"},'CREATE TABLE example_db.t_iceberg \nENGINE=ICEBERG\nPROPERTIES (\n    "iceberg.database" = "iceberg_db",\n    "iceberg.table" = "iceberg_table",\n    "iceberg.hive.metastore.uris"  =  "thrift://127.0.0.1:9083",\n    "iceberg.catalog.type"  =  "HIVE_CATALOG"\n);\n'))),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},"\u521b\u5efa\u4e00\u4e2a Hudi \u5916\u8868"),(0,r.yg)("p",{parentName:"li"},"\u521b\u5efa\u65f6\u4e0d\u6307\u5b9a schema(\u63a8\u8350)"),(0,r.yg)("pre",{parentName:"li"},(0,r.yg)("code",{parentName:"pre",className:"language-sql"},'CREATE TABLE example_db.t_hudi\nENGINE=HUDI\nPROPERTIES (\n"hudi.database" = "hudi_db_in_hive_metastore",\n"hudi.table" = "hudi_table_in_hive_metastore",\n"hudi.hive.metastore.uris" = "thrift://127.0.0.1:9083"\n);\n')),(0,r.yg)("p",{parentName:"li"},"\u521b\u5efa\u65f6\u6307\u5b9a schema"),(0,r.yg)("pre",{parentName:"li"},(0,r.yg)("code",{parentName:"pre",className:"language-sql"},'CREATE TABLE example_db.t_hudi (\n   `id` int NOT NULL COMMENT "id number",\n   `name` varchar(10) NOT NULL COMMENT "user name"\n)\nENGINE=HUDI\nPROPERTIES (\n"hudi.database" = "hudi_db_in_hive_metastore",\n"hudi.table" = "hudi_table_in_hive_metastore",\n"hudi.hive.metastore.uris" = "thrift://127.0.0.1:9083"\n);\n')))),(0,r.yg)("h3",{id:"keywords"},"Keywords"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"CREATE, EXTERNAL, TABLE\n")),(0,r.yg)("h3",{id:"best-practice"},"Best Practice"))}c.isMDXComponent=!0}}]);