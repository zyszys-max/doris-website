"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([[834590],{15680:(n,e,t)=>{t.d(e,{xA:()=>p,yg:()=>d});var a=t(296540);function r(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function l(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,a)}return t}function i(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?l(Object(t),!0).forEach((function(e){r(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function o(n,e){if(null==n)return{};var t,a,r=function(n,e){if(null==n)return{};var t,a,r={},l=Object.keys(n);for(a=0;a<l.length;a++)t=l[a],e.indexOf(t)>=0||(r[t]=n[t]);return r}(n,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(n);for(a=0;a<l.length;a++)t=l[a],e.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}var s=a.createContext({}),c=function(n){var e=a.useContext(s),t=e;return n&&(t="function"==typeof n?n(e):i(i({},e),n)),t},p=function(n){var e=c(n.components);return a.createElement(s.Provider,{value:e},n.children)},u="mdxType",m={inlineCode:"code",wrapper:function(n){var e=n.children;return a.createElement(a.Fragment,{},e)}},g=a.forwardRef((function(n,e){var t=n.components,r=n.mdxType,l=n.originalType,s=n.parentName,p=o(n,["components","mdxType","originalType","parentName"]),u=c(t),g=r,d=u["".concat(s,".").concat(g)]||u[g]||m[g]||l;return t?a.createElement(d,i(i({ref:e},p),{},{components:t})):a.createElement(d,i({ref:e},p))}));function d(n,e){var t=arguments,r=e&&e.mdxType;if("string"==typeof n||r){var l=t.length,i=new Array(l);i[0]=g;var o={};for(var s in e)hasOwnProperty.call(e,s)&&(o[s]=e[s]);o.originalType=n,o[u]="string"==typeof n?n:r,i[1]=o;for(var c=2;c<l;c++)i[c]=t[c];return a.createElement.apply(null,i)}return a.createElement.apply(null,t)}g.displayName="MDXCreateElement"},113471:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>s,contentTitle:()=>i,default:()=>m,frontMatter:()=>l,metadata:()=>o,toc:()=>c});var a=t(58168),r=(t(296540),t(15680));const l={title:"\u67e5\u8be2\u5206\u6790",language:"zh-CN"},i=void 0,o={unversionedId:"advanced/best-practice/query-analysis",id:"version-1.2/advanced/best-practice/query-analysis",title:"\u67e5\u8be2\u5206\u6790",description:"\x3c!--",source:"@site/i18n/zh-CN/docusaurus-plugin-content-docs/version-1.2/advanced/best-practice/query-analysis.md",sourceDirName:"advanced/best-practice",slug:"/advanced/best-practice/query-analysis",permalink:"/zh-CN/docs/1.2/advanced/best-practice/query-analysis",draft:!1,tags:[],version:"1.2",frontMatter:{title:"\u67e5\u8be2\u5206\u6790",language:"zh-CN"},sidebar:"docs",previous:{title:"Broker",permalink:"/zh-CN/docs/1.2/advanced/broker"},next:{title:"\u5bfc\u5165\u5206\u6790",permalink:"/zh-CN/docs/1.2/advanced/best-practice/import-analysis"}},s={},c=[{value:"\u67e5\u8be2\u8ba1\u5212\u6811",id:"\u67e5\u8be2\u8ba1\u5212\u6811",level:2},{value:"\u67e5\u770b\u67e5\u8be2\u8ba1\u5212",id:"\u67e5\u770b\u67e5\u8be2\u8ba1\u5212",level:2},{value:"\u67e5\u770b\u67e5\u8be2 Profile",id:"\u67e5\u770b\u67e5\u8be2-profile",level:2}],p={toc:c},u="wrapper";function m(n){let{components:e,...t}=n;return(0,r.yg)(u,(0,a.A)({},p,t,{components:e,mdxType:"MDXLayout"}),(0,r.yg)("h1",{id:"\u67e5\u8be2\u5206\u6790"},"\u67e5\u8be2\u5206\u6790"),(0,r.yg)("p",null,"Doris \u63d0\u4f9b\u4e86\u4e00\u4e2a\u56fe\u5f62\u5316\u7684\u547d\u4ee4\u4ee5\u5e2e\u52a9\u7528\u6237\u66f4\u65b9\u4fbf\u7684\u5206\u6790\u4e00\u4e2a\u5177\u4f53\u7684\u67e5\u8be2\u6216\u5bfc\u5165\u3002\u672c\u6587\u4ecb\u7ecd\u5982\u4f55\u4f7f\u7528\u8be5\u529f\u80fd\u3002"),(0,r.yg)("h2",{id:"\u67e5\u8be2\u8ba1\u5212\u6811"},"\u67e5\u8be2\u8ba1\u5212\u6811"),(0,r.yg)("p",null,"SQL \u662f\u4e00\u4e2a\u63cf\u8ff0\u6027\u8bed\u8a00\uff0c\u7528\u6237\u901a\u8fc7\u4e00\u4e2a SQL \u6765\u63cf\u8ff0\u60f3\u83b7\u53d6\u7684\u6570\u636e\u3002\u800c\u4e00\u4e2a SQL \u7684\u5177\u4f53\u6267\u884c\u65b9\u5f0f\u4f9d\u8d56\u4e8e\u6570\u636e\u5e93\u7684\u5b9e\u73b0\u3002\u800c\u67e5\u8be2\u89c4\u5212\u5668\u5c31\u662f\u7528\u6765\u51b3\u5b9a\u6570\u636e\u5e93\u5982\u4f55\u5177\u4f53\u6267\u884c\u4e00\u4e2a SQL \u7684\u3002"),(0,r.yg)("p",null,"\u6bd4\u5982\u7528\u6237\u6307\u5b9a\u4e86\u4e00\u4e2a Join \u7b97\u5b50\uff0c\u5219\u67e5\u8be2\u89c4\u5212\u5668\u9700\u8981\u51b3\u5b9a\u5177\u4f53\u7684 Join \u7b97\u6cd5\uff0c\u6bd4\u5982\u662f Hash Join\uff0c\u8fd8\u662f Merge Sort Join\uff1b\u662f\u4f7f\u7528 Shuffle \u8fd8\u662f Broadcast\uff1bJoin \u987a\u5e8f\u662f\u5426\u9700\u8981\u8c03\u6574\u4ee5\u907f\u514d\u7b1b\u5361\u5c14\u79ef\uff1b\u4ee5\u53ca\u786e\u5b9a\u6700\u7ec8\u7684\u5728\u54ea\u4e9b\u8282\u70b9\u6267\u884c\u7b49\u7b49\u3002"),(0,r.yg)("p",null,"Doris \u7684\u67e5\u8be2\u89c4\u5212\u8fc7\u7a0b\u662f\u5148\u5c06\u4e00\u4e2a SQL \u8bed\u53e5\u8f6c\u6362\u6210\u4e00\u4e2a\u5355\u673a\u6267\u884c\u8ba1\u5212\u6811\u3002"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-text"},"     \u250c\u2500\u2500\u2500\u2500\u2510\n     \u2502Sort\u2502\n     \u2514\u2500\u2500\u2500\u2500\u2518\n        \u2502\n  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n  \u2502Aggregation\u2502\n  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n        \u2502\n     \u250c\u2500\u2500\u2500\u2500\u2510\n     \u2502Join\u2502\n     \u2514\u2500\u2500\u2500\u2500\u2518\n    \u250c\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2510\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502Scan-1\u2502 \u2502Scan-2\u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n")),(0,r.yg)("p",null,"\u4e4b\u540e\uff0c\u67e5\u8be2\u89c4\u5212\u5668\u4f1a\u6839\u636e\u5177\u4f53\u7684\u7b97\u5b50\u6267\u884c\u65b9\u5f0f\u3001\u6570\u636e\u7684\u5177\u4f53\u5206\u5e03\uff0c\u5c06\u5355\u673a\u67e5\u8be2\u8ba1\u5212\u8f6c\u6362\u4e3a\u5206\u5e03\u5f0f\u67e5\u8be2\u8ba1\u5212\u3002\u5206\u5e03\u5f0f\u67e5\u8be2\u8ba1\u5212\u662f\u7531\u591a\u4e2a Fragment \u7ec4\u6210\u7684\uff0c\u6bcf\u4e2a Fragment \u8d1f\u8d23\u67e5\u8be2\u8ba1\u5212\u7684\u4e00\u90e8\u5206\uff0c\u5404\u4e2a Fragment \u4e4b\u95f4\u4f1a\u901a\u8fc7 ExchangeNode \u7b97\u5b50\u8fdb\u884c\u6570\u636e\u7684\u4f20\u8f93\u3002"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-text"},"        \u250c\u2500\u2500\u2500\u2500\u2510\n        \u2502Sort\u2502\n        \u2502F1  \u2502\n        \u2514\u2500\u2500\u2500\u2500\u2518\n           \u2502\n     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n     \u2502Aggregation\u2502\n     \u2502F1         \u2502\n     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n           \u2502\n        \u250c\u2500\u2500\u2500\u2500\u2510\n        \u2502Join\u2502\n        \u2502F1  \u2502\n        \u2514\u2500\u2500\u2500\u2500\u2518\n    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2510\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502Scan-1\u2502 \u2502ExchangeNode\u2502\n\u2502F1    \u2502 \u2502F1          \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                \u2502\n          \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n          \u2502DataStreamDink\u2502\n          \u2502F2            \u2502\n          \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                \u2502\n            \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n            \u2502Scan-2\u2502\n            \u2502F2    \u2502\n            \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n")),(0,r.yg)("p",null,"\u5982\u4e0a\u56fe\uff0c\u6211\u4eec\u5c06\u5355\u673a\u8ba1\u5212\u5206\u6210\u4e86\u4e24\u4e2a Fragment\uff1aF1 \u548c F2\u3002\u4e24\u4e2a Fragment \u4e4b\u95f4\u901a\u8fc7\u4e00\u4e2a ExchangeNode \u8282\u70b9\u4f20\u8f93\u6570\u636e\u3002"),(0,r.yg)("p",null,"\u800c\u4e00\u4e2a Fragment \u4f1a\u8fdb\u4e00\u6b65\u7684\u5212\u5206\u4e3a\u591a\u4e2a Instance\u3002Instance \u662f\u6700\u7ec8\u5177\u4f53\u7684\u6267\u884c\u5b9e\u4f8b\u3002\u5212\u5206\u6210\u591a\u4e2a Instance \u6709\u52a9\u4e8e\u5145\u5206\u5229\u7528\u673a\u5668\u8d44\u6e90\uff0c\u63d0\u5347\u4e00\u4e2a Fragment \u7684\u6267\u884c\u5e76\u53d1\u5ea6\u3002"),(0,r.yg)("h2",{id:"\u67e5\u770b\u67e5\u8be2\u8ba1\u5212"},"\u67e5\u770b\u67e5\u8be2\u8ba1\u5212"),(0,r.yg)("p",null,"\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u4e09\u79cd\u547d\u4ee4\u67e5\u770b\u4e00\u4e2a SQL \u7684\u6267\u884c\u8ba1\u5212\u3002"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"EXPLAIN GRAPH select ...;")," \u6216\u8005 ",(0,r.yg)("inlineCode",{parentName:"li"},"DESC GRAPH select ...;")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"EXPLAIN select ...;")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"EXPLAIN VERBOSE select ...;"))),(0,r.yg)("p",null,"\u5176\u4e2d\u7b2c\u4e00\u4e2a\u547d\u4ee4\u4ee5\u56fe\u5f62\u5316\u7684\u65b9\u5f0f\u5c55\u793a\u4e00\u4e2a\u67e5\u8be2\u8ba1\u5212\uff0c\u8fd9\u4e2a\u547d\u4ee4\u53ef\u4ee5\u6bd4\u8f83\u76f4\u89c2\u7684\u5c55\u793a\u67e5\u8be2\u8ba1\u5212\u7684\u6811\u5f62\u7ed3\u6784\uff0c\u4ee5\u53ca Fragment \u7684\u5212\u5206\u60c5\u51b5\uff1a"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sql"},"mysql> explain graph select tbl1.k1, sum(tbl1.k2) from tbl1 join tbl2 on tbl1.k1 = tbl2.k1 group by tbl1.k1 order by tbl1.k1;\n+---------------------------------------------------------------------------------------------------------------------------------+\n| Explain String                                                                                                                  |\n+---------------------------------------------------------------------------------------------------------------------------------+\n|                                                                                                                                 |\n|              \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                                                                                                  |\n|              \u2502[9: ResultSink]\u2502                                                                                                  |\n|              \u2502[Fragment: 4]  \u2502                                                                                                  |\n|              \u2502RESULT SINK    \u2502                                                                                                  |\n|              \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                                                                                                  |\n|                      \u2502                                                                                                          |\n|           \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                                                                                               |\n|           \u2502[9: MERGING-EXCHANGE]\u2502                                                                                               |\n|           \u2502[Fragment: 4]        \u2502                                                                                               |\n|           \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                                                                                               |\n|                      \u2502                                                                                                          |\n|            \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                                                                                                |\n|            \u2502[9: DataStreamSink]\u2502                                                                                                |\n|            \u2502[Fragment: 3]      \u2502                                                                                                |\n|            \u2502STREAM DATA SINK   \u2502                                                                                                |\n|            \u2502  EXCHANGE ID: 09  \u2502                                                                                                |\n|            \u2502  UNPARTITIONED    \u2502                                                                                                |\n|            \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                                                                                                |\n|                      \u2502                                                                                                          |\n|               \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                                                                                                   |\n|               \u2502[4: TOP-N]   \u2502                                                                                                   |\n|               \u2502[Fragment: 3]\u2502                                                                                                   |\n|               \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                                                                                                   |\n|                      \u2502                                                                                                          |\n|      \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                                                                                          |\n|      \u2502[8: AGGREGATE (merge finalize)]\u2502                                                                                          |\n|      \u2502[Fragment: 3]                  \u2502                                                                                          |\n|      \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                                                                                          |\n|                      \u2502                                                                                                          |\n|               \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                                                                                                   |\n|               \u2502[7: EXCHANGE]\u2502                                                                                                   |\n|               \u2502[Fragment: 3]\u2502                                                                                                   |\n|               \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                                                                                                   |\n|                      \u2502                                                                                                          |\n|            \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                                                                                                |\n|            \u2502[7: DataStreamSink]\u2502                                                                                                |\n|            \u2502[Fragment: 2]      \u2502                                                                                                |\n|            \u2502STREAM DATA SINK   \u2502                                                                                                |\n|            \u2502  EXCHANGE ID: 07  \u2502                                                                                                |\n|            \u2502  HASH_PARTITIONED \u2502                                                                                                |\n|            \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                                                                                                |\n|                      \u2502                                                                                                          |\n|     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                                                                                         |\n|     \u2502[3: AGGREGATE (update serialize)]\u2502                                                                                         |\n|     \u2502[Fragment: 2]                    \u2502                                                                                         |\n|     \u2502STREAMING                        \u2502                                                                                         |\n|     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                                                                                         |\n|                      \u2502                                                                                                          |\n|     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                                                                                         |\n|     \u2502[2: HASH JOIN]                   \u2502                                                                                         |\n|     \u2502[Fragment: 2]                    \u2502                                                                                         |\n|     \u2502join op: INNER JOIN (PARTITIONED)\u2502                                                                                         |\n|     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                                                                                         |\n|           \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                                                                                               |\n|    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510       \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                                                                                        |\n|    \u2502[5: EXCHANGE]\u2502       \u2502[6: EXCHANGE]\u2502                                                                                        |\n|    \u2502[Fragment: 2]\u2502       \u2502[Fragment: 2]\u2502                                                                                        |\n|    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518       \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                                                                                        |\n|           \u2502                     \u2502                                                                                               |\n| \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                                                                                     |\n| \u2502[5: DataStreamSink]\u2502 \u2502[6: DataStreamSink]\u2502                                                                                     |\n| \u2502[Fragment: 0]      \u2502 \u2502[Fragment: 1]      \u2502                                                                                     |\n| \u2502STREAM DATA SINK   \u2502 \u2502STREAM DATA SINK   \u2502                                                                                     |\n| \u2502  EXCHANGE ID: 05  \u2502 \u2502  EXCHANGE ID: 06  \u2502                                                                                     |\n| \u2502  HASH_PARTITIONED \u2502 \u2502  HASH_PARTITIONED \u2502                                                                                     |\n| \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                                                                                     |\n|           \u2502                     \u2502                                                                                               |\n|  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                                                                                      |\n|  \u2502[0: OlapScanNode]\u2502   \u2502[1: OlapScanNode]\u2502                                                                                      |\n|  \u2502[Fragment: 0]    \u2502   \u2502[Fragment: 1]    \u2502                                                                                      |\n|  \u2502TABLE: tbl1      \u2502   \u2502TABLE: tbl2      \u2502                                                                                      |\n|  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                                                                                      |\n+---------------------------------------------------------------------------------------------------------------------------------+\n")),(0,r.yg)("p",null,"\u4ece\u56fe\u4e2d\u53ef\u4ee5\u770b\u51fa\uff0c\u67e5\u8be2\u8ba1\u5212\u6811\u88ab\u5206\u4e3a\u4e865\u4e2a Fragment\uff1a0\u30011\u30012\u30013\u30014\u3002\u5982 ",(0,r.yg)("inlineCode",{parentName:"p"},"OlapScanNode")," \u8282\u70b9\u4e0a\u7684 ",(0,r.yg)("inlineCode",{parentName:"p"},"[Fragment: 0]")," \u8868\u793a\u8fd9\u4e2a\u8282\u70b9\u5c5e\u4e8e Fragment 0\u3002\u6bcf\u4e2aFragment\u4e4b\u95f4\u90fd\u901a\u8fc7 DataStreamSink \u548c ExchangeNode \u8fdb\u884c\u6570\u636e\u4f20\u8f93\u3002"),(0,r.yg)("p",null,"\u56fe\u5f62\u547d\u4ee4\u4ec5\u5c55\u793a\u7b80\u5316\u540e\u7684\u8282\u70b9\u4fe1\u606f\uff0c\u5982\u679c\u9700\u8981\u67e5\u770b\u66f4\u5177\u4f53\u7684\u8282\u70b9\u4fe1\u606f\uff0c\u5982\u4e0b\u63a8\u5230\u8282\u70b9\u4e0a\u7684\u8fc7\u6ee4\u6761\u4ef6\u7b49\uff0c\u5219\u9700\u8981\u901a\u8fc7\u7b2c\u4e8c\u4e2a\u547d\u4ee4\u67e5\u770b\u66f4\u8be6\u7ec6\u7684\u6587\u5b57\u7248\u4fe1\u606f\uff1a"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sql"},"mysql> explain select tbl1.k1, sum(tbl1.k2) from tbl1 join tbl2 on tbl1.k1 = tbl2.k1 group by tbl1.k1 order by tbl1.k1;\n+----------------------------------------------------------------------------------+\n| Explain String                                                                   |\n+----------------------------------------------------------------------------------+\n| PLAN FRAGMENT 0                                                                  |\n|  OUTPUT EXPRS:<slot 5> <slot 3> `tbl1`.`k1` | <slot 6> <slot 4> sum(`tbl1`.`k2`) |\n|   PARTITION: UNPARTITIONED                                                       |\n|                                                                                  |\n|   RESULT SINK                                                                    |\n|                                                                                  |\n|   9:MERGING-EXCHANGE                                                             |\n|      limit: 65535                                                                |\n|                                                                                  |\n| PLAN FRAGMENT 1                                                                  |\n|  OUTPUT EXPRS:                                                                   |\n|   PARTITION: HASH_PARTITIONED: <slot 3> `tbl1`.`k1`                              |\n|                                                                                  |\n|   STREAM DATA SINK                                                               |\n|     EXCHANGE ID: 09                                                              |\n|     UNPARTITIONED                                                                |\n|                                                                                  |\n|   4:TOP-N                                                                        |\n|   |  order by: <slot 5> <slot 3> `tbl1`.`k1` ASC                                 |\n|   |  offset: 0                                                                   |\n|   |  limit: 65535                                                                |\n|   |                                                                              |\n|   8:AGGREGATE (merge finalize)                                                   |\n|   |  output: sum(<slot 4> sum(`tbl1`.`k2`))                                      |\n|   |  group by: <slot 3> `tbl1`.`k1`                                              |\n|   |  cardinality=-1                                                              |\n|   |                                                                              |\n|   7:EXCHANGE                                                                     |\n|                                                                                  |\n| PLAN FRAGMENT 2                                                                  |\n|  OUTPUT EXPRS:                                                                   |\n|   PARTITION: HASH_PARTITIONED: `tbl1`.`k1`                                       |\n|                                                                                  |\n|   STREAM DATA SINK                                                               |\n|     EXCHANGE ID: 07                                                              |\n|     HASH_PARTITIONED: <slot 3> `tbl1`.`k1`                                       |\n|                                                                                  |\n|   3:AGGREGATE (update serialize)                                                 |\n|   |  STREAMING                                                                   |\n|   |  output: sum(`tbl1`.`k2`)                                                    |\n|   |  group by: `tbl1`.`k1`                                                       |\n|   |  cardinality=-1                                                              |\n|   |                                                                              |\n|   2:HASH JOIN                                                                    |\n|   |  join op: INNER JOIN (PARTITIONED)                                           |\n|   |  runtime filter: false                                                       |\n|   |  hash predicates:                                                            |\n|   |  colocate: false, reason: table not in the same group                        |\n|   |  equal join conjunct: `tbl1`.`k1` = `tbl2`.`k1`                              |\n|   |  cardinality=2                                                               |\n|   |                                                                              |\n|   |----6:EXCHANGE                                                                |\n|   |                                                                              |\n|   5:EXCHANGE                                                                     |\n|                                                                                  |\n| PLAN FRAGMENT 3                                                                  |\n|  OUTPUT EXPRS:                                                                   |\n|   PARTITION: RANDOM                                                              |\n|                                                                                  |\n|   STREAM DATA SINK                                                               |\n|     EXCHANGE ID: 06                                                              |\n|     HASH_PARTITIONED: `tbl2`.`k1`                                                |\n|                                                                                  |\n|   1:OlapScanNode                                                                 |\n|      TABLE: tbl2                                                                 |\n|      PREAGGREGATION: ON                                                          |\n|      partitions=1/1                                                              |\n|      rollup: tbl2                                                                |\n|      tabletRatio=3/3                                                             |\n|      tabletList=105104776,105104780,105104784                                    |\n|      cardinality=1                                                               |\n|      avgRowSize=4.0                                                              |\n|      numNodes=6                                                                  |\n|                                                                                  |\n| PLAN FRAGMENT 4                                                                  |\n|  OUTPUT EXPRS:                                                                   |\n|   PARTITION: RANDOM                                                              |\n|                                                                                  |\n|   STREAM DATA SINK                                                               |\n|     EXCHANGE ID: 05                                                              |\n|     HASH_PARTITIONED: `tbl1`.`k1`                                                |\n|                                                                                  |\n|   0:OlapScanNode                                                                 |\n|      TABLE: tbl1                                                                 |\n|      PREAGGREGATION: ON                                                          |\n|      partitions=1/1                                                              |\n|      rollup: tbl1                                                                |\n|      tabletRatio=3/3                                                             |\n|      tabletList=105104752,105104763,105104767                                    |\n|      cardinality=2                                                               |\n|      avgRowSize=8.0                                                              |\n|      numNodes=6                                                                  |\n+----------------------------------------------------------------------------------+\n")),(0,r.yg)("p",null,"\u7b2c\u4e09\u4e2a\u547d\u4ee4",(0,r.yg)("inlineCode",{parentName:"p"},"EXPLAIN VERBOSE select ...;"),"\u76f8\u6bd4\u7b2c\u4e8c\u4e2a\u547d\u4ee4\u53ef\u4ee5\u67e5\u770b\u66f4\u8be6\u7ec6\u7684\u6267\u884c\u8ba1\u5212\u4fe1\u606f\u3002"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sql"},"mysql> explain verbose select tbl1.k1, sum(tbl1.k2) from tbl1 join tbl2 on tbl1.k1 = tbl2.k1 group by tbl1.k1 order by tbl1.k1;\n+---------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Explain String                                                                                                                                          |\n+---------------------------------------------------------------------------------------------------------------------------------------------------------+\n| PLAN FRAGMENT 0                                                                                                                                         |\n|   OUTPUT EXPRS:<slot 5> <slot 3> `tbl1`.`k1` | <slot 6> <slot 4> sum(`tbl1`.`k2`)                                                                       |\n|   PARTITION: UNPARTITIONED                                                                                                                              |\n|                                                                                                                                                         |\n|   VRESULT SINK                                                                                                                                          |\n|                                                                                                                                                         |\n|   6:VMERGING-EXCHANGE                                                                                                                                   |\n|      limit: 65535                                                                                                                                       |\n|      tuple ids: 3                                                                                                                                       |\n|                                                                                                                                                         |\n| PLAN FRAGMENT 1                                                                                                                                         |\n|                                                                                                                                                         |\n|   PARTITION: HASH_PARTITIONED: `default_cluster:test`.`tbl1`.`k2`                                                                                       |\n|                                                                                                                                                         |\n|   STREAM DATA SINK                                                                                                                                      |\n|     EXCHANGE ID: 06                                                                                                                                     |\n|     UNPARTITIONED                                                                                                                                       |\n|                                                                                                                                                         |\n|   4:VTOP-N                                                                                                                                              |\n|   |  order by: <slot 5> <slot 3> `tbl1`.`k1` ASC                                                                                                        |\n|   |  offset: 0                                                                                                                                          |\n|   |  limit: 65535                                                                                                                                       |\n|   |  tuple ids: 3                                                                                                                                       |\n|   |                                                                                                                                                     |\n|   3:VAGGREGATE (update finalize)                                                                                                                        |\n|   |  output: sum(<slot 8>)                                                                                                                              |\n|   |  group by: <slot 7>                                                                                                                                 |\n|   |  cardinality=-1                                                                                                                                     |\n|   |  tuple ids: 2                                                                                                                                       |\n|   |                                                                                                                                                     |\n|   2:VHASH JOIN                                                                                                                                          |\n|   |  join op: INNER JOIN(BROADCAST)[Tables are not in the same group]                                                                                   |\n|   |  equal join conjunct: CAST(`tbl1`.`k1` AS DATETIME) = `tbl2`.`k1`                                                                                   |\n|   |  runtime filters: RF000[in_or_bloom] <- `tbl2`.`k1`                                                                                                 |\n|   |  cardinality=0                                                                                                                                      |\n|   |  vec output tuple id: 4  |  tuple ids: 0 1                                                                                                          |\n|   |                                                                                                                                                     |\n|   |----5:VEXCHANGE                                                                                                                                      |\n|   |       tuple ids: 1                                                                                                                                  |\n|   |                                                                                                                                                     |\n|   0:VOlapScanNode                                                                                                                                       |\n|      TABLE: tbl1(null), PREAGGREGATION: OFF. Reason: the type of agg on StorageEngine's Key column should only be MAX or MIN.agg expr: sum(`tbl1`.`k2`) |\n|      runtime filters: RF000[in_or_bloom] -> CAST(`tbl1`.`k1` AS DATETIME)                                                                               |\n|      partitions=0/1, tablets=0/0, tabletList=                                                                                                           |\n|      cardinality=0, avgRowSize=20.0, numNodes=1                                                                                                         |\n|      tuple ids: 0                                                                                                                                       |\n|                                                                                                                                                         |\n| PLAN FRAGMENT 2                                                                                                                                         |\n|                                                                                                                                                         |\n|   PARTITION: HASH_PARTITIONED: `default_cluster:test`.`tbl2`.`k2`                                                                                       |\n|                                                                                                                                                         |\n|   STREAM DATA SINK                                                                                                                                      |\n|     EXCHANGE ID: 05                                                                                                                                     |\n|     UNPARTITIONED                                                                                                                                       |\n|                                                                                                                                                         |\n|   1:VOlapScanNode                                                                                                                                       |\n|      TABLE: tbl2(null), PREAGGREGATION: OFF. Reason: null                                                                                               |\n|      partitions=0/1, tablets=0/0, tabletList=                                                                                                           |\n|      cardinality=0, avgRowSize=16.0, numNodes=1                                                                                                         |\n|      tuple ids: 1                                                                                                                                       |\n|                                                                                                                                                         |\n| Tuples:                                                                                                                                                 |\n| TupleDescriptor{id=0, tbl=tbl1, byteSize=32, materialized=true}                                                                                         |\n|   SlotDescriptor{id=0, col=k1, type=DATE}                                                                                                               |\n|     parent=0                                                                                                                                            |\n|     materialized=true                                                                                                                                   |\n|     byteSize=16                                                                                                                                         |\n|     byteOffset=16                                                                                                                                       |\n|     nullIndicatorByte=0                                                                                                                                 |\n|     nullIndicatorBit=-1                                                                                                                                 |\n|     slotIdx=1                                                                                                                                           |\n|                                                                                                                                                         |\n|   SlotDescriptor{id=2, col=k2, type=INT}                                                                                                                |\n|     parent=0                                                                                                                                            |\n|     materialized=true                                                                                                                                   |\n|     byteSize=4                                                                                                                                          |\n|     byteOffset=0                                                                                                                                        |\n|     nullIndicatorByte=0                                                                                                                                 |\n|     nullIndicatorBit=-1                                                                                                                                 |\n|     slotIdx=0                                                                                                                                           |\n|                                                                                                                                                         |\n|                                                                                                                                                         |\n| TupleDescriptor{id=1, tbl=tbl2, byteSize=16, materialized=true}                                                                                         |\n|   SlotDescriptor{id=1, col=k1, type=DATETIME}                                                                                                           |\n|     parent=1                                                                                                                                            |\n|     materialized=true                                                                                                                                   |\n|     byteSize=16                                                                                                                                         |\n|     byteOffset=0                                                                                                                                        |\n|     nullIndicatorByte=0                                                                                                                                 |\n|     nullIndicatorBit=-1                                                                                                                                 |\n|     slotIdx=0                                                                                                                                           |\n|                                                                                                                                                         |\n|                                                                                                                                                         |\n| TupleDescriptor{id=2, tbl=null, byteSize=32, materialized=true}                                                                                         |\n|   SlotDescriptor{id=3, col=null, type=DATE}                                                                                                             |\n|     parent=2                                                                                                                                            |\n|     materialized=true                                                                                                                                   |\n|     byteSize=16                                                                                                                                         |\n|     byteOffset=16                                                                                                                                       |\n|     nullIndicatorByte=0                                                                                                                                 |\n|     nullIndicatorBit=-1                                                                                                                                 |\n|     slotIdx=1                                                                                                                                           |\n|                                                                                                                                                         |\n|   SlotDescriptor{id=4, col=null, type=BIGINT}                                                                                                           |\n|     parent=2                                                                                                                                            |\n|     materialized=true                                                                                                                                   |\n|     byteSize=8                                                                                                                                          |\n|     byteOffset=0                                                                                                                                        |\n|     nullIndicatorByte=0                                                                                                                                 |\n|     nullIndicatorBit=-1                                                                                                                                 |\n|     slotIdx=0                                                                                                                                           |\n|                                                                                                                                                         |\n|                                                                                                                                                         |\n| TupleDescriptor{id=3, tbl=null, byteSize=32, materialized=true}                                                                                         |\n|   SlotDescriptor{id=5, col=null, type=DATE}                                                                                                             |\n|     parent=3                                                                                                                                            |\n|     materialized=true                                                                                                                                   |\n|     byteSize=16                                                                                                                                         |\n|     byteOffset=16                                                                                                                                       |\n|     nullIndicatorByte=0                                                                                                                                 |\n|     nullIndicatorBit=-1                                                                                                                                 |\n|     slotIdx=1                                                                                                                                           |\n|                                                                                                                                                         |\n|   SlotDescriptor{id=6, col=null, type=BIGINT}                                                                                                           |\n|     parent=3                                                                                                                                            |\n|     materialized=true                                                                                                                                   |\n|     byteSize=8                                                                                                                                          |\n|     byteOffset=0                                                                                                                                        |\n|     nullIndicatorByte=0                                                                                                                                 |\n|     nullIndicatorBit=-1                                                                                                                                 |\n|     slotIdx=0                                                                                                                                           |\n|                                                                                                                                                         |\n|                                                                                                                                                         |\n| TupleDescriptor{id=4, tbl=null, byteSize=48, materialized=true}                                                                                         |\n|   SlotDescriptor{id=7, col=k1, type=DATE}                                                                                                               |\n|     parent=4                                                                                                                                            |\n|     materialized=true                                                                                                                                   |\n|     byteSize=16                                                                                                                                         |\n|     byteOffset=16                                                                                                                                       |\n|     nullIndicatorByte=0                                                                                                                                 |\n|     nullIndicatorBit=-1                                                                                                                                 |\n|     slotIdx=1                                                                                                                                           |\n|                                                                                                                                                         |\n|   SlotDescriptor{id=8, col=k2, type=INT}                                                                                                                |\n|     parent=4                                                                                                                                            |\n|     materialized=true                                                                                                                                   |\n|     byteSize=4                                                                                                                                          |\n|     byteOffset=0                                                                                                                                        |\n|     nullIndicatorByte=0                                                                                                                                 |\n|     nullIndicatorBit=-1                                                                                                                                 |\n|     slotIdx=0                                                                                                                                           |\n|                                                                                                                                                         |\n|   SlotDescriptor{id=9, col=k1, type=DATETIME}                                                                                                           |\n|     parent=4                                                                                                                                            |\n|     materialized=true                                                                                                                                   |\n|     byteSize=16                                                                                                                                         |\n|     byteOffset=32                                                                                                                                       |\n|     nullIndicatorByte=0                                                                                                                                 |\n|     nullIndicatorBit=-1                                                                                                                                 |\n|     slotIdx=2                                                                                                                                           |\n+---------------------------------------------------------------------------------------------------------------------------------------------------------+\n160 rows in set (0.00 sec)\n")),(0,r.yg)("blockquote",null,(0,r.yg)("p",{parentName:"blockquote"},"\u67e5\u8be2\u8ba1\u5212\u4e2d\u663e\u793a\u7684\u4fe1\u606f\u8fd8\u5728\u4e0d\u65ad\u89c4\u8303\u548c\u5b8c\u5584\u4e2d\uff0c\u6211\u4eec\u5c06\u5728\u540e\u7eed\u7684\u6587\u7ae0\u4e2d\u8be6\u7ec6\u4ecb\u7ecd\u3002")),(0,r.yg)("h2",{id:"\u67e5\u770b\u67e5\u8be2-profile"},"\u67e5\u770b\u67e5\u8be2 Profile"),(0,r.yg)("p",null,"\u7528\u6237\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u547d\u4ee4\u6253\u5f00\u4f1a\u8bdd\u53d8\u91cf ",(0,r.yg)("inlineCode",{parentName:"p"},"is_report_success"),"\uff1a"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sql"},"SET is_report_success=true;\n")),(0,r.yg)("p",null,"\u7136\u540e\u6267\u884c\u67e5\u8be2\uff0c\u5219 Doris \u4f1a\u4ea7\u751f\u8be5\u67e5\u8be2\u7684\u4e00\u4e2a Profile\u3002Profile \u5305\u542b\u4e86\u4e00\u4e2a\u67e5\u8be2\u5404\u4e2a\u8282\u70b9\u7684\u5177\u4f53\u6267\u884c\u60c5\u51b5\uff0c\u6709\u52a9\u4e8e\u6211\u4eec\u5206\u6790\u67e5\u8be2\u74f6\u9888\u3002"),(0,r.yg)("p",null,"\u6267\u884c\u5b8c\u67e5\u8be2\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u5982\u4e0b\u547d\u4ee4\u5148\u83b7\u53d6 Profile \u5217\u8868\uff1a"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sql"},'mysql> show query profile "/"\\G\n*************************** 1. row ***************************\n   QueryId: c257c52f93e149ee-ace8ac14e8c9fef9\n      User: root\n DefaultDb: default_cluster:db1\n       SQL: select tbl1.k1, sum(tbl1.k2) from tbl1 join tbl2 on tbl1.k1 = tbl2.k1 group by tbl1.k1 order by tbl1.k1\n QueryType: Query\n StartTime: 2021-04-08 11:30:50\n   EndTime: 2021-04-08 11:30:50\n TotalTime: 9ms\nQueryState: EOF\n')),(0,r.yg)("p",null,"\u8fd9\u4e2a\u547d\u4ee4\u4f1a\u5217\u51fa\u5f53\u524d\u4fdd\u5b58\u7684\u6240\u6709 Profile\u3002\u6bcf\u884c\u5bf9\u5e94\u4e00\u4e2a\u67e5\u8be2\u3002\u6211\u4eec\u53ef\u4ee5\u9009\u62e9\u6211\u4eec\u60f3\u770b\u7684 Profile \u5bf9\u5e94\u7684 QueryId\uff0c\u67e5\u770b\u5177\u4f53\u60c5\u51b5\u3002"),(0,r.yg)("p",null,"\u67e5\u770b\u4e00\u4e2aProfile\u5206\u4e3a3\u4e2a\u6b65\u9aa4\uff1a"),(0,r.yg)("ol",null,(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},"\u67e5\u770b\u6574\u4f53\u6267\u884c\u8ba1\u5212\u6811"),(0,r.yg)("p",{parentName:"li"},"\u8fd9\u4e00\u6b65\u4e3b\u8981\u7528\u4e8e\u4ece\u6574\u4f53\u5206\u6790\u6267\u884c\u8ba1\u5212\uff0c\u5e76\u67e5\u770b\u6bcf\u4e2aFragment\u7684\u6267\u884c\u8017\u65f6\u3002"),(0,r.yg)("pre",{parentName:"li"},(0,r.yg)("code",{parentName:"pre",className:"language-sql"},'mysql> show query profile "/c257c52f93e149ee-ace8ac14e8c9fef9"\\G\n*************************** 1. row ***************************\nFragments:\n             \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n             \u2502[-1: DataBufferSender]\u2502\n             \u2502Fragment: 0           \u2502\n             \u2502MaxActiveTime: 6.626ms\u2502\n             \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                         \u2502\n               \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n               \u2502[9: EXCHANGE_NODE]\u2502\n               \u2502Fragment: 0       \u2502\n               \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                         \u2502\n             \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n             \u2502[9: DataStreamSender] \u2502\n             \u2502Fragment: 1           \u2502\n             \u2502MaxActiveTime: 5.449ms\u2502\n             \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                         \u2502\n                 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                 \u2502[4: SORT_NODE]\u2502\n                 \u2502Fragment: 1   \u2502\n                 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                        \u250c\u2518\n             \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n             \u2502[8: AGGREGATION_NODE]\u2502\n             \u2502Fragment: 1          \u2502\n             \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                        \u2514\u2510\n               \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n               \u2502[7: EXCHANGE_NODE]\u2502\n               \u2502Fragment: 1       \u2502\n               \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                         \u2502\n             \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n             \u2502[7: DataStreamSender] \u2502\n             \u2502Fragment: 2           \u2502\n             \u2502MaxActiveTime: 3.505ms\u2502\n             \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                        \u250c\u2518\n             \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n             \u2502[3: AGGREGATION_NODE]\u2502\n             \u2502Fragment: 2          \u2502\n             \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                        \u2502\n              \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n              \u2502[2: HASH_JOIN_NODE]\u2502\n              \u2502Fragment: 2        \u2502\n              \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n           \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510      \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n \u2502[5: EXCHANGE_NODE]\u2502      \u2502[6: EXCHANGE_NODE]\u2502\n \u2502Fragment: 2       \u2502      \u2502Fragment: 2       \u2502\n \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518      \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n           \u2502                         \u2502\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502[5: DataStreamSender]\u2502 \u2502[6: DataStreamSender]   \u2502\n\u2502Fragment: 4          \u2502 \u2502Fragment: 3             \u2502\n\u2502MaxActiveTime: 1.87ms\u2502 \u2502MaxActiveTime: 636.767us\u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n           \u2502                        \u250c\u2518\n \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n \u2502[0: OLAP_SCAN_NODE]\u2502    \u2502[1: OLAP_SCAN_NODE]\u2502\n \u2502Fragment: 4        \u2502    \u2502Fragment: 3        \u2502\n \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n           \u2502                        \u2502\n    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510          \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n    \u2502[OlapScanner]\u2502          \u2502[OlapScanner]\u2502\n    \u2502Fragment: 4  \u2502          \u2502Fragment: 3  \u2502\n    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518          \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n           \u2502                        \u2502\n  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510      \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n  \u2502[SegmentIterator]\u2502      \u2502[SegmentIterator]\u2502\n  \u2502Fragment: 4      \u2502      \u2502Fragment: 3      \u2502\n  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518      \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\n1 row in set (0.02 sec)\n')),(0,r.yg)("p",{parentName:"li"},"\u5982\u4e0a\u56fe\uff0c\u6bcf\u4e2a\u8282\u70b9\u90fd\u6807\u6ce8\u4e86\u81ea\u5df1\u6240\u5c5e\u7684 Fragment\uff0c\u5e76\u4e14\u5728\u6bcf\u4e2a Fragment \u7684 Sender\u8282\u70b9\uff0c\u6807\u6ce8\u4e86\u8be5 Fragment \u7684\u6267\u884c\u8017\u65f6\u3002\u8fd9\u4e2a\u8017\u65f6\uff0c\u662fFragment\u4e0b\u6240\u6709 Instance \u6267\u884c\u8017\u65f6\u4e2d\u6700\u957f\u7684\u4e00\u4e2a\u3002\u8fd9\u4e2a\u6709\u52a9\u4e8e\u6211\u4eec\u4ece\u6574\u4f53\u89d2\u5ea6\u53d1\u73b0\u6700\u8017\u65f6\u7684 Fragment\u3002")),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},"\u67e5\u770b\u5177\u4f53 Fragment \u4e0b\u7684 Instance \u5217\u8868"),(0,r.yg)("p",{parentName:"li"},"\u6bd4\u5982\u6211\u4eec\u53d1\u73b0 Fragment 1 \u8017\u65f6\u6700\u957f\uff0c\u5219\u53ef\u4ee5\u7ee7\u7eed\u67e5\u770b Fragment 1 \u7684 Instance \u5217\u8868\uff1a"),(0,r.yg)("pre",{parentName:"li"},(0,r.yg)("code",{parentName:"pre",className:"language-sql"},'mysql> show query profile "/c257c52f93e149ee-ace8ac14e8c9fef9/1";\n+-----------------------------------+-------------------+------------+\n| Instances                         | Host              | ActiveTime |\n+-----------------------------------+-------------------+------------+\n| c257c52f93e149ee-ace8ac14e8c9ff03 | 10.200.00.01:9060 | 5.449ms    |\n| c257c52f93e149ee-ace8ac14e8c9ff05 | 10.200.00.02:9060 | 5.367ms    |\n| c257c52f93e149ee-ace8ac14e8c9ff04 | 10.200.00.03:9060 | 5.358ms    |\n+-----------------------------------+-------------------+------------+ \n')),(0,r.yg)("p",{parentName:"li"},"\u8fd9\u91cc\u5c55\u793a\u4e86 Fragment 1 \u4e0a\u6240\u6709\u7684 3 \u4e2a Instance \u6240\u5728\u7684\u6267\u884c\u8282\u70b9\u548c\u8017\u65f6\u3002")),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},"\u67e5\u770b\u5177\u4f53 Instance"),(0,r.yg)("p",{parentName:"li"},"\u6211\u4eec\u53ef\u4ee5\u7ee7\u7eed\u67e5\u770b\u67d0\u4e00\u4e2a\u5177\u4f53\u7684 Instance \u4e0a\u5404\u4e2a\u7b97\u5b50\u7684\u8be6\u7ec6 Profile\uff1a"),(0,r.yg)("pre",{parentName:"li"},(0,r.yg)("code",{parentName:"pre",className:"language-sql"},'mysql> show query profile "/c257c52f93e149ee-ace8ac14e8c9fef9/1/c257c52f93e149ee-ace8ac14e8c9ff03"\\G\n*************************** 1. row ***************************\nInstance:\n \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n \u2502[9: DataStreamSender]                  \u2502\n \u2502(Active: 37.222us, non-child: 0.40)    \u2502\n \u2502  - Counters:                          \u2502\n \u2502      - BytesSent: 0.00                \u2502\n \u2502      - IgnoreRows: 0                  \u2502\n \u2502      - OverallThroughput: 0.0 /sec    \u2502\n \u2502      - PeakMemoryUsage: 8.00 KB       \u2502\n \u2502      - SerializeBatchTime: 0ns        \u2502\n \u2502      - UncompressedRowBatchSize: 0.00 \u2502\n \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                     \u2514\u2510\n                      \u2502\n    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n    \u2502[4: SORT_NODE]                    \u2502\n    \u2502(Active: 5.421ms, non-child: 0.71)\u2502\n    \u2502  - Counters:                     \u2502\n    \u2502      - PeakMemoryUsage: 12.00 KB \u2502\n    \u2502      - RowsReturned: 0           \u2502\n    \u2502      - RowsReturnedRate: 0       \u2502\n    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                     \u250c\u2518\n                     \u2502\n   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n   \u2502[8: AGGREGATION_NODE]              \u2502\n   \u2502(Active: 5.355ms, non-child: 10.68)\u2502\n   \u2502  - Counters:                      \u2502\n   \u2502      - BuildTime: 3.701us         \u2502\n   \u2502      - GetResultsTime: 0ns        \u2502\n   \u2502      - HTResize: 0                \u2502\n   \u2502      - HTResizeTime: 1.211us      \u2502\n   \u2502      - HashBuckets: 0             \u2502\n   \u2502      - HashCollisions: 0          \u2502\n   \u2502      - HashFailedProbe: 0         \u2502\n   \u2502      - HashFilledBuckets: 0       \u2502\n   \u2502      - HashProbe: 0               \u2502\n   \u2502      - HashTravelLength: 0        \u2502\n   \u2502      - LargestPartitionPercent: 0 \u2502\n   \u2502      - MaxPartitionLevel: 0       \u2502\n   \u2502      - NumRepartitions: 0         \u2502\n   \u2502      - PartitionsCreated: 16      \u2502\n   \u2502      - PeakMemoryUsage: 34.02 MB  \u2502\n   \u2502      - RowsProcessed: 0           \u2502\n   \u2502      - RowsRepartitioned: 0       \u2502\n   \u2502      - RowsReturned: 0            \u2502\n   \u2502      - RowsReturnedRate: 0        \u2502\n   \u2502      - SpilledPartitions: 0       \u2502\n   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                     \u2514\u2510\n                      \u2502\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502[7: EXCHANGE_NODE]                        \u2502\n\u2502(Active: 4.360ms, non-child: 46.84)       \u2502\n\u2502  - Counters:                             \u2502\n\u2502      - BytesReceived: 0.00               \u2502\n\u2502      - ConvertRowBatchTime: 387ns        \u2502\n\u2502      - DataArrivalWaitTime: 4.357ms      \u2502\n\u2502      - DeserializeRowBatchTimer: 0ns     \u2502\n\u2502      - FirstBatchArrivalWaitTime: 4.356ms\u2502\n\u2502      - PeakMemoryUsage: 0.00             \u2502\n\u2502      - RowsReturned: 0                   \u2502\n\u2502      - RowsReturnedRate: 0               \u2502\n\u2502      - SendersBlockedTotalTimer(*): 0ns  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n')),(0,r.yg)("p",{parentName:"li"},"\u4e0a\u56fe\u5c55\u793a\u4e86 Fragment 1 \u4e2d\uff0cInstance c257c52f93e149ee-ace8ac14e8c9ff03 \u7684\u5404\u4e2a\u7b97\u5b50\u7684\u5177\u4f53 Profile\u3002"))),(0,r.yg)("p",null,"\u901a\u8fc7\u4ee5\u4e0a3\u4e2a\u6b65\u9aa4\uff0c\u6211\u4eec\u53ef\u4ee5\u9010\u6b65\u6392\u67e5\u4e00\u4e2aSQL\u7684\u6027\u80fd\u74f6\u9888\u3002"))}m.isMDXComponent=!0}}]);