<!doctype html>
<html lang="en-US" dir="ltr" class="docs-wrapper docs-doc-page docs-version-1.2 plugin-docs plugin-id-default docs-doc-id-data-table/data-model" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no">
<meta name="generator" content="Docusaurus v2.4.3">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Apache Doris RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Apache Doris Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-DT7W9E9722"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-DT7W9E9722",{anonymize_ip:!0})</script>



<link rel="preconnect" href="https://analytics.apache.org/">
<script>var _paq=window._paq=window._paq||[];_paq.push(["setRequestMethod","POST"]),_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),_paq.push(["enableHeartBeatTimer"]),function(){var e="https://analytics.apache.org/";_paq.push(["setRequestMethod","POST"]),_paq.push(["setTrackerUrl",e+"matomo.php"]),_paq.push(["setSiteId","43"]);var a=document,t=a.createElement("script"),p=a.getElementsByTagName("script")[0];t.type="text/javascript",t.async=!0,t.src=e+"matomo.js",p.parentNode.insertBefore(t,p)}()</script>



<link rel="icon" href="/images/logo-only.png">
<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="#FFFFFF">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#000">
<link rel="apple-touch-icon" href="/img/docusaurus.png">
<link rel="mask-icon" href="/img/docusaurus.svg" color="rgb(37, 194, 160)">
<meta name="msapplication-TileImage" content="/img/docusaurus.png">
<meta name="msapplication-TileColor" content="#000">



<link rel="stylesheet" href="https://cdn-font.hyperos.mi.com/font/css?family=MiSans:100,200,300,400,450,500,600,650,700,900:Chinese_Simplify,Latin&display=swap">
<link rel="stylesheet" href="https://cdn-font.hyperos.mi.com/font/css?family=MiSans_Latin:100,200,300,400,450,500,600,650,700,900:Latin&display=swap">
<script src="/js/custom-script.js"></script><title data-rh="true">Data Model - Apache Doris</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://doris.apache.org/docs/1.2/data-table/data-model"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="1.2"><meta data-rh="true" name="docusaurus_tag" content="docs-default-1.2"><meta data-rh="true" name="docsearch:version" content="1.2"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-1.2"><meta data-rh="true" property="og:title" content="Data Model - Apache Doris"><meta data-rh="true" name="description" content="&lt;!--"><meta data-rh="true" property="og:description" content="&lt;!--"><link data-rh="true" rel="icon" href="/images/favicon.ico"><link data-rh="true" rel="canonical" href="https://doris.apache.org/docs/1.2/data-table/data-model"><link data-rh="true" rel="alternate" href="https://doris.apache.org/docs/1.2/data-table/data-model" hreflang="en-US"><link data-rh="true" rel="alternate" href="https://doris.apache.org/zh-CN/docs/1.2/data-table/data-model" hreflang="zh-Hans-CN"><link data-rh="true" rel="alternate" href="https://doris.apache.org/docs/1.2/data-table/data-model" hreflang="x-default"><link rel="stylesheet" href="https://cdnd.selectdb.com/assets/css/styles.8df26a34.css">
<link rel="preload" href="https://cdnd.selectdb.com/assets/js/runtime~main.d78c3de7.js" as="script">
<link rel="preload" href="https://cdnd.selectdb.com/assets/js/main.62136e2c.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_s0pr" style="background-color:#3C2FD4;color:#FFFFFF" role="banner"><div class="announcementBarPlaceholder_qxfj"></div><div class="announcementBarContent_dpRF"><a href="https://github.com/apache/doris" target="_blank" style="display: flex; width: 100%; align-items: center; justify-content: center; margin-left: 4px; text-decoration: none; color: white">Do you ‚ù§Ô∏è Doris? Give us a üåü on GitHub 
                <img style="width: 1.2rem; height: 1.2rem; margin-left: 0.4rem;" src="/images/github-white-icon.svg">
                    </a></div><button type="button" class="clean-btn close announcementBarClose_iXyO" aria-label="Close"><svg viewBox="0 0 15 15" width="14" height="14" style="color:white"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner" style="padding:"><div class="navbar__items"><div class="navbar-left"><div class="navbar-logo-wrapper flex items-center"><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="https://cdnd.selectdb.com/images/logo.svg" alt="Apache Doris" class="themedImage_ToTc themedImage--light_HNdA"><img src="https://cdnd.selectdb.com/images/logo.svg" alt="Apache Doris" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a></div><div class="navbarLeftToc_UHDb"><a class="navbar__item navbar__link" style="text-align:center;padding:0 0.625rem" target="_blank" href="/docs/gettingStarted/what-is-new">Docs</a><a class="navbar__item navbar__link" style="text-align:center;padding:0 0.625rem" href="/blog">Blog</a><a class="navbar__item navbar__link" style="text-align:center;padding:0 0.625rem" href="/users">Users</a><a href="https://github.com/apache/doris/discussions" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link" style="text-align:center;padding:0 0.625rem">Discussions</a><a class="navbar__item navbar__link" style="text-align:center;padding:0 0.625rem" href="/ecosystem/cluster-management">Ecosystem</a><a class="navbar__item navbar__link" style="text-align:center;padding:0 0.625rem" href="/community/join-community">Community</a></div></div></div><div class="navbar__items navbar__items--right"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><div class="docs-search searchBox_H2mL"><div class="navbar__search searchBarContainer_PzyC"><input placeholder="Search" aria-label="Search" class="navbar__search-input navbarSearchInput_tb6T"><div class="loadingRing__K5d searchBarLoadingRing_e2f0"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_m7ml"><kbd class="searchHint_zuPL">ctrl</kbd><kbd class="searchHint_zuPL">K</kbd></div></div></div><div class="custom-navbar-item navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg class="icon-language" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M7.75756 14.3L10.5816 6.91667H11.8759L14.7 14.3H13.4057L12.7501 12.4167H9.74113L9.06873 14.3H7.75756ZM10.1109 11.35H12.3467L11.254 8.3H11.2036L10.1109 11.35ZM2.84908 12.45L1.97498 11.5833L5.11841 8.48333C4.72618 8.05 4.38439 7.60267 4.09302 7.14133C3.80165 6.68044 3.54389 6.19444 3.31976 5.68333H4.61412C4.80463 6.06111 5.00635 6.39711 5.21927 6.69133C5.43219 6.986 5.68434 7.29444 5.97571 7.61667C6.43519 7.12778 6.81621 6.62511 7.11879 6.10867C7.42137 5.59178 7.67352 5.03889 7.87523 4.45H1V3.23333H5.33694V2H6.58087V3.23333H10.9178V4.45H9.11916C8.89503 5.18333 8.59805 5.89155 8.22824 6.57467C7.85842 7.25822 7.39895 7.90555 6.84983 8.51667L8.3459 10.0167L7.87523 11.2833L5.95891 9.38333L2.84908 12.45Z" fill="#4C576C"></path></svg></a><ul class="dropdown__menu"><li><a href="/docs/1.2/data-table/data-model" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" style="text-align:center;padding:0 0.625rem">English</a></li><li><a href="/zh-CN/docs/1.2/data-table/data-model" target="_self" rel="noopener noreferrer" class="dropdown__link" style="text-align:center;padding:0 0.625rem">‰∏≠Êñá</a></li></ul></div><div class="custom-navbar-item navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/1.2/summary/basic-summary"><span class="text-sm">Versions: <!-- -->1.2</span></a><ul class="dropdown__menu"><li><a class="dropdown__link" style="text-align:center;padding:0 0.625rem" href="/docs/3.0/install/source-install/compilation-with-docker">3.0</a></li><li><a class="dropdown__link" style="text-align:center;padding:0 0.625rem" href="/docs/install/source-install/compilation-with-docker">2.1</a></li><li><a class="dropdown__link" style="text-align:center;padding:0 0.625rem" href="/docs/2.0/install/source-install/compilation-with-docker">2.0</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" style="text-align:center;padding:0 0.625rem" href="/docs/1.2/data-table/data-model">1.2</a></li><li><a class="dropdown__link" style="text-align:center;padding:0 0.625rem" href="/docs/dev/install/source-install/compilation-with-docker">Dev</a></li></ul></div><a class="navbar__item navbar__link header-right-button-primary navbar-download-mobile" style="text-align:center;padding:0 0.625rem" href="/download">Download</a><a href="https://github.com/apache/doris" target="_blank" rel="noopener noreferrer" class="github-btn desktop header-right-button-github"></a><a href="https://join.slack.com/t/apachedoriscommunity/shared_invite/zt-2kl08hzc0-SPJe4VWmL_qzrFd2u2XYQA" target="_blank" rel="noopener noreferrer" class="slack-btn desktop header-right-button-slack"></a><a class="header-right-button-primary navbar-download-desktop" href="/download">Download</a></div></div><div class="navbar__bottom"><div class="docs-nav-mobile"><a class="navbar__item navbar__link" style="text-align:center;padding:0 0.625rem" href="/docs/1.2/gettingStarted/what-is-new">Getting Started</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" style="text-align:center;padding:0 0.625rem" href="/docs/install/source-install/compilation-with-docker">Guides</a><a class="navbar__item navbar__link" style="text-align:center;padding:0 0.625rem" href="/docs/1.2/benchmark/ssb">Benchmark</a><a class="navbar__item navbar__link" style="text-align:center;padding:0 0.625rem" href="/docs/1.2/ecosystem/spark-doris-connector">Ecosystem</a><a class="navbar__item navbar__link" style="text-align:center;padding:0 0.625rem" href="/docs/1.2/faq/install-faq">FAQ</a><a class="navbar__item navbar__link" style="text-align:center;padding:0 0.625rem" href="/docs/1.2/releasenotes/all-release">Releases</a><div class="navbar__item"><a href="https://github.com/apache/doris/discussions" target="_blank" style="display: flex; align-items: center; justify-content: center; text-decoration: none;">Forum<img style="width: 1.2rem; height: 1.2rem; margin-left: 0.2rem;" src="/images/forum-logo.svg">
                    </a></div></div></div><div class="navbar__bottom"></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="main-wrapper docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar"><nav aria-label="Docs sidebar" class="menu custom-scrollbar menu_Y1UP menuWithAnnouncementBar_fPny"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a id="menu__group" class="menu__link menu__link_level_1 menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/1.2/summary/basic-summary">Doris Introduction</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a id="menu__group" class="menu__link menu__link_level_1 menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/1.2/install/standard-deployment">Install And Deploy</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a id="menu__group" class="menu__link menu__link_level_1 menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/1.2/data-table/data-model">Table Design</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list menu__list_level_2"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/1.2/data-table/data-model">Data Model</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.2/data-table/data-partition">Data Partition</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.2/data-table/basic-usage">Guidelines for Basic Use</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.2/data-table/hit-the-rollup">Rollup and query</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.2/data-table/best-practice">Best Practices</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link_level_2 menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/1.2/data-table/index/prefix-index">Index</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a id="menu__group" class="menu__link menu__link_level_1 menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/1.2/data-operate/import/load-manual">Data Operation</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a id="menu__group" class="menu__link menu__link_level_1 menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/1.2/advanced/alter-table/schema-change">Advanced Usage</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a id="menu__group" class="menu__link menu__link_level_1 menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/1.2/query-acceleration/materialized-view">Query Acceleration</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a id="menu__group" class="menu__link menu__link_level_1 menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/1.2/lakehouse/multi-catalog/">Lakehouse</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a id="menu__group" class="menu__link menu__link_level_1 menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/1.2/sql-manual/sql-functions/array-functions/array">SQL Manual</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a id="menu__group" class="menu__link menu__link_level_1 menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/1.2/admin-manual/cluster-management/upgrade">Admin Manual</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_z5aJ"><div class="docItemContainer_c0TR"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Table Design</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Data Model</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Data Model</h1></header><h1>Data Model</h1><p>This topic introduces the data models in Doris from a logical perspective so you can make better use of Doris in different business scenarios.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="basic-concepts">Basic concepts<a href="#basic-concepts" class="hash-link" aria-label="Direct link to Basic concepts" title="Direct link to Basic concepts">‚Äã</a></h2><p>In Doris, data is logically described in the form of tables. A table consists of rows and columns. Row is a row of user data. Column is used to describe different fields in a row of data.</p><p>Columns can be divided into two categories: Key and Value. From a business perspective, Key and Value correspond to dimension columns and indicator columns, respectively.</p><p>Data models in Doris fall into three types:</p><ul><li>Aggregate</li><li>Unique</li><li>Duplicate</li></ul><p>The following is the detailed introduction to each of them.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="aggregate-model">Aggregate Model<a href="#aggregate-model" class="hash-link" aria-label="Direct link to Aggregate Model" title="Direct link to Aggregate Model">‚Äã</a></h2><p>We illustrate what aggregation model is and how to use it correctly with practical examples.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="example-1-importing-data-aggregation">Example 1: Importing data aggregation<a href="#example-1-importing-data-aggregation" class="hash-link" aria-label="Direct link to Example 1: Importing data aggregation" title="Direct link to Example 1: Importing data aggregation">‚Äã</a></h3><p>Assume that the business has the following data table schema:</p><table><thead><tr><th>ColumnName</th><th>Type</th><th>AggregationType</th><th>Comment</th></tr></thead><tbody><tr><td>userid</td><td>LARGEINT</td><td></td><td>user id</td></tr><tr><td>date</td><td>DATE</td><td></td><td>date of data filling</td></tr><tr><td>City</td><td>VARCHAR (20)</td><td></td><td>User City</td></tr><tr><td>age</td><td>SMALLINT</td><td></td><td>User age</td></tr><tr><td>sex</td><td>TINYINT</td><td></td><td>User gender</td></tr><tr><td>Last_visit_date</td><td>DATETIME</td><td>REPLACE</td><td>Last user access time</td></tr><tr><td>Cost</td><td>BIGINT</td><td>SUM</td><td>Total User Consumption</td></tr><tr><td>max dwell time</td><td>INT</td><td>MAX</td><td>Maximum user residence time</td></tr><tr><td>min dwell time</td><td>INT</td><td>MIN</td><td>User minimum residence time</td></tr></tbody></table><p>The corresponding CREATE TABLE statement would be as follows (omitting the Partition and Distribution information):</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">CREATE TABLE IF NOT EXISTS example_db.example_tbl</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">(</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    `user_id` LARGEINT NOT NULL COMMENT &quot;user id&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    `date` DATE NOT NULL COMMENT &quot;data import time&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    `city` VARCHAR(20) COMMENT &quot;city&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    `age` SMALLINT COMMENT &quot;age&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    `sex` TINYINT COMMENT &quot;gender&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    `last_visit_date` DATETIME REPLACE DEFAULT &quot;1970-01-01 00:00:00&quot; COMMENT &quot;last visit date time&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    `cost` BIGINT SUM DEFAULT &quot;0&quot; COMMENT &quot;user total cost&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    `max_dwell_time` INT MAX DEFAULT &quot;0&quot; COMMENT &quot;user max dwell time&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    `min_dwell_time` INT MIN DEFAULT &quot;99999&quot; COMMENT &quot;user min dwell time&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">AGGREGATE KEY(`user_id`, `date`, `city`, `age`, `sex`)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">DISTRIBUTED BY HASH(`user_id`) BUCKETS 1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">PROPERTIES (</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&quot;replication_allocation&quot; = &quot;tag.location.default: 1&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>As you can see, this is a typical fact table of user information and visit behaviors. In star models, user information and visit behaviors are usually stored in dimension tables and fact tables, respectively. Here, for the convenience of explanation, we store the two types of information in one single table.</p><p>The columns in the table are divided into Key (dimension) columns and Value (indicator columns) based on whether they are set with an <code>AggregationType</code>. <strong>Key</strong> columns are not set with an  <code>AggregationType</code>, such as <code>user_id</code>, <code>date</code>, and  <code>age</code>, while <strong>Value</strong> columns are.</p><p>When data are imported, rows with the same contents in the Key columns will be aggregated into one row, and their values in the Value columns will be aggregated as their <code>AggregationType</code> specify. Currently, their are four aggregation types:</p><ol><li>SUM: Accumulate the values in multiple rows.</li><li>REPLACE: The newly imported value will replace the previous value.</li><li>MAX: Keep the maximum value.</li><li>MIN: Keep the minimum value.</li></ol><p>Suppose that you have the following import data (raw data):</p><table><thead><tr><th>user<!-- -->_<!-- -->id</th><th>date</th><th>city</th><th>age</th><th>sex</th><th>last<!-- -->_<!-- -->visit<!-- -->_<!-- -->date</th><th>cost</th><th>max<!-- -->_<!-- -->dwell<!-- -->_<!-- -->time</th><th>min<!-- -->_<!-- -->dwell<!-- -->_<!-- -->time</th></tr></thead><tbody><tr><td>10000</td><td>2017-10-01</td><td>Beijing</td><td>20</td><td>0</td><td>2017-10-01 06:00</td><td>20</td><td>10</td><td>10</td></tr><tr><td>10000</td><td>2017-10-01</td><td>Beijing</td><td>20</td><td>0</td><td>2017-10-01 07:00</td><td>15</td><td>2</td><td>2</td></tr><tr><td>10001</td><td>2017-10-01</td><td>Beijing</td><td>30</td><td>1</td><td>2017-10-01 17:05:45</td><td>2</td><td>22</td><td>22</td></tr><tr><td>10002</td><td>2017-10-02</td><td>Shanghai</td><td>20</td><td>1</td><td>2017-10-02 12:59:12</td><td>200</td><td>5</td><td>5</td></tr><tr><td>10003</td><td>2017-10-02</td><td>Guangzhou</td><td>32</td><td>0</td><td>2017-10-02 11:20:00</td><td>30</td><td>11</td><td>11</td></tr><tr><td>10004</td><td>2017-10-01</td><td>Shenzhen</td><td>35</td><td>0</td><td>2017-10-01 10:00:15</td><td>100</td><td>3</td><td>3</td></tr><tr><td>10004</td><td>2017-10-03</td><td>Shenzhen</td><td>35</td><td>0</td><td>2017-10-03 10:20:22</td><td>11</td><td>6</td><td>6</td></tr></tbody></table><p>Assume that this is a table recording the user behaviors when visiting a certain commodity page. The first row of data, for example, is explained as follows:</p><table><thead><tr><th>Data</th><th>Description</th></tr></thead><tbody><tr><td>10000</td><td>User id, each user uniquely identifies id</td></tr><tr><td>2017-10-01</td><td>Data storage time, accurate to date</td></tr><tr><td>Beijing</td><td>User City</td></tr><tr><td>20</td><td>User Age</td></tr><tr><td>0</td><td>Gender male (1 for female)</td></tr><tr><td>2017-10-01 06:00</td><td>User&#x27;s time to visit this page, accurate to seconds</td></tr><tr><td>20</td><td>Consumption generated by the user&#x27;s current visit</td></tr><tr><td>10</td><td>User&#x27;s visit, time to stay on the page</td></tr><tr><td>10</td><td>User&#x27;s current visit, time spent on the page (redundancy)</td></tr></tbody></table><p>After this batch of data is imported into Doris correctly, it will be stored in Doris as follows:</p><table><thead><tr><th>user<!-- -->_<!-- -->id</th><th>date</th><th>city</th><th>age</th><th>sex</th><th>last<!-- -->_<!-- -->visit<!-- -->_<!-- -->date</th><th>cost</th><th>max<!-- -->_<!-- -->dwell<!-- -->_<!-- -->time</th><th>min<!-- -->_<!-- -->dwell<!-- -->_<!-- -->time</th></tr></thead><tbody><tr><td>10000</td><td>2017-10-01</td><td>Beijing</td><td>20</td><td>0</td><td>2017-10-01 07:00</td><td>35</td><td>10</td><td>2</td></tr><tr><td>10001</td><td>2017-10-01</td><td>Beijing</td><td>30</td><td>1</td><td>2017-10-01 17:05:45</td><td>2</td><td>22</td><td>22</td></tr><tr><td>10002</td><td>2017-10-02</td><td>Shanghai</td><td>20</td><td>1</td><td>2017-10-02 12:59:12</td><td>200</td><td>5</td><td>5</td></tr><tr><td>10003</td><td>2017-10-02</td><td>Guangzhou</td><td>32</td><td>0</td><td>2017-10-02 11:20:00</td><td>30</td><td>11</td><td>11</td></tr><tr><td>10004</td><td>2017-10-01</td><td>Shenzhen</td><td>35</td><td>0</td><td>2017-10-01 10:00:15</td><td>100</td><td>3</td><td>3</td></tr><tr><td>10004</td><td>2017-10-03</td><td>Shenzhen</td><td>35</td><td>0</td><td>2017-10-03 10:20:22</td><td>11</td><td>6</td><td>6</td></tr></tbody></table><p>As you can see, the data of User 10000 have been aggregated to one row, while those of other users remain the same. The explanation for the aggregated data of User 10000 is as follows (the first 5 columns remain unchanged, so it starts with Column 6 <code>last_visit_date</code>):</p><p>*<code>2017-10-01 07:00</code>: The <code>last_visit_date</code> column is aggregated by REPLACE, so <code>2017-10-01 07:00</code> has replaced  <code>2017-10-01 06:00</code>.</p><blockquote><p>Note: When using REPLACE to aggregate data from the same import batch, the order of replacement is uncertain. That means, in this case, the data eventually saved in Doris could be <code>2017-10-01 06:00</code>. However, for different import batches, it is certain that data from the new batch will replace those from the old batch.</p></blockquote><p>*<code>35</code>: The <code>cost</code>column is aggregated by SUM, so the update value <code>35</code> is the result of <code>20</code> + <code>15</code>.</p><p>*<code>10</code>: The <code>max_dwell_time</code> column is aggregated by MAX, so <code>10</code> is saved as it is the maximum between <code>10</code> and <code>2</code>.</p><p>*<code>2</code>: The  <code>min_dwell_time</code> column is aggregated by MIN, so <code>2</code> is saved as it is the minimum between <code>10</code> and <code>2</code>.</p><p>After aggregation, Doris only stores the aggregated data. In other words, the detailed raw data will no longer be available.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="example-2-keep-detailed-data">Example 2: keep detailed data<a href="#example-2-keep-detailed-data" class="hash-link" aria-label="Direct link to Example 2: keep detailed data" title="Direct link to Example 2: keep detailed data">‚Äã</a></h3><p>Here is a modified version of the table schema in Example 1:</p><table><thead><tr><th>ColumnName</th><th>Type</th><th>AggregationType</th><th>Comment</th></tr></thead><tbody><tr><td>user_id</td><td>LARGEINT</td><td></td><td>User ID</td></tr><tr><td>date</td><td>DATE</td><td></td><td>Date when the data are imported</td></tr><tr><td>time stamp</td><td>DATETIME</td><td></td><td>Date and time when the data are imported (with second-level accuracy)</td></tr><tr><td>city</td><td>VARCHAR (20)</td><td></td><td>User location city</td></tr><tr><td>age</td><td>SMALLINT</td><td></td><td>User age</td></tr><tr><td>sex</td><td>TINYINT</td><td></td><td>User gender</td></tr><tr><td>last visit date</td><td>DATETIME</td><td>REPLACE</td><td>Last visit time of the user</td></tr><tr><td>cost</td><td>BIGINT</td><td>SUM</td><td>Total consumption of the user</td></tr><tr><td>max_dwell_time</td><td>INT</td><td>MAX</td><td>Maximum user dwell time</td></tr><tr><td>min_dwell_time</td><td>INT</td><td>MIN</td><td>Minimum user dwell time</td></tr></tbody></table><p>A new column  <code>timestamp</code> has been added to record the date and time when the data are imported (with second-level accuracy).</p><p>Suppose that the import data are as follows:</p><table><thead><tr><th>user_id</th><th>date</th><th>timestamp</th><th>city</th><th>age</th><th>sex</th><th>last<!-- -->_<!-- -->visit<!-- -->_<!-- -->date</th><th>cost</th><th>max<!-- -->_<!-- -->dwell<!-- -->_<!-- -->time</th><th>min<!-- -->_<!-- -->dwell<!-- -->_<!-- -->time</th></tr></thead><tbody><tr><td>10000</td><td>2017-10-01</td><td>2017-10-01 08:00:05</td><td>Beijing</td><td>20</td><td>0</td><td>2017-10-01 06:00</td><td>20</td><td>10</td><td>10</td></tr><tr><td>10000</td><td>2017-10-01</td><td>2017-10-01 09:00:05</td><td>Beijing</td><td>20</td><td>0</td><td>2017-10-01 07:00</td><td>15</td><td>2</td><td>2</td></tr><tr><td>10001</td><td>2017-10-01</td><td>2017-10-01 18:12:10</td><td>Beijing</td><td>30</td><td>1</td><td>2017-10-01 17:05:45</td><td>2</td><td>22</td><td>22</td></tr><tr><td>10002</td><td>2017-10-02</td><td>2017-10-02 13:10:00</td><td>Shanghai</td><td>20</td><td>1</td><td>2017-10-02 12:59:12</td><td>200</td><td>5</td><td>5</td></tr><tr><td>10003</td><td>2017-10-02</td><td>2017-10-02 13:15:00</td><td>Guangzhou</td><td>32</td><td>0</td><td>2017-10-02 11:20:00</td><td>30</td><td>11</td><td>11</td></tr><tr><td>10004</td><td>2017-10-01</td><td>2017-10-01 12:12:48</td><td>Shenzhen</td><td>35</td><td>0</td><td>2017-10-01 10:00:15</td><td>100</td><td>3</td><td>3</td></tr><tr><td>10004</td><td>2017-10-03</td><td>2017-10-03 12:38:20</td><td>Shenzhen</td><td>35</td><td>0</td><td>2017-10-03 10:20:22</td><td>11</td><td>6</td><td>6</td></tr></tbody></table><p>After importing, this batch of data will be stored in Doris as follows:</p><table><thead><tr><th>user_id</th><th>date</th><th>timestamp</th><th>city</th><th>age</th><th>sex</th><th>last<!-- -->_<!-- -->visit<!-- -->_<!-- -->date</th><th>cost</th><th>max<!-- -->_<!-- -->dwell<!-- -->_<!-- -->time</th><th>min<!-- -->_<!-- -->dwell<!-- -->_<!-- -->time</th></tr></thead><tbody><tr><td>10000</td><td>2017-10-01</td><td>2017-10-01 08:00:05</td><td>Beijing</td><td>20</td><td>0</td><td>2017-10-01 06:00</td><td>20</td><td>10</td><td>10</td></tr><tr><td>10000</td><td>2017-10-01</td><td>2017-10-01 09:00:05</td><td>Beijing</td><td>20</td><td>0</td><td>2017-10-01 07:00</td><td>15</td><td>2</td><td>2</td></tr><tr><td>10001</td><td>2017-10-01</td><td>2017-10-01 18:12:10</td><td>Beijing</td><td>30</td><td>1</td><td>2017-10-01 17:05:45</td><td>2</td><td>22</td><td>22</td></tr><tr><td>10002</td><td>2017-10-02</td><td>2017-10-02 13:10:00</td><td>Shanghai</td><td>20</td><td>1</td><td>2017-10-02 12:59:12</td><td>200</td><td>5</td><td>5</td></tr><tr><td>10003</td><td>2017-10-02</td><td>2017-10-02 13:15:00</td><td>Guangzhou</td><td>32</td><td>0</td><td>2017-10-02 11:20:00</td><td>30</td><td>11</td><td>11</td></tr><tr><td>10004</td><td>2017-10-01</td><td>2017-10-01 12:12:48</td><td>Shenzhen</td><td>35</td><td>0</td><td>2017-10-01 10:00:15</td><td>100</td><td>3</td><td>3</td></tr><tr><td>10004</td><td>2017-10-03</td><td>2017-10-03 12:38:20</td><td>Shenzhen</td><td>35</td><td>0</td><td>2017-10-03 10:20:22</td><td>11</td><td>6</td><td>6</td></tr></tbody></table><p>As you can see, the stored data are exactly the same as the import data. No aggregation has ever happened. This is because, the newly added <code>timestamp</code> column results in <strong>difference of Keys</strong> among the rows. That is to say, as long as the Keys of the rows are not identical in the import data, Doris can save the complete detailed data even in the Aggregate Model.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="example-3-aggregate-import-data-and-existing-data">Example 3: aggregate import data and existing data<a href="#example-3-aggregate-import-data-and-existing-data" class="hash-link" aria-label="Direct link to Example 3: aggregate import data and existing data" title="Direct link to Example 3: aggregate import data and existing data">‚Äã</a></h3><p>Based on Example 1, suppose that you have the following data stored in Doris:</p><table><thead><tr><th>user_id</th><th>date</th><th>city</th><th>age</th><th>sex</th><th>last<!-- -->_<!-- -->visit<!-- -->_<!-- -->date</th><th>cost</th><th>max<!-- -->_<!-- -->dwell<!-- -->_<!-- -->time</th><th>min<!-- -->_<!-- -->dwell<!-- -->_<!-- -->time</th></tr></thead><tbody><tr><td>10000</td><td>2017-10-01</td><td>Beijing</td><td>20</td><td>0</td><td>2017-10-01 07:00</td><td>35</td><td>10</td><td>2</td></tr><tr><td>10001</td><td>2017-10-01</td><td>Beijing</td><td>30</td><td>1</td><td>2017-10-01 17:05:45</td><td>2</td><td>22</td><td>22</td></tr><tr><td>10002</td><td>2017-10-02</td><td>Shanghai</td><td>20</td><td>1</td><td>2017-10-02 12:59:12</td><td>200</td><td>5</td><td>5</td></tr><tr><td>10003</td><td>2017-10-02</td><td>Guangzhou</td><td>32</td><td>0</td><td>2017-10-02 11:20:00</td><td>30</td><td>11</td><td>11</td></tr><tr><td>10004</td><td>2017-10-01</td><td>Shenzhen</td><td>35</td><td>0</td><td>2017-10-01 10:00:15</td><td>100</td><td>3</td><td>3</td></tr><tr><td>10004</td><td>2017-10-03</td><td>Shenzhen</td><td>35</td><td>0</td><td>2017-10-03 10:20:22</td><td>11</td><td>6</td><td>6</td></tr></tbody></table><p>Now you need to import a new batch of data:</p><table><thead><tr><th>user_id</th><th>date</th><th>city</th><th>age</th><th>sex</th><th>last<!-- -->_<!-- -->visit<!-- -->_<!-- -->date</th><th>cost</th><th>max<!-- -->_<!-- -->dwell<!-- -->_<!-- -->time</th><th>min<!-- -->_<!-- -->dwell<!-- -->_<!-- -->time</th></tr></thead><tbody><tr><td>10004</td><td>2017-10-03</td><td>Shenzhen</td><td>35</td><td>0</td><td>2017-10-03 11:22:00</td><td>44</td><td>19</td><td>19</td></tr><tr><td>10005</td><td>2017-10-03</td><td>Changsha</td><td>29</td><td>1</td><td>2017-10-03 18:11:02</td><td>3</td><td>1</td><td>1</td></tr></tbody></table><p>After importing, the data stored in Doris will be updated as follows:</p><table><thead><tr><th>user_id</th><th>date</th><th>city</th><th>age</th><th>sex</th><th>last<!-- -->_<!-- -->visit<!-- -->_<!-- -->date</th><th>cost</th><th>max<!-- -->_<!-- -->dwell<!-- -->_<!-- -->time</th><th>min<!-- -->_<!-- -->dwell<!-- -->_<!-- -->time</th></tr></thead><tbody><tr><td>10000</td><td>2017-10-01</td><td>Beijing</td><td>20</td><td>0</td><td>2017-10-01 07:00</td><td>35</td><td>10</td><td>2</td></tr><tr><td>10001</td><td>2017-10-01</td><td>Beijing</td><td>30</td><td>1</td><td>2017-10-01 17:05:45</td><td>2</td><td>22</td><td>22</td></tr><tr><td>10002</td><td>2017-10-02</td><td>Shanghai</td><td>20</td><td>1</td><td>2017-10-02 12:59:12</td><td>200</td><td>5</td><td>5</td></tr><tr><td>10003</td><td>2017-10-02</td><td>Guangzhou</td><td>32</td><td>0</td><td>2017-10-02 11:20:00</td><td>30</td><td>11</td><td>11</td></tr><tr><td>10004</td><td>2017-10-01</td><td>Shenzhen</td><td>35</td><td>0</td><td>2017-10-01 10:00:15</td><td>100</td><td>3</td><td>3</td></tr><tr><td>10004</td><td>2017-10-03</td><td>Shenzhen</td><td>35</td><td>0</td><td>2017-10-03 11:22:00</td><td>55</td><td>19</td><td>6</td></tr><tr><td>10005</td><td>2017-10-03</td><td>Changsha</td><td>29</td><td>1</td><td>2017-10-03 18:11:02</td><td>3</td><td>1</td><td>1</td></tr></tbody></table><p>As you can see, the existing data and the newly imported data of User 10004 have been aggregated. Meanwhile, the new data of User 10005 have been added.</p><p>In Doris, data aggregation happens in the following 3 stages:</p><ol><li>The ETL stage of each batch of import data. At this stage, the batch of import data will be aggregated internally.</li><li>The data compaction stage of the underlying BE. At this stage, BE will aggregate data from different batches that have been imported.</li><li>The data query stage. The data involved in the query will be aggregated accordingly.</li></ol><p>At different stages, data will be aggregated to varying degrees. For example, when a batch of data is just imported, it may not be aggregated with the existing data. But for users, they <strong>can only query aggregated data</strong>. That is, what users see are the aggregated data, and they <strong>should not assume that what they have seen are not or partly aggregated</strong>. (See the <!-- -->[Limitations of Aggregate Model]<!-- -->(#Limitations of Aggregate Model) section for more details.)</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="unique-model">Unique Model<a href="#unique-model" class="hash-link" aria-label="Direct link to Unique Model" title="Direct link to Unique Model">‚Äã</a></h2><p>In some multi-dimensional analysis scenarios, users are highly concerned about how to ensure the uniqueness of the Key, that is, how to create uniqueness constraints for the Primary Key. Therefore, we introduce the Unique Model. Prior to Doris 1.2, the Unique Model was essentially a special case of the Aggregate Model and a simplified representation of table schema. The Aggregate Model is implemented by Merge on Read, so it might not deliver high performance in some aggregation queries (see the <!-- -->[Limitations of Aggregate Model]<!-- --> (#Limitations of Aggregate Model) section). In Doris 1.2, we have introduced a new implementation for the Unique Model--Merge on Write, which can help achieve optimal query performance. For now, Merge on Read and Merge on Write will coexist in the Unique Model for a while, but in the future, we plan to make Merge on Write the default implementation of the Unique Model. The following will illustrate the two implementations with examples.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="merge-on-read--same-implementation-as-aggregate-model">Merge on Read ( Same Implementation as Aggregate Model)<a href="#merge-on-read--same-implementation-as-aggregate-model" class="hash-link" aria-label="Direct link to Merge on Read ( Same Implementation as Aggregate Model)" title="Direct link to Merge on Read ( Same Implementation as Aggregate Model)">‚Äã</a></h3><table><thead><tr><th>ColumnName</th><th>Type</th><th>IsKey</th><th>Comment</th></tr></thead><tbody><tr><td>user_id</td><td>BIGINT</td><td>Yes</td><td>User ID</td></tr><tr><td>username</td><td>VARCHAR (50)</td><td>Yes</td><td>Username</td></tr><tr><td>city</td><td>VARCHAR (20)</td><td>No</td><td>User location city</td></tr><tr><td>age</td><td>SMALLINT</td><td>No</td><td>User age</td></tr><tr><td>sex</td><td>TINYINT</td><td>No</td><td>User gender</td></tr><tr><td>phone</td><td>LARGEINT</td><td>No</td><td>User phone number</td></tr><tr><td>address</td><td>VARCHAR (500)</td><td>No</td><td>User address</td></tr><tr><td>register_time</td><td>DATETIME</td><td>No</td><td>User registration time</td></tr></tbody></table><p>This is a typical user basic information table. There is no aggregation requirement for such data. The only concern is to ensure the uniqueness of the primary key. (The primary key here is user_id + username). The CREATE TABLE statement for the above table is as follows:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">CREATE TABLE IF NOT EXISTS example_db.example_tbl</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">(</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">`user_id` LARGEINT NOT NULL COMMENT &quot;User ID&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">`username` VARCHAR (50) NOT NULL COMMENT &quot;Username&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">`city` VARCHAR (20) COMMENT &quot;User location city&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">`age` SMALLINT COMMENT &quot;User age&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">`sex` TINYINT COMMENT &quot;User sex&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">`phone` LARGEINT COMMENT &quot;User phone number&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">`address` VARCHAR (500) COMMENT &quot;User address&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">`register_time` DATETIME COMMENT &quot;User registration time&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">UNIQUE KEY (`user_id`, `username`)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">DISTRIBUTED BY HASH(`user_id`) BUCKETS 1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">PROPERTIES (</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&quot;replication_allocation&quot; = &quot;tag.location.default: 1&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This is the same table schema and the CREATE TABLE statement as those of the Aggregate Model:</p><table><thead><tr><th>ColumnName</th><th>Type</th><th>AggregationType</th><th>Comment</th></tr></thead><tbody><tr><td>user_id</td><td>BIGINT</td><td></td><td>User ID</td></tr><tr><td>username</td><td>VARCHAR (50)</td><td></td><td>Username</td></tr><tr><td>city</td><td>VARCHAR (20)</td><td>REPLACE</td><td>User location city</td></tr><tr><td>age</td><td>SMALLINT</td><td>REPLACE</td><td>User age</td></tr><tr><td>sex</td><td>TINYINT</td><td>REPLACE</td><td>User gender</td></tr><tr><td>phone</td><td>LARGEINT</td><td>REPLACE</td><td>User phone number</td></tr><tr><td>address</td><td>VARCHAR (500)</td><td>REPLACE</td><td>User address</td></tr><tr><td>register_time</td><td>DATETIME</td><td>REPLACE</td><td>User registration time</td></tr></tbody></table><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">CREATE TABLE IF NOT EXISTS example_db.example_tbl</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">(</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">`user_id` LARGEINT NOT NULL COMMENT &quot;User ID&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">`username` VARCHAR (50) NOT NULL COMMENT &quot;Username&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">`city` VARCHAR (20) REPLACE COMMENT &quot;User location city&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">`sex` TINYINT REPLACE COMMENT &quot;User gender&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">`phone` LARGEINT REPLACE COMMENT &quot;User phone number&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">`address` VARCHAR(500) REPLACE COMMENT &quot;User address&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">`register_time` DATETIME REPLACE COMMENT &quot;User registration time&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">AGGREGATE KEY(`user_id`, `username`)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">DISTRIBUTED BY HASH(`user_id`) BUCKETS 1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">PROPERTIES (</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&quot;replication_allocation&quot; = &quot;tag.location.default: 1&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>That is to say, the Merge on Read implementation of the Unique Model is equivalent to the REPLACE aggregation type in the Aggregate Model. The internal implementation and data storage are exactly the same.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="merge-on-write-since-doris-12">Merge on Write (Since Doris 1.2)<a href="#merge-on-write-since-doris-12" class="hash-link" aria-label="Direct link to Merge on Write (Since Doris 1.2)" title="Direct link to Merge on Write (Since Doris 1.2)">‚Äã</a></h3><p>The Merge on Write implementation of the Unique Model is completely different from that of the Aggregate Model. It can deliver better performance in aggregation queries with primary key limitations.</p><p>In Doris 1.2.0, as a new feature, Merge on Write is disabled by default, and users can enable it by adding the following property:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">&quot;enable_unique_key_merge_on_write&quot; = &quot;true&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Take the previous table as an example, the corresponding CREATE TABLE statement should be:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">CREATE TABLE IF NOT EXISTS example_db.example_tbl</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">(</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">`user_id` LARGEINT NOT NULL COMMENT &quot;User ID&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">`username` VARCHAR (50) NOT NULL COMMENT &quot;Username&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">`city` VARCHAR (20) COMMENT &quot;User location city&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">`age` SMALLINT COMMENT &quot;Userage&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">`sex` TINYINT COMMENT &quot;User gender&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">`phone` LARGEINT COMMENT &quot;User phone number&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">`address` VARCHAR (500) COMMENT &quot;User address&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">`register_time` DATETIME COMMENT &quot;User registration time&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">UNIQUE KEY (`user_id`, `username`)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">DISTRIBUTED BY HASH(`user_id`) BUCKETS 1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">PROPERTIES (</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&quot;replication_allocation&quot; = &quot;tag.location.default: 1&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&quot;enable_unique_key_merge_on_write&quot; = &quot;true&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The table schema produced by the above statement will be different from that of the Aggregate Model.</p><table><thead><tr><th>ColumnName</th><th>Type</th><th>AggregationType</th><th>Comment</th></tr></thead><tbody><tr><td>user_id</td><td>BIGINT</td><td></td><td>User ID</td></tr><tr><td>username</td><td>VARCHAR (50)</td><td></td><td>Username</td></tr><tr><td>city</td><td>VARCHAR (20)</td><td>NONE</td><td>User location city</td></tr><tr><td>age</td><td>SMALLINT</td><td>NONE</td><td>User age</td></tr><tr><td>sex</td><td>TINYINT</td><td>NONE</td><td>User gender</td></tr><tr><td>phone</td><td>LARGEINT</td><td>NONE</td><td>User phone number</td></tr><tr><td>address</td><td>VARCHAR (500)</td><td>NONE</td><td>User address</td></tr><tr><td>register_time</td><td>DATETIME</td><td>NONE</td><td>User registration time</td></tr></tbody></table><p>On a Unique table with the Merge on Write option enabled, during the import stage, the data that are to be overwritten and updated will be marked for deletion, and new data will be written in. When querying, all data marked for deletion will be filtered out at the file level, and only the latest data would be readed. This eliminates the data aggregation cost while reading, and supports many types of predicate pushdown now. Therefore, it can largely improve performance in many scenarios, especially in aggregation queries.</p><p>[NOTE]</p><ol><li>The new Merge on Write implementation is disabled by default, and can only be enabled by specifying a property when creating a new table.</li><li>The old Merge on Read cannot be seamlessly upgraded to the new implementation (since they have completely different data organization). If you want to switch to the Merge on Write implementation, you need to manually execute <code>insert into unique-mow- table select * from source table</code> to load data to new table.</li><li>The two unique features <code>delete sign</code> and <code>sequence col</code> of the Unique Model can be used as normal in the new implementation, and their usage remains unchanged.</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="duplicate-model">Duplicate Model<a href="#duplicate-model" class="hash-link" aria-label="Direct link to Duplicate Model" title="Direct link to Duplicate Model">‚Äã</a></h2><p>In some multi-dimensional analysis scenarios, there is no need for primary keys or data aggregation. For these cases, we introduce the Duplicate Model to. Here is an example:</p><table><thead><tr><th>ColumnName</th><th>Type</th><th>SortKey</th><th>Comment</th></tr></thead><tbody><tr><td>timstamp</td><td>DATETIME</td><td>Yes</td><td>Log time</td></tr><tr><td>type</td><td>INT</td><td>Yes</td><td>Log type</td></tr><tr><td>error_code</td><td>INT</td><td>Yes</td><td>Error code</td></tr><tr><td>Error_msg</td><td>VARCHAR (1024)</td><td>No</td><td>Error details</td></tr><tr><td>op_id</td><td>BIGINT</td><td>No</td><td>Operator ID</td></tr><tr><td>op_time</td><td>DATETIME</td><td>No</td><td>Operation time</td></tr></tbody></table><p>The corresponding CREATE TABLE statement is as follows:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">CREATE TABLE IF NOT EXISTS example_db.example_tbl</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">(</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    `timestamp` DATETIME NOT NULL COMMENT &quot;Log time&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    `type` INT NOT NULL COMMENT &quot;Log type&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    `error_code` INT COMMENT &quot;Error code&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    `error_msg` VARCHAR(1024) COMMENT &quot;Error details&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    `op_id` BIGINT COMMENT &quot;Operator ID&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    `op_time` DATETIME COMMENT &quot;Operation time&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">DUPLICATE KEY(`timestamp`, `type`, `error_code`)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">DISTRIBUTED BY HASH(`type`) BUCKETS 1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">PROPERTIES (</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&quot;replication_allocation&quot; = &quot;tag.location.default: 1&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Different from the Aggregate and Unique Models, the Duplicate Model stores the data as they are and executes no aggregation. Even if there are two identical rows of data, they will both be retained. The DUPLICATE KEY in the CREATE TABLE statement is only used to specify based on which columns the data are sorted. (A more appropriate name than DUPLICATE KEY would be SORTING COLUMN, but it is named as such to specify the data model used. For more information, see <a href="https://doris.apache.org/docs/dev/data-table/index/prefix-index/" target="_blank" rel="noopener noreferrer">Prefix Index</a>.) For the choice of DUPLICATE KEY, we recommend the first 2-4 columns.</p><p>The Duplicate Mode l is suitable for storing raw data without aggregation requirements or primary key uniqueness constraints. For more usage scenarios, see the <!-- -->[Limitations of Aggregate Model]<!-- -->(#Limitations of Aggregate Model) section.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="limitations-of-aggregate-model">Limitations of Aggregate Model<a href="#limitations-of-aggregate-model" class="hash-link" aria-label="Direct link to Limitations of Aggregate Model" title="Direct link to Limitations of Aggregate Model">‚Äã</a></h2><p>This section is about the limitations of the Aggregate Model.</p><p>The Aggregate Model only presents the aggregated data. That means we have to ensure the presentation consistency of data that has not yet been aggregated (for example, two different import batches). The following provides further explanation with examples.</p><p>Suppose that you have the following table schema:</p><table><thead><tr><th>ColumnName</th><th>Type</th><th>AggregationType</th><th>Comment</th></tr></thead><tbody><tr><td>user<!-- -->_<!-- -->id</td><td>LARGEINT</td><td></td><td>User ID</td></tr><tr><td>date</td><td>DATE</td><td></td><td>Date when the data are imported</td></tr><tr><td>cost</td><td>BIGINT</td><td>SUM</td><td>Total user consumption</td></tr></tbody></table><p>Assume that there are two batches of data that have been imported into the storage engine as follows:</p><p><strong>batch 1</strong></p><table><thead><tr><th>user<!-- -->_<!-- -->id</th><th>date</th><th>cost</th></tr></thead><tbody><tr><td>10001</td><td>2017-11-20</td><td>50</td></tr><tr><td>10002</td><td>2017-11-21</td><td>39</td></tr></tbody></table><p><strong>batch 2</strong></p><table><thead><tr><th>user<!-- -->_<!-- -->id</th><th>date</th><th>cost</th></tr></thead><tbody><tr><td>10001</td><td>2017-11-20</td><td>1</td></tr><tr><td>10001</td><td>2017-11-21</td><td>5</td></tr><tr><td>10003</td><td>2017-11-22</td><td>22</td></tr></tbody></table><p>As you can see, data about User 10001 in these two import batches have not yet been aggregated. However, in order to ensure that users can only query the aggregated data as follows:</p><table><thead><tr><th>user<!-- -->_<!-- -->id</th><th>date</th><th>cost</th></tr></thead><tbody><tr><td>10001</td><td>2017-11-20</td><td>51</td></tr><tr><td>10001</td><td>2017-11-21</td><td>5</td></tr><tr><td>10002</td><td>2017-11-21</td><td>39</td></tr><tr><td>10003</td><td>2017-11-22</td><td>22</td></tr></tbody></table><p>We have added an aggregation operator to the  query engine to ensure the presentation consistency of data.</p><p>In addition, on the aggregate column (Value), when executing aggregate class queries that are inconsistent with the aggregate type, please pay attention to the semantics. For example, in the example above, if you execute the following query:</p><p><code>SELECT MIN(cost) FROM table;</code></p><p>The result will be 5, not 1.</p><p>Meanwhile, this consistency guarantee could considerably reduce efficiency in some queries.</p><p>Take the basic count (*) query as an example:</p><p><code>SELECT COUNT(*) FROM table;</code></p><p>In other databases, such queries return results quickly. Because in actual implementation, the models can get the query result by counting rows and saving the statistics upon import, or by scanning only one certain column of data to get count value upon query, with very little overhead. But in Doris&#x27;s Aggregation Model, the overhead of such queries is <strong>large</strong>.</p><p>For the previous example:</p><p><strong>batch 1</strong></p><table><thead><tr><th>user<!-- -->_<!-- -->id</th><th>date</th><th>cost</th></tr></thead><tbody><tr><td>10001</td><td>2017-11-20</td><td>50</td></tr><tr><td>10002</td><td>2017-11-21</td><td>39</td></tr></tbody></table><p><strong>batch 2</strong></p><table><thead><tr><th>user<!-- -->_<!-- -->id</th><th>date</th><th>cost</th></tr></thead><tbody><tr><td>10001</td><td>2017-11-20</td><td>1</td></tr><tr><td>10001</td><td>2017-11-21</td><td>5</td></tr><tr><td>10003</td><td>2017-11-22</td><td>22</td></tr></tbody></table><p>Since the final aggregation result is:</p><table><thead><tr><th>user<!-- -->_<!-- -->id</th><th>date</th><th>cost</th></tr></thead><tbody><tr><td>10001</td><td>2017-11-20</td><td>51</td></tr><tr><td>10001</td><td>2017-11-21</td><td>5</td></tr><tr><td>10002</td><td>2017-11-21</td><td>39</td></tr><tr><td>10003</td><td>2017-11-22</td><td>22</td></tr></tbody></table><p>The correct result of  <code>select count (*) from table;</code>  should be <strong>4</strong>. But if the model only scans the <code>user_id</code> column and operates aggregation upon query, the final result will be <strong>3</strong> (10001, 10002, 10003). And if it does not operate aggregation, the final result will be <strong>5</strong> (a total of five rows in two batches). Apparently, both results are wrong.</p><p>In order to get the correct result, we must read both the  <code>user_id</code> and <code>date</code> column, and <strong>performs aggregation</strong> when querying. That is to say, in the <code>count (*)</code> query, Doris must scan all AGGREGATE KEY columns (in this case, <code>user_id</code> and <code>date</code>) and aggregate them to get the semantically correct results. That means if there are many aggregated columns, <code>count (*)</code> queries could involve scanning large amounts of data.</p><p>Therefore, if you need to perform frequent <code>count (*)</code> queries, we recommend that you simulate <code>count (*)</code> by adding a column of value 1 and aggregation type SUM. In this way, the table schema in the previous example will be modified as follows:</p><table><thead><tr><th>ColumnName</th><th>Type</th><th>AggregationType</th><th>Comment</th></tr></thead><tbody><tr><td>user ID</td><td>BIGINT</td><td></td><td>User ID</td></tr><tr><td>date</td><td>DATE</td><td></td><td>Date when the data are imported</td></tr><tr><td>Cost</td><td>BIGINT</td><td>SUM</td><td>Total user consumption</td></tr><tr><td>count</td><td>BIGINT</td><td>SUM</td><td>For count queries</td></tr></tbody></table><p>The above adds a count column, the value of which will always be <strong>1</strong>, so the result of <code>select count (*) from table;</code>is equivalent to that of <code>select sum (count) from table;</code> The latter is much more efficient than the former. However, this method has its shortcomings, too. That is, it  requires that users will not import rows with the same values in the AGGREGATE KEY columns. Otherwise, <code>select sum (count) from table;</code> can only express the number of rows of the originally imported data, instead of the semantics of <code>select count (*) from table;</code></p><p>Another method is to add a <code>cound</code> column of value 1 but aggregation type of REPLACE. Then <code>select sum (count) from table;</code> and <code>select count (*) from table;</code>  could produce the same results. Moreover, this method does not require the absence of same AGGREGATE KEY columns in the import data.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="merge-on-write-of-unique-model">Merge on Write of Unique model<a href="#merge-on-write-of-unique-model" class="hash-link" aria-label="Direct link to Merge on Write of Unique model" title="Direct link to Merge on Write of Unique model">‚Äã</a></h3><p>The Merge on Write implementation in the Unique Model does not impose the same limitation as the Aggregate Model. In Merge on Write, the model adds a  <code>delete bitmap</code> for each imported rowset to mark the data being overwritten or deleted. With the previous example, after Batch 1 is imported, the data status will be as follows:</p><p><strong>batch 1</strong></p><table><thead><tr><th>user_id</th><th>date</th><th>cost</th><th>delete bit</th></tr></thead><tbody><tr><td>10001</td><td>2017-11-20</td><td>50</td><td>false</td></tr><tr><td>10002</td><td>2017-11-21</td><td>39</td><td>false</td></tr></tbody></table><p>After Batch 2 is imported, the duplicate rows in the first batch will be marked as deleted, and the status of the two batches of data is as follows</p><p><strong>batch 1</strong></p><table><thead><tr><th>user_id</th><th>date</th><th>cost</th><th>delete bit</th></tr></thead><tbody><tr><td>10001</td><td>2017-11-20</td><td>50</td><td><strong>true</strong></td></tr><tr><td>10002</td><td>2017-11-21</td><td>39</td><td>false</td></tr></tbody></table><p><strong>batch 2</strong></p><table><thead><tr><th>user<!-- -->_<!-- -->id</th><th>date</th><th>cost</th><th>delete bit</th></tr></thead><tbody><tr><td>10001</td><td>2017-11-20</td><td>1</td><td>false</td></tr><tr><td>10001</td><td>2017-11-21</td><td>5</td><td>false</td></tr><tr><td>10003</td><td>2017-11-22</td><td>22</td><td>false</td></tr></tbody></table><p>In queries, all data marked <code>true</code> in the <code>delete bitmap</code> will not be read, so there is no need for data aggregation. Since there are 4 valid rows in the above data, the query result should also be 4.  This also enables minimum overhead since it only scans one column of data.</p><p>In the test environment, <code>count(*)</code> queries in Merge on Write of the Unique Model deliver 10 times higher performance than that of the Aggregate Model.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="duplicate-model-1">Duplicate Model<a href="#duplicate-model-1" class="hash-link" aria-label="Direct link to Duplicate Model" title="Direct link to Duplicate Model">‚Äã</a></h3><p>The Duplicate Model does not impose the same limitation as the Aggregate Model because it does not involve aggregation semantics. For any columns, it can return the semantically correct results in  <code>count (*)</code> queries.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="key-columns">Key Columns<a href="#key-columns" class="hash-link" aria-label="Direct link to Key Columns" title="Direct link to Key Columns">‚Äã</a></h2><p>For the Duplicate, Aggregate, and Unique Models, the Key columns will be specified when the table is created, but there exist some differences: In the Duplicate Model, the Key columns of the table can be regarded as just &quot;sorting columns&quot;, but not unique identifiers. In Aggregate and Unique Models, the Key columns are both &quot;sorting columns&quot; and &quot;unique identifier columns&quot;.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="suggestions-for-choosing-data-model">Suggestions for Choosing Data Model<a href="#suggestions-for-choosing-data-model" class="hash-link" aria-label="Direct link to Suggestions for Choosing Data Model" title="Direct link to Suggestions for Choosing Data Model">‚Äã</a></h2><p>Since the data model was established when the table was built, and <strong>irrevocable thereafter, it is very important to select the appropriate data model</strong>.</p><ol><li>The Aggregate Model can greatly reduce the amount of data scanned and query computation by pre-aggregation. Thus, it is very suitable for report query scenarios with fixed patterns. But this model is unfriendly to <code>count (*)</code> queries. Meanwhile, since the aggregation method on the Value column is fixed, semantic correctness should be considered in other types of aggregation queries.</li><li>The Unique Model guarantees the uniqueness of primary key for scenarios requiring unique primary key. The downside is that it cannot exploit the advantage brought by pre-aggregation such as ROLLUP in queries.<ol><li>Users who have high performance requirements for aggregate queries are recommended to use the newly added Merge on Write implementation since version 1.2.</li><li>The Unique Model only supports entire-row updates. If you require primary key uniqueness as well as partial updates of certain columns (such as loading multiple source tables into one Doris table), you can consider using the Aggregate Model, while setting the aggregate type of the non-primary key columns to REPLACE_IF_NOT_NULL. See <a href="/docs/1.2/sql-manual/sql-reference/Data-Definition-Statements/Create/CREATE-TABLE">CREATE TABLE Manual</a> for more details.</li></ol></li><li>The Duplicate Model is suitable for ad-hoc queries of any dimensions. Although it may not be able to take advantage of the pre-aggregation feature, it is not limited by what constrains the Aggregate Model and can give full play to the advantage of columnar storage (reading only the relevant columns, but not all Key columns).</li></ol></div></article><div class="flex items-center justify-end col mt-10"><a href="https://github.com/apache/doris-website/issues/new?title=Issue on docs&amp;body=Path:false" target="_blank" rel="noopener noreferrer" class="mr-6 footerBtn_e3I8"><svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9.48038 2.9C9.71132 2.5 10.2887 2.5 10.5196 2.9L18.1406 16.1C18.3716 16.5 18.0829 17 17.621 17H2.37898C1.9171 17 1.62842 16.5 1.85936 16.1L9.48038 2.9Z" stroke="currentColor" stroke-width="1.2" stroke-linecap="round"></path><path d="M10.5699 7.9516C10.5874 7.5628 10.2769 7.23804 9.88766 7.23804C9.49847 7.23804 9.18796 7.5628 9.20543 7.9516L9.41597 12.6385C9.42731 12.8908 9.63513 13.0895 9.88766 13.0895C10.1402 13.0895 10.348 12.8908 10.3593 12.6385L10.5699 7.9516ZM9.89338 13.7638C9.65338 13.7638 9.44766 13.8323 9.28766 13.9923C9.12766 14.1409 9.04766 14.3352 9.04766 14.5752C9.04766 14.8152 9.12766 15.0095 9.28766 15.1695C9.45909 15.318 9.6648 15.398 9.89338 15.398C10.1219 15.398 10.3162 15.318 10.4762 15.158C10.6477 14.998 10.7277 14.8038 10.7277 14.5752C10.7277 14.3352 10.6477 14.1409 10.4762 13.9923C10.3162 13.8323 10.1219 13.7638 9.89338 13.7638Z" fill="currentColor"></path></svg> <span class="ml-2">Report issue</span></a></div><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/1.2/install/source-install/compilation-mac"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Compilation on macOS</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/1.2/data-table/data-partition"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Data Partition</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_jeP5 thin-scrollbar theme-doc-toc-desktop"><span class="ml-4">On This Page</span><ul class="table-of-contents table-of-contents__left-border"><li><a href="#basic-concepts" class="table-of-contents__link toc-highlight">Basic concepts</a></li><li><a href="#aggregate-model" class="table-of-contents__link toc-highlight">Aggregate Model</a><ul><li><a href="#example-1-importing-data-aggregation" class="table-of-contents__link toc-highlight">Example 1: Importing data aggregation</a></li><li><a href="#example-2-keep-detailed-data" class="table-of-contents__link toc-highlight">Example 2: keep detailed data</a></li><li><a href="#example-3-aggregate-import-data-and-existing-data" class="table-of-contents__link toc-highlight">Example 3: aggregate import data and existing data</a></li></ul></li><li><a href="#unique-model" class="table-of-contents__link toc-highlight">Unique Model</a><ul><li><a href="#merge-on-read--same-implementation-as-aggregate-model" class="table-of-contents__link toc-highlight">Merge on Read ( Same Implementation as Aggregate Model)</a></li><li><a href="#merge-on-write-since-doris-12" class="table-of-contents__link toc-highlight">Merge on Write (Since Doris 1.2)</a></li></ul></li><li><a href="#duplicate-model" class="table-of-contents__link toc-highlight">Duplicate Model</a></li><li><a href="#limitations-of-aggregate-model" class="table-of-contents__link toc-highlight">Limitations of Aggregate Model</a><ul><li><a href="#merge-on-write-of-unique-model" class="table-of-contents__link toc-highlight">Merge on Write of Unique model</a></li><li><a href="#duplicate-model-1" class="table-of-contents__link toc-highlight">Duplicate Model</a></li></ul></li><li><a href="#key-columns" class="table-of-contents__link toc-highlight">Key Columns</a></li><li><a href="#suggestions-for-choosing-data-model" class="table-of-contents__link toc-highlight">Suggestions for Choosing Data Model</a></li></ul></div></div></div></div></main></div></div></div><div class="footer pt-16 pb-10"><div class="container"><div class="footer-box"><div class="left"><img src="/images/asf_logo_apache.svg" alt="" class="themedImage_ToTc themedImage--light_HNdA footer__logo"><img src="/images/asf_logo_apache.svg" alt="" class="themedImage_ToTc themedImage--dark_i4oU footer__logo"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">ASF</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.apache.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Foundation<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.apache.org/licenses/" target="_blank" rel="noopener noreferrer" class="footer__link-item">License<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.apache.org/events/current-event" target="_blank" rel="noopener noreferrer" class="footer__link-item">Events<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.apache.org/foundation/sponsorship.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Sponsorship<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://privacy.apache.org/policies/privacy-policy-public.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.apache.org/security/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Security<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.apache.org/foundation/thanks.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Thanks<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Resources</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/download">Download</a></li><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a class="footer__link-item" href="/ecosystem/cluster-management">Ecosystem</a></li><li class="footer__item"><a class="footer__link-item" href="/users">Users</a></li><li class="footer__item"><a href="https://github.com/apache/doris/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discussions<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/community/how-to-contribute/">How to contribute</a></li><li class="footer__item"><a href="https://github.com/apache/doris/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Source code<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/community/team">Doris team</a></li><li class="footer__item"><a href="https://github.com/apache/doris/issues/30669" target="_blank" rel="noopener noreferrer" class="footer__link-item">Roadmap<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://cwiki.apache.org/confluence/display/DORIS/Doris+Improvement+Proposals" target="_blank" rel="noopener noreferrer" class="footer__link-item">Improvement proposal<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div></div><div class="right"><div class="footer__title">Join the community</div><div class="social-list"><div class="social"><a href="mailto:dev@doris.apache.org" target="_blank" title="mail" class="item"><svg xmlns="http://www.w3.org/2000/svg" width="2em" height="2em" viewBox="0 0 32 32" fill="none"><path d="M5.6003 6H26.3997C27.8186 6 28.982 7.10964 29 8.46946L16.0045 15.454L3.01202 8.47829C3.02405 7.11258 4.1784 6 5.6003 6ZM3.01202 11.1508L3 23.5011C3 24.8756 4.16938 26 5.6003 26H26.3997C27.8306 26 29 24.8756 29 23.5011V11.145L16.3111 17.8028C16.1157 17.9058 15.8813 17.9058 15.6889 17.8028L3.01202 11.1508Z" fill="currentColor"></path></svg></a><a href="https://github.com/apache/doris" target="_blank" title="github" class="item"><svg width="2em" height="2em" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M16.0001 2.66675C8.63342 2.66675 2.66675 8.63341 2.66675 16.0001C2.66524 18.7991 3.54517 21.5276 5.1817 23.7983C6.81824 26.0691 9.12828 27.7668 11.7841 28.6508C12.4508 28.7668 12.7001 28.3668 12.7001 28.0161C12.7001 27.7001 12.6828 26.6508 12.6828 25.5334C9.33342 26.1508 8.46675 24.7174 8.20008 23.9668C8.04942 23.5828 7.40008 22.4001 6.83342 22.0828C6.36675 21.8334 5.70008 21.2161 6.81608 21.2001C7.86675 21.1828 8.61608 22.1668 8.86675 22.5668C10.0668 24.5828 11.9841 24.0161 12.7494 23.6668C12.8668 22.8001 13.2161 22.2174 13.6001 21.8841C10.6334 21.5508 7.53342 20.4001 7.53342 15.3001C7.53342 13.8494 8.04942 12.6507 8.90008 11.7161C8.76675 11.3827 8.30008 10.0161 9.03342 8.18275C9.03342 8.18275 10.1494 7.83342 12.7001 9.55075C13.7855 9.2495 14.907 9.09787 16.0334 9.10008C17.1668 9.10008 18.3001 9.24942 19.3668 9.54942C21.9161 7.81608 23.0334 8.18408 23.0334 8.18408C23.7668 10.0174 23.3001 11.3841 23.1668 11.7174C24.0161 12.6507 24.5334 13.8334 24.5334 15.3001C24.5334 20.4174 21.4174 21.5508 18.4508 21.8841C18.9334 22.3001 19.3508 23.1001 19.3508 24.3508C19.3508 26.1334 19.3334 27.5668 19.3334 28.0174C19.3334 28.3668 19.5841 28.7828 20.2508 28.6494C22.8975 27.7558 25.1973 26.0547 26.8266 23.7856C28.4559 21.5165 29.3327 18.7936 29.3334 16.0001C29.3334 8.63341 23.3668 2.66675 16.0001 2.66675V2.66675Z" fill="currentColor"></path></svg></a><a href="https://twitter.com/doris_apache" target="_blank" title="twitter" class="item"><svg xmlns="http://www.w3.org/2000/svg" width="2em" height="2em" viewBox="0 0 32 32" fill="none"><path d="M4.625 4.625H11.2809L27.375 27.375H20.7191L4.625 4.625ZM7.52549 6.10639L21.5236 25.8936H24.4746L10.4764 6.10639H7.52549Z" fill="currentColor"></path><path d="M14.4268 18.4803L6.53447 27.375H4.625L13.5581 17.2525L14.4268 18.4803ZM18.1299 14.3066L26.7203 4.625H24.7017L17.2525 13.0662L18.1299 14.3066Z" fill="currentColor"></path></svg></a><a href="https://join.slack.com/t/apachedoriscommunity/shared_invite/zt-2kl08hzc0-SPJe4VWmL_qzrFd2u2XYQA" title="slack" target="_blank" class="item"><svg width="2em" height="2em" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_125_278)"><path d="M12.5875 16.6906C11.0844 16.6906 9.86562 17.9094 9.86562 19.4125V26.2375C9.86562 26.9594 10.1524 27.6517 10.6628 28.1622C11.1733 28.6726 11.8656 28.9594 12.5875 28.9594C13.3094 28.9594 14.0017 28.6726 14.5122 28.1622C15.0226 27.6517 15.3094 26.9594 15.3094 26.2375V19.4531C15.3094 17.9094 14.0906 16.6906 12.5875 16.6906ZM3 19.4531C3 20.175 3.28677 20.8673 3.79722 21.3778C4.30767 21.8882 4.99999 22.175 5.72187 22.175C6.44376 22.175 7.13608 21.8882 7.64653 21.3778C8.15698 20.8673 8.44375 20.175 8.44375 19.4531V16.7312H5.7625C4.25938 16.6906 3 17.9094 3 19.4531ZM12.5875 3C11.8656 3 11.1733 3.28677 10.6628 3.79722C10.1524 4.30767 9.86562 4.99999 9.86562 5.72187C9.86562 6.44376 10.1524 7.13608 10.6628 7.64653C11.1733 8.15698 11.8656 8.44375 12.5875 8.44375H15.3094V5.72187C15.3094 4.21875 14.0906 3 12.5875 3ZM5.72187 15.3094H12.5469C13.2688 15.3094 13.9611 15.0226 14.4715 14.5122C14.982 14.0017 15.2688 13.3094 15.2688 12.5875C15.2688 11.8656 14.982 11.1733 14.4715 10.6628C13.9611 10.1524 13.2688 9.86562 12.5469 9.86562H5.72187C4.99999 9.86562 4.30767 10.1524 3.79722 10.6628C3.28677 11.1733 3 11.8656 3 12.5875C3 13.3094 3.28677 14.0017 3.79722 14.5122C4.30767 15.0226 4.99999 15.3094 5.72187 15.3094ZM26.2375 9.86562C24.7344 9.86562 23.5156 11.0844 23.5156 12.5875V15.3094H26.2375C26.9594 15.3094 27.6517 15.0226 28.1622 14.5122C28.6726 14.0017 28.9594 13.3094 28.9594 12.5875C28.9594 11.8656 28.6726 11.1733 28.1622 10.6628C27.6517 10.1524 26.9594 9.86562 26.2375 9.86562ZM16.6906 5.72187V12.5875C16.6906 13.3094 16.9774 14.0017 17.4878 14.5122C17.9983 15.0226 18.6906 15.3094 19.4125 15.3094C20.1344 15.3094 20.8267 15.0226 21.3372 14.5122C21.8476 14.0017 22.1344 13.3094 22.1344 12.5875V5.72187C22.1344 4.99999 21.8476 4.30767 21.3372 3.79722C20.8267 3.28677 20.1344 3 19.4125 3C18.6906 3 17.9983 3.28677 17.4878 3.79722C16.9774 4.30767 16.6906 4.99999 16.6906 5.72187ZM22.1344 26.2781C22.1344 24.775 20.9156 23.5562 19.4125 23.5562H16.6906V26.2781C16.6906 27 16.9774 27.6923 17.4878 28.2028C17.9983 28.7132 18.6906 29 19.4125 29C20.1344 29 20.8267 28.7132 21.3372 28.2028C21.8476 27.6923 22.1344 27 22.1344 26.2781ZM26.2781 16.6906H19.4125C18.6906 16.6906 17.9983 16.9774 17.4878 17.4878C16.9774 17.9983 16.6906 18.6906 16.6906 19.4125C16.6906 20.1344 16.9774 20.8267 17.4878 21.3372C17.9983 21.8476 18.6906 22.1344 19.4125 22.1344H26.2375C27.7406 22.1344 28.9594 20.9156 28.9594 19.4125C29 17.9094 27.7812 16.6906 26.2781 16.6906Z" fill="currentColor"></path></g><defs><clipPath id="clip0_125_278"><rect width="26" height="26" fill="currentColor" transform="translate(3 3)"></rect></clipPath></defs></svg></a></div><div class="social"><a href="https://www.youtube.com/@apachedoris/channels" title="youtube" target="_blank" class="item"><svg xmlns="http://www.w3.org/2000/svg" width="2em" height="2em" viewBox="0 0 32 32" fill="none"><path d="M28.5167 7.83429C28.9436 8.25423 29.2532 8.77539 29.4154 9.34742C29.8205 11.5462 30.0159 13.7775 29.999 16.0121C30.0144 18.2382 29.819 20.4609 29.4154 22.6515C29.2532 23.2235 28.9436 23.7446 28.5167 24.1645C28.0898 24.5845 27.5601 24.889 26.9785 25.0486C24.7728 25.625 16.0124 25.625 16.0124 25.625C16.0124 25.625 7.22652 25.625 5.04638 25.0486C4.46489 24.889 3.9351 24.5845 3.5082 24.1645C3.08132 23.7446 2.77176 23.2235 2.60948 22.6515C2.19736 20.4617 1.9934 18.239 2.00025 16.0121C1.9918 13.7767 2.19577 11.5455 2.60948 9.34742C2.77176 8.77539 3.08132 8.25423 3.5082 7.83429C3.9351 7.41436 4.46489 7.10985 5.04638 6.95021C7.25103 6.36354 16.0124 6.37502 16.0124 6.37502C16.0124 6.37502 24.796 6.37502 26.9785 6.95021C27.5601 7.10985 28.0898 7.41436 28.5167 7.83429ZM12.5 21.25L21.25 16.008L12.5 10.75V21.25Z" fill="currentColor"></path></svg></a><a href="https://www.linkedin.com/company/doris-apache/" title="linkedin" target="_blank" class="item"><svg width="2rem" height="2rem" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4.29925 26.9996H9.66738V11.6781H4.29925V26.9996ZM22.1628 11.1949C19.9409 11.1949 18.7157 11.9388 17.3054 13.7407V11.6777H11.9459V26.9996H17.305V18.6738C17.305 16.9168 18.145 15.1982 20.1535 15.1982C22.162 15.1982 22.6559 16.9164 22.6559 18.632V27H28V18.2902C28 12.2386 24.3854 11.1949 22.1628 11.1949ZM6.99325 4C5.3395 4 4 5.21047 4 6.7046C4 8.19759 5.3395 9.40617 6.99325 9.40617C8.6455 9.40617 9.985 8.19722 9.985 6.7046C9.985 5.21047 8.6455 4 6.99325 4Z" fill="white"></path></svg></a><a href="https://medium.com/@ApacheDoris" title="medium" target="_blank" class="item"><svg width="2em" height="2em" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="Frame"><path id="Vector" d="M17.7967 16.5385C17.8029 18.53 16.9746 20.4425 15.4937 21.8559C14.0128 23.2693 12.0004 24.0681 9.89836 24.0769C7.79633 24.0681 5.78391 23.2693 4.30302 21.8559C2.82212 20.4425 1.99383 18.53 2.00003 16.5385C1.99383 14.5469 2.82212 12.6344 4.30302 11.221C5.78391 9.80759 7.79633 9.00878 9.89836 9C12.0004 9.00878 14.0128 9.80759 15.4937 11.221C16.9746 12.6344 17.8029 14.5469 17.7967 16.5385ZM26.4533 16.5385C26.4533 20.4514 24.6917 23.6348 22.51 23.6348C20.3283 23.6348 18.555 20.4514 18.555 16.5385C18.555 12.6255 20.3283 9.44214 22.51 9.44214C24.6917 9.44214 26.4533 12.6255 26.4533 16.5385ZM30 16.5385C30 20.0424 29.3817 22.8942 28.6117 22.8942C27.8417 22.8942 27.2233 20.0424 27.2233 16.5385C27.2233 13.0345 27.8417 10.1827 28.6117 10.1827C29.3817 10.1827 30 13.0345 30 16.5385Z" fill="currentColor"></path></g></svg></a><a class="item wechat"><svg width="2em" height="2em" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M20.7578 11.5169C21.0708 11.5169 21.3795 11.5398 21.6851 11.573C20.8524 7.73517 16.7052 4.88306 11.9718 4.88306C6.67951 4.88306 2.34412 8.45283 2.34412 12.9854C2.34412 15.6013 3.78679 17.7498 6.19667 19.4161L5.2339 22.2827L8.59917 20.6122C9.80411 20.8478 10.7698 21.0906 11.9718 21.0906C12.2738 21.0906 12.5728 21.0759 12.8703 21.0523C12.682 20.4159 12.5728 19.7485 12.5728 19.0566C12.5728 14.8947 16.1847 11.5169 20.7578 11.5169ZM15.5822 8.9335C16.3072 8.9335 16.7871 9.40601 16.7871 10.1229C16.7871 10.8369 16.3072 11.3153 15.5822 11.3153C14.8601 11.3153 14.1365 10.8369 14.1365 10.1229C14.1365 9.40601 14.8601 8.9335 15.5822 8.9335ZM8.84429 11.3153C8.12218 11.3153 7.3942 10.8368 7.3942 10.1229C7.3942 9.40597 8.12218 8.93346 8.84429 8.93346C9.56559 8.93346 10.0463 9.40597 10.0463 10.1229C10.0463 10.8369 9.56559 11.3153 8.84429 11.3153ZM29.5453 18.9422C29.5453 15.1332 25.6935 12.0285 21.3677 12.0285C16.7871 12.0285 13.1797 15.1332 13.1797 18.9422C13.1797 22.7567 16.7871 25.8547 21.3677 25.8547C22.326 25.8547 23.2932 25.6169 24.2559 25.3777L26.897 26.8086L26.1726 24.4282C28.1056 22.993 29.5453 21.0906 29.5453 18.9422ZM18.7126 17.7498C18.2335 17.7498 17.7499 17.278 17.7499 16.7966C17.7499 16.3219 18.2335 15.8442 18.7126 15.8442C19.4406 15.8442 19.9176 16.3219 19.9176 16.7966C19.9176 17.278 19.4406 17.7498 18.7126 17.7498ZM24.0079 17.7498C23.5324 17.7498 23.0518 17.278 23.0518 16.7966C23.0518 16.3219 23.5324 15.8442 24.0079 15.8442C24.73 15.8442 25.2128 16.3219 25.2128 16.7966C25.2128 17.278 24.73 17.7498 24.0079 17.7498Z" fill="currentColor"></path></svg><div class="wechat-dropdown"><p class="text-[#4c576c] text-xs">Connect on WeChat</p><img src="https://cdnd.selectdb.com/assets/images/doris-wechat-b949e908a3bc2776d824f79a9100bd4b.png" alt=""></div></a></div></div></div></div><div class="footer__copyright">Copyright ¬© 2024 The Apache Software Foundation,Licensed under the <a href="https://www.apache.org/licenses/LICENSE-2.0" target="_blank">Apache License, Version 2.0</a>. Apache, Doris, Apache Doris, the Apache feather logo and the Apache Doris logo are trademarks of The Apache Software Foundation.</div></div></div></div>
<script src="https://cdnd.selectdb.com/assets/js/runtime~main.d78c3de7.js"></script>
<script src="https://cdnd.selectdb.com/assets/js/main.62136e2c.js"></script>
</body>
</html>