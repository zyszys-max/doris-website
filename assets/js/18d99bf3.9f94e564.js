"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([[860989],{15680:(e,t,a)=>{a.d(t,{xA:()=>c,yg:()=>y});var n=a(296540);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),p=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},c=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},m="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),m=p(a),u=r,y=m["".concat(s,".").concat(u)]||m[u]||d[u]||i;return a?n.createElement(y,l(l({ref:t},c),{},{components:a})):n.createElement(y,l({ref:t},c))}));function y(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,l=new Array(i);l[0]=u;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o[m]="string"==typeof e?e:r,l[1]=o;for(var p=2;p<i;p++)l[p]=a[p];return n.createElement.apply(null,l)}return n.createElement.apply(null,a)}u.displayName="MDXCreateElement"},851635:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>d,frontMatter:()=>i,metadata:()=>o,toc:()=>p});var n=a(58168),r=(a(296540),a(15680));const i={title:"ADMIN-SET-REPLICA-VERSION",language:"en"},l=void 0,o={unversionedId:"sql-manual/sql-statements/Database-Administration-Statements/ADMIN-SET-REPLICA-VERSION",id:"version-3.0/sql-manual/sql-statements/Database-Administration-Statements/ADMIN-SET-REPLICA-VERSION",title:"ADMIN-SET-REPLICA-VERSION",description:"\x3c!--",source:"@site/versioned_docs/version-3.0/sql-manual/sql-statements/Database-Administration-Statements/ADMIN-SET-REPLICA-VERSION.md",sourceDirName:"sql-manual/sql-statements/Database-Administration-Statements",slug:"/sql-manual/sql-statements/Database-Administration-Statements/ADMIN-SET-REPLICA-VERSION",permalink:"/docs/3.0/sql-manual/sql-statements/Database-Administration-Statements/ADMIN-SET-REPLICA-VERSION",draft:!1,tags:[],version:"3.0",frontMatter:{title:"ADMIN-SET-REPLICA-VERSION",language:"en"},sidebar:"docs",previous:{title:"ADMIN-SET-REPLICA-STATUS",permalink:"/docs/3.0/sql-manual/sql-statements/Database-Administration-Statements/ADMIN-SET-REPLICA-STATUS"},next:{title:"ADMIN-SET-PARTITION-VERSION",permalink:"/docs/3.0/sql-manual/sql-statements/Database-Administration-Statements/ADMIN-SET-PARTITION-VERSION"}},s={},p=[{value:"ADMIN-SET-REPLICA-VERSION",id:"admin-set-replica-version",level:2},{value:"Name",id:"name",level:3},{value:"Description",id:"description",level:3},{value:"Example",id:"example",level:3},{value:"Keywords",id:"keywords",level:3},{value:"Best Practice",id:"best-practice",level:3}],c={toc:p},m="wrapper";function d(e){let{components:t,...a}=e;return(0,r.yg)(m,(0,n.A)({},c,a,{components:t,mdxType:"MDXLayout"}),(0,r.yg)("h2",{id:"admin-set-replica-version"},"ADMIN-SET-REPLICA-VERSION"),(0,r.yg)("h3",{id:"name"},"Name"),(0,r.yg)("p",null,"ADMIN SET REPLICA VERSION"),(0,r.yg)("h3",{id:"description"},"Description"),(0,r.yg)("p",null,"This statement is used to set the version, maximum success version, and maximum failure version of the specified replica."),(0,r.yg)("p",null,"This command is currently only used to manually repair the replica version when the program is abnormal, so that the replica can recover from the abnormal state."),(0,r.yg)("p",null,"grammar:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sql"},'ADMIN SET REPLICA VERSION\n        PROPERTIES ("key" = "value", ...);\n')),(0,r.yg)("p",null,"The following properties are currently supported:"),(0,r.yg)("ol",null,(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("inlineCode",{parentName:"li"},"tablet_id"),": Required. Specify a Tablet Id."),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("inlineCode",{parentName:"li"},"backend_id"),": Required. Specify Backend Id."),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("inlineCode",{parentName:"li"},"version"),": Optional. Set the replica version."),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("inlineCode",{parentName:"li"},"last_success_version"),": Optional. Set the replica max success version."),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("inlineCode",{parentName:"li"},"last_failed_version"),": Optional. Set the replica max failed version.")),(0,r.yg)("p",null,"If the specified replica does not exist, it will be ignored."),(0,r.yg)("blockquote",null,(0,r.yg)("p",{parentName:"blockquote"},"Note:"),(0,r.yg)("p",{parentName:"blockquote"},"Modifying these values \u200b\u200bmay cause subsequent data reading and writing failures, resulting in data inconsistency. Please operate with caution!"),(0,r.yg)("p",{parentName:"blockquote"},"Record the original value before modifying it. After the modification is completed, verify the read and write of the table. If the read and write fail, please restore the original value! But recovery may fail!"),(0,r.yg)("p",{parentName:"blockquote"},"It is strictly prohibited to operate the tablet that is writing data!")),(0,r.yg)("h3",{id:"example"},"Example"),(0,r.yg)("ol",null,(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},"Clear the replica failed version of tablet 10003 on BE 10001."),(0,r.yg)("pre",{parentName:"li"},(0,r.yg)("code",{parentName:"pre"},"   ```sql\n")),(0,r.yg)("p",{parentName:"li"},'ADMIN SET REPLICA VERSION PROPERTIES("tablet_id" = "10003", "backend_id" = "10001", "last_failed_version" = "-1");       '),(0,r.yg)("pre",{parentName:"li"},(0,r.yg)("code",{parentName:"pre"},"   ```\n"))),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},"Set the replica status of tablet 10003 on BE 10001 to ok."))),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sql"},'ADMIN SET REPLICA VERSION PROPERTIES("tablet_id" = "10003", "backend_id" = "10001", "version" = "1004");\n')),(0,r.yg)("h3",{id:"keywords"},"Keywords"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"ADMIN, SET, REPLICA, VERSION\n")),(0,r.yg)("h3",{id:"best-practice"},"Best Practice"))}d.isMDXComponent=!0}}]);