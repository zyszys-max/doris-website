"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([[433931],{15680:(e,n,t)=>{t.d(n,{xA:()=>p,yg:()=>m});var a=t(296540);function l(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){l(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function g(e,n){if(null==e)return{};var t,a,l=function(e,n){if(null==e)return{};var t,a,l={},r=Object.keys(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||(l[t]=e[t]);return l}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(l[t]=e[t])}return l}var u=a.createContext({}),d=function(e){var n=a.useContext(u),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},p=function(e){var n=d(e.components);return a.createElement(u.Provider,{value:n},e.children)},s="mdxType",o={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},y=a.forwardRef((function(e,n){var t=e.components,l=e.mdxType,r=e.originalType,u=e.parentName,p=g(e,["components","mdxType","originalType","parentName"]),s=d(t),y=l,m=s["".concat(u,".").concat(y)]||s[y]||o[y]||r;return t?a.createElement(m,i(i({ref:n},p),{},{components:t})):a.createElement(m,i({ref:n},p))}));function m(e,n){var t=arguments,l=n&&n.mdxType;if("string"==typeof e||l){var r=t.length,i=new Array(r);i[0]=y;var g={};for(var u in n)hasOwnProperty.call(n,u)&&(g[u]=n[u]);g.originalType=e,g[s]="string"==typeof e?e:l,i[1]=g;for(var d=2;d<r;d++)i[d]=t[d];return a.createElement.apply(null,i)}return a.createElement.apply(null,t)}y.displayName="MDXCreateElement"},26969:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>u,contentTitle:()=>i,default:()=>o,frontMatter:()=>r,metadata:()=>g,toc:()=>d});var a=t(58168),l=(t(296540),t(15680));const r={title:"Meta Service API",language:"en"},i=void 0,g={unversionedId:"compute-storage-decoupled/meta-service-api",id:"version-3.0/compute-storage-decoupled/meta-service-api",title:"Meta Service API",description:"\x3c!--",source:"@site/versioned_docs/version-3.0/compute-storage-decoupled/meta-service-api.md",sourceDirName:"compute-storage-decoupled",slug:"/compute-storage-decoupled/meta-service-api",permalink:"/docs/3.0/compute-storage-decoupled/meta-service-api",draft:!1,tags:[],version:"3.0",frontMatter:{title:"Meta Service API",language:"en"},sidebar:"docs",previous:{title:"File Cache",permalink:"/docs/3.0/compute-storage-decoupled/file-cache"},next:{title:"Upgrading Cluster",permalink:"/docs/3.0/admin-manual/cluster-management/upgrade"}},u={},d=[{value:"API version",id:"api-version",level:2},{value:"Field values",id:"field-values",level:2},{value:"create_instance (multiple storage vaults)",id:"create_instance-multiple-storage-vaults",level:2},{value:"Description",id:"description",level:3},{value:"Request",id:"request",level:3},{value:"create_instance (one storage vault)",id:"create_instance-one-storage-vault",level:2},{value:"Description",id:"description-1",level:3},{value:"Request",id:"request-1",level:3},{value:"drop_instance",id:"drop_instance",level:2},{value:"Description",id:"description-2",level:3},{value:"Request",id:"request-2",level:3},{value:"get_instance",id:"get_instance",level:2},{value:"Description",id:"description-3",level:3},{value:"Request",id:"request-3",level:3},{value:"set_instance_status",id:"set_instance_status",level:2},{value:"Description",id:"description-4",level:3},{value:"Request",id:"request-4",level:3},{value:"get_obj_store_info",id:"get_obj_store_info",level:2},{value:"Description",id:"description-5",level:3},{value:"Request",id:"request-5",level:3},{value:"update_ak_sk",id:"update_ak_sk",level:2},{value:"Description",id:"description-6",level:3},{value:"Request",id:"request-6",level:3},{value:"legacy_update_ak_sk",id:"legacy_update_ak_sk",level:2},{value:"Description",id:"description-7",level:3},{value:"Request",id:"request-7",level:3},{value:"add_obj_info",id:"add_obj_info",level:2},{value:"Description",id:"description-8",level:3},{value:"Request",id:"request-8",level:3},{value:"add_cluster",id:"add_cluster",level:2},{value:"Description",id:"description-9",level:3},{value:"Request",id:"request-9",level:3},{value:"get_cluster",id:"get_cluster",level:2},{value:"Description",id:"description-10",level:3},{value:"Request",id:"request-10",level:3},{value:"drop_cluster",id:"drop_cluster",level:2},{value:"Description",id:"description-11",level:3},{value:"Request",id:"request-11",level:3},{value:"rename_cluster",id:"rename_cluster",level:2},{value:"Description",id:"description-12",level:3},{value:"Request",id:"request-12",level:3},{value:"add_node",id:"add_node",level:2},{value:"Description",id:"description-13",level:3},{value:"Request",id:"request-13",level:3},{value:"drop_node",id:"drop_node",level:2},{value:"Description",id:"description-14",level:3},{value:"Request",id:"request-14",level:3},{value:"update_cluster_mysql_user_name",id:"update_cluster_mysql_user_name",level:2},{value:"Description",id:"description-15",level:3},{value:"Request",id:"request-15",level:3},{value:"cloud_cluster_status",id:"cloud_cluster_status",level:2},{value:"Description",id:"description-16",level:3},{value:"Request",id:"request-16",level:3},{value:"enable_instance_sse",id:"enable_instance_sse",level:2},{value:"Description",id:"description-17",level:3},{value:"Request",id:"request-17",level:3},{value:"get_cluster_status",id:"get_cluster_status",level:2},{value:"Description",id:"description-18",level:3},{value:"Request",id:"request-18",level:3},{value:"set_cluster_status",id:"set_cluster_status",level:2},{value:"Description",id:"description-19",level:3},{value:"Request",id:"request-19",level:3},{value:"decode_key",id:"decode_key",level:2},{value:"Description",id:"description-20",level:3},{value:"Request",id:"request-20",level:3},{value:"get_tablet_stats",id:"get_tablet_stats",level:2},{value:"Description",id:"description-21",level:3},{value:"Request",id:"request-21",level:3},{value:"abort_txn",id:"abort_txn",level:2},{value:"Description",id:"description-22",level:3},{value:"Request",id:"request-22",level:3},{value:"abort_tablet_job",id:"abort_tablet_job",level:2},{value:"Description",id:"description-23",level:3},{value:"Request",id:"request-23",level:3}],p={toc:d},s="wrapper";function o(e){let{components:n,...t}=e;return(0,l.yg)(s,(0,a.A)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,l.yg)("p",null,"The page introduces all APIs provided by the Meta Service."),(0,l.yg)("h2",{id:"api-version"},"API version"),(0,l.yg)("p",null,"For the purpose of compatibility and extension, all future APIs will include a version number in implementation. It is recommended to include the version number when using the APIs. Currently, all existing APIs have been added ",(0,l.yg)("inlineCode",{parentName:"p"},"v1/")," as the version identifier."),(0,l.yg)("p",null,"For example, this is ",(0,l.yg)("inlineCode",{parentName:"p"},"create_instance")," with its API version identifier:"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},"PUT /MetaService/http/v1/create_instance?token=<token> HTTP/1.1\n")),(0,l.yg)("p",null,"To ensure compatibility, existing APIs can still be accessed without ",(0,l.yg)("inlineCode",{parentName:"p"},"v1/"),"."),(0,l.yg)("h2",{id:"field-values"},"Field values"),(0,l.yg)("p",null,"For certain fields, special attention should be paid to their allowed value ranges and formats."),(0,l.yg)("table",null,(0,l.yg)("thead",{parentName:"table"},(0,l.yg)("tr",{parentName:"thead"},(0,l.yg)("th",{parentName:"tr",align:null},"Field"),(0,l.yg)("th",{parentName:"tr",align:null},"Description"),(0,l.yg)("th",{parentName:"tr",align:null},"Notes"))),(0,l.yg)("tbody",{parentName:"table"},(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"instance_id"),(0,l.yg)("td",{parentName:"tr",align:null},"ID of the data warehouse instance instance in the compute-storage decoupled mode,  normally a UUID string. It should follow the format of ",(0,l.yg)("inlineCode",{parentName:"td"},"[0-9a-zA-Z_-]+"),"."),(0,l.yg)("td",{parentName:"tr",align:null},"Example: ",(0,l.yg)("inlineCode",{parentName:"td"},"6ADDF03D-4C71-4F43-9D84-5FC89B3514F8"))),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"cloud_unique_id"),(0,l.yg)("td",{parentName:"tr",align:null},"A configuration in ",(0,l.yg)("inlineCode",{parentName:"td"},"be.conf"),"  and ",(0,l.yg)("inlineCode",{parentName:"td"},"fe.conf")," in the compute-storage decoupled mode; should be provided in a create",(0,l.yg)("em",{parentName:"td"},"cluster request; the format of it is ",(0,l.yg)("inlineCode",{parentName:"em"},"1:<instance_id>:<string>"),", in which the ",(0,l.yg)("inlineCode",{parentName:"em"},"string")," should conform to the format of `[0-9a-zA-Z"),"-]+`. The value for each node should be different."),(0,l.yg)("td",{parentName:"tr",align:null},"Example: ",(0,l.yg)("inlineCode",{parentName:"td"},"1:regression_instance0:regression-cloud-unique-id-1"))),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"cluster_name"),(0,l.yg)("td",{parentName:"tr",align:null},"In the compute-storage decoupled mode, this field is required when describing a compute cluster. It must be a unique identifier and its format should match the pattern ",(0,l.yg)("inlineCode",{parentName:"td"}," [a-zA-Z][0-9a-zA-Z_]+")),(0,l.yg)("td",{parentName:"tr",align:null},"Example: ",(0,l.yg)("inlineCode",{parentName:"td"},"write_cluster"),", ",(0,l.yg)("inlineCode",{parentName:"td"},"read_cluster0"))))),(0,l.yg)("h2",{id:"create_instance-multiple-storage-vaults"},"create_instance (multiple storage vaults)"),(0,l.yg)("h3",{id:"description"},"Description"),(0,l.yg)("p",null,"This API is used to create an instance, which supports one or more storage vaults (including HDFS and S3). This instance does not contain any node information. The same ",(0,l.yg)("inlineCode",{parentName:"p"},"instance_id")," cannot be created multiple times."),(0,l.yg)("h3",{id:"request"},"Request"),(0,l.yg)("p",null,(0,l.yg)("strong",{parentName:"p"},"Use HDFS as the storage vault")),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Syntax for a ",(0,l.yg)("inlineCode",{parentName:"li"},"create_instance")," request using HDFS as the storage vault")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-shell"},'PUT /MetaService/http/create_instance?token=<token> HTTP/1.1\nContent-Length: <ContentLength>\nContent-Type: text/plain\n\n{\n  "instance_id": string,\n  "name": string,\n  "user_id": string,\n  "vault": {\n    "hdfs_info" : {\n      "build_conf": {\n        "fs_name": string,\n        "user": string,\n        "hdfs_kerberos_keytab": string,\n        "hdfs_kerberos_principal": string,\n        "hdfs_confs" : [\n          {\n            "key": string,\n            "value": string\n          }\n        ]\n      },\n      "prefix": string\n    }\n  }\n}\n')),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Parameters for a ",(0,l.yg)("inlineCode",{parentName:"li"},"create_instance")," request using HDFS as the storage vault")),(0,l.yg)("table",null,(0,l.yg)("thead",{parentName:"table"},(0,l.yg)("tr",{parentName:"thead"},(0,l.yg)("th",{parentName:"tr",align:null},"Parameter"),(0,l.yg)("th",{parentName:"tr",align:null},"Description"),(0,l.yg)("th",{parentName:"tr",align:null},"Required/Optional"),(0,l.yg)("th",{parentName:"tr",align:null},"Notes"))),(0,l.yg)("tbody",{parentName:"table"},(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"instance_id"),(0,l.yg)("td",{parentName:"tr",align:null},"ID of the data warehouse instance in the compute-storage decoupled mode, normally a UUID string. It should conform to the format of ",(0,l.yg)("inlineCode",{parentName:"td"},"[0-9a-zA-Z_-]+"),"."),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null},"Example: ",(0,l.yg)("inlineCode",{parentName:"td"},"6ADDF03D-4C71-4F43-9D84-5FC89B3514F8"))),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"name"),(0,l.yg)("td",{parentName:"tr",align:null},"Instance name. It should conform to the format of ",(0,l.yg)("inlineCode",{parentName:"td"},"[a-zA-Z][0-9a-zA-Z_]+")),(0,l.yg)("td",{parentName:"tr",align:null},"Optional"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"user_id"),(0,l.yg)("td",{parentName:"tr",align:null},"ID of the user who creates the instance. It should conform to the format of ",(0,l.yg)("inlineCode",{parentName:"td"},"[a-zA-Z][0-9a-zA-Z_]+")),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"vault"),(0,l.yg)("td",{parentName:"tr",align:null},"Storage vault"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"vault.hdfs_info"),(0,l.yg)("td",{parentName:"tr",align:null},"Information of the HDFS storage vault"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"vault.build_conf"),(0,l.yg)("td",{parentName:"tr",align:null},"Build configuration of the HDFS storage vault"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"vault.build_conf.fs_name"),(0,l.yg)("td",{parentName:"tr",align:null},"HDFS name, normally the connection address"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"vault.build_conf.user"),(0,l.yg)("td",{parentName:"tr",align:null},"User to connect to HDFS"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"vault.build_conf.hdfs_kerberos_keytab"),(0,l.yg)("td",{parentName:"tr",align:null},"Kerberos Keytab path"),(0,l.yg)("td",{parentName:"tr",align:null},"Optional"),(0,l.yg)("td",{parentName:"tr",align:null},"Required when using Kerberos authentication")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"vault.build_conf.hdfs_kerberos_principal"),(0,l.yg)("td",{parentName:"tr",align:null},"Kerberos Principal"),(0,l.yg)("td",{parentName:"tr",align:null},"Optional"),(0,l.yg)("td",{parentName:"tr",align:null},"Required when using Kerberos authentication")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"vault.build_conf.hdfs_confs"),(0,l.yg)("td",{parentName:"tr",align:null},"Other configurations of HDFS"),(0,l.yg)("td",{parentName:"tr",align:null},"Optional"),(0,l.yg)("td",{parentName:"tr",align:null},"Can be filled in as needed")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"vault.prefix"),(0,l.yg)("td",{parentName:"tr",align:null},"Prefix for data storage; used for data isolation"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null},"Normally named after the specific business, such as ",(0,l.yg)("inlineCode",{parentName:"td"},"big_data"))))),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Example of a ",(0,l.yg)("inlineCode",{parentName:"li"},"create_instance")," request using HDFS as the storage vault")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},'PUT /MetaService/http/create_instance?token=greedisgood9999 HTTP/1.1\nContent-Length: 550\nContent-Type: text/plain\n{\n  "instance_id": "sample_instance_id",\n  "name": "sample_instance_name",\n  "user_id": "sample_user_id",\n  "vault": {\n    "hdfs_info" : {\n      "build_conf": {\n        "fs_name": "hdfs://172.21.0.44:4007",\n        "user": "hadoop",\n        "hdfs_kerberos_keytab": "/etc/emr.keytab",\n        "hdfs_kerberos_principal": "hadoop/172.30.0.178@EMR-XXXYYY",\n        "hdfs_confs" : [\n          {\n            "key": "hadoop.security.authentication",\n            "value": "kerberos"\n          }\n        ]\n      },\n      "prefix": "sample_prefix"\n    }\n  }\n}\n')),(0,l.yg)("p",null,(0,l.yg)("strong",{parentName:"p"},"Use object storage as the storage vault")),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Syntax for a ",(0,l.yg)("inlineCode",{parentName:"li"},"create_instance")," request using object storage as the storage vault")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-shell"},'PUT /MetaService/http/create_instance?token=<token HTTP/1.1\nContent-Length: <ContentLength>\nContent-Type: text/plain\n\n{\n  "instance_id": string,\n  "name": string,\n  "user_id": string,\n  "vault": {\n    "obj_info": {\n      "ak": string,\n      "sk": string,\n      "bucket": string,\n      "prefix": string,\n      "endpoint": string,\n      "external_endpoint": string,\n      "region": string,\n      "provider": string\n    }\n  }\n}\n')),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Parameters for a ",(0,l.yg)("inlineCode",{parentName:"li"},"create_instance")," request using object storage as the storage vault")),(0,l.yg)("table",null,(0,l.yg)("thead",{parentName:"table"},(0,l.yg)("tr",{parentName:"thead"},(0,l.yg)("th",{parentName:"tr",align:null},"Parameter"),(0,l.yg)("th",{parentName:"tr",align:null},"Description"),(0,l.yg)("th",{parentName:"tr",align:null},"Required/Optional"),(0,l.yg)("th",{parentName:"tr",align:null},"Notes"))),(0,l.yg)("tbody",{parentName:"table"},(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"instance_id"),(0,l.yg)("td",{parentName:"tr",align:null},"ID of the data warehouse instance in the compute-storage decoupled mode, normally a UUID string. It should conform to the format of ",(0,l.yg)("inlineCode",{parentName:"td"},"[0-9a-zA-Z_-]+"),"."),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null},"Example: ",(0,l.yg)("inlineCode",{parentName:"td"},"6ADDF03D-4C71-4F43-9D84-5FC89B3514F8"))),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"name"),(0,l.yg)("td",{parentName:"tr",align:null},"Instance name. It should conform to the format of ",(0,l.yg)("inlineCode",{parentName:"td"},"[a-zA-Z][0-9a-zA-Z_]+")),(0,l.yg)("td",{parentName:"tr",align:null},"Optional"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"user_id"),(0,l.yg)("td",{parentName:"tr",align:null},"ID of the user who creates the instance. It should conform to the format of ",(0,l.yg)("inlineCode",{parentName:"td"},"[a-zA-Z][0-9a-zA-Z_]+")),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"vault.obj_info"),(0,l.yg)("td",{parentName:"tr",align:null},"S3 link configuration"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"vault.obj_info.ak"),(0,l.yg)("td",{parentName:"tr",align:null},"S3 Access Key"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"vault.obj_info.sk"),(0,l.yg)("td",{parentName:"tr",align:null},"S3 Secret Key"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"vault.obj_info.bucket"),(0,l.yg)("td",{parentName:"tr",align:null},"S3 bucket name"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"vault.obj_info.prefix"),(0,l.yg)("td",{parentName:"tr",align:null},"Prefix for data storage on S3"),(0,l.yg)("td",{parentName:"tr",align:null},"Optional"),(0,l.yg)("td",{parentName:"tr",align:null},"If this parameter is empty, the default storage location will be in the root directory of the bucket, such as ",(0,l.yg)("inlineCode",{parentName:"td"},"big_data"))),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"obj_info.endpoint"),(0,l.yg)("td",{parentName:"tr",align:null},"S3 endpoint"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null},"The domain or IP:port, not including the scheme prefix such as",(0,l.yg)("inlineCode",{parentName:"td"}," http://."))),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"obj_info.region"),(0,l.yg)("td",{parentName:"tr",align:null},"S3 region"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null},"If using MinIO, this parameter can be filled in with any value.")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"obj_info.external_endpoint"),(0,l.yg)("td",{parentName:"tr",align:null},"S3 external endpoint"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null},"Normally consistent with the endpoint. Compatible with OSS. Note the difference between external and internal OSS.")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"vault.obj_info.provider"),(0,l.yg)("td",{parentName:"tr",align:null},"S3 provider; options include OSS, S3, COS, OBS, BOS, GCP, and AZURE"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null},"If using MinIO, simply fill in S3.")))),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Example of a ",(0,l.yg)("inlineCode",{parentName:"li"},"create_instance")," request using object storage as the storage vault")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-shell"},'PUT /MetaService/http/create_instance?token=greedisgood9999 HTTP/1.1\nContent-Length: 441\nContent-Type: text/plain\n\n{\n  "instance_id": "sample_instance_id",\n  "name": "sample_instance_name",\n  "user_id": "sample_user_id",\n  "vault": {\n    "obj_info": {\n      "ak": "ak_xxxxxxxxxxx",\n      "sk": "sk_xxxxxxxxxxx",\n      "bucket": "sample_bucket_name",\n      "prefix": "sample_prefix",\n      "endpoint": "cos.ap-beijing.myqcloud.com",\n      "external_endpoint": "cos.ap-beijing.myqcloud.com",\n      "region": "ap-beijing",\n      "provider": "COS"\n    }\n  }\n}\n')),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Returned parameter")),(0,l.yg)("table",null,(0,l.yg)("thead",{parentName:"table"},(0,l.yg)("tr",{parentName:"thead"},(0,l.yg)("th",{parentName:"tr",align:null},"Parameter"),(0,l.yg)("th",{parentName:"tr",align:null},"Description"),(0,l.yg)("th",{parentName:"tr",align:null},"Required/Optional"),(0,l.yg)("th",{parentName:"tr",align:null},"Notes"))),(0,l.yg)("tbody",{parentName:"table"},(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"code"),(0,l.yg)("td",{parentName:"tr",align:null},"Response status code"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null},"Enumerated values, including ",(0,l.yg)("inlineCode",{parentName:"td"},"OK"),", ",(0,l.yg)("inlineCode",{parentName:"td"},"INVALID_ARGUMENT"),", ",(0,l.yg)("inlineCode",{parentName:"td"},"INTERNAL_ERROR"),", and ",(0,l.yg)("inlineCode",{parentName:"td"},"ALREADY_EXISTED"))),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"msg"),(0,l.yg)("td",{parentName:"tr",align:null},"Error message"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null},"If an error occurs, an error message will be returned; if no error occurs, an empty string will be returned.")))),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Successful response")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},'{\n "code": "OK",\n "msg": ""\n}\n')),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Example of unsuccessful response")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},'{\n "code": "ALREADY_EXISTED",\n "msg": "instance already existed, instance_id=instance_id_deadbeef"\n}\n')),(0,l.yg)("h2",{id:"create_instance-one-storage-vault"},"create_instance (one storage vault)"),(0,l.yg)("admonition",{type:"caution"},(0,l.yg)("p",{parentName:"admonition"},"This is a legacy interface and is deprecated in newer versions. It should not be used in private deployment. ")),(0,l.yg)("h3",{id:"description-1"},"Description"),(0,l.yg)("p",null,"This API is used to create an instance, which only supports one storage vault (must be S3). This instance does not contain any node information. The same ",(0,l.yg)("inlineCode",{parentName:"p"},"instance_id")," cannot be created multiple times."),(0,l.yg)("h3",{id:"request-1"},"Request"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Syntax")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-shell"},'PUT /MetaService/http/create_instance?token=<token HTTP/1.1\nContent-Length: <ContentLength\nContent-Type: text/plain\n\n{\n    "instance_id": string,\n    "name": string,\n    "user_id": string,\n    "obj_info": {\n        "ak": string,\n        "sk": string,\n        "bucket": string,\n        "prefix": string,\n        "endpoint": string,\n        "region": string,\n        "external_endpoint": string,\n        "provider": string\n        "user_id": string\n    },\n    "ram_user": {\n        "user_id": string,\n        "ak": string,\n        "sk": string\n    }\n}\n')),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Parameter")),(0,l.yg)("table",null,(0,l.yg)("thead",{parentName:"table"},(0,l.yg)("tr",{parentName:"thead"},(0,l.yg)("th",{parentName:"tr",align:null},"Parameter"),(0,l.yg)("th",{parentName:"tr",align:null},"Description"),(0,l.yg)("th",{parentName:"tr",align:null},"Required/Optional"),(0,l.yg)("th",{parentName:"tr",align:null},"Notes"))),(0,l.yg)("tbody",{parentName:"table"},(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"instance_id"),(0,l.yg)("td",{parentName:"tr",align:null},"ID of the data warehouse instance in the compute-storage decoupled mode, normally a UUID string. It should conform to the format of ",(0,l.yg)("inlineCode",{parentName:"td"},"[0-9a-zA-Z_-]+"),"."),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null},"Example: ",(0,l.yg)("inlineCode",{parentName:"td"},"6ADDF03D-4C71-4F43-9D84-5FC89B3514F8"))),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"name"),(0,l.yg)("td",{parentName:"tr",align:null},"Instance name. It should conform to the format of ",(0,l.yg)("inlineCode",{parentName:"td"},"[a-zA-Z][0-9a-zA-Z_]+")),(0,l.yg)("td",{parentName:"tr",align:null},"Optional"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"user_id"),(0,l.yg)("td",{parentName:"tr",align:null},"ID of the user who creates the instance. It should conform to the format of ",(0,l.yg)("inlineCode",{parentName:"td"},"[a-zA-Z][0-9a-zA-Z_]+")),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"obj_info"),(0,l.yg)("td",{parentName:"tr",align:null},"S3 link configuration"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"obj_info.ak"),(0,l.yg)("td",{parentName:"tr",align:null},"S3 Access Key"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"obj_info.sk"),(0,l.yg)("td",{parentName:"tr",align:null},"S3 Secret Key"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"obj_info.bucket"),(0,l.yg)("td",{parentName:"tr",align:null},"S3 bucket name"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"obj_info.prefix"),(0,l.yg)("td",{parentName:"tr",align:null},"Prefix for data storage on S3"),(0,l.yg)("td",{parentName:"tr",align:null},"Optional"),(0,l.yg)("td",{parentName:"tr",align:null},"If this parameter is empty, the default storage location will be in the root directory of the bucket.")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"obj_info.endpoint"),(0,l.yg)("td",{parentName:"tr",align:null},"S3 endpoint"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null},"The domain or IP:port, not including the scheme prefix such as ",(0,l.yg)("inlineCode",{parentName:"td"},"http://. "))),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"obj_info.region"),(0,l.yg)("td",{parentName:"tr",align:null},"S3 region"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"obj_info.external_endpoint"),(0,l.yg)("td",{parentName:"tr",align:null},"S3 external endpoint"),(0,l.yg)("td",{parentName:"tr",align:null},"Optional"),(0,l.yg)("td",{parentName:"tr",align:null},"Compatible with OSS. Note the difference between external and internal OSS.")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"obj_info.provider"),(0,l.yg)("td",{parentName:"tr",align:null},"S3 provider"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"obj_info.user_id"),(0,l.yg)("td",{parentName:"tr",align:null},"user_id for bucket"),(0,l.yg)("td",{parentName:"tr",align:null},"Optional"),(0,l.yg)("td",{parentName:"tr",align:null},"Used to identify the object that needs to have its AK/SK changed during AK/SK rotation.")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"ram_user"),(0,l.yg)("td",{parentName:"tr",align:null},"ram_user, used for external bucket authorization"),(0,l.yg)("td",{parentName:"tr",align:null},"Optional"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"ram_user.user_id"),(0,l.yg)("td",{parentName:"tr",align:null}),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"ram_user.ak"),(0,l.yg)("td",{parentName:"tr",align:null}),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"ram_user.sk"),(0,l.yg)("td",{parentName:"tr",align:null}),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})))),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Example")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},'PUT /MetaService/http/create_instance?token=<token> HTTP/1.1\nContent-Length: <ContentLength>\nContent-Type: text/plain\n{\n    "instance_id": "123456",\n    "name": "name",\n    "user_id": "abcdef",\n    "obj_info": {\n        "ak": "test-ak1",\n        "sk": "test-sk1",\n        "bucket": "test-bucket",\n        "prefix": "test-prefix",\n        "endpoint": "test-endpoint",\n        "region": "test-region",\n        "provider": "OBS",\n        "user_id": "xxx"\n    }\n    "ram_user": {\n        "user_id": string,\n        "ak": string,\n        "sk": string\n    }\n}\n')),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Returned parameter")),(0,l.yg)("table",null,(0,l.yg)("thead",{parentName:"table"},(0,l.yg)("tr",{parentName:"thead"},(0,l.yg)("th",{parentName:"tr",align:null},"Parameter"),(0,l.yg)("th",{parentName:"tr",align:null},"Description"),(0,l.yg)("th",{parentName:"tr",align:null},"Required/Optional"),(0,l.yg)("th",{parentName:"tr",align:null},"Notes"))),(0,l.yg)("tbody",{parentName:"table"},(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"code"),(0,l.yg)("td",{parentName:"tr",align:null},"Response status code"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null},"Enumerated values, including ",(0,l.yg)("inlineCode",{parentName:"td"},"OK"),", ",(0,l.yg)("inlineCode",{parentName:"td"},"INVALID_ARGUMENT"),", ",(0,l.yg)("inlineCode",{parentName:"td"},"INTERNAL_ERROR"),", and ",(0,l.yg)("inlineCode",{parentName:"td"},"ALREADY_EXISTED"))),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"msg"),(0,l.yg)("td",{parentName:"tr",align:null},"Error message"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null},"If an error occurs, an error message will be returned; if no error occurs, an empty string will be returned.")))),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Successful response")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},'{\n "code": "OK",\n "msg": ""\n}\n')),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Example of unsuccessful response")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},'{\n "code": "ALREADY_EXISTED",\n "msg": "instance already existed, instance_id=instance_id_deadbeef"\n}\n')),(0,l.yg)("h2",{id:"drop_instance"},"drop_instance"),(0,l.yg)("h3",{id:"description-2"},"Description"),(0,l.yg)("p",null,"This API is used to delete an existing instance. After marking it for deletion, the Recycler will asynchronously reclaim the resources."),(0,l.yg)("h3",{id:"request-2"},"Request"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Syntax")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},'PUT /MetaService/http/drop_instance?token=<token> HTTP/1.1\nContent-Length: <ContentLength>\nContent-Type: text/plain\n{\n    "instance_id": string\n}\n')),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Parameter")),(0,l.yg)("table",null,(0,l.yg)("thead",{parentName:"table"},(0,l.yg)("tr",{parentName:"thead"},(0,l.yg)("th",{parentName:"tr",align:null},"Parameter"),(0,l.yg)("th",{parentName:"tr",align:null},"Description"),(0,l.yg)("th",{parentName:"tr",align:null},"Required/Optional"),(0,l.yg)("th",{parentName:"tr",align:null},"Notes"))),(0,l.yg)("tbody",{parentName:"table"},(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"instance_id"),(0,l.yg)("td",{parentName:"tr",align:null},"instance_id"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null},"Globally unique")))),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Example")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},'PUT /MetaService/http/drop_instance?token=<token> HTTP/1.1\nContent-Length: <ContentLength>\nContent-Type: text/plain\n{\n    "instance_id": "123456"\n}\n')),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Returned parameter")),(0,l.yg)("table",null,(0,l.yg)("thead",{parentName:"table"},(0,l.yg)("tr",{parentName:"thead"},(0,l.yg)("th",{parentName:"tr",align:null},"Parameter"),(0,l.yg)("th",{parentName:"tr",align:null},"Description"),(0,l.yg)("th",{parentName:"tr",align:null},"Required/Optional"),(0,l.yg)("th",{parentName:"tr",align:null},"Notes"))),(0,l.yg)("tbody",{parentName:"table"},(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"code"),(0,l.yg)("td",{parentName:"tr",align:null},"Response status code"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null},"Enumerated values, including ",(0,l.yg)("inlineCode",{parentName:"td"},"OK"),", ",(0,l.yg)("inlineCode",{parentName:"td"},"INVALID_ARGUMENT"),", ",(0,l.yg)("inlineCode",{parentName:"td"},"INTERNAL_ERROR"),", and ",(0,l.yg)("inlineCode",{parentName:"td"},"ALREADY_EXISTED"))),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"msg"),(0,l.yg)("td",{parentName:"tr",align:null},"Error message"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null},"If an error occurs, an error message will be returned; if no error occurs, an empty string will be returned.")))),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Successful response")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},'{\n "code": "OK",\n "msg": ""\n}\n')),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Example of unsuccessful response")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},'{\n "code": "INVALID_ARGUMENT",\n "msg": "failed to drop instance, instance has clusters"\n}\n')),(0,l.yg)("h2",{id:"get_instance"},"get_instance"),(0,l.yg)("h3",{id:"description-3"},"Description"),(0,l.yg)("p",null,"This API is used to query the details of an instance, including information of S3, compute clusters, and stages. It can be used for debugging purposes."),(0,l.yg)("h3",{id:"request-3"},"Request"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Syntax")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},"GET /MetaService/http/get_instance?token=greedisgood9999&instance_id={instance_id} HTTP/1.1\nContent-Length: <ContentLength>\nContent-Type: text/plain\n")),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Parameter")),(0,l.yg)("table",null,(0,l.yg)("thead",{parentName:"table"},(0,l.yg)("tr",{parentName:"thead"},(0,l.yg)("th",{parentName:"tr",align:null},"Parameter"),(0,l.yg)("th",{parentName:"tr",align:null},"Description"),(0,l.yg)("th",{parentName:"tr",align:null},"Required/Optional"),(0,l.yg)("th",{parentName:"tr",align:null},"Notes"))),(0,l.yg)("tbody",{parentName:"table"},(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"instance_id"),(0,l.yg)("td",{parentName:"tr",align:null},"instance_id"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null},"Globally unique")))),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Example")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},"GET /MetaService/http/get_instance?token=greedisgood9999&instance_id=test-instance HTTP/1.1\nContent-Length: <ContentLength>\nContent-Type: text/plain\n")),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Returned parameter")),(0,l.yg)("table",null,(0,l.yg)("thead",{parentName:"table"},(0,l.yg)("tr",{parentName:"thead"},(0,l.yg)("th",{parentName:"tr",align:null},"Parameter"),(0,l.yg)("th",{parentName:"tr",align:null},"Description"),(0,l.yg)("th",{parentName:"tr",align:null},"Required/Optional"),(0,l.yg)("th",{parentName:"tr",align:null},"Notes"))),(0,l.yg)("tbody",{parentName:"table"},(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"code"),(0,l.yg)("td",{parentName:"tr",align:null},"Response status code"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null},"Enumerated values, including ",(0,l.yg)("inlineCode",{parentName:"td"},"OK"),", ",(0,l.yg)("inlineCode",{parentName:"td"},"INVALID_ARGUMENT"),", ",(0,l.yg)("inlineCode",{parentName:"td"},"INTERNAL_ERROR"),", and ",(0,l.yg)("inlineCode",{parentName:"td"},"ALREADY_EXISTED"))),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"msg"),(0,l.yg)("td",{parentName:"tr",align:null},"Error message"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null},"If an error occurs, an error message will be returned; if no error occurs, an empty string will be returned.")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"result"),(0,l.yg)("td",{parentName:"tr",align:null},"Details of the instance"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"result.user_id"),(0,l.yg)("td",{parentName:"tr",align:null},"User ID used to create the instance"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"result.instance_id"),(0,l.yg)("td",{parentName:"tr",align:null},"instance_id passed in when creating the instance"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"result.name"),(0,l.yg)("td",{parentName:"tr",align:null},"User name used to create the instance"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"result.clusters"),(0,l.yg)("td",{parentName:"tr",align:null},"List of compute clusters within the instance"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"result.mtime"),(0,l.yg)("td",{parentName:"tr",align:null},"Modification time of the instance"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"result.obj_info"),(0,l.yg)("td",{parentName:"tr",align:null},"S3 information list associated with the instance"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"result.stages"),(0,l.yg)("td",{parentName:"tr",align:null},"List of stages associated with the instance"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"result.status"),(0,l.yg)("td",{parentName:"tr",align:null},"Instance status"),(0,l.yg)("td",{parentName:"tr",align:null},"Optional"),(0,l.yg)("td",{parentName:"tr",align:null},"If an instance is dropped, its status will turn into ",(0,l.yg)("inlineCode",{parentName:"td"},"DELETED"),".")))),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Successful response")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},'{\n    "code": "OK",\n    "msg": "",\n    "result": {\n        "user_id": "gavin-user-id",\n        "instance_id": "regression_instance0",\n        "name": "test-instance",\n        "clusters": [\n            {\n                "cluster_id": "RESERVED_CLUSTER_ID_FOR_SQL_SERVER",\n                "cluster_name": "RESERVED_CLUSTER_NAME_FOR_SQL_SERVER",\n                "type": "SQL",\n                "nodes": [\n                    {\n                        "cloud_unique_id": "1:regression_instance0:regression-cloud-unique-id-fe-1",\n                        "ip": "127.0.0.1",\n                        "ctime": "1669260437",\n                        "mtime": "1669260437",\n                        "edit_log_port": 12103,\n                        "node_type": "FE_MASTER"\n                    }\n                ]\n            },\n            {\n                "cluster_id": "regression_test_cluster_id0",\n                "cluster_name": "regression_test_cluster_name0",\n                "type": "COMPUTE",\n                "nodes": [\n                    {\n                        "cloud_unique_id": "1:regression_instance0:regression-cloud-unique-id0",\n                        "ip": "127.0.0.1",\n                        "ctime": "1669260437",\n                        "mtime": "1669260437",\n                        "heartbeat_port": 11102\n                    }\n                ],\n                "mysql_user_name": [\n                    "root"\n                ]\n            },\n            {\n                "cluster_id": "regression_test_cluster_id1",\n                "cluster_name": "regression_test_cluster_name1",\n                "type": "COMPUTE",\n                "nodes": [\n                    {\n                        "cloud_unique_id": "1:regression_instance0:regression-cloud-unique-id0",\n                        "ip": "127.0.0.1",\n                        "ctime": "1669260437",\n                        "mtime": "1669260437",\n                        "heartbeat_port": 14102\n                    }\n                ],\n                "mysql_user_name": [\n                    "jack",\n                    "lx"\n                ]\n            },\n            {\n                "cluster_id": "regression_test_cluster_id2",\n                "cluster_name": "regression_test_cluster_name2",\n                "type": "COMPUTE",\n                "nodes": [\n                    {\n                        "cloud_unique_id": "1:regression_instance0:regression-cloud-unique-id0",\n                        "ip": "127.0.0.1",\n                        "ctime": "1669260437",\n                        "mtime": "1669260437",\n                        "heartbeat_port": 16102\n                    }\n                ]\n            }\n        ],\n        "obj_info": [\n            {\n                "ctime": "1669260437",\n                "mtime": "1669260437",\n                "id": "1",\n                "ak": "akak",\n                "sk": "sksk",\n                "bucket": "justtmp-bj-1308700295",\n                "prefix": "dx-test",\n                "endpoint": "cos.ap-beijing.myqcloud.com",\n                "region": "ap-beijing",\n                "provider": "COS",\n                "external_endpoint": ""\n            }\n        ],\n        "stages": [\n            {\n                "mysql_user_name": [\n                    "admin"\n                ],\n                "obj_info": {\n                    "id": "1",\n                    "prefix": "dx-test/stage/admin/admin"\n                },\n                "stage_id": "c56f5d01-0ae2-4719-8be2-8b52b3144f60",\n                "mysql_user_id": [\n                    "admin"\n                ]\n            },\n            {\n                "type": "EXTERNAL",\n                "name": "smoke_test_tpch",\n                "obj_info": {\n                    "ak": "akak",\n                    "sk": "sksk",\n                    "bucket": "gavin-test-bj",\n                    "prefix": "smoke-test",\n                    "endpoint": "oss-cn-beijing.aliyuncs.com",\n                    "region": "cn-beijing",\n                    "provider": "OSS"\n                },\n                "stage_id": "261c3565-7ac3-4cb5-9c82-a9bc38cff8e8",\n                "properties": {\n                    "default.file.column_separator": "|"\n                }\n            }\n        ]\n    }\n}\n')),(0,l.yg)("h2",{id:"set_instance_status"},"set_instance_status"),(0,l.yg)("h3",{id:"description-4"},"Description"),(0,l.yg)("p",null,"This API is used to set the status of an instance to either ",(0,l.yg)("inlineCode",{parentName:"p"},"NORMAL")," or ",(0,l.yg)("inlineCode",{parentName:"p"},"OVERDUE"),"."),(0,l.yg)("h3",{id:"request-4"},"Request"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Syntax")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},'PUT /MetaService/http/set_instance_status?token=<token> HTTP/1.1\nContent-Length: <ContentLength>\nContent-Type: text/plain\n{\n    "instance_id": string\n    "op": string\n}\n')),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Parameter")),(0,l.yg)("table",null,(0,l.yg)("thead",{parentName:"table"},(0,l.yg)("tr",{parentName:"thead"},(0,l.yg)("th",{parentName:"tr",align:null},"Parameter"),(0,l.yg)("th",{parentName:"tr",align:null},"Description"),(0,l.yg)("th",{parentName:"tr",align:null},"Required/Optional"),(0,l.yg)("th",{parentName:"tr",align:null},"Notes"))),(0,l.yg)("tbody",{parentName:"table"},(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"instance_id"),(0,l.yg)("td",{parentName:"tr",align:null}),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"op"),(0,l.yg)("td",{parentName:"tr",align:null},'It should be either "SET_NORMAL" or "SET_OVERDUE".'),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})))),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Request example")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},'curl \'127.0.0.1:5000/MetaService/http/set_instance_status?token=greedisgood9999\' -d \'{\n    "instance_id":"test_instance",\n    "op": "SET_OVERDUE"\n}\'\n')),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Returned parameter")),(0,l.yg)("table",null,(0,l.yg)("thead",{parentName:"table"},(0,l.yg)("tr",{parentName:"thead"},(0,l.yg)("th",{parentName:"tr",align:null},"Parameter"),(0,l.yg)("th",{parentName:"tr",align:null},"Description"),(0,l.yg)("th",{parentName:"tr",align:null},"Required/Optional"),(0,l.yg)("th",{parentName:"tr",align:null},"Notes"))),(0,l.yg)("tbody",{parentName:"table"},(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"code"),(0,l.yg)("td",{parentName:"tr",align:null},"Response status code"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"msg"),(0,l.yg)("td",{parentName:"tr",align:null},"Error message"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})))),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Successful response")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},'{\n    "code": "OK",\n    "msg": ""\n}\n')),(0,l.yg)("h2",{id:"get_obj_store_info"},"get_obj_store_info"),(0,l.yg)("h3",{id:"description-5"},"Description"),(0,l.yg)("p",null,"This API is used to retrieve the S3 Access Key (AK) and Secret Key (SK) configured for a given instance. This API can be called multiple times using the same parameters."),(0,l.yg)("h3",{id:"request-5"},"Request"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Syntax")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},'PUT /MetaService/http/get_obj_store_info?token=<token> HTTP/1.1\nContent-Length: <ContentLength>\nContent-Type: text/plain\n{"cloud_unique_id": "<cloud_unique_id>"}\n')),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Parameter")),(0,l.yg)("table",null,(0,l.yg)("thead",{parentName:"table"},(0,l.yg)("tr",{parentName:"thead"},(0,l.yg)("th",{parentName:"tr",align:null},"Parameter"),(0,l.yg)("th",{parentName:"tr",align:null},"Description"),(0,l.yg)("th",{parentName:"tr",align:null},"Required/Optional"),(0,l.yg)("th",{parentName:"tr",align:null},"Notes"))),(0,l.yg)("tbody",{parentName:"table"},(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"cloud_unique_id"),(0,l.yg)("td",{parentName:"tr",align:null},"cloud_unique_id of node"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null},"The ",(0,l.yg)("inlineCode",{parentName:"td"},"unique_id")," of a node under an instance can be used to retrieve the S3 information configured for the entire instance.")))),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Example")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},'PUT /MetaService/http/get_obj_store_info?token=<token> HTTP/1.1\nContent-Length: <ContentLength>\nContent-Type: text/plain\n{"cloud_unique_id": "1:regression_instance0:cloud_unique_id_compute_node1"}\n')),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Returned parameter")),(0,l.yg)("table",null,(0,l.yg)("thead",{parentName:"table"},(0,l.yg)("tr",{parentName:"thead"},(0,l.yg)("th",{parentName:"tr",align:null},"Parameter"),(0,l.yg)("th",{parentName:"tr",align:null},"Description"),(0,l.yg)("th",{parentName:"tr",align:null},"Required/Optional"),(0,l.yg)("th",{parentName:"tr",align:null},"Notes"))),(0,l.yg)("tbody",{parentName:"table"},(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"code"),(0,l.yg)("td",{parentName:"tr",align:null},"Response status code"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null},"Enumerated values, including ",(0,l.yg)("inlineCode",{parentName:"td"},"OK"),", ",(0,l.yg)("inlineCode",{parentName:"td"},"INVALID_ARGUMENT"),", ",(0,l.yg)("inlineCode",{parentName:"td"},"INTERNAL_ERROR"),", and ",(0,l.yg)("inlineCode",{parentName:"td"},"ALREADY_EXISTED"))),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"msg"),(0,l.yg)("td",{parentName:"tr",align:null},"Error message"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null},"If an error occurs, an error message will be returned; if no error occurs, an empty string will be returned.")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"result"),(0,l.yg)("td",{parentName:"tr",align:null},"Result objects"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})))),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Successful response")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},'{\n    "code": "OK",\n    "msg": "",\n    "result": {\n        "obj_info": [\n            {\n                "ctime": "1662543056",\n                "mtime": "1662543056",\n                "id": "1",\n                "ak": "xxxx",\n                "sk": "xxxxx",\n                "bucket": "doris-xxx-1308700295",\n                "prefix": "selectdb-xxxx-regression-prefix",\n                "endpoint": "cos.ap-yyy.xxxx.com",\n                "region": "ap-xxx"\n            }\n        ]\n    }\n}\n')),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Example of unsuccessful response")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},'{\n "code": "INVALID_ARGUMENT",\n "msg": "empty instance_id"\n}\n')),(0,l.yg)("h2",{id:"update_ak_sk"},"update_ak_sk"),(0,l.yg)("h3",{id:"description-6"},"Description"),(0,l.yg)("p",null,"This API is used to update the S3 and RAM_USER Access Key (AK) and Secret Key (SK) information configured for a given instance. It uses ",(0,l.yg)("inlineCode",{parentName:"p"},"user_id")," to identify the item to be modified. This API is typically used for AK/SK rotation, and calling it with the same parameters will result in an error."),(0,l.yg)("h3",{id:"request-6"},"Request"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Syntax")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},'PUT /MetaService/http/update_ak_sk?token=<token> HTTP/1.1\nContent-Length: <ContentLength>\nContent-Type: text/plain\n{\n    "instance_id": string,\n    "internal_bucket_user":[\n        {\n            "user_id": string,\n            "ak": string,\n            "sk": string\n        },\n        {\n            "user_id": string,\n            "ak": string,\n            "sk": string\n        }\n    ],\n    "ram_user": {\n        "user_id": string,\n        "ak": string,\n        "sk": string\n    }\n}\n')),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Parameter")),(0,l.yg)("table",null,(0,l.yg)("thead",{parentName:"table"},(0,l.yg)("tr",{parentName:"thead"},(0,l.yg)("th",{parentName:"tr",align:null},"Parameter"),(0,l.yg)("th",{parentName:"tr",align:null},"Description"),(0,l.yg)("th",{parentName:"tr",align:null},"Required/Optional"),(0,l.yg)("th",{parentName:"tr",align:null},"Notes"))),(0,l.yg)("tbody",{parentName:"table"},(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"instance_id"),(0,l.yg)("td",{parentName:"tr",align:null},"instance_id"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"internal_bucket_user"),(0,l.yg)("td",{parentName:"tr",align:null},"bucket_user list to be modified"),(0,l.yg)("td",{parentName:"tr",align:null},"Either fill in internal_bucket_user or ram_user"),(0,l.yg)("td",{parentName:"tr",align:null},"Array")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"internal_bucket_user.user_id"),(0,l.yg)("td",{parentName:"tr",align:null},"The relevant user_id"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"internal_bucket_user.ak"),(0,l.yg)("td",{parentName:"tr",align:null}),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"internal_bucket_user.sk"),(0,l.yg)("td",{parentName:"tr",align:null}),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"ram_user"),(0,l.yg)("td",{parentName:"tr",align:null},"ram_user to be modified"),(0,l.yg)("td",{parentName:"tr",align:null},"Either fill in internal_bucket_user or ram_user"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"ram_user.user_id"),(0,l.yg)("td",{parentName:"tr",align:null},"The relevant user_id"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"ram_user.ak"),(0,l.yg)("td",{parentName:"tr",align:null}),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"ram_user.sk"),(0,l.yg)("td",{parentName:"tr",align:null}),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})))),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Example")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},'PUT /MetaService/http/update_ak_sk?token=<token> HTTP/1.1\nContent-Length: <ContentLength>\nContent-Type: text/plain\n{\n    "instance_id":"test",\n    "internal_bucket_user":[\n        {\n            "user_id": "bucket_user_id_1",\n            "ak": "xxxx",\n            "sk": "xxxx"\n        },\n        {\n            "user_id": "bucket_user_id_2",\n            "ak": "xxxx",\n            "sk": "xxxx"\n        }\n    ],\n    "ram_user": {\n        "user_id": "ram_user_id",\n        "ak": "xxxx",\n        "sk": "xxxx"\n    }\n}\n')),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Returned parameter")),(0,l.yg)("table",null,(0,l.yg)("thead",{parentName:"table"},(0,l.yg)("tr",{parentName:"thead"},(0,l.yg)("th",{parentName:"tr",align:null},"Parameter"),(0,l.yg)("th",{parentName:"tr",align:null},"Description"),(0,l.yg)("th",{parentName:"tr",align:null},"Required/Optional"),(0,l.yg)("th",{parentName:"tr",align:null},"Notes"))),(0,l.yg)("tbody",{parentName:"table"},(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"code"),(0,l.yg)("td",{parentName:"tr",align:null},"Response status code"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null},"Enumerated values, including ",(0,l.yg)("inlineCode",{parentName:"td"},"OK"),", ",(0,l.yg)("inlineCode",{parentName:"td"},"INVALID_ARGUMENT"),", ",(0,l.yg)("inlineCode",{parentName:"td"},"INTERNAL_ERROR"),", and ",(0,l.yg)("inlineCode",{parentName:"td"},"ALREADY_EXISTED"))),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"msg"),(0,l.yg)("td",{parentName:"tr",align:null},"Error message"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null},"If an error occurs, an error message will be returned; if no error occurs, an empty string will be returned.")))),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Successful response")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},'{\n "code": "OK",\n "msg": ""\n}\n')),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Example of unsuccessful response")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},'{\n "code": "INVALID_ARGUMENT",\n "msg": "ak sk eq original, please check it"\n}\n')),(0,l.yg)("h2",{id:"legacy_update_ak_sk"},"legacy_update_ak_sk"),(0,l.yg)("admonition",{type:"caution"},(0,l.yg)("p",{parentName:"admonition"},"This is a legacy interface and is deprecated in newer versions.")),(0,l.yg)("h3",{id:"description-7"},"Description"),(0,l.yg)("p",null,"This API is used to update the S3 Access Key (AK) and Secret Key (SK) configured for an instance. It uses ",(0,l.yg)("inlineCode",{parentName:"p"},"ID")," to identify the item to be modified. The ",(0,l.yg)("inlineCode",{parentName:"p"},"ID")," can be obtained by calling ",(0,l.yg)("inlineCode",{parentName:"p"},"get_obj_store_info"),". Calling this API multiple times with the same parameters will result in an error."),(0,l.yg)("h3",{id:"request-7"},"Request"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Syntax")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},'PUT /MetaService/http/legacy_update_ak_sk?token=<token> HTTP/1.1\nContent-Length: <ContentLength>\nContent-Type: text/plain\n{\n    "cloud_unique_id": string,\n    "obj": {\n        "id": string,\n        "ak": string,\n        "sk": string,\n    }\n}\n')),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Parameter")),(0,l.yg)("table",null,(0,l.yg)("thead",{parentName:"table"},(0,l.yg)("tr",{parentName:"thead"},(0,l.yg)("th",{parentName:"tr",align:null},"Parameter"),(0,l.yg)("th",{parentName:"tr",align:null},"Description"),(0,l.yg)("th",{parentName:"tr",align:null},"Required/Optional"),(0,l.yg)("th",{parentName:"tr",align:null},"Notes"))),(0,l.yg)("tbody",{parentName:"table"},(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"cloud_unique_id"),(0,l.yg)("td",{parentName:"tr",align:null},"cloud_unique_id of node"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"obj"),(0,l.yg)("td",{parentName:"tr",align:null},"Object"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null},"S3 information object")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"obj.id"),(0,l.yg)("td",{parentName:"tr",align:null},"Object ID"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null},"ID ranges from 1 to 10")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"obj.ak"),(0,l.yg)("td",{parentName:"tr",align:null},"Object Access Key"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"obj.sk"),(0,l.yg)("td",{parentName:"tr",align:null},"Object Secret Key"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null},"String array")))),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Example")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},'PUT /MetaService/http/legacy_update_ak_sk?token=<token> HTTP/1.1\nContent-Length: <ContentLength>\nContent-Type: text/plain\n{\n    "cloud_unique_id": "1:regression_instance0:cloud_unique_id_compute_node1",\n    "obj": {\n        "id": "1",\n        "ak": "test-ak",\n        "sk": "test-sk",\n    }\n}\n')),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Returned parameter")),(0,l.yg)("table",null,(0,l.yg)("thead",{parentName:"table"},(0,l.yg)("tr",{parentName:"thead"},(0,l.yg)("th",{parentName:"tr",align:null},"Parameter"),(0,l.yg)("th",{parentName:"tr",align:null},"Description"),(0,l.yg)("th",{parentName:"tr",align:null},"Required/Optional"),(0,l.yg)("th",{parentName:"tr",align:null},"Notes"))),(0,l.yg)("tbody",{parentName:"table"},(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"code"),(0,l.yg)("td",{parentName:"tr",align:null},"Response status code"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null},"Enumerated values, including ",(0,l.yg)("inlineCode",{parentName:"td"},"OK"),", ",(0,l.yg)("inlineCode",{parentName:"td"},"INVALID_ARGUMENT"),", ",(0,l.yg)("inlineCode",{parentName:"td"},"INTERNAL_ERROR"),", and ",(0,l.yg)("inlineCode",{parentName:"td"},"ALREADY_EXISTED"))),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"msg"),(0,l.yg)("td",{parentName:"tr",align:null},"Error message"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null},"If an error occurs, an error message will be returned; if no error occurs, an empty string will be returned.")))),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Successful response")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},'{\n "code": "OK",\n "msg": ""\n}\n')),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Example of unsuccessful response")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},'{\n "code": "INVALID_ARGUMENT",\n "msg": "ak sk eq original, please check it"\n}\n')),(0,l.yg)("h2",{id:"add_obj_info"},"add_obj_info"),(0,l.yg)("h3",{id:"description-8"},"Description"),(0,l.yg)("p",null,"This API is used to add S3 configurations for an instance. It supports a maximum of 10 S3 configurations, and each configuration must not exceed 1024 bytes in size."),(0,l.yg)("h3",{id:"request-8"},"Request"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Syntax")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},'PUT /MetaService/http/add_obj_info?token=<token> HTTP/1.1\nContent-Length: <ContentLength>\nContent-Type: text/plain\n{\n    "cloud_unique_id": string,\n    "obj": {\n        "ak": string,\n        "sk": string,\n        "bucket": string,\n        "prefix": string,\n        "endpoint": string,\n        "region": string\n    }\n}\n')),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Parameter")),(0,l.yg)("table",null,(0,l.yg)("thead",{parentName:"table"},(0,l.yg)("tr",{parentName:"thead"},(0,l.yg)("th",{parentName:"tr",align:null},"Parameter"),(0,l.yg)("th",{parentName:"tr",align:null},"Description"),(0,l.yg)("th",{parentName:"tr",align:null},"Required/Optional"),(0,l.yg)("th",{parentName:"tr",align:null},"Notes"))),(0,l.yg)("tbody",{parentName:"table"},(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"cloud_unique_id"),(0,l.yg)("td",{parentName:"tr",align:null},"cloud_unique_id of node"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"obj"),(0,l.yg)("td",{parentName:"tr",align:null},"Object"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null},"S3 object")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"obj.ak"),(0,l.yg)("td",{parentName:"tr",align:null},"S3 Access Key to be added"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"obj.sk"),(0,l.yg)("td",{parentName:"tr",align:null},"S3 Secret Key to be added"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"obj.bucket"),(0,l.yg)("td",{parentName:"tr",align:null},"S3 bucket to be added"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"obj.prefix"),(0,l.yg)("td",{parentName:"tr",align:null},"S3 prefix to be added"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"obj.endpoint"),(0,l.yg)("td",{parentName:"tr",align:null},"S3 endpoint to be added"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"obj.region"),(0,l.yg)("td",{parentName:"tr",align:null},"S3 region to be added"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})))),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Example")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},'PUT /MetaService/http/add_obj_info?token=<token> HTTP/1.1\nContent-Length: <ContentLength>\nContent-Type: text/plain\n{\n    "cloud_unique_id": "1:regression_instance0:cloud_unique_id_compute_node1",\n    "obj": {\n        "ak": "test-ak91",\n        "sk": "test-sk1",\n        "bucket": "test-bucket",\n        "prefix": "test-prefix",\n        "endpoint": "test-endpoint",\n        "region": "test-region"\n    }\n}\n')),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Returned parameter")),(0,l.yg)("table",null,(0,l.yg)("thead",{parentName:"table"},(0,l.yg)("tr",{parentName:"thead"},(0,l.yg)("th",{parentName:"tr",align:null},"Parameter"),(0,l.yg)("th",{parentName:"tr",align:null},"Description"),(0,l.yg)("th",{parentName:"tr",align:null},"Required/Optional"),(0,l.yg)("th",{parentName:"tr",align:null},"Notes"))),(0,l.yg)("tbody",{parentName:"table"},(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"code"),(0,l.yg)("td",{parentName:"tr",align:null},"Response status code"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null},"Enumerated values, including ",(0,l.yg)("inlineCode",{parentName:"td"},"OK"),", ",(0,l.yg)("inlineCode",{parentName:"td"},"INVALID_ARGUMENT"),", ",(0,l.yg)("inlineCode",{parentName:"td"},"INTERNAL_ERROR"),", and ",(0,l.yg)("inlineCode",{parentName:"td"},"ALREADY_EXISTED"))),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"msg"),(0,l.yg)("td",{parentName:"tr",align:null},"Error message"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null},"If an error occurs, an error message will be returned; if no error occurs, an empty string will be returned.")))),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Successful response")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},'{\n "code": "OK",\n "msg": ""\n}\n')),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Example of unsuccessful response")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},'{\n "code": "INVALID_ARGUMENT",\n "msg": "s3 conf info err, please check it"\n}\n')),(0,l.yg)("h2",{id:"add_cluster"},"add_cluster"),(0,l.yg)("h3",{id:"description-9"},"Description"),(0,l.yg)("p",null,"This API is used to create a compute cluster that belongs to an instance. The compute cluster contains information about a number (greater than or equal to 0) of nodes of the same type. This API cannot be called with the same parameters."),(0,l.yg)("h3",{id:"request-9"},"Request"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Syntax")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-SQL"},'PUT /MetaService/http/add_cluster?token=<token HTTP/1.1\nContent-Length: <ContentLength\nContent-Type: text/plain\n\n{\n    "instance_id": string,\n    "cluster": object {\n        "cluster_name": string,\n        "cluster_id": string,\n        "type": enum,\n        "nodes": [\n            {\n                "cloud_unique_id": string,\n                "ip": string,\n                "heartbeat_port": int\n            }\n        ]\n    }\n}\n')),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Parameter")),(0,l.yg)("table",null,(0,l.yg)("thead",{parentName:"table"},(0,l.yg)("tr",{parentName:"thead"},(0,l.yg)("th",{parentName:"tr",align:null},"Parameter"),(0,l.yg)("th",{parentName:"tr",align:null},"Description"),(0,l.yg)("th",{parentName:"tr",align:null},"Required/Optional"),(0,l.yg)("th",{parentName:"tr",align:null},"Notes"))),(0,l.yg)("tbody",{parentName:"table"},(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"instance_id"),(0,l.yg)("td",{parentName:"tr",align:null},"instance_id"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null},"Globally unique")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"cluster"),(0,l.yg)("td",{parentName:"tr",align:null},"Cluster object"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"cluster.cluster_name"),(0,l.yg)("td",{parentName:"tr",align:null},"Cluster name"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null},"The FE cluster name is special. The default value of it is ",(0,l.yg)("inlineCode",{parentName:"td"},"RESERVED_CLUSTER_NAME_FOR_SQL_SERVER"),". This can be modified by configuring ",(0,l.yg)("inlineCode",{parentName:"td"},"cloud_observer_cluster_name")," in the ",(0,l.yg)("inlineCode",{parentName:"td"},"fe.conf")," file.")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"cluster.cluster_id"),(0,l.yg)("td",{parentName:"tr",align:null},"Cluster ID"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null},"The FE cluster ID is special. The default value of it is ",(0,l.yg)("inlineCode",{parentName:"td"},"RESERVED_CLUSTER_ID_FOR_SQL_SERVER"),". This can be modified by configuring ",(0,l.yg)("inlineCode",{parentName:"td"},"cloud_observer_cluster_id")," in the ",(0,l.yg)("inlineCode",{parentName:"td"},"fe.conf")," file.")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"cluster.type"),(0,l.yg)("td",{parentName:"tr",align:null},"Cluster node type"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null},"Two types are supported: ",(0,l.yg)("inlineCode",{parentName:"td"},"SQL")," and ",(0,l.yg)("inlineCode",{parentName:"td"},"COMPUTE"),". ",(0,l.yg)("inlineCode",{parentName:"td"},"SQL")," represents the SQL Service corresponding to FE, while ",(0,l.yg)("inlineCode",{parentName:"td"},"COMPUTE")," means that the compute nodes are corresponding to BE.")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"cluster.nodes"),(0,l.yg)("td",{parentName:"tr",align:null},"Nodes in the cluster"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null},"Array")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"cluster.nodes.cloud_unique_id"),(0,l.yg)("td",{parentName:"tr",align:null},"cloud_unique_id of nodes"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null},(0,l.yg)("inlineCode",{parentName:"td"},"cloud_unique_id")," in ",(0,l.yg)("inlineCode",{parentName:"td"},"fe.conf")," and ",(0,l.yg)("inlineCode",{parentName:"td"},"be.conf"))),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"cluster.nodes.ip"),(0,l.yg)("td",{parentName:"tr",align:null},"Node IP"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null},"When deploying FE/BE in FQDN mode, this field should be the domain name.")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"cluster.nodes.host"),(0,l.yg)("td",{parentName:"tr",align:null},"Node domain name"),(0,l.yg)("td",{parentName:"tr",align:null},"Optional"),(0,l.yg)("td",{parentName:"tr",align:null},"This field is required when deploying FE/BE in FQDN mode.")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"cluster.nodes.heartbeat_port"),(0,l.yg)("td",{parentName:"tr",align:null},"Heartbeat port of BE"),(0,l.yg)("td",{parentName:"tr",align:null},"Required for BE"),(0,l.yg)("td",{parentName:"tr",align:null},"heartbeat_service_port in be.conf")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"cluster.nodes.edit_log_port"),(0,l.yg)("td",{parentName:"tr",align:null},"Edit log port of FE"),(0,l.yg)("td",{parentName:"tr",align:null},"Required for FE"),(0,l.yg)("td",{parentName:"tr",align:null},(0,l.yg)("inlineCode",{parentName:"td"},"edit_log_port")," in ",(0,l.yg)("inlineCode",{parentName:"td"},"fe.conf"))),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"cluster.nodes.node_type"),(0,l.yg)("td",{parentName:"tr",align:null},"FE node type"),(0,l.yg)("td",{parentName:"tr",align:null},"Required for FE"),(0,l.yg)("td",{parentName:"tr",align:null},"This field is required when the cluster type is ",(0,l.yg)("inlineCode",{parentName:"td"},"SQL"),". It can be either ",(0,l.yg)("inlineCode",{parentName:"td"},"FE_MASTER")," or ",(0,l.yg)("inlineCode",{parentName:"td"},"FE_OBSERVER"),". ",(0,l.yg)("inlineCode",{parentName:"td"},"FE_MASTER")," indicates that the node is of Master role, and ",(0,l.yg)("inlineCode",{parentName:"td"},"FE_OBSERVER")," indicates that the node is an Observer. Note that in an ",(0,l.yg)("inlineCode",{parentName:"td"},"SQL")," type cluster, the nodes array can only have one ",(0,l.yg)("inlineCode",{parentName:"td"},"FE_MASTER")," node, but it can include multiple ",(0,l.yg)("inlineCode",{parentName:"td"},"FE_OBSERVER")," nodes.")))),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Example")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},'PUT /MetaService/http/add_cluster?token=<token> HTTP/1.1\nContent-Length: <ContentLength>\nContent-Type: text/plain\n{\n    "instance_id": "123456",\n    "cluster": {\n        "cluster_name": "cluster_name1",\n        "cluster_id": "cluster_id1",\n        "type": "COMPUTE",\n        "nodes": [\n            {\n                "cloud_unique_id": "1:regression_instance0:cloud_unique_id_compute_node1",\n                "ip": "172.21.0.5",\n                "heartbeat_port": 9050\n            }\n        ]\n    }\n}\n')),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Returned parameter")),(0,l.yg)("table",null,(0,l.yg)("thead",{parentName:"table"},(0,l.yg)("tr",{parentName:"thead"},(0,l.yg)("th",{parentName:"tr",align:null},"Parameter"),(0,l.yg)("th",{parentName:"tr",align:null},"Description"),(0,l.yg)("th",{parentName:"tr",align:null},"Required/Optional"),(0,l.yg)("th",{parentName:"tr",align:null},"Notes"))),(0,l.yg)("tbody",{parentName:"table"},(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"code"),(0,l.yg)("td",{parentName:"tr",align:null},"Response status code"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null},"Enumerated values, including ",(0,l.yg)("inlineCode",{parentName:"td"},"OK"),", ",(0,l.yg)("inlineCode",{parentName:"td"},"INVALID_ARGUMENT"),", ",(0,l.yg)("inlineCode",{parentName:"td"},"INTERNAL_ERROR"),", and ",(0,l.yg)("inlineCode",{parentName:"td"},"ALREADY_EXISTED"))),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"msg"),(0,l.yg)("td",{parentName:"tr",align:null},"Error message"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null},"If an error occurs, an error message will be returned; if no error occurs, an empty string will be returned.")))),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Successful response")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},'{\n "code": "OK",\n "msg": ""\n}\n')),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Example of unsuccessful response")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},'{\n "code": "INTERANAL_ERROR",\n "msg": "cluster is SQL type, must have only one master node, now master count: 0"\n}\n')),(0,l.yg)("h2",{id:"get_cluster"},"get_cluster"),(0,l.yg)("h3",{id:"description-10"},"Description"),(0,l.yg)("p",null,"This API is used to retrieve the information of a compute cluster. It can be called repeatedly."),(0,l.yg)("h3",{id:"request-10"},"Request"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Syntax")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},'PUT /MetaService/http/get_cluster?token=<token> HTTP/1.1\nContent-Length: <ContentLength>\nContent-Type: text/plain\n{\n    "instance_id":string,\n    "cloud_unique_id":string,\n    "cluster_name":string,\n    "cluster_id":string\n}\n')),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Parameter")),(0,l.yg)("table",null,(0,l.yg)("thead",{parentName:"table"},(0,l.yg)("tr",{parentName:"thead"},(0,l.yg)("th",{parentName:"tr",align:null},"Parameter"),(0,l.yg)("th",{parentName:"tr",align:null},"Description"),(0,l.yg)("th",{parentName:"tr",align:null},"Required/Optional"),(0,l.yg)("th",{parentName:"tr",align:null},"Notes"))),(0,l.yg)("tbody",{parentName:"table"},(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"cloud_unique_id"),(0,l.yg)("td",{parentName:"tr",align:null},"cloud_unique_id"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null},"It can be used to retrieve the relevant ",(0,l.yg)("inlineCode",{parentName:"td"},"instance_id"))),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"cluster_name"),(0,l.yg)("td",{parentName:"tr",align:null},"Cluster name"),(0,l.yg)("td",{parentName:"tr",align:null},"Optional"),(0,l.yg)("td",{parentName:"tr",align:null},"Note: One of the three parameters (",(0,l.yg)("inlineCode",{parentName:"td"},"cluster_name"),", ",(0,l.yg)("inlineCode",{parentName:"td"},"cluster_id"),", and ",(0,l.yg)("inlineCode",{parentName:"td"},"mysql_user_name"),") must be provided. If all three are empty, the API will return the information of all clusters under the instance.")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"cluster_id"),(0,l.yg)("td",{parentName:"tr",align:null},"Cluster ID"),(0,l.yg)("td",{parentName:"tr",align:null},"Optional"),(0,l.yg)("td",{parentName:"tr",align:null},"Note: One of the three parameters (",(0,l.yg)("inlineCode",{parentName:"td"},"cluster_name"),", ",(0,l.yg)("inlineCode",{parentName:"td"},"cluster_id"),", and ",(0,l.yg)("inlineCode",{parentName:"td"},"mysql_user_name"),") must be provided. If all three are empty, the API will return the information of all clusters under the instance.")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"mysql_user_name"),(0,l.yg)("td",{parentName:"tr",align:null},"Available cluster configured by mysql_user_name"),(0,l.yg)("td",{parentName:"tr",align:null},"Optional"),(0,l.yg)("td",{parentName:"tr",align:null},"Note: One of the three parameters (",(0,l.yg)("inlineCode",{parentName:"td"},"cluster_name"),", ",(0,l.yg)("inlineCode",{parentName:"td"},"cluster_id"),", and ",(0,l.yg)("inlineCode",{parentName:"td"},"mysql_user_name"),") must be provided. If all three are empty, the API will return the information of all clusters under the instance.")))),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Example")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},'PUT /MetaService/http/get_cluster?token=<token> HTTP/1.1\nContent-Length: <ContentLength>\nContent-Type: text/plain\n{\n    "instance_id":"regression_instance0",\n    "cloud_unique_id":"1:regression_instance0:regression-cloud-unique-id-fe-1",\n    "cluster_name":"RESERVED_CLUSTER_NAME_FOR_SQL_SERVER",\n    "cluster_id":"RESERVED_CLUSTER_ID_FOR_SQL_SERVER"\n}\n')),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Returned parameter")),(0,l.yg)("table",null,(0,l.yg)("thead",{parentName:"table"},(0,l.yg)("tr",{parentName:"thead"},(0,l.yg)("th",{parentName:"tr",align:null},"Parameter"),(0,l.yg)("th",{parentName:"tr",align:null},"Description"),(0,l.yg)("th",{parentName:"tr",align:null},"Required/Optional"),(0,l.yg)("th",{parentName:"tr",align:null},"Notes"))),(0,l.yg)("tbody",{parentName:"table"},(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"code"),(0,l.yg)("td",{parentName:"tr",align:null},"Response status code"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null},"Enumerated values, including ",(0,l.yg)("inlineCode",{parentName:"td"},"OK"),", ",(0,l.yg)("inlineCode",{parentName:"td"},"INVALID_ARGUMENT"),", ",(0,l.yg)("inlineCode",{parentName:"td"},"INTERNAL_ERROR"),", and ",(0,l.yg)("inlineCode",{parentName:"td"},"ALREADY_EXISTED"))),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"msg"),(0,l.yg)("td",{parentName:"tr",align:null},"Error message"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null},"If an error occurs, an error message will be returned; if no error occurs, an empty string will be returned.")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"result"),(0,l.yg)("td",{parentName:"tr",align:null},"Result objects"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})))),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Successful response")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},'{\n    "code": "OK",\n    "msg": "",\n    "result": {\n        "cluster_id": "cluster_id1",\n        "cluster_name": "cluster_name1",\n        "type": "COMPUTE",\n        "nodes": [\n            {\n                "cloud_unique_id": "1:regression_instance0:cloud_unique_id_compute_node0",\n                "ip": "172.21.16.42",\n                "ctime": "1662695469",\n                "mtime": "1662695469",\n                "heartbeat_port": 9050\n            }\n        ]\n    }\n}\n')),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Example of unsuccessful response")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},'{\n "code": "NOT_FOUND",\n "msg": "fail to get cluster with instance_id: \\"instance_id_deadbeef\\" cloud_unique_id: \\"1:regression_instance0:xxx_cloud_unique_id_compute_node0\\" cluster_name: \\"cluster_name\\" "\n}\n')),(0,l.yg)("h2",{id:"drop_cluster"},"drop_cluster"),(0,l.yg)("h3",{id:"description-11"},"Description"),(0,l.yg)("p",null,"This API is used to delete the information of a compute cluster under an instance. Calling this API multiple times with the same parameters will result in an error."),(0,l.yg)("h3",{id:"request-11"},"Request"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Syntax")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},'PUT /MetaService/http/drop_cluster?token=<token> HTTP/1.1\nContent-Length: <ContentLength>\nContent-Type: text/plain\n{\n    "instance_id":string,\n    "cluster": {\n        "cluster_name": string,\n        "cluster_id": string,\n    }\n}\n')),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Parameter")),(0,l.yg)("table",null,(0,l.yg)("thead",{parentName:"table"},(0,l.yg)("tr",{parentName:"thead"},(0,l.yg)("th",{parentName:"tr",align:null},"Parameter"),(0,l.yg)("th",{parentName:"tr",align:null},"Description"),(0,l.yg)("th",{parentName:"tr",align:null},"Required/Optional"),(0,l.yg)("th",{parentName:"tr",align:null},"Notes"))),(0,l.yg)("tbody",{parentName:"table"},(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"instance_id"),(0,l.yg)("td",{parentName:"tr",align:null},"instance_id"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"cluster"),(0,l.yg)("td",{parentName:"tr",align:null},"Cluster object"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"cluster.cluster_name"),(0,l.yg)("td",{parentName:"tr",align:null},"Name of the cluster to be deleted"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"cluster.cluster_id"),(0,l.yg)("td",{parentName:"tr",align:null},"ID of the cluster to be deleted"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})))),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Example")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},'PUT /MetaService/http/drop_cluster?token=<token> HTTP/1.1\nContent-Length: <ContentLength>\nContent-Type: text/plain\n{\n    "instance_id":"regression_instance0",\n    "cluster": {\n        "cluster_name": "cluster_name1",\n        "cluster_id": "cluster_id1",\n    }\n}\n')),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Returned parameter")),(0,l.yg)("table",null,(0,l.yg)("thead",{parentName:"table"},(0,l.yg)("tr",{parentName:"thead"},(0,l.yg)("th",{parentName:"tr",align:null},"Parameter"),(0,l.yg)("th",{parentName:"tr",align:null},"Description"),(0,l.yg)("th",{parentName:"tr",align:null},"Required/Optional"),(0,l.yg)("th",{parentName:"tr",align:null},"Notes"))),(0,l.yg)("tbody",{parentName:"table"},(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"code"),(0,l.yg)("td",{parentName:"tr",align:null},"Response status code"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null},"Enumerated values, including ",(0,l.yg)("inlineCode",{parentName:"td"},"OK"),", ",(0,l.yg)("inlineCode",{parentName:"td"},"INVALID_ARGUMENT"),", ",(0,l.yg)("inlineCode",{parentName:"td"},"INTERNAL_ERROR"),", and ",(0,l.yg)("inlineCode",{parentName:"td"},"ALREADY_EXISTED"))),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"msg"),(0,l.yg)("td",{parentName:"tr",align:null},"Error message"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null},"If an error occurs, an error message will be returned; if no error occurs, an empty string will be returned.")))),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Successful response")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},'{\n "code": "OK",\n "msg": ""\n}\n')),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Example of unsuccessful response")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},'{\n "code": "INTERANAL_ERROR",\n "msg": "failed to find cluster to drop, instance_id=dx_dnstance_id_deadbeef cluster_id=11111 cluster_name=2222"\n}\n')),(0,l.yg)("h2",{id:"rename_cluster"},"rename_cluster"),(0,l.yg)("h3",{id:"description-12"},"Description"),(0,l.yg)("p",null,"This API is used to rename a compute cluster under an instance. It searches for the corresponding cluster based on the provided ",(0,l.yg)("inlineCode",{parentName:"p"},"cluster_id")," and renames it accordingly. Calling this API multiple times with the same parameters will result in an error."),(0,l.yg)("h3",{id:"request-12"},"Request"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Syntax")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},'PUT /MetaService/http/rename_cluster?token=<token> HTTP/1.1\nContent-Length: <ContentLength>\nContent-Type: text/plain\n{\n    "instance_id":string,\n    "cluster": {\n        "cluster_name": string,\n        "cluster_id": string,\n    }\n}\n')),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Parameter")),(0,l.yg)("table",null,(0,l.yg)("thead",{parentName:"table"},(0,l.yg)("tr",{parentName:"thead"},(0,l.yg)("th",{parentName:"tr",align:null},"Parameter"),(0,l.yg)("th",{parentName:"tr",align:null},"Description"),(0,l.yg)("th",{parentName:"tr",align:null},"Required/Optional"),(0,l.yg)("th",{parentName:"tr",align:null},"Notes"))),(0,l.yg)("tbody",{parentName:"table"},(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"instance_id"),(0,l.yg)("td",{parentName:"tr",align:null},"instance_id"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"cluster"),(0,l.yg)("td",{parentName:"tr",align:null},"Cluster object"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"cluster.cluster_name"),(0,l.yg)("td",{parentName:"tr",align:null},"New cluster name"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"cluster.cluster_id"),(0,l.yg)("td",{parentName:"tr",align:null},"ID of the cluster to be renamed"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null},"Based on this, the system retrieves the corresponding cluster, and renames it accordingly.")))),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Example")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},'PUT /MetaService/http/rename_cluster?token=<token> HTTP/1.1\nContent-Length: <ContentLength>\nContent-Type: text/plain\n{\n    "instance_id":"regression_instance0",\n    "cluster": {\n        "cluster_name": "cluster_name2",\n        "cluster_id": "cluster_id1",\n    }\n}\n')),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Returned parameter")),(0,l.yg)("table",null,(0,l.yg)("thead",{parentName:"table"},(0,l.yg)("tr",{parentName:"thead"},(0,l.yg)("th",{parentName:"tr",align:null},"Parameter"),(0,l.yg)("th",{parentName:"tr",align:null},"Description"),(0,l.yg)("th",{parentName:"tr",align:null},"Required/Optional"),(0,l.yg)("th",{parentName:"tr",align:null},"Notes"))),(0,l.yg)("tbody",{parentName:"table"},(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"code"),(0,l.yg)("td",{parentName:"tr",align:null},"Response status code"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null},"Enumerated values, including ",(0,l.yg)("inlineCode",{parentName:"td"},"OK"),", ",(0,l.yg)("inlineCode",{parentName:"td"},"INVALID_ARGUMENT"),", ",(0,l.yg)("inlineCode",{parentName:"td"},"INTERNAL_ERROR"),", and ",(0,l.yg)("inlineCode",{parentName:"td"},"ALREADY_EXISTED"))),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"msg"),(0,l.yg)("td",{parentName:"tr",align:null},"Error message"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null},"If an error occurs, an error message will be returned; if no error occurs, an empty string will be returned.")))),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Successful response")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},'{\n "code": "OK",\n "msg": ""\n}\n')),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Example of unsuccessful response")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},'{\n "code": "INTERANAL_ERROR",\n "msg": "failed to rename cluster, name eq original name, original cluster is {\\"cluster_id\\":\\"3333333\\",\\"cluster_name\\":\\"444444\\",\\"type\\":\\"COMPUTE\\"}"\n}\n')),(0,l.yg)("h2",{id:"add_node"},"add_node"),(0,l.yg)("h3",{id:"description-13"},"Description"),(0,l.yg)("p",null,"This API is used to add nodes of the same type to a specific compute cluster under an instance. Calling this API multiple times with the same parameters will result in an error."),(0,l.yg)("p",null,"This API can be used to add either FE or BE nodes."),(0,l.yg)("h3",{id:"request-13"},"Request"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Syntax")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},'PUT /MetaService/http/add_node?token=<token> HTTP/1.1\nContent-Length: <ContentLength>\nContent-Type: text/plain\n{\n    "instance_id": string,\n    "cluster": {\n        "cluster_name": string,\n        "cluster_id": string,\n        "type": enum,\n        "nodes": [\n            {\n                "cloud_unique_id": string,\n                "ip": string,\n                "heartbeat_port": int\n            },\n            {\n                "cloud_unique_id": string,\n                "ip": string,\n                "heartbeat_port": int\n            }\n        ]\n    }\n}\n')),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Parameter")),(0,l.yg)("table",null,(0,l.yg)("thead",{parentName:"table"},(0,l.yg)("tr",{parentName:"thead"},(0,l.yg)("th",{parentName:"tr",align:null},"Parameter"),(0,l.yg)("th",{parentName:"tr",align:null},"Description"),(0,l.yg)("th",{parentName:"tr",align:null},"Required/Optional"),(0,l.yg)("th",{parentName:"tr",align:null},"Notes"))),(0,l.yg)("tbody",{parentName:"table"},(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"instance_id"),(0,l.yg)("td",{parentName:"tr",align:null},"instance_id"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"cluster"),(0,l.yg)("td",{parentName:"tr",align:null},"Cluster object"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"cluster.cluster_name"),(0,l.yg)("td",{parentName:"tr",align:null},"Name of the target cluster"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"cluster.cluster_id"),(0,l.yg)("td",{parentName:"tr",align:null},"ID of the target cluster"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"cluster.type"),(0,l.yg)("td",{parentName:"tr",align:null},"Cluster node type"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null},"Two types are supported: ",(0,l.yg)("inlineCode",{parentName:"td"},"SQL")," and ",(0,l.yg)("inlineCode",{parentName:"td"},"COMPUTE"),". ",(0,l.yg)("inlineCode",{parentName:"td"},"SQL")," represents the SQL Service corresponding to FE, while ",(0,l.yg)("inlineCode",{parentName:"td"},"COMPUTE")," means that the compute nodes are corresponding to BE.")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"cluster.nodes"),(0,l.yg)("td",{parentName:"tr",align:null},"Nodes in the cluster"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null},"Array")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"cluster.nodes.cloud_unique_id"),(0,l.yg)("td",{parentName:"tr",align:null},"cloud_unique_id of nodes"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null},(0,l.yg)("inlineCode",{parentName:"td"},"cloud_unique_id")," in ",(0,l.yg)("inlineCode",{parentName:"td"},"fe.conf")," and ",(0,l.yg)("inlineCode",{parentName:"td"},"be.conf"))),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"cluster.nodes.ip"),(0,l.yg)("td",{parentName:"tr",align:null},"Node IP"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null},"When deploying FE/BE in FQDN mode, this field should be the domain name.")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"cluster.nodes.host"),(0,l.yg)("td",{parentName:"tr",align:null},"Node domain name"),(0,l.yg)("td",{parentName:"tr",align:null},"Optional"),(0,l.yg)("td",{parentName:"tr",align:null},"This field is required when deploying FE/BE in FQDN mode.")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"cluster.nodes.heartbeat_port"),(0,l.yg)("td",{parentName:"tr",align:null},"Heartbeat port of BE"),(0,l.yg)("td",{parentName:"tr",align:null},"Required for BE"),(0,l.yg)("td",{parentName:"tr",align:null},(0,l.yg)("inlineCode",{parentName:"td"},"heartbeat_service_port")," in ",(0,l.yg)("inlineCode",{parentName:"td"},"be.conf"))),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"cluster.nodes.edit_log_port"),(0,l.yg)("td",{parentName:"tr",align:null},"Edit log port of FE"),(0,l.yg)("td",{parentName:"tr",align:null},"Required for FE"),(0,l.yg)("td",{parentName:"tr",align:null},(0,l.yg)("inlineCode",{parentName:"td"},"edit_log_port")," in ",(0,l.yg)("inlineCode",{parentName:"td"},"fe.conf"))),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"cluster.nodes.node_type"),(0,l.yg)("td",{parentName:"tr",align:null},"FE node type"),(0,l.yg)("td",{parentName:"tr",align:null},"Required for FE"),(0,l.yg)("td",{parentName:"tr",align:null},"This field is required when the cluster type is ",(0,l.yg)("inlineCode",{parentName:"td"},"SQL"),". It can be either ",(0,l.yg)("inlineCode",{parentName:"td"},"FE_MASTER")," or ",(0,l.yg)("inlineCode",{parentName:"td"},"FE_OBSERVER"),". ",(0,l.yg)("inlineCode",{parentName:"td"},"FE_MASTER")," indicates that the node is of Master role, and ",(0,l.yg)("inlineCode",{parentName:"td"},"FE_OBSERVER")," indicates that the node is an Observer. Note that in an ",(0,l.yg)("inlineCode",{parentName:"td"},"SQL")," type cluster, the nodes array can only have one ",(0,l.yg)("inlineCode",{parentName:"td"},"FE_MASTER")," node, but it can include multiple ",(0,l.yg)("inlineCode",{parentName:"td"},"FE_OBSERVER")," nodes.")))),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Example")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},'PUT /MetaService/http/add_node?token=<token> HTTP/1.1\nContent-Length: <ContentLength>\nContent-Type: text/plain\n{\n    "instance_id": "instance_id_deadbeef_1",\n    "cluster": {\n        "cluster_name": "cluster_name1",\n        "cluster_id": "cluster_id1",\n        "type": "COMPUTE",\n        "nodes": [\n            {\n                "cloud_unique_id": "1:regression_instance0:cloud_unique_id_compute_node2",\n                "ip": "172.21.0.50",\n                "heartbeat_port": 9051\n            },\n            {\n                "cloud_unique_id": "1:regression_instance0:cloud_unique_id_compute_node3",\n                "ip": "172.21.0.52",\n                "heartbeat_port": 9052\n            }\n        ]\n    }\n}\n')),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Returned parameter")),(0,l.yg)("table",null,(0,l.yg)("thead",{parentName:"table"},(0,l.yg)("tr",{parentName:"thead"},(0,l.yg)("th",{parentName:"tr",align:null},"Parameter"),(0,l.yg)("th",{parentName:"tr",align:null},"Description"),(0,l.yg)("th",{parentName:"tr",align:null},"Required/Optional"),(0,l.yg)("th",{parentName:"tr",align:null},"Notes"))),(0,l.yg)("tbody",{parentName:"table"},(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"code"),(0,l.yg)("td",{parentName:"tr",align:null},"Response status code"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null},"Enumerated values, including ",(0,l.yg)("inlineCode",{parentName:"td"},"OK"),", ",(0,l.yg)("inlineCode",{parentName:"td"},"INVALID_ARGUMENT"),", ",(0,l.yg)("inlineCode",{parentName:"td"},"INTERNAL_ERROR"),", and ",(0,l.yg)("inlineCode",{parentName:"td"},"ALREADY_EXISTED"))),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"msg"),(0,l.yg)("td",{parentName:"tr",align:null},"Error message"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null},"If an error occurs, an error message will be returned; if no error occurs, an empty string will be returned.")))),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Successful response")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},'{\n "code": "OK",\n "msg": ""\n}\n')),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Example of unsuccessful response")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},'{\n "code": "INTERANAL_ERROR",\n "msg": "cloud_unique_id is already occupied by an instance, instance_id=instance_id_deadbeef_1 cluster_name=dx_cluster_name1 cluster_id=cluster_id1 cloud_unique_id=cloud_unique_id_compute_node2"\n}\n')),(0,l.yg)("h2",{id:"drop_node"},"drop_node"),(0,l.yg)("h3",{id:"description-14"},"Description"),(0,l.yg)("p",null,"This API is used to reduce nodes of the same type for a specific compute cluster under an instance. "),(0,l.yg)("h3",{id:"request-14"},"Request"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Syntax")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},'PUT /MetaService/http/drop_node?token=<token> HTTP/1.1\nContent-Length: <ContentLength>\nContent-Type: text/plain\n{\n    "instance_id": string,\n    "cluster": {\n        "cluster_name": string,\n        "cluster_id": string,\n        "type": enum,\n        "nodes": [\n            {\n                "cloud_unique_id": string,\n                "ip": string,\n                "heartbeat_port": int\n            },\n            {\n                "cloud_unique_id": string,\n                "ip": string,\n                "heartbeat_port": int\n            }\n        ]\n    }\n}\n')),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Parameter")),(0,l.yg)("table",null,(0,l.yg)("thead",{parentName:"table"},(0,l.yg)("tr",{parentName:"thead"},(0,l.yg)("th",{parentName:"tr",align:null},"Parameter"),(0,l.yg)("th",{parentName:"tr",align:null},"Description"),(0,l.yg)("th",{parentName:"tr",align:null},"Required/Optional"),(0,l.yg)("th",{parentName:"tr",align:null},"Notes"))),(0,l.yg)("tbody",{parentName:"table"},(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"instance_id"),(0,l.yg)("td",{parentName:"tr",align:null},"instance_id"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"cluster"),(0,l.yg)("td",{parentName:"tr",align:null},"Cluster object"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"cluster.cluster_name"),(0,l.yg)("td",{parentName:"tr",align:null},"Name of the target cluster"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"cluster.cluster_id"),(0,l.yg)("td",{parentName:"tr",align:null},"ID of the target cluster"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"cluster.type"),(0,l.yg)("td",{parentName:"tr",align:null},"Cluster node type"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"cluster.node"),(0,l.yg)("td",{parentName:"tr",align:null},"Nodes in the cluster"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null},"Array")))),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Example")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},'PUT /MetaService/http/drop_node?token=<token> HTTP/1.1\nContent-Length: <ContentLength>\nContent-Type: text/plain\n{\n    "instance_id": "instance_id_deadbeef_1",\n    "cluster": {\n        "cluster_name": "cluster_name1",\n        "cluster_id": "cluster_id1",\n        "type": "COMPUTE",\n        "nodes": [\n            {\n                "cloud_unique_id": "1:instance_id_deadbeef_1:cloud_unique_id_compute_node2",\n                "ip": "172.21.0.50",\n                "heartbeat_port": 9051\n            },\n            {\n                "cloud_unique_id": "1:instance_id_deadbeef_1:cloud_unique_id_compute_node3",\n                "ip": "172.21.0.52",\n                "heartbeat_port": 9052\n            }\n        ]\n    }\n}\n')),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Returned parameter")),(0,l.yg)("table",null,(0,l.yg)("thead",{parentName:"table"},(0,l.yg)("tr",{parentName:"thead"},(0,l.yg)("th",{parentName:"tr",align:null},"Parameter"),(0,l.yg)("th",{parentName:"tr",align:null},"Description"),(0,l.yg)("th",{parentName:"tr",align:null},"Required/Optional"),(0,l.yg)("th",{parentName:"tr",align:null},"Notes"))),(0,l.yg)("tbody",{parentName:"table"},(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"code"),(0,l.yg)("td",{parentName:"tr",align:null},"Response status code"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null},"Enumerated values, including ",(0,l.yg)("inlineCode",{parentName:"td"},"OK"),", ",(0,l.yg)("inlineCode",{parentName:"td"},"INVALID_ARGUMENT"),", ",(0,l.yg)("inlineCode",{parentName:"td"},"INTERNAL_ERROR"),", and ",(0,l.yg)("inlineCode",{parentName:"td"},"ALREADY_EXISTED"))),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"msg"),(0,l.yg)("td",{parentName:"tr",align:null},"Error message"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null},"If an error occurs, an error message will be returned; if no error occurs, an empty string will be returned.")))),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Successful response")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},'{\n "code": "OK",\n "msg": ""\n}\n')),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Example of unsuccessful response")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},'{\n "code": "INTERANAL_ERROR",\n "msg": "cloud_unique_id can not find to drop node, instance_id=instance_id_deadbeef_1 cluster_name=cluster_name1 cluster_id=cluster_id1 cloud_unique_id=cloud_unique_id_compute_node2"\n}\n')),(0,l.yg)("h2",{id:"update_cluster_mysql_user_name"},"update_cluster_mysql_user_name"),(0,l.yg)("h3",{id:"description-15"},"Description"),(0,l.yg)("p",null,"This API is used to add a user to a specific compute cluster under an instance, allowing that user to log in to the system using a MySQL Client and access the default compute cluster."),(0,l.yg)("h3",{id:"request-15"},"Request"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Syntax")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},'PUT /MetaService/http/update_cluster_mysql_user_name?token=<token> HTTP/1.1\nContent-Length: <ContentLength>\nContent-Type: text/plain\n{\n    "instance_id": string,\n    "cluster": {\n        "cluster_name": "string",\n        "cluster_id": "string",\n        "mysql_user_name": [\n            string\n        ]\n    }\n}\n')),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Parameter")),(0,l.yg)("table",null,(0,l.yg)("thead",{parentName:"table"},(0,l.yg)("tr",{parentName:"thead"},(0,l.yg)("th",{parentName:"tr",align:null},"Parameter"),(0,l.yg)("th",{parentName:"tr",align:null},"Description"),(0,l.yg)("th",{parentName:"tr",align:null},"Required/Optional"),(0,l.yg)("th",{parentName:"tr",align:null},"Notes"))),(0,l.yg)("tbody",{parentName:"table"},(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"instance_id"),(0,l.yg)("td",{parentName:"tr",align:null},"instance_id"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"cluster"),(0,l.yg)("td",{parentName:"tr",align:null},"Cluster object"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"cluster.cluster_name"),(0,l.yg)("td",{parentName:"tr",align:null},"Name of the target cluster"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"cluster.cluster_id"),(0,l.yg)("td",{parentName:"tr",align:null},"ID of the target cluster"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"cluster.mysql_user_name"),(0,l.yg)("td",{parentName:"tr",align:null},"mysql_user_name"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null},"String array")))),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Example")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},'PUT /MetaService/http/update_cluster_mysql_user_name?token=<token> HTTP/1.1\nContent-Length: <ContentLength>\nContent-Type: text/plain\n{\n    "instance_id": "instance_id_deadbeef",\n    "cluster": {\n        "cluster_name": "cluster_name2",\n        "cluster_id": "cluster_id1",\n        "mysql_user_name": [\n            "jack",\n            "root"\n        ]\n    }\n}\n')),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Returned parameter")),(0,l.yg)("table",null,(0,l.yg)("thead",{parentName:"table"},(0,l.yg)("tr",{parentName:"thead"},(0,l.yg)("th",{parentName:"tr",align:null},"Parameter"),(0,l.yg)("th",{parentName:"tr",align:null},"Description"),(0,l.yg)("th",{parentName:"tr",align:null},"Required/Optional"),(0,l.yg)("th",{parentName:"tr",align:null},"Notes"))),(0,l.yg)("tbody",{parentName:"table"},(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"code"),(0,l.yg)("td",{parentName:"tr",align:null},"Response status code"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null},"Enumerated values, including ",(0,l.yg)("inlineCode",{parentName:"td"},"OK"),", ",(0,l.yg)("inlineCode",{parentName:"td"},"INVALID_ARGUMENT"),", ",(0,l.yg)("inlineCode",{parentName:"td"},"INTERNAL_ERROR"),", and ",(0,l.yg)("inlineCode",{parentName:"td"},"ALREADY_EXISTED"))),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"msg"),(0,l.yg)("td",{parentName:"tr",align:null},"Error message"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null},"If an error occurs, an error message will be returned; if no error occurs, an empty string will be returned.")))),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Successful response")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},'{\n "code": "OK",\n "msg": ""\n}\n')),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Example of unsuccessful response")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},'{\n "code": "INTERANAL_ERROR",\n "msg": "no mysql user name to change"\n}\n')),(0,l.yg)("h2",{id:"cloud_cluster_status"},"cloud_cluster_status"),(0,l.yg)("h3",{id:"description-16"},"Description"),(0,l.yg)("p",null,"This API is used to retrieve the status of Fragments running on BE nodes within the compute cluster."),(0,l.yg)("admonition",{type:"tip"},(0,l.yg)("p",{parentName:"admonition"},"This API is a request to the FE.")),(0,l.yg)("h3",{id:"request-16"},"Request"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Syntax")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},"GET /rest/v2/manager/cluster/cluster_info/cloud_cluster_status HTTP/1.1\nContent-Length: <ContentLength>\nContent-Type: text/plain\n")),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Parameter")),(0,l.yg)("table",null,(0,l.yg)("thead",{parentName:"table"},(0,l.yg)("tr",{parentName:"thead"},(0,l.yg)("th",{parentName:"tr",align:null},"Parameter"),(0,l.yg)("th",{parentName:"tr",align:null},"Description"),(0,l.yg)("th",{parentName:"tr",align:null},"Required/Optional"),(0,l.yg)("th",{parentName:"tr",align:null},"Notes"))),(0,l.yg)("tbody",{parentName:"table"},(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"user"),(0,l.yg)("td",{parentName:"tr",align:null},"Username"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null},"Authentication information")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"password"),(0,l.yg)("td",{parentName:"tr",align:null},"Password"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null},"Authentication information")))),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Example")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},"curl -u root: http://127.0.0.1:12100/rest/v2/manager/cluster/cluster_info/cloud_cluster_status\n")),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Returned parameter")),(0,l.yg)("table",null,(0,l.yg)("thead",{parentName:"table"},(0,l.yg)("tr",{parentName:"thead"},(0,l.yg)("th",{parentName:"tr",align:null},"Parameter"),(0,l.yg)("th",{parentName:"tr",align:null},"Description"),(0,l.yg)("th",{parentName:"tr",align:null},"Required/Optional"),(0,l.yg)("th",{parentName:"tr",align:null},"Notes"))),(0,l.yg)("tbody",{parentName:"table"},(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"code"),(0,l.yg)("td",{parentName:"tr",align:null},"Response status code"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"msg"),(0,l.yg)("td",{parentName:"tr",align:null},"Error message"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"data"),(0,l.yg)("td",{parentName:"tr",align:null},"Map returned. The Key is Cluster ID and the Value is a BE list."),(0,l.yg)("td",{parentName:"tr",align:null}),(0,l.yg)("td",{parentName:"tr",align:null})))),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Successful response")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},'{\n    "msg": "success",\n    "code": 0,\n    "data": {\n        "regression_cluster_id2": [\n            {\n                "host": "127.0.0.1",\n                "heartbeatPort": 14102,\n                "bePort": -1,\n                "httpPort": -1,\n                "brpcPort": -1,\n                "currentFragmentNum": 0,\n                "lastFragmentUpdateTime": 0\n            }\n        ],\n        "regression_test_cluster_id0": [\n            {\n                "host": "127.0.0.1",\n                "heartbeatPort": 11102,\n                "bePort": 11100,\n                "httpPort": 11101,\n                "brpcPort": 11103,\n                "currentFragmentNum": 3,\n                "lastFragmentUpdateTime": 1684152350291\n            }\n        ]\n    },\n    "count": 0\n}\n')),(0,l.yg)("h2",{id:"enable_instance_sse"},"enable_instance_sse"),(0,l.yg)("h3",{id:"description-17"},"Description"),(0,l.yg)("p",null,"This API is used to enable server-side encryption for the instance object data."),(0,l.yg)("h3",{id:"request-17"},"Request"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Syntax")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},'PUT /MetaService/http/enable_instance_sse?token=<token> HTTP/1.1\nContent-Length: <ContentLength>\nContent-Type: text/plain\n{\n    "instance_id": string\n}\n')),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Parameter")),(0,l.yg)("table",null,(0,l.yg)("thead",{parentName:"table"},(0,l.yg)("tr",{parentName:"thead"},(0,l.yg)("th",{parentName:"tr",align:null},"Parameter"),(0,l.yg)("th",{parentName:"tr",align:null},"Description"),(0,l.yg)("th",{parentName:"tr",align:null},"Required/Optional"),(0,l.yg)("th",{parentName:"tr",align:null},"Notes"))),(0,l.yg)("tbody",{parentName:"table"},(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"instance_id"),(0,l.yg)("td",{parentName:"tr",align:null},"instance_id"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null},"Globally unique")))),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Example")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},'PUT /MetaService/http/enable_instance_sse?token=<token> HTTP/1.1\nContent-Length: <ContentLength>\nContent-Type: text/plain\n{\n    "instance_id": "123456"\n}\n')),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Returned parameter")),(0,l.yg)("table",null,(0,l.yg)("thead",{parentName:"table"},(0,l.yg)("tr",{parentName:"thead"},(0,l.yg)("th",{parentName:"tr",align:null},"Parameter"),(0,l.yg)("th",{parentName:"tr",align:null},"Description"),(0,l.yg)("th",{parentName:"tr",align:null},"Required/Optional"),(0,l.yg)("th",{parentName:"tr",align:null},"Notes"))),(0,l.yg)("tbody",{parentName:"table"},(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"code"),(0,l.yg)("td",{parentName:"tr",align:null},"Response status code"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null},"Enumerated values, including ",(0,l.yg)("inlineCode",{parentName:"td"},"OK"),", ",(0,l.yg)("inlineCode",{parentName:"td"},"INVALID_ARGUMENT"),", ",(0,l.yg)("inlineCode",{parentName:"td"},"INTERNAL_ERROR"),", and ",(0,l.yg)("inlineCode",{parentName:"td"},"ALREADY_EXISTED"))),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"msg"),(0,l.yg)("td",{parentName:"tr",align:null},"Error message"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null},"If an error occurs, an error message will be returned; if no error occurs, an empty string will be returned.")))),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Successful response")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},'{\n "code": "OK",\n "msg": ""\n}\n')),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Example of unsuccessful response")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},'{\n "code": "INVALID_ARGUMENT",\n "msg": "failed to enable sse, instance has enabled sse"\n}\n')),(0,l.yg)("h2",{id:"get_cluster_status"},"get_cluster_status"),(0,l.yg)("h3",{id:"description-18"},"Description"),(0,l.yg)("p",null,"This API is used to retrieve the runtime status of the compute clusters across multiple instances."),(0,l.yg)("h3",{id:"request-18"},"Request"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Syntax")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},'PUT /MetaService/http/get_cluster_status?token=<token> HTTP/1.1\nContent-Length: <ContentLength>\nContent-Type: text/plain\n{\n    "instance_ids": [string, string],\n    "status": string\n}\n')),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Parameter")),(0,l.yg)("table",null,(0,l.yg)("thead",{parentName:"table"},(0,l.yg)("tr",{parentName:"thead"},(0,l.yg)("th",{parentName:"tr",align:null},"Parameter"),(0,l.yg)("th",{parentName:"tr",align:null},"Description"),(0,l.yg)("th",{parentName:"tr",align:null},"Required/Optional"),(0,l.yg)("th",{parentName:"tr",align:null},"Notes"))),(0,l.yg)("tbody",{parentName:"table"},(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"instance_ids"),(0,l.yg)("td",{parentName:"tr",align:null},"IDs of the instances"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"cloud_unique_ids"),(0,l.yg)("td",{parentName:"tr",align:null},"cloud_unique_ids"),(0,l.yg)("td",{parentName:"tr",align:null},"Optional"),(0,l.yg)("td",{parentName:"tr",align:null},"instance_ids is required while cloud_unique_ids is optional")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"status"),(0,l.yg)("td",{parentName:"tr",align:null},"Filtering condition"),(0,l.yg)("td",{parentName:"tr",align:null},"Optional"),(0,l.yg)("td",{parentName:"tr",align:null},"Possible status includes ",(0,l.yg)("inlineCode",{parentName:"td"},"NORMAL"),", ",(0,l.yg)("inlineCode",{parentName:"td"},"STOPPED"),", and ",(0,l.yg)("inlineCode",{parentName:"td"},"TO_RESUME"),". If this parameter is not filled in, the systen will return the status of all clusters.")))),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Example")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},'PUT /MetaService/http/get_cluster_status?token=greedisgood9999 HTTP/1.1\nContent-Length: 109\nContent-Type: text/plain\n{\n    "instance_ids":["regression_instance-dx-1219", "regression_instance-dx-0128"],\n    "status":"NORMAL"\n}\n')),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Returned parameter")),(0,l.yg)("table",null,(0,l.yg)("thead",{parentName:"table"},(0,l.yg)("tr",{parentName:"thead"},(0,l.yg)("th",{parentName:"tr",align:null},"Parameter"),(0,l.yg)("th",{parentName:"tr",align:null},"Description"),(0,l.yg)("th",{parentName:"tr",align:null},"Required/Optional"),(0,l.yg)("th",{parentName:"tr",align:null},"Notes"))),(0,l.yg)("tbody",{parentName:"table"},(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"code"),(0,l.yg)("td",{parentName:"tr",align:null},"Response status code"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"msg"),(0,l.yg)("td",{parentName:"tr",align:null},"Error message"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"result.details"),(0,l.yg)("td",{parentName:"tr",align:null},"Returned status list of all compute clusters"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})))),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Successful response")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},'{\n    "code": "OK",\n    "msg": "",\n    "result": {\n        "details": [\n            {\n                "instance_id": "regression_instance-dx-1219",\n                "clusters": [\n                    {\n                        "cluster_id": "regression_cluster_id2",\n                        "cluster_name": "regression_cluster_name2-changed-again",\n                        "cluster_status": "NORMAL"\n                    },\n                    {\n                        "cluster_id": "regression_cluster_id3",\n                        "cluster_name": "regression_cluster_name3",\n                        "cluster_status": "NORMAL"\n                    },\n                    {\n                        "cluster_id": "regression_test_cluster_id0",\n                        "cluster_name": "regression_test_cluster_name0",\n                        "cluster_status": "NORMAL"\n                    }\n                ]\n            }\n        ]\n    }\n}\n')),(0,l.yg)("h2",{id:"set_cluster_status"},"set_cluster_status"),(0,l.yg)("h3",{id:"description-19"},"Description"),(0,l.yg)("p",null,"This API is used to set the runtime status of compute clusters."),(0,l.yg)("h3",{id:"request-19"},"Request"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Syntax")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},'PUT /MetaService/http/set_cluster_status?token=<token> HTTP/1.1\nContent-Length: <ContentLength>\nContent-Type: text/plain\n{\n    "cloud_unique_id": string,\n    "cluster": {\n        "cluster_id": string,\n        "cluster_status":string\n    }\n}\n')),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Parameter")),(0,l.yg)("table",null,(0,l.yg)("thead",{parentName:"table"},(0,l.yg)("tr",{parentName:"thead"},(0,l.yg)("th",{parentName:"tr",align:null},"Parameter"),(0,l.yg)("th",{parentName:"tr",align:null},"Description"),(0,l.yg)("th",{parentName:"tr",align:null},"Required/Optional"),(0,l.yg)("th",{parentName:"tr",align:null},"Notes"))),(0,l.yg)("tbody",{parentName:"table"},(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"cloud_unique_id"),(0,l.yg)("td",{parentName:"tr",align:null}),(0,l.yg)("td",{parentName:"tr",align:null},"Optional"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"instance_id"),(0,l.yg)("td",{parentName:"tr",align:null}),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"cluster_id"),(0,l.yg)("td",{parentName:"tr",align:null},"ID of the target cluster"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"cluster_status"),(0,l.yg)("td",{parentName:"tr",align:null},"Status of the target cluster"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null},"Possible status includes ",(0,l.yg)("inlineCode",{parentName:"td"},"NORMAL"),", ",(0,l.yg)("inlineCode",{parentName:"td"},"STOPPED"),", and ",(0,l.yg)("inlineCode",{parentName:"td"},"TO_RESUME"),".")))),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Example")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},'PUT /MetaService/http/set_cluster_status?token=greedisgood9999 HTTP/1.1\nContent-Length: 128\nContent-Type: text/plain\n{\n    "cloud_unique_id": "1:regression_instance0:regression-cloud-unique-id-fe-0128",\n    "cluster": {\n        "cluster_id": "test_cluster_1_id1",\n        "cluster_status":"STOPPED"\n    }\n}\n')),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Returned parameter")),(0,l.yg)("table",null,(0,l.yg)("thead",{parentName:"table"},(0,l.yg)("tr",{parentName:"thead"},(0,l.yg)("th",{parentName:"tr",align:null},"Parameter"),(0,l.yg)("th",{parentName:"tr",align:null},"Description"),(0,l.yg)("th",{parentName:"tr",align:null},"Required/Optional"),(0,l.yg)("th",{parentName:"tr",align:null},"Notes"))),(0,l.yg)("tbody",{parentName:"table"},(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"code"),(0,l.yg)("td",{parentName:"tr",align:null},"Response status code"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"msg"),(0,l.yg)("td",{parentName:"tr",align:null},"Error message"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})))),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Successful response")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},'{\n    "code": "OK",\n    "msg": ""\n}\n')),(0,l.yg)("p",null,"Since this API is used by both the cloud management platform and the FE, certain rules needs to be followed. Only the following status transitions are allowed:"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"ClusterStatus::UNKNOWN")," -> ",(0,l.yg)("inlineCode",{parentName:"li"},"ClusterStatus::NORMAL")," (When a compute cluster is created using the cloud management platform, the initial status of the cluster is directly set to ",(0,l.yg)("inlineCode",{parentName:"li"},"NORMAL"),". This operation is usually completed via the ",(0,l.yg)("inlineCode",{parentName:"li"},"add_cluster")," interface.)"),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"ClusterStatus::NORMAL")," -> ",(0,l.yg)("inlineCode",{parentName:"li"},"ClusterStatus::SUSPENDED")," (Set when the cloud management platform suspends the compute cluster)"),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"ClusterStatus::SUSPENDED")," -> ",(0,l.yg)("inlineCode",{parentName:"li"},"ClusterStatus::TO_RESUME")," (Set when the FE wakes up the compute cluster)"),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"ClusterStatus::TO_RESUME")," -> ",(0,l.yg)("inlineCode",{parentName:"li"},"ClusterStatus::NORMAL")," (Set when the cloud management platform resumes the status of the compute cluster)")),(0,l.yg)("p",null,"Attempts to execute status transitions other than those listed above will incur errors."),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},'{\n    "code": "INVALID_ARGUMENT",\n    "msg": "failed to set cluster status, original cluster is NORMAL and want set TO_RESUME"\n}\n')),(0,l.yg)("h2",{id:"decode_key"},"decode_key"),(0,l.yg)("h3",{id:"description-20"},"Description"),(0,l.yg)("p",null,"This API is used to decode the Key from the Meta Service Log for debugging purposes."),(0,l.yg)("h3",{id:"request-20"},"Request"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Syntax")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},"GET /MetaService/http/decode_key?token=greedisgood9999&key={key} HTTP/1.1\nContent-Length: <ContentLength>\nContent-Type: text/plain\n")),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Parameter")),(0,l.yg)("table",null,(0,l.yg)("thead",{parentName:"table"},(0,l.yg)("tr",{parentName:"thead"},(0,l.yg)("th",{parentName:"tr",align:null},"Parameter"),(0,l.yg)("th",{parentName:"tr",align:null},"Description"),(0,l.yg)("th",{parentName:"tr",align:null},"Required/Optional"),(0,l.yg)("th",{parentName:"tr",align:null},"Notes"))),(0,l.yg)("tbody",{parentName:"table"},(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"key"),(0,l.yg)("td",{parentName:"tr",align:null},"Key to be decoded"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"unicode"),(0,l.yg)("td",{parentName:"tr",align:null},"Response format"),(0,l.yg)("td",{parentName:"tr",align:null},"Optional"),(0,l.yg)("td",{parentName:"tr",align:null})))),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Example")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},"GET /MetaService/http/decode_key?token=greedisgood9999&key=0110696e7374616e636500011072656772657373696f6e5f696e7374616e6365300001 HTTP/1.1\nContent-Length: <ContentLength>\nContent-Type: text/plain\n")),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Successful response")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 0. key space: 1\n\u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 1. instance\n\u2502 \u2502                     \u250c\u2500 2. regression_instance0\n\u2502 \u2502                     \u2502\n\u25bc \u25bc                     \u25bc\n0110696e7374616e636500011072656772657373696f6e5f696e7374616e6365300001\n")),(0,l.yg)("h2",{id:"get_tablet_stats"},"get_tablet_stats"),(0,l.yg)("h3",{id:"description-21"},"Description"),(0,l.yg)("p",null,"This API is used to query the status of a tablet for debugging purposes."),(0,l.yg)("h3",{id:"request-21"},"Request"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Syntax")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},'POST /MetaService/http/get_tablet_stats?token=greedisgood9999 HTTP/1.1\nContent-Length: <ContentLength>\nContent-Type: text/plain\n{\n    "cloud_unique_id": string,\n    "tablet_idx": [{\n        "table_id": int64,\n        "index_id": int64,\n        "partition_id": int64,\n        "tablet_id": int64\n    }]\n}\n')),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Parameter")),(0,l.yg)("table",null,(0,l.yg)("thead",{parentName:"table"},(0,l.yg)("tr",{parentName:"thead"},(0,l.yg)("th",{parentName:"tr",align:null},"Parameter"),(0,l.yg)("th",{parentName:"tr",align:null},"Description"),(0,l.yg)("th",{parentName:"tr",align:null},"Required/Optional"),(0,l.yg)("th",{parentName:"tr",align:null},"Notes"))),(0,l.yg)("tbody",{parentName:"table"},(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"cloud_unique_id"),(0,l.yg)("td",{parentName:"tr",align:null},"cloud_unique_id of node"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"tablet_idx"),(0,l.yg)("td",{parentName:"tr",align:null},"Tablet list to query"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null},"Array")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"tablet_idx.table_id"),(0,l.yg)("td",{parentName:"tr",align:null},"table_id of the tablet to query"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"tablet_idx.index_id"),(0,l.yg)("td",{parentName:"tr",align:null},"index_id of the tablet to query"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"tablet_idx.partition_id"),(0,l.yg)("td",{parentName:"tr",align:null},"partition_id of the tablet to query"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"tablet_idx.tablet_id"),(0,l.yg)("td",{parentName:"tr",align:null},"tablet_id of the tablet to query"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})))),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Example")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},'POST /MetaService/http/get_tablet_stats?token=greedisgood9999 HTTP/1.1\nContent-Length: <ContentLength>\nContent-Type: text/plain\n{\n    "cloud_unique_id":"1:regression_instance0:regression-cloud-unique-id0",\n    "tablet_idx": [{\n        "table_id":113973,\n        "index_id":113974,\n        "partition_id":113966,\n        "tablet_id":114739\n    }]\n}\n')),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Successful response")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},'status {\n  code: OK\n  msg: ""\n}\ntablet_stats {\n  idx {\n    table_id: 113973\n    index_id: 113974\n    partition_id: 113966\n    tablet_id: 114739\n  }\n  data_size: 0\n  num_rows: 0\n  num_rowsets: 2\n  num_segments: 0\n  base_compaction_cnt: 0\n  cumulative_compaction_cnt: 0\n  cumulative_point: 2\n}\n')),(0,l.yg)("h2",{id:"abort_txn"},"abort_txn"),(0,l.yg)("h3",{id:"description-22"},"Description"),(0,l.yg)("p",null,"This API is used to abort a transaction during debugging."),(0,l.yg)("h3",{id:"request-22"},"Request"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Syntax")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},'POST /MetaService/http/abort_txn?token=greedisgood9999 HTTP/1.1\nContent-Length: <ContentLength>\nContent-Type: text/plain\n{\n    "cloud_unique_id": string,\n    "txn_id": int64\n}\nor\n{\n    "cloud_unique_id": string,\n    "db_id": int64,\n    "label": string\n}\n')),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Parameter")),(0,l.yg)("table",null,(0,l.yg)("thead",{parentName:"table"},(0,l.yg)("tr",{parentName:"thead"},(0,l.yg)("th",{parentName:"tr",align:null},"Parameter"),(0,l.yg)("th",{parentName:"tr",align:null},"Description"),(0,l.yg)("th",{parentName:"tr",align:null},"Required/Optional"),(0,l.yg)("th",{parentName:"tr",align:null},"Notes"))),(0,l.yg)("tbody",{parentName:"table"},(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"cloud_unique_id"),(0,l.yg)("td",{parentName:"tr",align:null},"cloud_unique_id of node"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"txn_id"),(0,l.yg)("td",{parentName:"tr",align:null},"ID of the transaction to abort"),(0,l.yg)("td",{parentName:"tr",align:null},"Optional"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"db_id"),(0,l.yg)("td",{parentName:"tr",align:null},"db_id of the transaction to abort"),(0,l.yg)("td",{parentName:"tr",align:null},"Optional"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"label"),(0,l.yg)("td",{parentName:"tr",align:null},"Label of the transaction to abort"),(0,l.yg)("td",{parentName:"tr",align:null},"Optional"),(0,l.yg)("td",{parentName:"tr",align:null})))),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Example")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},'POST /MetaService/http/abort_txn?token=greedisgood9999 HTTP/1.1\nContent-Length: <ContentLength>\nContent-Type: text/plain\n{\n    "cloud_unique_id": "1:regression_instance0:regression-cloud-unique-id0",\n    "txn_id": 869414052004864\n}\n')),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Successful response")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},'status {\n  code: OK\n  msg: ""\n}\n')),(0,l.yg)("h2",{id:"abort_tablet_job"},"abort_tablet_job"),(0,l.yg)("h3",{id:"description-23"},"Description"),(0,l.yg)("p",null,"This API is used to abort a job running on a tablet. Currently, it only supports compaction jobs. It is used for debugging purposes."),(0,l.yg)("h3",{id:"request-23"},"Request"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Syntax")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},'POST /MetaService/http/abort_tablet_job?token=greedisgood9999 HTTP/1.1\nContent-Length: <ContentLength>\nContent-Type: text/plain\n{\n    "cloud_unique_id": string,\n    "job" : {\n        "idx": {"tablet_id": int64},\n        "compaction": [{"id": string}]\n    }\n}\n')),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Parameter")),(0,l.yg)("table",null,(0,l.yg)("thead",{parentName:"table"},(0,l.yg)("tr",{parentName:"thead"},(0,l.yg)("th",{parentName:"tr",align:null},"Parameter"),(0,l.yg)("th",{parentName:"tr",align:null},"Description"),(0,l.yg)("th",{parentName:"tr",align:null},"Required/Optional"),(0,l.yg)("th",{parentName:"tr",align:null},"Notes"))),(0,l.yg)("tbody",{parentName:"table"},(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"cloud_unique_id"),(0,l.yg)("td",{parentName:"tr",align:null},"cloud_unique_id of node"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"job"),(0,l.yg)("td",{parentName:"tr",align:null},"Job to abort"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null},"Currently only supports compaction jobs")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"job.idx"),(0,l.yg)("td",{parentName:"tr",align:null},"Index to abort"),(0,l.yg)("td",{parentName:"tr",align:null},"Required"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"job.idx.tablet_id"),(0,l.yg)("td",{parentName:"tr",align:null},"The corresponding tablet_id to abort.idx"),(0,l.yg)("td",{parentName:"tr",align:null}),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"job.compaction"),(0,l.yg)("td",{parentName:"tr",align:null},"The compaction to abort"),(0,l.yg)("td",{parentName:"tr",align:null}),(0,l.yg)("td",{parentName:"tr",align:null},"Array")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"job.compaction.id"),(0,l.yg)("td",{parentName:"tr",align:null},"ID of the compaction to abort"),(0,l.yg)("td",{parentName:"tr",align:null}),(0,l.yg)("td",{parentName:"tr",align:null})))),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Example")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Plain"},'POST /MetaService/http/abort_tablet_job?token=greedisgood9999 HTTP/1.1\nContent-Length: <ContentLength>\nContent-Type: text/plain\n{\n    "cloud_unique_id": "1:regression_instance0:regression-cloud-unique-id0",\n    "job" : {\n        "idx": {"tablet_id": 113973},\n        "compaction": [{"id": 113974}]\n    }\n}\n')),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Successful response")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre"},'status {\n  code: OK\n  msg: ""\n}\n')))}o.isMDXComponent=!0}}]);