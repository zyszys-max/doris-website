"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([[287470],{15680:(e,t,n)=>{n.d(t,{xA:()=>p,yg:()=>u});var a=n(296540);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),d=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},p=function(e){var t=d(e.components);return a.createElement(s.Provider,{value:t},e.children)},g="mdxType",y={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),g=d(n),c=r,u=g["".concat(s,".").concat(c)]||g[c]||y[c]||o;return n?a.createElement(u,l(l({ref:t},p),{},{components:n})):a.createElement(u,l({ref:t},p))}));function u(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,l=new Array(o);l[0]=c;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i[g]="string"==typeof e?e:r,l[1]=i;for(var d=2;d<o;d++)l[d]=n[d];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"},558390:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>y,frontMatter:()=>o,metadata:()=>i,toc:()=>d});var a=n(58168),r=(n(296540),n(15680));const o={title:"Manual Deployment",language:"en"},l=void 0,i={unversionedId:"install/cluster-deployment/standard-deployment",id:"install/cluster-deployment/standard-deployment",title:"Manual Deployment",description:"\x3c!--",source:"@site/docs/install/cluster-deployment/standard-deployment.md",sourceDirName:"install/cluster-deployment",slug:"/install/cluster-deployment/standard-deployment",permalink:"/docs/dev/install/cluster-deployment/standard-deployment",draft:!1,tags:[],version:"current",frontMatter:{title:"Manual Deployment",language:"en"},sidebar:"docs",previous:{title:"Compiling on MacOS",permalink:"/docs/dev/install/source-install/compilation-mac"},next:{title:"Deploying with Docker",permalink:"/docs/dev/install/cluster-deployment/run-docker-cluster"}},s={},d=[{value:"1. Check hardware and software environment",id:"1-check-hardware-and-software-environment",level:2},{value:"Check hardware",id:"check-hardware",level:3},{value:"Recommended servers",id:"recommended-servers",level:3},{value:"Hard disk space calculation",id:"hard-disk-space-calculation",level:3},{value:"Java version",id:"java-version",level:3},{value:"2. Check operating system",id:"2-check-operating-system",level:2},{value:"Disable swap partition",id:"disable-swap-partition",level:3},{value:"Check and disable system firewall",id:"check-and-disable-system-firewall",level:3},{value:"Configure NTP service",id:"configure-ntp-service",level:3},{value:"Set the maximum number of open file handles",id:"set-the-maximum-number-of-open-file-handles",level:3},{value:"Modify the number of virtual memory areas",id:"modify-the-number-of-virtual-memory-areas",level:3},{value:"Disable transparent huge pages",id:"disable-transparent-huge-pages",level:3},{value:"3. Plan the cluster",id:"3-plan-the-cluster",level:2},{value:"Plan the ports",id:"plan-the-ports",level:3},{value:"Plan the nodes",id:"plan-the-nodes",level:3},{value:"4. Deploy cluster",id:"4-deploy-cluster",level:2},{value:"Deploy FE Master node",id:"deploy-fe-master-node",level:3},{value:"Deploy FE cluster (optional)",id:"deploy-fe-cluster-optional",level:3},{value:"Deploy BE",id:"deploy-be",level:3},{value:"Validate cluster configuration",id:"validate-cluster-configuration",level:3},{value:"5. FAQ",id:"5-faq",level:2},{value:"What is priority_networks?",id:"what-is-priority_networks",level:3},{value:"Why do new BE nodes need to be manually added to the cluster?",id:"why-do-new-be-nodes-need-to-be-manually-added-to-the-cluster",level:3},{value:"How to quickly detect whether the FE has started successfully?",id:"how-to-quickly-detect-whether-the-fe-has-started-successfully",level:3},{value:"Does Doris provide built-in Web UI?",id:"does-doris-provide-built-in-web-ui",level:3},{value:"Why can&#39;t I change the root password via the Web UI?",id:"why-cant-i-change-the-root-password-via-the-web-ui",level:3}],p={toc:d},g="wrapper";function y(e){let{components:t,...o}=e;return(0,r.yg)(g,(0,a.A)({},p,o,{components:t,mdxType:"MDXLayout"}),(0,r.yg)("h1",{id:"standard-deployment"},"Standard Deployment"),(0,r.yg)("p",null,"Manually deploying a Doris cluster typically involves four steps:"),(0,r.yg)("ol",null,(0,r.yg)("li",{parentName:"ol"},"Check hardware and software environment: check the hardware resources available to the user and ensure compatibility with the operating system"),(0,r.yg)("li",{parentName:"ol"},"Check operating system: review the operating system parameters and configurations"),(0,r.yg)("li",{parentName:"ol"},"Plan the cluster: plan the FE and BE nodes of the cluster and estimate the required resources"),(0,r.yg)("li",{parentName:"ol"},"Deploy cluster: deploy the cluster based on the planning and configuration"),(0,r.yg)("li",{parentName:"ol"},"Verify: log in to the cluster and check if everything is right")),(0,r.yg)("admonition",{type:"tip"},(0,r.yg)("p",{parentName:"admonition"},"If you need to deploy Doris in the compute-storage decoupled mode, after completing step 1~3 as above, you may refer to the following docs to proceed with the deployment:"),(0,r.yg)("ol",{parentName:"admonition"},(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("a",{parentName:"li",href:"/docs/dev/compute-storage-decoupled/before-deployment"},"Before deployment")),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("a",{parentName:"li",href:"/docs/dev/compute-storage-decoupled/compilation-and-deployment"},"Deploy the basic modules for the compute-storage decoupled mode")),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("a",{parentName:"li",href:"../../compute-storage-decoupled/creating-cluster.md"},"Create cluster in the compute-storage decoupled mode")))),(0,r.yg)("h2",{id:"1-check-hardware-and-software-environment"},"1. Check hardware and software environment"),(0,r.yg)("h3",{id:"check-hardware"},"Check hardware"),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"CPU")),(0,r.yg)("p",null,"When installing Doris, it is recommended to use machines that support the AVX2 instruction set to leverage its vectorization capabilities for query acceleration. "),(0,r.yg)("p",null,"Run the following command. If a result is returned, that means the machine supports the AVX2 instruction set."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-SQL"},"cat /proc/cpuinfo | grep avx2\n")),(0,r.yg)("p",null,'If AVX2 instruction set is not supported, you can deploy Doris using the "noavx2" installation package.'),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Memory")),(0,r.yg)("p",null,"Doris does not impose strict memory limits. In a production environment, it is generally recommended to have the number of GB of memory at least four times the number of CPU cores (e.g., a machine with 16 cores should have at least 64GB of memory). With more memory space comes better performance."),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Storage")),(0,r.yg)("p",null,"When deploying Doris, data can be stored on SSDs, HDDs, or object storage."),(0,r.yg)("p",null,"It is recommended to use SSD as the data storage in the following scenarios:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"High-concurrency point queries with large data volumes."),(0,r.yg)("li",{parentName:"ul"},"High-frequency data update with large data volumes.")),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"File system")),(0,r.yg)("p",null,"Doris supports both ext4 and xfs file systems."),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Network Card")),(0,r.yg)("p",null,"During the computation process, Doris shards and distributes data to different instances for parallel processing, which incurs network overheads. To optimize Doris performance and minimize network overheads, it is strongly recommended to deploy Doris using 10 Gigabit Ethernet (10 GbE) or faster network cards."),(0,r.yg)("h3",{id:"recommended-servers"},"Recommended servers"),(0,r.yg)("p",null,"Doris can run on servers with x86-64 architecture or ARM64 architecture."),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Development and testing environment")),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:null},"Module"),(0,r.yg)("th",{parentName:"tr",align:null},"CPU"),(0,r.yg)("th",{parentName:"tr",align:null},"Memory"),(0,r.yg)("th",{parentName:"tr",align:null},"Disk"),(0,r.yg)("th",{parentName:"tr",align:null},"Network"),(0,r.yg)("th",{parentName:"tr",align:null},"Instance (minimum)"))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"Frontend"),(0,r.yg)("td",{parentName:"tr",align:null},"8+ Cores"),(0,r.yg)("td",{parentName:"tr",align:null},"8+ GB"),(0,r.yg)("td",{parentName:"tr",align:null},"SSD or SATA, 10+ GB"),(0,r.yg)("td",{parentName:"tr",align:null},"1 or 10 GbE"),(0,r.yg)("td",{parentName:"tr",align:null},"1")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"Backend"),(0,r.yg)("td",{parentName:"tr",align:null},"8+ Cores"),(0,r.yg)("td",{parentName:"tr",align:null},"16+ GB"),(0,r.yg)("td",{parentName:"tr",align:null},"SSD or SATA, 50+ GB"),(0,r.yg)("td",{parentName:"tr",align:null},"1 or 10 GbE"),(0,r.yg)("td",{parentName:"tr",align:null},"1")))),(0,r.yg)("admonition",{type:"tip"},(0,r.yg)("p",{parentName:"admonition"},"Description:"),(0,r.yg)("ul",{parentName:"admonition"},(0,r.yg)("li",{parentName:"ul"},"In a validation testing environment, you can deploy the FE and BE on the same server."),(0,r.yg)("li",{parentName:"ul"},"It is generally recommended to deploy only ",(0,r.yg)("strong",{parentName:"li"},"one BE instance on a single machine"),". Meanwhile, you can only deploy ",(0,r.yg)("strong",{parentName:"li"},"one")," ",(0,r.yg)("strong",{parentName:"li"},"FE")," ",(0,r.yg)("strong",{parentName:"li"},"on one machine"),"."),(0,r.yg)("li",{parentName:"ul"},"If you need three replicas of data, you will need at least three machines and deploy one BE instance on each of them, instead of deploying three BE instances on one single machine."),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"The clocks of multiple servers hosting FEs must be synchronized, allowing a maximum clock deviation of 5 seconds.")),(0,r.yg)("li",{parentName:"ul"},"In a testing environment, you can also perform tests with just one BE. In the actual production environment, the number of BE instances directly affects the overall query latency."))),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Production environment")),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:null},"Module"),(0,r.yg)("th",{parentName:"tr",align:null},"CPU"),(0,r.yg)("th",{parentName:"tr",align:null},"Memory"),(0,r.yg)("th",{parentName:"tr",align:null},"Disk"),(0,r.yg)("th",{parentName:"tr",align:null},"Network"),(0,r.yg)("th",{parentName:"tr",align:null},"Instance (minimum)"))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"Frontend"),(0,r.yg)("td",{parentName:"tr",align:null},"16+ Cores"),(0,r.yg)("td",{parentName:"tr",align:null},"64+ GB"),(0,r.yg)("td",{parentName:"tr",align:null},"SSD or RAID, 100+ GB"),(0,r.yg)("td",{parentName:"tr",align:null},"10 GbE"),(0,r.yg)("td",{parentName:"tr",align:null},"1")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"Backend"),(0,r.yg)("td",{parentName:"tr",align:null},"16+ Cores"),(0,r.yg)("td",{parentName:"tr",align:null},"64+ GB"),(0,r.yg)("td",{parentName:"tr",align:null},"SSD or SATA, 100+ GB"),(0,r.yg)("td",{parentName:"tr",align:null},"10 GbE"),(0,r.yg)("td",{parentName:"tr",align:null},"3")))),(0,r.yg)("admonition",{type:"tip"},(0,r.yg)("p",{parentName:"admonition"},"Description:"),(0,r.yg)("ul",{parentName:"admonition"},(0,r.yg)("li",{parentName:"ul"},"In a production environment, if the FE and BE are co-located, be mindful of resource contention issues. It is recommended to store metadata and data on separate disks."),(0,r.yg)("li",{parentName:"ul"},"BE nodes can be configured with multiple disks for storage. You can bind multiple HDDs or SSDs to a single BE instance."),(0,r.yg)("li",{parentName:"ul"},"The performance of the cluster is dependent on the resources of the BE nodes. The more BE nodes there are, the better the performance of Doris. Typically, Doris can fully leverage its performance potential with 10 to 100 machines."))),(0,r.yg)("h3",{id:"hard-disk-space-calculation"},"Hard disk space calculation"),(0,r.yg)("p",null,"In a Doris cluster, FE is mainly responsible for metadata storage, including metadata edit log and image. The disk space of BE mainly stores data, which needs to be calculated according to business needs."),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:null},"Component"),(0,r.yg)("th",{parentName:"tr",align:null},"Disk space description"))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"FE"),(0,r.yg)("td",{parentName:"tr",align:null},"Generally, the size of metadata ranges from several hundred MB to several GB. The recommended disk space is not to be less than 100GB.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"BE"),(0,r.yg)("td",{parentName:"tr",align:null},"Doris uses LZ4 compression by default, with a compression ratio of 0.3~0.5.Disk space needs to be calculated based on the total data volume * 3 (3 data replicas)There is a need to reserve 40% disk space for background data compaction and temporary data storage.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"Broker"),(0,r.yg)("td",{parentName:"tr",align:null},"If you want to deploy a Broker, you can usually deploy the Broker node on the same machine as the FE /BE nodes.")))),(0,r.yg)("h3",{id:"java-version"},"Java version"),(0,r.yg)("p",null,"All Doris processes depend on Java."),(0,r.yg)("p",null,"Before version 2.1 (inclusive), please use Java 8, recommended version: ",(0,r.yg)("inlineCode",{parentName:"p"},"openjdk-8u352-b08-linux-x64"),"."),(0,r.yg)("p",null,"After version 3.0 (inclusive), please use Java 17, recommended version: ",(0,r.yg)("inlineCode",{parentName:"p"},"jdk-17.0.10_linux-x64_bin.tar.gz"),"."),(0,r.yg)("h2",{id:"2-check-operating-system"},"2. Check operating system"),(0,r.yg)("h3",{id:"disable-swap-partition"},"Disable swap partition"),(0,r.yg)("p",null,"When deploying Doris, it is recommended to disable the swap partition. The swap partition is used by the kernel to move some memory data to a configured swap space when it detects memory pressure. However, since the kernel's strategy may not fully understand the behavior of the application, it can significantly impact the performance of the database. Therefore, it is advisable to disable it."),(0,r.yg)("p",null,"You can ",(0,r.yg)("strong",{parentName:"p"},"temporarily disable")," it using the following command. It will be enabled again upon the next machine boot."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-SQL"},"swapoff -a \n")),(0,r.yg)("p",null,"To ",(0,r.yg)("strong",{parentName:"p"},"permanently disable")," it, use the Linux root account to comment out the swap partition in /etc/fstab, and then reboot."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-Plain"},"# /etc/fstab\n# <file system>        <dir>         <type>    <options>             <dump> <pass>\ntmpfs                  /tmp          tmpfs     nodev,nosuid          0      0\n/dev/sda1              /             ext4      defaults,noatime      0      1\n# /dev/sda2            none          swap      defaults              0      0\n/dev/sda3              /home         ext4      defaults,noatime      0      2\n")),(0,r.yg)("admonition",{type:"caution"},(0,r.yg)("p",{parentName:"admonition"},"It is not recommended to disable swap by setting vm.swappiness = 0 because this parameter has different semantics in different Linux kernel versions. In many cases, this will not completely disable swap. ")),(0,r.yg)("h3",{id:"check-and-disable-system-firewall"},"Check and disable system firewall"),(0,r.yg)("p",null,"If you find inaccessible ports, try disabling  the firewall to confirm whether it is the cause. If it is, open the corresponding ports for communication based on the configured ports for Doris components."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-SQL"},"sudo systemctl stop firewalld.service\nsudo systemctl disable firewalld.service\n")),(0,r.yg)("h3",{id:"configure-ntp-service"},"Configure NTP service"),(0,r.yg)("p",null,"Doris metadata requires a time precision of less than 5000ms, so clock synchronization is required for all machines in the cluster. This prevents metadata inconsistency from causing service abnormalities. "),(0,r.yg)("p",null,"Typically, you can ensure clock synchronization across nodes by NTP service configuration."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-SQL"},"sudo systemctl start ntpd.service\nsudo systemctl enable ntpd.service\n")),(0,r.yg)("h3",{id:"set-the-maximum-number-of-open-file-handles"},"Set the maximum number of open file handles"),(0,r.yg)("p",null,"Doris relies on a large number of files to manage table data. Thus, the system's limit on the number of files opened by programs needs to be increased."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-SQL"},"vi /etc/security/limits.conf \n* soft nofile 1000000\n* hard nofile 1000000\n")),(0,r.yg)("admonition",{type:"caution"},(0,r.yg)("p",{parentName:"admonition"},"For the changes to take effect, the current user needs to log out of the current session and log back in. ")),(0,r.yg)("h3",{id:"modify-the-number-of-virtual-memory-areas"},"Modify the number of virtual memory areas"),(0,r.yg)("p",null,"Set the number of virtual memory areas to at least 2000000."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-SQL"},"sysctl -w vm.max_map_count=2000000\n")),(0,r.yg)("h3",{id:"disable-transparent-huge-pages"},"Disable transparent huge pages"),(0,r.yg)("p",null,"It is recommended to disable transparent huge pages when deploying Doris."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-SQL"},"echo never > /sys/kernel/mm/transparent_hugepage/enabled\necho never > /sys/kernel/mm/transparent_hugepage/defrag\n")),(0,r.yg)("h2",{id:"3-plan-the-cluster"},"3. Plan the cluster"),(0,r.yg)("h3",{id:"plan-the-ports"},"Plan the ports"),(0,r.yg)("p",null,"Doris instances communicate directly over the network, requiring the following ports for normal operation. Administrators can adjust Doris ports according to their environment:"),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:null},"Instance"),(0,r.yg)("th",{parentName:"tr",align:null},"Port"),(0,r.yg)("th",{parentName:"tr",align:null},"Default Port"),(0,r.yg)("th",{parentName:"tr",align:null},"Communication Direction"),(0,r.yg)("th",{parentName:"tr",align:null},"Description"))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"BE"),(0,r.yg)("td",{parentName:"tr",align:null},"be_port"),(0,r.yg)("td",{parentName:"tr",align:null},"9060"),(0,r.yg)("td",{parentName:"tr",align:null},"FE --\x3e BE"),(0,r.yg)("td",{parentName:"tr",align:null},"thrift server port on BE, receiving requests from FE")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"BE"),(0,r.yg)("td",{parentName:"tr",align:null},"webserver_port"),(0,r.yg)("td",{parentName:"tr",align:null},"8040"),(0,r.yg)("td",{parentName:"tr",align:null},"BE <--\x3e BE"),(0,r.yg)("td",{parentName:"tr",align:null},"http server port on BE")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"BE"),(0,r.yg)("td",{parentName:"tr",align:null},"heartbeat_service_port"),(0,r.yg)("td",{parentName:"tr",align:null},"9050"),(0,r.yg)("td",{parentName:"tr",align:null},"FE --\x3e BE"),(0,r.yg)("td",{parentName:"tr",align:null},"heartbeat service port (thrift) on BE, receiving heartbeats from FE")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"BE"),(0,r.yg)("td",{parentName:"tr",align:null},"brpc_port"),(0,r.yg)("td",{parentName:"tr",align:null},"8060"),(0,r.yg)("td",{parentName:"tr",align:null},"FE <--\x3e BE\uff0cBE <--\x3e BE"),(0,r.yg)("td",{parentName:"tr",align:null},"brpc port on BE, used for communication between BEs")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"FE"),(0,r.yg)("td",{parentName:"tr",align:null},"http_port"),(0,r.yg)("td",{parentName:"tr",align:null},"8030"),(0,r.yg)("td",{parentName:"tr",align:null},"FE <--\x3e FE\uff0cClient <--\x3e FE"),(0,r.yg)("td",{parentName:"tr",align:null},"http server port on FE")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"FE"),(0,r.yg)("td",{parentName:"tr",align:null},"rpc_port"),(0,r.yg)("td",{parentName:"tr",align:null},"9020"),(0,r.yg)("td",{parentName:"tr",align:null},"BE --\x3e FE\uff0cFE <--\x3e FE"),(0,r.yg)("td",{parentName:"tr",align:null},"thrift server port on FE, configuration of each FE should be consistent")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"FE"),(0,r.yg)("td",{parentName:"tr",align:null},"query_port"),(0,r.yg)("td",{parentName:"tr",align:null},"9030"),(0,r.yg)("td",{parentName:"tr",align:null},"Client <--\x3e FE"),(0,r.yg)("td",{parentName:"tr",align:null},"MySQL server port on FE")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"FE"),(0,r.yg)("td",{parentName:"tr",align:null},"edit_log_port"),(0,r.yg)("td",{parentName:"tr",align:null},"9010"),(0,r.yg)("td",{parentName:"tr",align:null},"FE <--\x3e FE"),(0,r.yg)("td",{parentName:"tr",align:null},"port on FE for bdbje communication")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"Broker"),(0,r.yg)("td",{parentName:"tr",align:null},"broker_ipc_port"),(0,r.yg)("td",{parentName:"tr",align:null},"8000"),(0,r.yg)("td",{parentName:"tr",align:null},"FE --\x3e Broker\uff0cBE --\x3e Broker"),(0,r.yg)("td",{parentName:"tr",align:null},"thrift server on Broker, receiving requests")))),(0,r.yg)("h3",{id:"plan-the-nodes"},"Plan the nodes"),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Plan the")," ",(0,r.yg)("strong",{parentName:"p"},"FE")," ",(0,r.yg)("strong",{parentName:"p"},"nodes")),(0,r.yg)("p",null,"FE nodes are primarily responsible for handling user requests, query parsing and planning, metadata management, and node management."),(0,r.yg)("p",null,"For a production cluster, it is generally recommended to deploy at least 3 FE nodes for high availability. In Doris, there are two roles of FE nodes:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Follower nodes participate in elections. If the Master node fails, an available Follower node will be selected as the new Master."),(0,r.yg)("li",{parentName:"ul"},"Observer nodes only synchronize metadata from the Leader node and do not participate in elections. They can be scaled to provide scalable metadata read services.")),(0,r.yg)("p",null,"Typically, it is advised to deploy 3 Follower nodes. In high-concurrency scenarios, you can scale the Observer nodes.."),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Plan the BE nodes")),(0,r.yg)("p",null,"BE nodes are responsible for data storage and computation. In a production environment, it is common to have 3 data replicas, so it is recommended to deploy at least 3 BE nodes."),(0,r.yg)("p",null,"BE nodes can be scaled, too. By increasing the number of BE nodes, you can improve query performance and concurrency."),(0,r.yg)("h2",{id:"4-deploy-cluster"},"4. Deploy cluster"),(0,r.yg)("h3",{id:"deploy-fe-master-node"},"Deploy FE Master node"),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Create metadata path")),(0,r.yg)("p",null,"Generally, FE metadata is no larger than 10GB. It is recommended to store FE metadata on a different disk than the BE node data."),(0,r.yg)("p",null,"After extracting the installation package, there is usually a default doris-meta directory included. It is advisable to create a separate metadata directory and create a symbolic link from that directory to doris-meta. ",(0,r.yg)("strong",{parentName:"p"},"In a production environment, it is strongly recommended to specify a separate directory instead of placing it within the Doris installation directory, preferably on a dedicated disk (preferably SSD). For testing and development environments, you can simply use the default configurations.")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-SQL"},"## Select a disk that is separated from the BE data storage and create the FE metadata directory.\nmkdir -p <doris_meta_created>\n\n## Create a symbolic link to the FE metadata directory.\nln -s <doris_meta_original> <doris_meta_created>\n")),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Modify FE configuration file")),(0,r.yg)("p",null,'The FE configuration file is in the "conf" directory under the FE deployment path. Before starting the FE node, you need to modify the ',(0,r.yg)("inlineCode",{parentName:"p"},"conf/fe.conf")," file."),(0,r.yg)("p",null,"Here are some necessary modifications:"),(0,r.yg)("ol",null,(0,r.yg)("li",{parentName:"ol"},"Modify FE metadata directory: In the configuration file, ",(0,r.yg)("inlineCode",{parentName:"li"},"meta_dir")," specifies the location where metadata is stored. By default, ",(0,r.yg)("inlineCode",{parentName:"li"},"meta_dir")," is under the FE installation path. If you have created a symbolic link to the FE metadata directory, you don't need to configure ",(0,r.yg)("inlineCode",{parentName:"li"},"meta_dir"),"."),(0,r.yg)("li",{parentName:"ol"},'Bind Cluster IP: In an environment with multiple network interfaces, you need to explicitly configure the "priority_networks".')),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-SQL"},"priority_networks = 10.1.3.0/24\n")),(0,r.yg)("p",null,"This is a CIDR representation that specifies the IP used by the FE. In environments using FQDN, you can ignore this."),(0,r.yg)("ol",{start:3},(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},"Adjust FE Memory")),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},'In "fe.conf", the default maximum Java heap memory is set to 8GB. It is recommended to increase it to 16GB or higher for production environments. You can adjust the maximum Java heap memory by specifying the ',(0,r.yg)("inlineCode",{parentName:"p"},"-Xmx")," in the ",(0,r.yg)("inlineCode",{parentName:"p"},"JAVA_OPTS")," parameter.")),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("pre",{parentName:"li"},(0,r.yg)("code",{parentName:"pre",className:"language-TypeScript"},'JAVA_OPTS="-Xmx16384m -XX:+UseMembar -XX:SurvivorRatio=8 -XX:MaxTenuringThreshold=7 -XX:+PrintGCDateStamps -XX:+PrintGCDetails -XX:+UseConcMarkSweepGC -XX:+UseParNewGC -XX:+CMSClassUnloadingEnabled -XX:-CMSParallelRemarkEnabled -XX:CMSInitiatingOccupancyFraction=80 -XX:SoftRefLRUPolicyMSPerMB=0 -Xloggc:$DORIS_HOME/log/fe.gc.log.$DATE"\n'))),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},"Modify the case sensitivity parameter ",(0,r.yg)("inlineCode",{parentName:"p"},"lower_case_table_names")," By default, Doris is case-sensitive for table names. If you require case-insensitive table names, you need to set this during cluster initialization. Note that once the cluster initialization is completed, the table name case sensitivity cannot be changed. Please refer to the variable documentation for more details on the ",(0,r.yg)("inlineCode",{parentName:"p"},"lower_case_table_names")," setting."))),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Start FE process")),(0,r.yg)("p",null,"Start FE process by executing the following command"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-shell"},"bin/start_fe.sh --daemon\n")),(0,r.yg)("p",null,"After FE process is started, it runs in the background. The log files are stored by default in the ",(0,r.yg)("inlineCode",{parentName:"p"},"log/")," directory. In the case of startup failure, you can check the error messages in ",(0,r.yg)("inlineCode",{parentName:"p"},"log/fe.log")," or ",(0,r.yg)("inlineCode",{parentName:"p"},"log/fe.out"),"."),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Check FE status")),(0,r.yg)("p",null,"To check the FE startup status, you can connect to the Doris cluster using a MySQL client. The initial user is ",(0,r.yg)("inlineCode",{parentName:"p"},"root")," with an empty password."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-SQL"},"mysql -uroot -P<fe_query_port> -h<fe_ip_address>\n")),(0,r.yg)("p",null,"After connecting to the Doris cluster, you can use the ",(0,r.yg)("inlineCode",{parentName:"p"},"show frontends")," command to check the status of the FE nodes. It is important to verify the following:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},'If "Alive" is true, the node is alive.'),(0,r.yg)("li",{parentName:"ul"},'If "Join" is true, the node has joined the cluster, but it may not be currently active within the cluster (it may be disconnected).'),(0,r.yg)("li",{parentName:"ul"},'If "IsMaster" is true, that means the node is the Master node.')),(0,r.yg)("h3",{id:"deploy-fe-cluster-optional"},"Deploy FE cluster (optional)"),(0,r.yg)("p",null,"In a production cluster, it is recommended to deploy at least three Follower nodes. After deploying the FE Master node, you need to deploy two additional FE Follower nodes."),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Create the metadata directory")),(0,r.yg)("p",null,'Refer to the deployment of the FE Master node and create the "doris-meta" directory.'),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Modify FE Follower node configuration")),(0,r.yg)("p",null,"Refer to the deployment of the FE Master node and modify the FE configuration file. In most cases, you can directly copy the configuration file from the FE Master node."),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Register the New FE Follower node in the Doris cluster")),(0,r.yg)("p",null,"Before starting the new FE node, you need to register it in the FE cluster."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-SQL"},'## Connect to any FE node alive\nmysql -uroot -P<fe_query_port> -h<fe_ip_address>\n\n## Register FE Follower node\n## fe_edit_log_port can be viewed in fe.conf, set to 9010 by default\n## In MySQL Client, execute ALTER SYSTEM statement\nALTER SYSTEM ADD FOLLOWER "<fe_ip_address>:<fe_edit_log_port>"\n')),(0,r.yg)("p",null,"If you need to add an Observer node, you can use the ",(0,r.yg)("inlineCode",{parentName:"p"},"ADD OBSERVER")," command."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-SQL"},'## Register FE observer node, execute ALTER SYSTEM in MySQL Client.\nALTER SYSTEM ADD OBSERVER "<fe_ip_address>:<fe_edit_log_port>"\n')),(0,r.yg)("admonition",{type:"note"},(0,r.yg)("ol",{parentName:"admonition"},(0,r.yg)("li",{parentName:"ol"},"It is recommended to have an odd number of FE Follower nodes (including the Master node), with a suggested number of three to achieve high availability."),(0,r.yg)("li",{parentName:"ol"},"When FE is deployed in a high availability mode (1 Master node, 2 Follower nodes), it is advisable to increase the scalability of the FE read services by adding an Observer FE."),(0,r.yg)("li",{parentName:"ol"},"Typically, one FE node can handle around 10-20 BE nodes. It is recommended to keep the total number of FE nodes below 10."))),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Start FE Follower node")),(0,r.yg)("p",null,"Execute the following command to start FE Follower node and synchronize metadata automatically."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-shell"},"bin/start_fe.sh --helper <helper_fe_ip>:<fe_edit_log_port> --daemon\n")),(0,r.yg)("p",null,(0,r.yg)("inlineCode",{parentName:"p"},"helper_fe_ip")," represents any node alive in the current FE cluster. The ",(0,r.yg)("inlineCode",{parentName:"p"},"--heper"),"parameter is only applied during the initial FE startup to synchronize metadata, and it is not necessary to specify it in subsequent FE restart operations."),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Check Follower node status")),(0,r.yg)("p",null,"To check the status of a Follower node, follow the same method of checking the status of the FE Master node. After registering the FE Follower node, use the ",(0,r.yg)("inlineCode",{parentName:"p"},"show frontends")," command to view the FE node status. Unlike the Master node, the ",(0,r.yg)("inlineCode",{parentName:"p"},"IsMaster")," status should be false for the Follower node."),(0,r.yg)("h3",{id:"deploy-be"},"Deploy BE"),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Create directory")),(0,r.yg)("p",null,"BE processes are responsible for data computation and storage. The data directories are by default under ",(0,r.yg)("inlineCode",{parentName:"p"},"be/storage")," . In a production environment, it is common to use dedicated disks to store data, separating the BE data from the BE deployment files. BE supports distributing data across multiple disks to better utilize the I/O capabilities of the disks."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-SQL"},"## Create BE data storage directories on each data disk\nmkdir -p <be_storage_root_path>\n")),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Modify BE configuration")),(0,r.yg)("p",null,'The configuration file for BE is in the "conf" directory under the BE deployment path. Before starting the BE node, you need to modify the ',(0,r.yg)("inlineCode",{parentName:"p"},"conf/be.conf")," file."),(0,r.yg)("ol",null,(0,r.yg)("li",{parentName:"ol"},"Configure Java environment Starting from version 1.2, Doris supports Java UDF (User-Defined Function), and BE relies on the Java environment. You need to configure the ",(0,r.yg)("inlineCode",{parentName:"li"},"JAVA_HOME")," environment variable in the operating system beforehand or specify the Java environment variable in the BE configuration file.")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-SQL"},"## Modify Java environment variable in be/conf/be.conf\nJAVA_HOME = <your-java-home-path>\n")),(0,r.yg)("ol",{start:2},(0,r.yg)("li",{parentName:"ol"},"Configure BE storage path")),(0,r.yg)("p",null,'To modify the BE storage path, you can modify the "storage_root_path" parameter. Separate multiple paths using a semicolon ',(0,r.yg)("inlineCode",{parentName:"p"},";")," (",(0,r.yg)("strong",{parentName:"p"},"Do not add a semicolon after the last directory."),")"),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Tiered Storage for hot and cold data")),(0,r.yg)("p",null,"Doris supports tiered storage for hot and cold data, where cold data is stored on HDDs or object storage, and hot data is stored on SSDs."),(0,r.yg)("p",null,"You can differentiate the directories for storing hot and cold data within a node by using HDD (for cold data directory) or SSD (for hot data directory) paths. If you don't require the hot/cold mechanism within the BE node, you only need to configure the paths without specifying the medium type. You also don't need to modify the default storage medium configuration in FE."),(0,r.yg)("p",null,"When using the tiered storage feature, you need to specify the ",(0,r.yg)("inlineCode",{parentName:"p"},"medium")," in the ",(0,r.yg)("inlineCode",{parentName:"p"},"storage_root_path")," parameter."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-SQL"},"## In storage_root_path, use medium to specify the disk type\n## /home/disk1/doris,medium:HDD: this directory stores cold data;\n## /home/disk2/doris,medium:SSD: this directory stores hot data;\nstorage_root_path=/home/disk1/doris,medium:HDD;/home/disk2/doris,medium:SSD\n")),(0,r.yg)("admonition",{type:"note"},(0,r.yg)("ol",{parentName:"admonition"},(0,r.yg)("li",{parentName:"ol"},"When specifying the storage type for the storage path, at least one path should have the storage type set as HDD."),(0,r.yg)("li",{parentName:"ol"},"If the storage type for a storage path is not explicitly declared, it defaults to HDD."),(0,r.yg)("li",{parentName:"ol"},"Specifying the storage type as HDD or SSD is to differentiate the storage types for the paths. It is independent of the physical storage medium. For example, you can designate a directory on an HDD disk as SSD."),(0,r.yg)("li",{parentName:"ol"},"The keywords for storage types, HDD and SSD, must be capitalized."))),(0,r.yg)("ol",{start:6},(0,r.yg)("li",{parentName:"ol"},"Bind cluster IP")),(0,r.yg)("p",null,'In a multi-network interface environment, it is necessary to explicitly configure the "priority_networks". However, in an environment where FQDN is configured, the "priority_networks" can be ignored.'),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-SQL"},"priority_networks = 10.1.3.0/24\n")),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Register BE node in Doris")),(0,r.yg)("p",null,"Before starting a new BE node, you need to register the new BE node in the FE cluster."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-SQL"},'## Connect to any FE node alive\nmysql -uroot -P<fe_query_port> -h<fe_ip_address>\n\n## Register BE node\n## be_heartbeat_service_port can be checked from be.conf, set to 9050 by default\n## In MySQL Client, execute ALTER SYSTEM statement\nALTER SYSTEM ADD BACKEND "<be_ip_address>:<be_heartbeat_service_port>"\n')),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Start BE process")),(0,r.yg)("p",null,"Start BE process by executing the following command:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-SQL"},"bin/start_be.sh --daemon\n")),(0,r.yg)("p",null,"After BE process is started, it runs in the background. The log files are stored by default in the ",(0,r.yg)("inlineCode",{parentName:"p"},"log/")," directory. In the case of startup failure, you can check the error messages in ",(0,r.yg)("inlineCode",{parentName:"p"},"log/be.log")," or ",(0,r.yg)("inlineCode",{parentName:"p"},"log/be.out"),"."),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Check BE status")),(0,r.yg)("p",null,"After connecting to the Doris cluster, you can use the ",(0,r.yg)("inlineCode",{parentName:"p"},"show backends")," command to check the status of the BE nodes. "),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-SQL"},"## Connect to Doris cluster\nmysql -uroot -P<fe_query_port> -h<fe_ip_address>\n\n## Check BE status, execute show command in MySQL Client\nshow backends;\n")),(0,r.yg)("p",null,"Normally, you should verify the following:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},'If "Alive" is true, the node is alive.'),(0,r.yg)("li",{parentName:"ul"},'"TabletNum" represents the number of tablets (shards) on that node. When a new node is added, data balancing occurs, and the TabletNum gradually approaches the average.')),(0,r.yg)("h3",{id:"validate-cluster-configuration"},"Validate cluster configuration"),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Log in to the database")),(0,r.yg)("p",null,"Log in to the Doris cluster using a MySQL Client."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-TypeScript"},"## Connect to Doris cluster\nmysql -uroot -P<fe_query_port> -h<fe_ip_address>\n")),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Check the version")),(0,r.yg)("p",null,"Check the versions using the ",(0,r.yg)("inlineCode",{parentName:"p"},"show frontends")," and ",(0,r.yg)("inlineCode",{parentName:"p"},"show backends")," commands."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-TypeScript"},"## Check the versions of all FE instances in MySQL Client\nshow frontends \\G\n\n## Check the versions of all BE instances in MySQL Client\nshow backends \\G\n")),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Modify cluster password")),(0,r.yg)("p",null,"After creating a Doris cluster, the system automatically creates a ",(0,r.yg)("inlineCode",{parentName:"p"},"root")," user with an empty default password. It is recommended to set a new password for the ",(0,r.yg)("inlineCode",{parentName:"p"},"root")," user after creating the cluster."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-TypeScript"},"## To confirm that the current user is root, you can check the current user in the MySQL client.\nselect user();\n+------------------------+\n| user()                 |\n+------------------------+\n| 'root'@'192.168.88.30' |\n+------------------------+\n\n## To modify the password for the root user, execute the \"set password\" command in the MySQL client.\nSET PASSWORD = PASSWORD('doris_new_passwd');\n")),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Create a test table and insert data")),(0,r.yg)("p",null,"In the newly created cluster, you can create a table and insert data into it to verify if the cluster works properly."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-TypeScript"},'## To create a test database, execute the "create database" statement in MySQL Client.\ncreate database testdb;\n\n## To create a test table, execute the "create table" statement in MySQL Client.\nCREATE TABLE testdb.table_hash\n(\n    k1 TINYINT,\n    k2 DECIMAL(10, 2) DEFAULT "10.5",\n    k3 VARCHAR(10) COMMENT "string column",\n    k4 INT NOT NULL DEFAULT "1" COMMENT "int column"\n)\nCOMMENT "my first table"\nDISTRIBUTED BY HASH(k1) BUCKETS 32;\n')),(0,r.yg)("p",null,'Doris is compatible with the MySQL protocol, so you can insert data using the "insert" statement.'),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-TypeScript"},"## To insert test data, execute the \"insert into\" statement in MySQL Client.\nINSERT INTO testdb.table_hash VALUES\n(1, 10.1, 'AAA', 10),\n(2, 10.2, 'BBB', 20),\n(3, 10.3, 'CCC', 30),\n(4, 10.4, 'DDD', 40),\n(5, 10.5, 'EEE', 50);\n\n## To verify the data, execute the \"select\" statement in MySQL Client.\nSELECT * from testdb.table_hash;\n+------+-------+------+------+\n| k1   | k2    | k3   | k4   |\n+------+-------+------+------+\n|    3 | 10.30 | CCC  |   30 |\n|    4 | 10.40 | DDD  |   40 |\n|    5 | 10.50 | EEE  |   50 |\n|    1 | 10.10 | AAA  |   10 |\n|    2 | 10.20 | BBB  |   20 |\n+------+-------+------+------+\n")),(0,r.yg)("h2",{id:"5-faq"},"5. FAQ"),(0,r.yg)("h3",{id:"what-is-priority_networks"},"What is priority_networks?"),(0,r.yg)("p",null,"Doris processes listen to network segments represented in CIDR format for IP addresses. If the deployed machines only have one network segment, no configuration is needed. However, if there are two or more network segments, it is essential to configure them."),(0,r.yg)("p",null,"This parameter is mainly used to help the system select the correct network card IP as its listening IP. For example, if the required listening IP is 192.168.0.1, you can set ",(0,r.yg)("inlineCode",{parentName:"p"},"priority_networks=192.168.0.0/24"),". The system will automatically scan all IPs on the machine, and only those matching the 192.168.0.0/24 network segment will be used as service listening addresses. You can also configure multiple CIDR network segments in this parameter, such as ",(0,r.yg)("inlineCode",{parentName:"p"},"priority_networks = 10.10.0.0/16; 192.168.0.0/24"),"."),(0,r.yg)("admonition",{type:"tip"},(0,r.yg)("p",{parentName:"admonition"},(0,r.yg)("strong",{parentName:"p"},"Why use priority_networks to configure listening address segments instead of directly setting the listening IP address in the configuration file?")),(0,r.yg)("p",{parentName:"admonition"},"The main reason is that Doris is a distributed cluster, and the same configuration file will be deployed on multiple nodes. To facilitate deployment, updates, and maintenance, it is desirable to keep all nodes' configuration files consistent. By configuring the listening address segment and then starting the system, the appropriate listening IP can be found based on this network segment, thus each machine can use a single value in this configuration. ")),(0,r.yg)("h3",{id:"why-do-new-be-nodes-need-to-be-manually-added-to-the-cluster"},"Why do new BE nodes need to be manually added to the cluster?"),(0,r.yg)("p",null,"After the BE node is started, you need to send a command to the FE through the MySQL protocol or the built-in web console to join the BE node to the cluster."),(0,r.yg)("admonition",{type:"tip"},(0,r.yg)("p",{parentName:"admonition"},(0,r.yg)("strong",{parentName:"p"},"How does the FE know which BE nodes constitute the cluster?")),(0,r.yg)("p",{parentName:"admonition"},"As a distributed database, Doris generally has many BE nodes. Doris adds BE nodes to the cluster by sending commands to the FE. This is different from the way how BE nodes know the addresses of FE nodes and then actively report connections. The way of manual adding and having the FE actively connect to BE nodes is beneficial to cluster management in many aspects. For example, it can determine which nodes constitute the cluster and it can proactively shut down a BE node that cannot be connected to. ")),(0,r.yg)("h3",{id:"how-to-quickly-detect-whether-the-fe-has-started-successfully"},"How to quickly detect whether the FE has started successfully?"),(0,r.yg)("p",null,"You can use the following command to check if the FE has started successfully."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-shell"},'# Retry the following command, if it returns "msg":"success"\uff0cthe FE has started successfully.\nserver1:apache-doris/fe doris$ curl http://127.0.0.1:8030/api/bootstrap\n{"msg":"success","code":0,"data":{"replayedJournalId":0,"queryPort":0,"rpcPort":0,"version":""},"count":0}\n')),(0,r.yg)("h3",{id:"does-doris-provide-built-in-web-ui"},"Does Doris provide built-in Web UI?"),(0,r.yg)("p",null,"Doris FE has a built-in Web UI. Users do not need to install a MySQL client to perform tasks such as adding BE/FE nodes or running other SQL queries."),(0,r.yg)("p",null,"To access the Web UI, simply enter the URL in a web browser: http://fe_ip:fe_port, for example, ",(0,r.yg)("a",{parentName:"p",href:"http://172.20.63.118:8030/"},"http://172.20.63.118:8030"),". This will open the built-in Web console of Doris."),(0,r.yg)("p",null,"The built-in Web console is primarily intended for use by the root account of the cluster. By default, the root account password is empty after installation."),(0,r.yg)("p",null,(0,r.yg)("img",{alt:"web-login-username-password",src:n(666905).A,width:"1280",height:"724"})),(0,r.yg)("p",null,"For example, you can execute the following command in the Playground to add a BE node."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-SQL"},'ALTER SYSTEM ADD BACKEND "be_host_ip:heartbeat_service_port";\n')),(0,r.yg)("p",null,(0,r.yg)("img",{alt:"Doris-Web-UI-Playground-en",src:n(25747).A,width:"1280",height:"653"})),(0,r.yg)("admonition",{type:"tip"},(0,r.yg)("p",{parentName:"admonition"},"For successful execution of statements that are not related to specific databases/tables in the Playground, it is necessary to randomly select a database from the left-hand database panel. This limitation will be removed later. ")),(0,r.yg)("h3",{id:"why-cant-i-change-the-root-password-via-the-web-ui"},"Why can't I change the root password via the Web UI?"),(0,r.yg)("p",null,"The current built-in web console cannot execute SET type SQL statements. Therefore, in the web console, you cannot change the root password using statements like ",(0,r.yg)("inlineCode",{parentName:"p"},"SET PASSWORD FOR 'root' = PASSWORD('your_password')"),". You can use MySQL Client to change the password for the root account."))}y.isMDXComponent=!0},25747:(e,t,n)=>{n.d(t,{A:()=>a});const a=n.p+"assets/images/Doris-Web-UI-Playground-en-ce00cb539e0dc6a110a17e5bd057a10b.png"},666905:(e,t,n)=>{n.d(t,{A:()=>a});const a=n.p+"assets/images/web-login-username-password-0e96b0a7f82ba3609666352a6f56b26a.png"}}]);