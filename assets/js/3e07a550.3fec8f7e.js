"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([[339045],{15680:(t,e,a)=>{a.d(e,{xA:()=>i,yg:()=>N});var n=a(296540);function r(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function l(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function g(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?l(Object(a),!0).forEach((function(e){r(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function y(t,e){if(null==t)return{};var a,n,r=function(t,e){if(null==t)return{};var a,n,r={},l=Object.keys(t);for(n=0;n<l.length;n++)a=l[n],e.indexOf(a)>=0||(r[a]=t[a]);return r}(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(n=0;n<l.length;n++)a=l[n],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}var p=n.createContext({}),d=function(t){var e=n.useContext(p),a=e;return t&&(a="function"==typeof t?t(e):g(g({},e),t)),a},i=function(t){var e=d(t.components);return n.createElement(p.Provider,{value:e},t.children)},u="mdxType",m={inlineCode:"code",wrapper:function(t){var e=t.children;return n.createElement(n.Fragment,{},e)}},o=n.forwardRef((function(t,e){var a=t.components,r=t.mdxType,l=t.originalType,p=t.parentName,i=y(t,["components","mdxType","originalType","parentName"]),u=d(a),o=r,N=u["".concat(p,".").concat(o)]||u[o]||m[o]||l;return a?n.createElement(N,g(g({ref:e},i),{},{components:a})):n.createElement(N,g({ref:e},i))}));function N(t,e){var a=arguments,r=e&&e.mdxType;if("string"==typeof t||r){var l=a.length,g=new Array(l);g[0]=o;var y={};for(var p in e)hasOwnProperty.call(e,p)&&(y[p]=e[p]);y.originalType=t,y[u]="string"==typeof t?t:r,g[1]=y;for(var d=2;d<l;d++)g[d]=a[d];return n.createElement.apply(null,g)}return n.createElement.apply(null,a)}o.displayName="MDXCreateElement"},784606:(t,e,a)=>{a.r(e),a.d(e,{assets:()=>p,contentTitle:()=>g,default:()=>m,frontMatter:()=>l,metadata:()=>y,toc:()=>d});var n=a(58168),r=(a(296540),a(15680));const l={title:"TPC-DS Benchmark",language:"zh-CN"},g=void 0,y={unversionedId:"benchmark/tpcds",id:"version-2.0/benchmark/tpcds",title:"TPC-DS Benchmark",description:"\x3c!--",source:"@site/versioned_docs/version-2.0/benchmark/tpcds.md",sourceDirName:"benchmark",slug:"/benchmark/tpcds",permalink:"/docs/2.0/benchmark/tpcds",draft:!1,tags:[],version:"2.0",frontMatter:{title:"TPC-DS Benchmark",language:"zh-CN"},sidebar:"benchmark",previous:{title:"TPC-H Benchmark",permalink:"/docs/2.0/benchmark/tpch"}},p={},d=[{value:"1. Hardware Environment",id:"1-hardware-environment",level:2},{value:"2. Software Environment",id:"2-software-environment",level:2},{value:"3. Test Data Volume",id:"3-test-data-volume",level:2},{value:"4. Test SQL",id:"4-test-sql",level:2},{value:"5. Test Results",id:"5-test-results",level:2},{value:"6. Environmental Preparation",id:"6-environmental-preparation",level:2},{value:"7. Data Preparation",id:"7-data-preparation",level:2},{value:"7.1 Download and Install TPC-DS Data Generation Tool",id:"71-download-and-install-tpc-ds-data-generation-tool",level:3},{value:"7.2 Generating the TPC-DS Test Set",id:"72-generating-the-tpc-ds-test-set",level:3},{value:"7.3 Create Table",id:"73-create-table",level:3},{value:"7.3.1 Prepare the <code>doris-cluster.conf</code> File",id:"731-prepare-the-doris-clusterconf-file",level:4},{value:"Execute the Following Script to Generate and Create TPC-H Table",id:"execute-the-following-script-to-generate-and-create-tpc-h-table",level:4},{value:"7.4 Import Data",id:"74-import-data",level:3},{value:"7.5 Query Test",id:"75-query-test",level:3},{value:"7.5.1 Executing Query Scripts",id:"751-executing-query-scripts",level:4},{value:"7.5.2 Single SQL Execution",id:"752-single-sql-execution",level:4}],i={toc:d},u="wrapper";function m(t){let{components:e,...l}=t;return(0,r.yg)(u,(0,n.A)({},i,l,{components:e,mdxType:"MDXLayout"}),(0,r.yg)("h1",{id:"tpc-ds-benchmark"},"TPC-DS Benchmark"),(0,r.yg)("p",null,"TPC-DS (Transaction Processing Performance Council Decision Support Benchmark) is a benchmark test that focuses on decision support and aims to evaluate the performance of data warehousing and analytics systems. It was developed by the Transaction Processing Performance Council (TPC) organization to compare the capabilities of different systems in handling complex queries and large-scale data analysis."),(0,r.yg)("p",null,"The design goal of TPC-DS is to simulate complex decision support workloads in the real world. It tests the performance of systems through a series of complex queries and data operations, including joins, aggregations, sorting, filtering, subqueries, and more. These query patterns cover various scenarios ranging from simple to complex, such as report generation, data mining, and OLAP (Online Analytical Processing)."),(0,r.yg)("p",null,"This document mainly introduces the performance of Doris on the TPC-DS 1000G test set."),(0,r.yg)("p",null,"On 99 queries on the TPC-DS standard test data set, we conducted a comparison test based on Apache Doris 2.1.1-rc03 and Apache Doris 2.0.6 versions."),(0,r.yg)("p",null,(0,r.yg)("img",{alt:"TPCDS_1000G",src:a(904198).A,width:"11091",height:"1191"})),(0,r.yg)("h2",{id:"1-hardware-environment"},"1. Hardware Environment"),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:null},"Hardware"),(0,r.yg)("th",{parentName:"tr",align:null},"Configuration Instructions"))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"Number of mMachines"),(0,r.yg)("td",{parentName:"tr",align:null},"4 Tencent Cloud Virtual Machine\uff081FE\uff0c3BEs\uff09")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"CPU"),(0,r.yg)("td",{parentName:"tr",align:null},"AMD EPYC\u2122 Milan(2.55GHz/3.5GHz)  48C")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"Memory"),(0,r.yg)("td",{parentName:"tr",align:null},"192G")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"Network"),(0,r.yg)("td",{parentName:"tr",align:null},"21Gbps")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"Disk"),(0,r.yg)("td",{parentName:"tr",align:null},"ESSD Cloud Hard Disk")))),(0,r.yg)("h2",{id:"2-software-environment"},"2. Software Environment"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Doris Deployed 3BEs and 1FE"),(0,r.yg)("li",{parentName:"ul"},"Kernel Version: Linux version 5.4.0-96-generic (buildd@lgw01-amd64-051)"),(0,r.yg)("li",{parentName:"ul"},"OS version: Ubuntu 20.04 LTS (Focal Fossa)"),(0,r.yg)("li",{parentName:"ul"},"Doris software version: Apache Doris 2.1.1-rc03, Apache Doris 2.0.6."),(0,r.yg)("li",{parentName:"ul"},'JDK: openjdk version "1.8.0_131"')),(0,r.yg)("h2",{id:"3-test-data-volume"},"3. Test Data Volume"),(0,r.yg)("p",null,"The TPC-DS 1000G data generated by the simulation of the entire test are respectively imported into Apache Doris 2.1.1-rc03 and Apache Doris 2.0.6 for testing. The following is the relevant description and data volume of the table."),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:null},"TPC-DS Table Name"),(0,r.yg)("th",{parentName:"tr",align:null},"Rows"))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"customer_demographics"),(0,r.yg)("td",{parentName:"tr",align:null},"1,920,800")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"reason"),(0,r.yg)("td",{parentName:"tr",align:null},"65")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"warehouse"),(0,r.yg)("td",{parentName:"tr",align:null},"20")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"date_dim"),(0,r.yg)("td",{parentName:"tr",align:null},"73,049")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"catalog_sales"),(0,r.yg)("td",{parentName:"tr",align:null},"1,439,980,416")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"call_center"),(0,r.yg)("td",{parentName:"tr",align:null},"42")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"inventory"),(0,r.yg)("td",{parentName:"tr",align:null},"783,000,000")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"catalog_returns"),(0,r.yg)("td",{parentName:"tr",align:null},"143,996,756")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"household_demographics"),(0,r.yg)("td",{parentName:"tr",align:null},"7,200")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"customer_address"),(0,r.yg)("td",{parentName:"tr",align:null},"6,000,000")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"income_band"),(0,r.yg)("td",{parentName:"tr",align:null},"20")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"catalog_page"),(0,r.yg)("td",{parentName:"tr",align:null},"30,000")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"item"),(0,r.yg)("td",{parentName:"tr",align:null},"300,000")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"web_returns"),(0,r.yg)("td",{parentName:"tr",align:null},"71,997,522")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"web_site"),(0,r.yg)("td",{parentName:"tr",align:null},"54")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"promotion"),(0,r.yg)("td",{parentName:"tr",align:null},"1,500")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"web_sales"),(0,r.yg)("td",{parentName:"tr",align:null},"720,000,376")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"store"),(0,r.yg)("td",{parentName:"tr",align:null},"1,002")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"web_page"),(0,r.yg)("td",{parentName:"tr",align:null},"3,000")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"time_dim"),(0,r.yg)("td",{parentName:"tr",align:null},"86,400")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"store_returns"),(0,r.yg)("td",{parentName:"tr",align:null},"287,999,764")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"store_sales"),(0,r.yg)("td",{parentName:"tr",align:null},"2,879,987,999")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"ship_mode"),(0,r.yg)("td",{parentName:"tr",align:null},"20")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"customer"),(0,r.yg)("td",{parentName:"tr",align:null},"12,000,000")))),(0,r.yg)("h2",{id:"4-test-sql"},"4. Test SQL"),(0,r.yg)("p",null,"TPC-DS 99 test query statements : ",(0,r.yg)("a",{parentName:"p",href:"https://github.com/apache/doris/tree/master/tools/tpcds-tools/queries/sf1000"},"TPC-DS-Query-SQL")),(0,r.yg)("h2",{id:"5-test-results"},"5. Test Results"),(0,r.yg)("p",null,"Here we use Apache Doris 2.1.1-rc03 and Apache Doris 2.0.6 for comparative testing. In the test, we use Query Time(ms) as the main performance indicator. The test results are as follows:"),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:null},"Query"),(0,r.yg)("th",{parentName:"tr",align:null},"Apache Doris 2.1.1-rc03  (ms)"),(0,r.yg)("th",{parentName:"tr",align:null},"Apache Doris 2.0.6  (ms)"))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query1"),(0,r.yg)("td",{parentName:"tr",align:null},"729"),(0,r.yg)("td",{parentName:"tr",align:null},"914")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query2"),(0,r.yg)("td",{parentName:"tr",align:null},"5120"),(0,r.yg)("td",{parentName:"tr",align:null},"4669")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query3"),(0,r.yg)("td",{parentName:"tr",align:null},"286"),(0,r.yg)("td",{parentName:"tr",align:null},"285")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query4"),(0,r.yg)("td",{parentName:"tr",align:null},"11633"),(0,r.yg)("td",{parentName:"tr",align:null},"35148")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query5"),(0,r.yg)("td",{parentName:"tr",align:null},"641"),(0,r.yg)("td",{parentName:"tr",align:null},"22979")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query6"),(0,r.yg)("td",{parentName:"tr",align:null},"267"),(0,r.yg)("td",{parentName:"tr",align:null},"1351")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query7"),(0,r.yg)("td",{parentName:"tr",align:null},"468"),(0,r.yg)("td",{parentName:"tr",align:null},"517")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query8"),(0,r.yg)("td",{parentName:"tr",align:null},"263"),(0,r.yg)("td",{parentName:"tr",align:null},"591")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query9"),(0,r.yg)("td",{parentName:"tr",align:null},"4444"),(0,r.yg)("td",{parentName:"tr",align:null},"5430")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query10"),(0,r.yg)("td",{parentName:"tr",align:null},"418"),(0,r.yg)("td",{parentName:"tr",align:null},"3341")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query11"),(0,r.yg)("td",{parentName:"tr",align:null},"7246"),(0,r.yg)("td",{parentName:"tr",align:null},"23300")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query12"),(0,r.yg)("td",{parentName:"tr",align:null},"115"),(0,r.yg)("td",{parentName:"tr",align:null},"105")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query13"),(0,r.yg)("td",{parentName:"tr",align:null},"661"),(0,r.yg)("td",{parentName:"tr",align:null},"1719")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query14"),(0,r.yg)("td",{parentName:"tr",align:null},"13955"),(0,r.yg)("td",{parentName:"tr",align:null},"33254")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query15"),(0,r.yg)("td",{parentName:"tr",align:null},"474"),(0,r.yg)("td",{parentName:"tr",align:null},"1414")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query16"),(0,r.yg)("td",{parentName:"tr",align:null},"366"),(0,r.yg)("td",{parentName:"tr",align:null},"402")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query17"),(0,r.yg)("td",{parentName:"tr",align:null},"1097"),(0,r.yg)("td",{parentName:"tr",align:null},"2371")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query18"),(0,r.yg)("td",{parentName:"tr",align:null},"581"),(0,r.yg)("td",{parentName:"tr",align:null},"760")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query19"),(0,r.yg)("td",{parentName:"tr",align:null},"283"),(0,r.yg)("td",{parentName:"tr",align:null},"308")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query20"),(0,r.yg)("td",{parentName:"tr",align:null},"137"),(0,r.yg)("td",{parentName:"tr",align:null},"117")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query21"),(0,r.yg)("td",{parentName:"tr",align:null},"110"),(0,r.yg)("td",{parentName:"tr",align:null},"94")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query22"),(0,r.yg)("td",{parentName:"tr",align:null},"1996"),(0,r.yg)("td",{parentName:"tr",align:null},"2481")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query23"),(0,r.yg)("td",{parentName:"tr",align:null},"44826"),(0,r.yg)("td",{parentName:"tr",align:null},"77381")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query24"),(0,r.yg)("td",{parentName:"tr",align:null},"9873"),(0,r.yg)("td",{parentName:"tr",align:null},"23910")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query25"),(0,r.yg)("td",{parentName:"tr",align:null},"666"),(0,r.yg)("td",{parentName:"tr",align:null},"1021")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query26"),(0,r.yg)("td",{parentName:"tr",align:null},"221"),(0,r.yg)("td",{parentName:"tr",align:null},"213")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query27"),(0,r.yg)("td",{parentName:"tr",align:null},"490"),(0,r.yg)("td",{parentName:"tr",align:null},"544")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query28"),(0,r.yg)("td",{parentName:"tr",align:null},"4089"),(0,r.yg)("td",{parentName:"tr",align:null},"4593")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query29"),(0,r.yg)("td",{parentName:"tr",align:null},"768"),(0,r.yg)("td",{parentName:"tr",align:null},"1024")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query30"),(0,r.yg)("td",{parentName:"tr",align:null},"313"),(0,r.yg)("td",{parentName:"tr",align:null},"682")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query31"),(0,r.yg)("td",{parentName:"tr",align:null},"1847"),(0,r.yg)("td",{parentName:"tr",align:null},"2252")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query32"),(0,r.yg)("td",{parentName:"tr",align:null},"71"),(0,r.yg)("td",{parentName:"tr",align:null},"68")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query33"),(0,r.yg)("td",{parentName:"tr",align:null},"460"),(0,r.yg)("td",{parentName:"tr",align:null},"539")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query34"),(0,r.yg)("td",{parentName:"tr",align:null},"629"),(0,r.yg)("td",{parentName:"tr",align:null},"638")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query35"),(0,r.yg)("td",{parentName:"tr",align:null},"1660"),(0,r.yg)("td",{parentName:"tr",align:null},"10505")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query36"),(0,r.yg)("td",{parentName:"tr",align:null},"412"),(0,r.yg)("td",{parentName:"tr",align:null},"441")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query37"),(0,r.yg)("td",{parentName:"tr",align:null},"94"),(0,r.yg)("td",{parentName:"tr",align:null},"86")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query38"),(0,r.yg)("td",{parentName:"tr",align:null},"8804"),(0,r.yg)("td",{parentName:"tr",align:null},"8379")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query39"),(0,r.yg)("td",{parentName:"tr",align:null},"606"),(0,r.yg)("td",{parentName:"tr",align:null},"898")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query40"),(0,r.yg)("td",{parentName:"tr",align:null},"164"),(0,r.yg)("td",{parentName:"tr",align:null},"190")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query41"),(0,r.yg)("td",{parentName:"tr",align:null},"55"),(0,r.yg)("td",{parentName:"tr",align:null},"30")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query42"),(0,r.yg)("td",{parentName:"tr",align:null},"115"),(0,r.yg)("td",{parentName:"tr",align:null},"113")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query43"),(0,r.yg)("td",{parentName:"tr",align:null},"804"),(0,r.yg)("td",{parentName:"tr",align:null},"1332")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query44"),(0,r.yg)("td",{parentName:"tr",align:null},"1509"),(0,r.yg)("td",{parentName:"tr",align:null},"1520")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query45"),(0,r.yg)("td",{parentName:"tr",align:null},"1678"),(0,r.yg)("td",{parentName:"tr",align:null},"1306")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query46"),(0,r.yg)("td",{parentName:"tr",align:null},"1196"),(0,r.yg)("td",{parentName:"tr",align:null},"2167")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query47"),(0,r.yg)("td",{parentName:"tr",align:null},"2812"),(0,r.yg)("td",{parentName:"tr",align:null},"3859")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query48"),(0,r.yg)("td",{parentName:"tr",align:null},"559"),(0,r.yg)("td",{parentName:"tr",align:null},"1419")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query49"),(0,r.yg)("td",{parentName:"tr",align:null},"646"),(0,r.yg)("td",{parentName:"tr",align:null},"725")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query50"),(0,r.yg)("td",{parentName:"tr",align:null},"757"),(0,r.yg)("td",{parentName:"tr",align:null},"1299")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query51"),(0,r.yg)("td",{parentName:"tr",align:null},"6380"),(0,r.yg)("td",{parentName:"tr",align:null},"4954")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query52"),(0,r.yg)("td",{parentName:"tr",align:null},"128"),(0,r.yg)("td",{parentName:"tr",align:null},"123")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query53"),(0,r.yg)("td",{parentName:"tr",align:null},"396"),(0,r.yg)("td",{parentName:"tr",align:null},"391")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query54"),(0,r.yg)("td",{parentName:"tr",align:null},"388"),(0,r.yg)("td",{parentName:"tr",align:null},"8212")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query55"),(0,r.yg)("td",{parentName:"tr",align:null},"124"),(0,r.yg)("td",{parentName:"tr",align:null},"124")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query56"),(0,r.yg)("td",{parentName:"tr",align:null},"360"),(0,r.yg)("td",{parentName:"tr",align:null},"434")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query57"),(0,r.yg)("td",{parentName:"tr",align:null},"1811"),(0,r.yg)("td",{parentName:"tr",align:null},"2494")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query58"),(0,r.yg)("td",{parentName:"tr",align:null},"304"),(0,r.yg)("td",{parentName:"tr",align:null},"666")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query59"),(0,r.yg)("td",{parentName:"tr",align:null},"5758"),(0,r.yg)("td",{parentName:"tr",align:null},"7432")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query60"),(0,r.yg)("td",{parentName:"tr",align:null},"474"),(0,r.yg)("td",{parentName:"tr",align:null},"481")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query61"),(0,r.yg)("td",{parentName:"tr",align:null},"486"),(0,r.yg)("td",{parentName:"tr",align:null},"536")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query62"),(0,r.yg)("td",{parentName:"tr",align:null},"647"),(0,r.yg)("td",{parentName:"tr",align:null},"1082")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query63"),(0,r.yg)("td",{parentName:"tr",align:null},"358"),(0,r.yg)("td",{parentName:"tr",align:null},"303")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query64"),(0,r.yg)("td",{parentName:"tr",align:null},"3250"),(0,r.yg)("td",{parentName:"tr",align:null},"4968")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query65"),(0,r.yg)("td",{parentName:"tr",align:null},"5410"),(0,r.yg)("td",{parentName:"tr",align:null},"5971")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query66"),(0,r.yg)("td",{parentName:"tr",align:null},"484"),(0,r.yg)("td",{parentName:"tr",align:null},"603")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query67"),(0,r.yg)("td",{parentName:"tr",align:null},"26347"),(0,r.yg)("td",{parentName:"tr",align:null},"34052")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query68"),(0,r.yg)("td",{parentName:"tr",align:null},"1422"),(0,r.yg)("td",{parentName:"tr",align:null},"1428")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query69"),(0,r.yg)("td",{parentName:"tr",align:null},"654"),(0,r.yg)("td",{parentName:"tr",align:null},"808")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query70"),(0,r.yg)("td",{parentName:"tr",align:null},"2285"),(0,r.yg)("td",{parentName:"tr",align:null},"4462")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query71"),(0,r.yg)("td",{parentName:"tr",align:null},"650"),(0,r.yg)("td",{parentName:"tr",align:null},"1006")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query72"),(0,r.yg)("td",{parentName:"tr",align:null},"4324"),(0,r.yg)("td",{parentName:"tr",align:null},"4717")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query73"),(0,r.yg)("td",{parentName:"tr",align:null},"500"),(0,r.yg)("td",{parentName:"tr",align:null},"558")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query74"),(0,r.yg)("td",{parentName:"tr",align:null},"6678"),(0,r.yg)("td",{parentName:"tr",align:null},"14127")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query75"),(0,r.yg)("td",{parentName:"tr",align:null},"3734"),(0,r.yg)("td",{parentName:"tr",align:null},"6312")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query76"),(0,r.yg)("td",{parentName:"tr",align:null},"1835"),(0,r.yg)("td",{parentName:"tr",align:null},"1870")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query77"),(0,r.yg)("td",{parentName:"tr",align:null},"382"),(0,r.yg)("td",{parentName:"tr",align:null},"496")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query78"),(0,r.yg)("td",{parentName:"tr",align:null},"19923"),(0,r.yg)("td",{parentName:"tr",align:null},"23091")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query79"),(0,r.yg)("td",{parentName:"tr",align:null},"3061"),(0,r.yg)("td",{parentName:"tr",align:null},"4090")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query80"),(0,r.yg)("td",{parentName:"tr",align:null},"851"),(0,r.yg)("td",{parentName:"tr",align:null},"1559")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query81"),(0,r.yg)("td",{parentName:"tr",align:null},"565"),(0,r.yg)("td",{parentName:"tr",align:null},"960")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query82"),(0,r.yg)("td",{parentName:"tr",align:null},"242"),(0,r.yg)("td",{parentName:"tr",align:null},"221")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query83"),(0,r.yg)("td",{parentName:"tr",align:null},"254"),(0,r.yg)("td",{parentName:"tr",align:null},"415")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query84"),(0,r.yg)("td",{parentName:"tr",align:null},"203"),(0,r.yg)("td",{parentName:"tr",align:null},"131")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query85"),(0,r.yg)("td",{parentName:"tr",align:null},"364"),(0,r.yg)("td",{parentName:"tr",align:null},"444")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query86"),(0,r.yg)("td",{parentName:"tr",align:null},"651"),(0,r.yg)("td",{parentName:"tr",align:null},"931")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query87"),(0,r.yg)("td",{parentName:"tr",align:null},"8972"),(0,r.yg)("td",{parentName:"tr",align:null},"8554")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query88"),(0,r.yg)("td",{parentName:"tr",align:null},"4095"),(0,r.yg)("td",{parentName:"tr",align:null},"5202")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query89"),(0,r.yg)("td",{parentName:"tr",align:null},"508"),(0,r.yg)("td",{parentName:"tr",align:null},"480")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query90"),(0,r.yg)("td",{parentName:"tr",align:null},"233"),(0,r.yg)("td",{parentName:"tr",align:null},"322")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query91"),(0,r.yg)("td",{parentName:"tr",align:null},"174"),(0,r.yg)("td",{parentName:"tr",align:null},"159")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query92"),(0,r.yg)("td",{parentName:"tr",align:null},"62"),(0,r.yg)("td",{parentName:"tr",align:null},"59")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query93"),(0,r.yg)("td",{parentName:"tr",align:null},"1601"),(0,r.yg)("td",{parentName:"tr",align:null},"1618")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query94"),(0,r.yg)("td",{parentName:"tr",align:null},"297"),(0,r.yg)("td",{parentName:"tr",align:null},"297")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query95"),(0,r.yg)("td",{parentName:"tr",align:null},"1240"),(0,r.yg)("td",{parentName:"tr",align:null},"27354")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query96"),(0,r.yg)("td",{parentName:"tr",align:null},"508"),(0,r.yg)("td",{parentName:"tr",align:null},"847")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query97"),(0,r.yg)("td",{parentName:"tr",align:null},"5449"),(0,r.yg)("td",{parentName:"tr",align:null},"11528")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query98"),(0,r.yg)("td",{parentName:"tr",align:null},"382"),(0,r.yg)("td",{parentName:"tr",align:null},"287")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query99"),(0,r.yg)("td",{parentName:"tr",align:null},"1410"),(0,r.yg)("td",{parentName:"tr",align:null},"2147")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("strong",{parentName:"td"},"Total")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("strong",{parentName:"td"},"264028")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("strong",{parentName:"td"},"487990"))))),(0,r.yg)("h2",{id:"6-environmental-preparation"},"6. Environmental Preparation"),(0,r.yg)("p",null,"Please refer to the ",(0,r.yg)("a",{parentName:"p",href:"/docs/2.0/install/cluster-deployment/standard-deployment"},"official document")," to install and deploy Doris to obtain a normal running Doris cluster (at least 1 FE 1 BE, 1 FE 3 BE is recommended)."),(0,r.yg)("h2",{id:"7-data-preparation"},"7. Data Preparation"),(0,r.yg)("h3",{id:"71-download-and-install-tpc-ds-data-generation-tool"},"7.1 Download and Install TPC-DS Data Generation Tool"),(0,r.yg)("p",null,"Execute the following script to download and compile the ",(0,r.yg)("a",{parentName:"p",href:"https://github.com/apache/doris/tree/master/tools/tpcds-tools"},"tpcds-tools")," tool."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-shell"},"sh bin/build-tpcds-dbgen.sh\n")),(0,r.yg)("h3",{id:"72-generating-the-tpc-ds-test-set"},"7.2 Generating the TPC-DS Test Set"),(0,r.yg)("p",null,"Execute the following script to generate the TPC-H dataset:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-shell"},"sh bin/gen-tpcds-data.sh -s 1000\n")),(0,r.yg)("blockquote",null,(0,r.yg)("p",{parentName:"blockquote"},"Note 1: Check the script help via ",(0,r.yg)("inlineCode",{parentName:"p"},"sh gen-tpcds-data.sh -h"),"."),(0,r.yg)("p",{parentName:"blockquote"},"Note 2: The data will be generated under the ",(0,r.yg)("inlineCode",{parentName:"p"},"tpcds-data/")," directory with the suffix ",(0,r.yg)("inlineCode",{parentName:"p"},".dat"),". The total file size is about 1000GB and may need a few minutes to an hour to generate."),(0,r.yg)("p",{parentName:"blockquote"},"Note 3: A standard test data set of 100G is generated by default.")),(0,r.yg)("h3",{id:"73-create-table"},"7.3 Create Table"),(0,r.yg)("h4",{id:"731-prepare-the-doris-clusterconf-file"},"7.3.1 Prepare the ",(0,r.yg)("inlineCode",{parentName:"h4"},"doris-cluster.conf")," File"),(0,r.yg)("p",null,"Before import the script, you need to write the FE\u2019s ip port and other information in the ",(0,r.yg)("inlineCode",{parentName:"p"},"doris-cluster.conf")," file."),(0,r.yg)("p",null,"The file is located under ",(0,r.yg)("inlineCode",{parentName:"p"},"${DORIS_HOME}/tools/tpcds-tools/conf/")," ."),(0,r.yg)("p",null,"The content of the file includes FE's ip, HTTP port, user name, password and the DB name of the data to be imported:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-shell"},"# Any of FE host\nexport FE_HOST='127.0.0.1'\n# http_port in fe.conf\nexport FE_HTTP_PORT=8030\n# query_port in fe.conf\nexport FE_QUERY_PORT=9030\n# Doris username\nexport USER='root'\n# Doris password\nexport PASSWORD=''\n# The database where TPC-H tables located\nexport DB='tpcds'\n")),(0,r.yg)("h4",{id:"execute-the-following-script-to-generate-and-create-tpc-h-table"},"Execute the Following Script to Generate and Create TPC-H Table"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-shell"},"sh bin/create-tpcds-tables.sh -s 1000\n")),(0,r.yg)("p",null,"Or copy the table creation statement in ",(0,r.yg)("a",{parentName:"p",href:"https://github.com/apache/doris/blob/master/tools/tpcds-tools/ddl/create-tpcds-tables-sf1000.sql"},"create-tpcds-tables.sql")," and excute it in Doris."),(0,r.yg)("h3",{id:"74-import-data"},"7.4 Import Data"),(0,r.yg)("p",null,"Please perform data import with the following command:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-shell"},"sh bin/load-tpcds-data.sh\n")),(0,r.yg)("h3",{id:"75-query-test"},"7.5 Query Test"),(0,r.yg)("h4",{id:"751-executing-query-scripts"},"7.5.1 Executing Query Scripts"),(0,r.yg)("p",null,"Execute the above test SQL or execute the following command"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"sh bin/run-tpcds-queries.sh -s 1000\n")),(0,r.yg)("h4",{id:"752-single-sql-execution"},"7.5.2 Single SQL Execution"),(0,r.yg)("p",null,"You can also retrieve the latest SQL from the code repository. The address for the latest test query statements of ",(0,r.yg)("a",{parentName:"p",href:"https://github.com/apache/doris/tree/master/tools/tpcds-tools/queries/sf1000"},"TPC-DS"),"."))}m.isMDXComponent=!0},904198:(t,e,a)=>{a.d(e,{A:()=>n});const n=a.p+"assets/images/tpcds_2.1-db834ed5c09bb01e81613338c4232bc8.png"}}]);