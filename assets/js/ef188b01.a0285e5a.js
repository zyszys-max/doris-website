"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([[381738],{15680:(e,t,n)=>{n.d(t,{xA:()=>u,yg:()=>y});var a=n(296540);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},u=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},d="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),d=p(n),m=r,y=d["".concat(s,".").concat(m)]||d[m]||c[m]||o;return n?a.createElement(y,l(l({ref:t},u),{},{components:n})):a.createElement(y,l({ref:t},u))}));function y(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,l=new Array(o);l[0]=m;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i[d]="string"==typeof e?e:r,l[1]=i;for(var p=2;p<o;p++)l[p]=n[p];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},536607:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>c,frontMatter:()=>o,metadata:()=>i,toc:()=>p});var a=n(58168),r=(n(296540),n(15680));const o={title:"Select Into Outfile",language:"en"},l=void 0,i={unversionedId:"data-operate/export/outfile",id:"data-operate/export/outfile",title:"Select Into Outfile",description:"\x3c!--",source:"@site/docs/data-operate/export/outfile.md",sourceDirName:"data-operate/export",slug:"/data-operate/export/outfile",permalink:"/docs/dev/data-operate/export/outfile",draft:!1,tags:[],version:"current",frontMatter:{title:"Select Into Outfile",language:"en"},sidebar:"docs",previous:{title:"Export",permalink:"/docs/dev/data-operate/export/export-manual"},next:{title:"MySQL Dump",permalink:"/docs/dev/data-operate/export/export-with-mysql-dump"}},s={},p=[{value:"Overview",id:"overview",level:2},{value:"Supported Export Formats",id:"supported-export-formats",level:3},{value:"Example",id:"example",level:3},{value:"Export File Column Type Mapping",id:"export-file-column-type-mapping",level:2},{value:"Examples",id:"examples",level:2},{value:"Export to HDFS",id:"export-to-hdfs",level:3},{value:"Export to S3",id:"export-to-s3",level:3},{value:"Export to Local File System",id:"export-to-local-file-system",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Generate Export Success Indicator File",id:"generate-export-success-indicator-file",level:3},{value:"Concurrent Export",id:"concurrent-export",level:3},{value:"Clear Export Directory Before Exporting",id:"clear-export-directory-before-exporting",level:3},{value:"Set Export File Size",id:"set-export-file-size",level:3},{value:"Considerations",id:"considerations",level:2},{value:"Appendix",id:"appendix",level:2},{value:"Concurrent Export Principles",id:"concurrent-export-principles",level:3}],u={toc:p},d="wrapper";function c(e){let{components:t,...n}=e;return(0,r.yg)(d,(0,a.A)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,r.yg)("p",null,"This document introduces how to use the ",(0,r.yg)("inlineCode",{parentName:"p"},"SELECT INTO OUTFILE")," command to export query results."),(0,r.yg)("p",null,"For a detailed introduction to the ",(0,r.yg)("inlineCode",{parentName:"p"},"SELECT INTO OUTFILE")," command, refer to: ",(0,r.yg)("a",{parentName:"p",href:"/docs/dev/sql-manual/sql-statements/Data-Manipulation-Statements/OUTFILE"},"SELECT INTO OUTFILE"),"."),(0,r.yg)("h2",{id:"overview"},"Overview"),(0,r.yg)("p",null,"The ",(0,r.yg)("inlineCode",{parentName:"p"},"SELECT INTO OUTFILE")," command exports the result data of the ",(0,r.yg)("inlineCode",{parentName:"p"},"SELECT")," statement to a target storage system, such as object storage, HDFS, or the local file system, in a specified file format."),(0,r.yg)("p",null,(0,r.yg)("inlineCode",{parentName:"p"},"SELECT INTO OUTFILE")," is a synchronous command, meaning it completes when the command returns. If successful, it returns information about the number, size, and paths of the exported files. If it fails, it returns error information."),(0,r.yg)("p",null,"For guidance on choosing between ",(0,r.yg)("inlineCode",{parentName:"p"},"SELECT INTO OUTFILE")," and ",(0,r.yg)("inlineCode",{parentName:"p"},"EXPORT"),", see the ",(0,r.yg)("a",{parentName:"p",href:"/docs/dev/data-operate/export/export-overview"},"Export Overview"),"."),(0,r.yg)("h3",{id:"supported-export-formats"},"Supported Export Formats"),(0,r.yg)("p",null,(0,r.yg)("inlineCode",{parentName:"p"},"SELECT INTO OUTFILE")," currently supports the following export formats:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Parquet"),(0,r.yg)("li",{parentName:"ul"},"ORC"),(0,r.yg)("li",{parentName:"ul"},"CSV"),(0,r.yg)("li",{parentName:"ul"},"CSV with column names (",(0,r.yg)("inlineCode",{parentName:"li"},"csv_with_names"),")"),(0,r.yg)("li",{parentName:"ul"},"CSV with column names and types (",(0,r.yg)("inlineCode",{parentName:"li"},"csv_with_names_and_types"),")")),(0,r.yg)("p",null,"Compressed formats are not supported."),(0,r.yg)("h3",{id:"example"},"Example"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sql"},'mysql> SELECT * FROM tbl1 LIMIT 10 INTO OUTFILE "file:///home/work/path/result_";\n+------------+-----------+----------+--------------------------------------------------------------------+\n| FileNumber | TotalRows | FileSize | URL                                                                |\n+------------+-----------+----------+--------------------------------------------------------------------+\n|          1 |         2 |        8 | file:///192.168.1.10/home/work/path/result_{fragment_instance_id}_ |\n+------------+-----------+----------+--------------------------------------------------------------------+\n')),(0,r.yg)("p",null,"Explanation of the returned results:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"FileNumber"),": The number of generated files."),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"TotalRows"),": The number of rows in the result set."),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"FileSize"),": The total size of the exported files in bytes."),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"URL"),": The prefix of the exported file paths. Multiple files will be numbered sequentially with suffixes ",(0,r.yg)("inlineCode",{parentName:"li"},"_0"),", ",(0,r.yg)("inlineCode",{parentName:"li"},"_1"),", etc.")),(0,r.yg)("h2",{id:"export-file-column-type-mapping"},"Export File Column Type Mapping"),(0,r.yg)("p",null,(0,r.yg)("inlineCode",{parentName:"p"},"SELECT INTO OUTFILE"),' supports exporting to Parquet and ORC file formats. Parquet and ORC have their own data types, and Doris can automatically map its data types to corresponding Parquet and ORC data types. Refer to the "Export File Column Type Mapping" section in the ',(0,r.yg)("a",{parentName:"p",href:"/docs/dev/data-operate/export/export-overview"},"Export Overview")," document for the specific mapping relationships."),(0,r.yg)("h2",{id:"examples"},"Examples"),(0,r.yg)("h3",{id:"export-to-hdfs"},"Export to HDFS"),(0,r.yg)("p",null,"Export query results to the ",(0,r.yg)("inlineCode",{parentName:"p"},"hdfs://path/to/")," directory, specifying the export format as PARQUET:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sql"},'SELECT c1, c2, c3 FROM tbl\nINTO OUTFILE "hdfs://${host}:${fileSystem_port}/path/to/result_"\nFORMAT AS PARQUET\nPROPERTIES\n(\n    "fs.defaultFS" = "hdfs://ip:port",\n    "hadoop.username" = "hadoop"\n);\n')),(0,r.yg)("p",null,"If HDFS is configured for high availability, provide HA information, such as:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sql"},'SELECT c1, c2, c3 FROM tbl\nINTO OUTFILE "hdfs://HDFS8000871/path/to/result_"\nFORMAT AS PARQUET\nPROPERTIES\n(\n    "fs.defaultFS" = "hdfs://HDFS8000871",\n    "hadoop.username" = "hadoop",\n    "dfs.nameservices" = "your-nameservices",\n    "dfs.ha.namenodes.your-nameservices" = "nn1,nn2",\n    "dfs.namenode.rpc-address.HDFS8000871.nn1" = "ip:port",\n    "dfs.namenode.rpc-address.HDFS8000871.nn2" = "ip:port",\n    "dfs.client.failover.proxy.provider.HDFS8000871" = "org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider"\n);\n')),(0,r.yg)("p",null,"If the Hadoop cluster is configured for high availability and Kerberos authentication is enabled, you can refer to the following SQL statement:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sql"},'SELECT * FROM tbl\nINTO OUTFILE "hdfs://path/to/result_"\nFORMAT AS PARQUET\nPROPERTIES\n(\n    "fs.defaultFS"="hdfs://hacluster/",\n    "hadoop.username" = "hadoop",\n    "dfs.nameservices"="hacluster",\n    "dfs.ha.namenodes.hacluster"="n1,n2",\n    "dfs.namenode.rpc-address.hacluster.n1"="192.168.0.1:8020",\n    "dfs.namenode.rpc-address.hacluster.n2"="192.168.0.2:8020",\n    "dfs.client.failover.proxy.provider.hacluster"="org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider",\n    "dfs.namenode.kerberos.principal"="hadoop/_HOST@REALM.COM",\n    "hadoop.security.authentication"="kerberos",\n    "hadoop.kerberos.principal"="doris_test@REALM.COM",\n    "hadoop.kerberos.keytab"="/path/to/doris_test.keytab"\n);\n')),(0,r.yg)("h3",{id:"export-to-s3"},"Export to S3"),(0,r.yg)("p",null,"Export query results to the S3 storage at ",(0,r.yg)("inlineCode",{parentName:"p"},"s3://path/to/")," directory, specifying the export format as ORC. Provide ",(0,r.yg)("inlineCode",{parentName:"p"},"sk"),", ",(0,r.yg)("inlineCode",{parentName:"p"},"ak"),", and other necessary information:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sql"},'SELECT * FROM tbl\nINTO OUTFILE "s3://path/to/result_"\nFORMAT AS ORC\nPROPERTIES(\n    "s3.endpoint" = "https://xxx",\n    "s3.region" = "ap-beijing",\n    "s3.access_key"= "your-ak",\n    "s3.secret_key" = "your-sk"\n);\n')),(0,r.yg)("h3",{id:"export-to-local-file-system"},"Export to Local File System"),(0,r.yg)("blockquote",null,(0,r.yg)("p",{parentName:"blockquote"},"To export to the local file system, add ",(0,r.yg)("inlineCode",{parentName:"p"},"enable_outfile_to_local=true")," in ",(0,r.yg)("inlineCode",{parentName:"p"},"fe.conf")," and restart FE.")),(0,r.yg)("p",null,"Export query results to the BE's ",(0,r.yg)("inlineCode",{parentName:"p"},"file:///path/to/")," directory, specifying the export format as CSV, with a comma as the column separator:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sql"},'SELECT k1 FROM tbl1 UNION SELECT k2 FROM tbl1\nINTO OUTFILE "file:///path/to/result_"\nFORMAT AS CSV\nPROPERTIES(\n    "column_separator" = ","\n);\n')),(0,r.yg)("blockquote",null,(0,r.yg)("p",{parentName:"blockquote"},"Note:\nExporting to local files is not suitable for public cloud users and is intended for private deployment users only. By default, users have full control over cluster nodes. Doris does not check the validity of the export path provided by the user. If the Doris process user does not have write permissions for the path, or the path does not exist, an error will be reported. Additionally, for security reasons, if a file with the same name already exists at the path, the export will fail. Doris does not manage exported local files or check disk space. Users need to manage these files themselves, including cleanup and other tasks.")),(0,r.yg)("h2",{id:"best-practices"},"Best Practices"),(0,r.yg)("h3",{id:"generate-export-success-indicator-file"},"Generate Export Success Indicator File"),(0,r.yg)("p",null,"The ",(0,r.yg)("inlineCode",{parentName:"p"},"SELECT INTO OUTFILE")," command is synchronous, meaning that the task connection could be interrupted during SQL execution, leaving uncertainty about whether the export completed successfully or whether the data is complete. You can use the ",(0,r.yg)("inlineCode",{parentName:"p"},"success_file_name")," parameter to generate an indicator file upon successful export."),(0,r.yg)("p",null,"Similar to Hive, users can determine whether the export completed successfully and whether the files in the export directory are complete by checking for the presence of the file specified by the ",(0,r.yg)("inlineCode",{parentName:"p"},"success_file_name")," parameter."),(0,r.yg)("p",null,"For example, exporting the results of a ",(0,r.yg)("inlineCode",{parentName:"p"},"SELECT")," statement to Tencent Cloud COS ",(0,r.yg)("inlineCode",{parentName:"p"},"s3://${bucket_name}/path/my_file_"),", specifying the export format as CSV, and setting the success indicator file name to ",(0,r.yg)("inlineCode",{parentName:"p"},"SUCCESS"),":"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sql"},'SELECT k1, k2, v1 FROM tbl1 LIMIT 100000\nINTO OUTFILE "s3://my_bucket/path/my_file_"\nFORMAT AS CSV\nPROPERTIES\n(\n    "s3.endpoint" = "${endpoint}",\n    "s3.region" = "ap-beijing",\n    "s3.access_key"= "ak",\n    "s3.secret_key" = "sk",\n    "column_separator" = ",",\n    "line_delimiter" = "\\n",\n    "success_file_name" = "SUCCESS"\n)\n')),(0,r.yg)("p",null,"Upon completion, an additional file named ",(0,r.yg)("inlineCode",{parentName:"p"},"SUCCESS")," will be generated."),(0,r.yg)("h3",{id:"concurrent-export"},"Concurrent Export"),(0,r.yg)("p",null,"By default, the query results in the ",(0,r.yg)("inlineCode",{parentName:"p"},"SELECT")," section are aggregated to a single BE node, which exports data single-threadedly. However, in some cases (e.g., queries without an ",(0,r.yg)("inlineCode",{parentName:"p"},"ORDER BY")," clause), concurrent export can be enabled to have multiple BE nodes export data simultaneously, improving export performance."),(0,r.yg)("p",null,"Here\u2019s an example demonstrating how to enable concurrent export:"),(0,r.yg)("ol",null,(0,r.yg)("li",{parentName:"ol"},"Enable the concurrent export session variable:")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sql"},"mysql> SET enable_parallel_outfile = true;\n")),(0,r.yg)("ol",{start:2},(0,r.yg)("li",{parentName:"ol"},"Execute the export command:")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sql"},'mysql> SELECT * FROM demo.tbl\n    -> INTO OUTFILE "file:///path/to/ftw/export/exp_"\n    -> FORMAT AS PARQUET;\n+------------+-----------+----------+-------------------------------------------------------------------------------+\n| FileNumber | TotalRows | FileSize | URL                                                                           |\n+------------+-----------+----------+-------------------------------------------------------------------------------+\n|          1 |    104494 |  7998308 | file:///127.0.0.1/path/to/exp_1f850179e684476b-9bf001a6bf96d7d3_ |\n|          1 |    104984 |  8052491 | file:///127.0.0.1/path/to/exp_1f850179e684476b-9bf001a6bf96d7d5_ |\n|          1 |    104345 |  7981406 | file:///127.0.0.1/path/to/exp_1f850179e684476b-9bf001a6bf96d7d1_ |\n|          1 |    104034 |  7977301 | file:///127.0.0.1/path/to/exp_1f850179e684476b-9bf001a6bf96d7d4_ |\n|          1 |    104238 |  7979757 | file:///127.0.0.1/path/to/exp_1f850179e684476b-9bf001a6bf96d7d2_ |\n|          1 |    159450 | 11870222 | file:///127.0.0.1/path/to/exp_1f850179e684476b-9bf001a6bf96d7d0_ |\n|          1 |    209691 | 16082100 | file:///127.0.0.1/path/to/exp_1f850179e684476b-9bf001a6bf96d7ce_ |\n|          1 |    208769 | 16004096 | file:///127.0.0.1/path/to/exp_1f850179e684476b-9bf001a6bf96d7cf_ |\n+------------+-----------+----------+-------------------------------------------------------------------------------+\n')),(0,r.yg)("p",null,"With concurrent export successfully enabled, the result may consist of multiple rows, indicating that multiple threads exported data concurrently."),(0,r.yg)("p",null,"Adding an ",(0,r.yg)("inlineCode",{parentName:"p"},"ORDER BY")," clause to the query prevents concurrent export, as the top-level sorting node necessitates single-threaded export:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sql"},'mysql> SELECT * FROM demo.tbl ORDER BY id\n    -> INTO OUTFILE "file:///path/to/ftw/export/exp_"\n    -> FORMAT AS PARQUET;\n+------------+-----------+----------+-------------------------------------------------------------------------------+\n| FileNumber | TotalRows | FileSize | URL                                                                           |\n+------------+-----------+----------+-------------------------------------------------------------------------------+\n|          1 |   1100005 | 80664607 | file:///127.0.0.1/mnt/disk2/ftw/export/exp_20c5461055774128-826256c0cfb3d8fc_ |\n+------------+-----------+----------+-------------------------------------------------------------------------------+\n')),(0,r.yg)("p",null,"Here, the result is a single row, indicating no concurrent export was triggered."),(0,r.yg)("p",null,"Refer to the appendix for more details on concurrent export principles."),(0,r.yg)("h3",{id:"clear-export-directory-before-exporting"},"Clear Export Directory Before Exporting"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sql"},'SELECT * FROM tbl1\nINTO OUTFILE "s3://my_bucket/export/my_file_"\nFORMAT AS CSV\nPROPERTIES\n(\n    "s3.endpoint" = "${endpoint}",\n    "s3.region" = "region",\n    "s3.access_key"= "ak",\n    "s3.secret_key" = "sk",\n    "column_separator" = ",",\n    "line_delimiter" = "\\n",\n    "delete_existing_files" = "true"\n)\n')),(0,r.yg)("p",null,"If ",(0,r.yg)("inlineCode",{parentName:"p"},'"delete_existing_files" = "true"')," is set, the export job will first delete all files and directories under ",(0,r.yg)("inlineCode",{parentName:"p"},"s3://my_bucket/export/"),", then export data to that directory."),(0,r.yg)("blockquote",null,(0,r.yg)("p",{parentName:"blockquote"},"Note:\nTo use the ",(0,r.yg)("inlineCode",{parentName:"p"},"delete_existing_files")," parameter, add ",(0,r.yg)("inlineCode",{parentName:"p"},"enable_delete_existing_files = true")," to ",(0,r.yg)("inlineCode",{parentName:"p"},"fe.conf")," and restart FE. This parameter is potentially dangerous and should only be used in a testing environment.")),(0,r.yg)("h3",{id:"set-export-file-size"},"Set Export File Size"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sql"},'SELECT * FROM tbl\nINTO OUTFILE "s3://path/to/result_"\nFORMAT AS ORC\nPROPERTIES(\n    "s3.endpoint" = "https://xxx",\n    "s3.region" = "ap-beijing",\n    "s3.access_key"= "your-ak",\n    "s3.secret_key" = "your-sk",\n    "max_file_size" = "2048MB"\n);\n')),(0,r.yg)("p",null,"Specifying ",(0,r.yg)("inlineCode",{parentName:"p"},'"max_file_size" = "2048MB"')," ensures that the final file size does not exceed 2GB. If the total size exceeds 2GB, multiple files will be generated."),(0,r.yg)("h2",{id:"considerations"},"Considerations"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Export Data Volume and Efficiency\nThe ",(0,r.yg)("inlineCode",{parentName:"li"},"SELECT INTO OUTFILE")," function executes a SQL query. Without concurrent export, a single BE node and thread export the query results. The total export time includes both the query execution time and the result set write-out time. Enabling concurrent export can reduce the export time."),(0,r.yg)("li",{parentName:"ul"},"Export Timeout\nThe export command shares the same timeout as the query. If the data volume is large and causes the export to timeout, you can extend the query timeout by setting the session variable ",(0,r.yg)("inlineCode",{parentName:"li"},"query_timeout"),"."),(0,r.yg)("li",{parentName:"ul"},"Export File Management\nDoris does not manage exported files, whether successfully exported or remaining from failed exports. Users must handle these files themselves.\nAdditionally, ",(0,r.yg)("inlineCode",{parentName:"li"},"SELECT INTO OUTFILE")," does not check for the existence of files or file paths. Whether ",(0,r.yg)("inlineCode",{parentName:"li"},"SELECT INTO OUTFILE")," automatically creates paths or overwrites existing files depends entirely on the semantics of the remote storage system."),(0,r.yg)("li",{parentName:"ul"},"Empty Result Sets\nExporting an empty result set still generates an empty file."),(0,r.yg)("li",{parentName:"ul"},"File Splitting\nFile splitting ensures that a single row of data is stored completely in one file. Thus, the file size may not exactly equal ",(0,r.yg)("inlineCode",{parentName:"li"},"max_file_size"),"."),(0,r.yg)("li",{parentName:"ul"},"Non-visible Character Functions\nFor functions outputting non-visible characters (e.g., BITMAP, HLL types), CSV output is ",(0,r.yg)("inlineCode",{parentName:"li"},"\\N"),", and Parquet/ORC output is NULL.\nCurrently, some geographic functions like ",(0,r.yg)("inlineCode",{parentName:"li"},"ST_Point")," output VARCHAR but with encoded binary characters, causing garbled output. Use ",(0,r.yg)("inlineCode",{parentName:"li"},"ST_AsText")," for geographic functions.")),(0,r.yg)("h2",{id:"appendix"},"Appendix"),(0,r.yg)("h3",{id:"concurrent-export-principles"},"Concurrent Export Principles"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"Principle Overview"),(0,r.yg)("p",{parentName:"li"}," Doris is a high-performance, real-time analytical database based on the MPP (Massively Parallel Processing) architecture. MPP divides large datasets into small chunks and processes them in parallel across multiple nodes.\nConcurrent export in ",(0,r.yg)("inlineCode",{parentName:"p"},"SELECT INTO OUTFILE")," leverages this parallel processing capability, allowing multiple BE nodes to export parts of the result set simultaneously.")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"How to Determine Concurrent Export Eligibility"),(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"Ensure Session Variable is Enabled: ",(0,r.yg)("inlineCode",{parentName:"p"},"set enable_parallel_outfile = true;"))),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"Check Execution Plan with ",(0,r.yg)("inlineCode",{parentName:"p"},"EXPLAIN"),":"),(0,r.yg)("pre",{parentName:"li"},(0,r.yg)("code",{parentName:"pre",className:"language-sql"},'mysql> EXPLAIN SELECT ... INTO OUTFILE "s3://xxx" ...;\n+-----------------------------------------------------------------------------+\n| Explain String                                                              |\n+-----------------------------------------------------------------------------+\n| PLAN FRAGMENT 0                                                             |\n|  OUTPUT EXPRS:<slot 2> | <slot 3> | <slot 4> | <slot 5>                     |\n|   PARTITION: UNPARTITIONED                                                  |\n|                                                                             |\n|   RESULT SINK                                                               |\n|                                                                             |\n|   1:EXCHANGE                                                                |\n|                                                                             |\n| PLAN FRAGMENT 1                                                             |\n|  OUTPUT EXPRS:`k1`\n')))),(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("inlineCode",{parentName:"p"},"k2"),"                                                   |\n|   PARTITION: HASH",(0,r.yg)("em",{parentName:"p"},"PARTITIONED: ",(0,r.yg)("inlineCode",{parentName:"em"},"default_cluster:test"),".",(0,r.yg)("inlineCode",{parentName:"em"},"multi_tablet"),".",(0,r.yg)("inlineCode",{parentName:"em"},"k1"),"   |\n|                                                                             |\n|   RESULT FILE SINK                                                          |\n|   FILE PATH: s3://ml-bd-repo/bpit_test/outfile_1951"),"                        |\n|   STORAGE TYPE: S3                                                          |\n|                                                                             |\n|   0:OlapScanNode                                                            |\n|      TABLE: multi_tablet                                                    |\n+-----------------------------------------------------------------------------+"),(0,r.yg)("pre",{parentName:"li"},(0,r.yg)("code",{parentName:"pre"},"\nThe `EXPLAIN` command returns the query plan. If `RESULT FILE SINK` appears in `PLAN FRAGMENT 1`, the query can be exported concurrently. If it appears in `PLAN FRAGMENT 0`, concurrent export is not possible.\n"))))),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"Export Concurrency"),(0,r.yg)("p",{parentName:"li"},"  When concurrent export conditions are met, the export task's concurrency is determined by: ",(0,r.yg)("inlineCode",{parentName:"p"},"BE nodes * parallel_fragment_exec_instance_num"),"."))))}c.isMDXComponent=!0}}]);