"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([[16211],{15680:(e,t,a)=>{a.d(t,{xA:()=>p,yg:()=>h});var n=a(296540);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),c=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},p=function(e){var t=c(e.components);return n.createElement(s.Provider,{value:t},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),d=c(a),m=r,h=d["".concat(s,".").concat(m)]||d[m]||u[m]||o;return a?n.createElement(h,i(i({ref:t},p),{},{components:a})):n.createElement(h,i({ref:t},p))}));function h(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,i=new Array(o);i[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[d]="string"==typeof e?e:r,i[1]=l;for(var c=2;c<o;c++)i[c]=a[c];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},432932:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>u,frontMatter:()=>o,metadata:()=>l,toc:()=>c});var n=a(58168),r=(a(296540),a(15680));const o={title:"Verify the Apache Release Version",language:"en"},i=void 0,l={unversionedId:"release-and-verify/release-verify",id:"release-and-verify/release-verify",title:"Verify the Apache Release Version",description:"\x3c!--",source:"@site/community/release-and-verify/release-verify.md",sourceDirName:"release-and-verify",slug:"/release-and-verify/release-verify",permalink:"/community/release-and-verify/release-verify",draft:!1,tags:[],version:"current",frontMatter:{title:"Verify the Apache Release Version",language:"en"},sidebar:"community",previous:{title:"Complete Release",permalink:"/community/release-and-verify/release-complete"},next:{title:"Security",permalink:"/community/security"}},s={},c=[{value:"1. download the source package, signature file, checksum file and KEYS",id:"1-download-the-source-package-signature-file-checksum-file-and-keys",level:2},{value:"2. Check signature and checksum value",id:"2-check-signature-and-checksum-value",level:2},{value:"3. Verify the source protocol header",id:"3-verify-the-source-protocol-header",level:2},{value:"4. Verify compilation",id:"4-verify-compilation",level:2},{value:"5. Vote",id:"5-vote",level:2}],p={toc:c},d="wrapper";function u(e){let{components:t,...a}=e;return(0,r.yg)(d,(0,n.A)({},p,a,{components:t,mdxType:"MDXLayout"}),(0,r.yg)("h1",{id:"validate-apache-releases"},"Validate Apache Releases"),(0,r.yg)("p",null,"This validation step can be used for validation during release polling and also for validation of released versions."),(0,r.yg)("p",null,"The following steps can be followed to verify."),(0,r.yg)("ol",{className:"contains-task-list"},(0,r.yg)("li",{parentName:"ol",className:"task-list-item"},(0,r.yg)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","The download link is legal."),(0,r.yg)("li",{parentName:"ol",className:"task-list-item"},(0,r.yg)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","The PGP signature are valid."),(0,r.yg)("li",{parentName:"ol",className:"task-list-item"},(0,r.yg)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","The source code matches the current release version."),(0,r.yg)("li",{parentName:"ol",className:"task-list-item"},(0,r.yg)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","The LICENSE and NOTICE files are correct."),(0,r.yg)("li",{parentName:"ol",className:"task-list-item"},(0,r.yg)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","All files carry the necessary protocol header."),(0,r.yg)("li",{parentName:"ol",className:"task-list-item"},(0,r.yg)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","The compiled content is not included in the source package."),(0,r.yg)("li",{parentName:"ol",className:"task-list-item"},(0,r.yg)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","The compilation can be executed smoothly.")),(0,r.yg)("p",null,"Here we use the verification of the Doris Core version as an example. Note that other components have their corresponding names changed."),(0,r.yg)("h2",{id:"1-download-the-source-package-signature-file-checksum-file-and-keys"},"1. download the source package, signature file, checksum file and KEYS"),(0,r.yg)("p",null,"Download all relevant files, using a.b.c-incubating as an example:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-shell"},"wget https://www.apache.org/dyn/mirrors/mirrors.cgi?action=download&filename=/incubator/doris/a.b.c-incubating/apache-doris-a.b.c-incubating-src.tar.gz\n\nwget https://www.apache.org/dist/incubator/doris/a.b.c-incubating/apache-doris-a.b.c-incubating-src.tar.gz.sha512\n\nwget https://www.apache.org/dist/incubator/doris/a.b.c-incubating/apache-doris-a.b.c-incubating-src.tar.gz.asc\n\nwget https://downloads.apache.org/incubator/doris/KEYS\n")),(0,r.yg)("blockquote",null,(0,r.yg)("p",{parentName:"blockquote"},"In case of poll verification, you need to get the relevant files from the svn address provided in the email.")),(0,r.yg)("h2",{id:"2-check-signature-and-checksum-value"},"2. Check signature and checksum value"),(0,r.yg)("p",null,"It is recommended to use GunPG, which can be installed by the following command."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-shell"},"CentOS: yum install gnupg\nUbuntu: apt-get install gnupg\n")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-shell"},"gpg --import KEYS\ngpg --verify apache-doris-a.b.c-incubating-src.tar.gz.asc apache-doris-a.b.c-incubating-src.tar.gz\nsha512sum --check apache-doris-a.b.c-incubating-src.tar.gz.sha512\n")),(0,r.yg)("blockquote",null,(0,r.yg)("p",{parentName:"blockquote"},"Note: If gpg --import reports ",(0,r.yg)("strong",{parentName:"p"},"no valid user IDs"),", it may be that the gpg version does not match. You can upgrade the version to 2.2.x or above")),(0,r.yg)("h2",{id:"3-verify-the-source-protocol-header"},"3. Verify the source protocol header"),(0,r.yg)("p",null,"Here we use ",(0,r.yg)("a",{parentName:"p",href:"https://github.com/apache/skywalking-eyes"},"skywalking-eyes")," for protocol validation."),(0,r.yg)("p",null,"Go to the root of the source code and execute:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"sudo docker run -it --rm -v $(pwd):/github/workspace apache/skywalking-eyes header check\n")),(0,r.yg)("p",null,"The results of the run are as follows."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"INFO GITHUB_TOKEN is not set, license-eye won't comment on the pull request\nINFO Loading configuration from file: .licenserc.yaml\nINFO Totally checked 5611 files, valid: 3926, invalid: 0, ignored: 1685, fixed: 0\n")),(0,r.yg)("p",null,"If invalid is 0, then the validation passes."),(0,r.yg)("h2",{id:"4-verify-compilation"},"4. Verify compilation"),(0,r.yg)("p",null,"Please see the compilation documentation of each component to verify the compilation."),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"For Doris Core, see ",(0,r.yg)("a",{parentName:"li",href:"/docs/install/source-install/compilation"},"compilation documentation")),(0,r.yg)("li",{parentName:"ul"},"Flink Doris Connector, see ",(0,r.yg)("a",{parentName:"li",href:"/docs/ecosystem/flink-doris-connector"},"compilation documentation")),(0,r.yg)("li",{parentName:"ul"},"Spark Doris Connector, see ",(0,r.yg)("a",{parentName:"li",href:"/docs/ecosystem/spark-doris-connector"},"compilation documentation"))),(0,r.yg)("h2",{id:"5-vote"},"5. Vote"),(0,r.yg)("p",null,"See the ",(0,r.yg)("a",{parentName:"p",href:"(https://www.apache.org/foundation/voting.html)"},"ASF voting process")," page for general information about voting."),(0,r.yg)("p",null,"After the verification is completed, the following template can be used to send voting emails to the dev@doris:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"+1 (binding) or +1 (non-binding)\n\nMy Apache ID(optional): morningman\n\nI checked:\n\n[x] The download link is legal.\n[x] The PGP signature is valid.\n[x] The source code matches the current release version.\n[x] The LICENSE and NOTICE files are correct.\n[x] All files carry the necessary protocol header.\n[x] The compiled content is not included in the source package.\n[x] The compilation can be executed smoothly.\n\nOther comments...\n")),(0,r.yg)("p",null,"For a release vote to pass, a minimum of three positive binding votes and more positive binding votes than negative binding votes must be cast. Releases may not be vetoed. Votes cast by PMC members are binding, however, non-binding votes are greatly encouraged and a sign of a healthy project."),(0,r.yg)("p",null,'Votes on whether a package is ready to release use majority approval -- at least three PMC members must vote affirmatively for release, and there must be more positive than negative votes. Releases may not be vetoed. For the sake of easy auditing, PMC member votes are typically marked "binding." However, the Release Manager needs to verify the validity of the votes. This can be done by checking whether the email addresses on the PMC roster match the email addresses of the voters. Therefore, it is recommended to use Apache mail address to vote to ensure the validity of the vote. At the same time, it is also recommended to indicate the Apache ID in the vote to facilitate Release Manager statistics.'),(0,r.yg)("p",null,"Generally the community will cancel the release vote if anyone identifies serious problems, but in most cases the ultimate decision lies with the individual serving as release manager. The specifics of the process may vary from project to project, but the 'minimum quorum of three +1 votes' rule is universal."),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Note that there is no implicit +1 from the release manager, or from anyone in any ASF vote. Only explicit votes are valid.")," The release manager is encouraged to vote on releases, like any reviewer would do."))}u.isMDXComponent=!0}}]);